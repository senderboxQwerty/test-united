//tealium universal tag - utag.82 ut4.0.202311300408, Copyright 2023 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[function(a,b){try{if(/(^\/[^\/]+\/[^\/]+\/?$)/.test(b['dom.pathname'])){let CONST_EXTN_NAME="Digital 3.0 - Home Page Interaction";let DOUBLE_DASH="--";utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[147]=='undefined'){utag.runonce.ext[147]=1;setTimeout(function(){addClickListnerFindFlight();},100);}else{addClickListnerFindFlight();}
function addClickListnerFindFlight(){let requirementName='Add click listner on find flights button';let methodName='addClickListnerOnFindFlightsButton';let CONST_CSS_SELECTOR=".app-components-BookFlightForm-bookFlightForm__findFlightBtn--wBfJd.app-components-BookFlightForm-bookFlightForm__btnDefault--Yi9kk.app-components-BookFlightForm-bookFlightForm__primaryButton--gW2e1";try{$(CONST_CSS_SELECTOR).on("click",function(){trackFindFlight();});}catch(error){let ds='DOM';let inputValue=CONST_CSS_SELECTOR;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function trackFindFlight(){let reuqirementName="Track find flight button click";let methodName="trackFindFlight";try{let analyticUtagData={};let eventAction='Clicked: Find Flights';analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory='Home';analyticUtagData.eventAction=eventAction;let origin=getOrigin();let destination=getDestination();let flightType=getFlightType();let paxCount=getPaxCount();let travelType=getTravelType();let cabinType=getCabinType();analyticUtagData.eventLabel=[origin,destination,flightType,paxCount,travelType,cabinType].join("|");Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}catch(error){let ds='DOM';let inputValue=CONST_ORIGIN_ID;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getOrigin(){let requirementName="Get origin";let methodName="getOrigin";let origin;let CONST_ORIGIN_ID="#bookFlightOriginInput";try{origin=$(CONST_ORIGIN_ID);if(origin){origin=origin[0].value.split(" ").pop();}else{origin=DOUBLE_DASH;}}catch(error){let ds='DOM';let inputValue=CONST_ORIGIN_ID;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return origin;}
function getDestination(){let requirementName="Get destination";let methodName="getDestination";let destination;let CONST_DEST_ID="#bookFlightDestinationInput";try{destination=$(CONST_DEST_ID);if(destination){destination=destination[0].value.split(" ").pop();}else{destination=DOUBLE_DASH;}}catch(error){let ds='DOM';let inputValue=CONST_DEST_ID;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return destination;}
function getFlightType(){let requirementName="Get flight type";let methodName="getFlightType";let flightType;let CONST_FLIGHTTYPE_ID="#roundtrip";try{flightType=$(CONST_FLIGHTTYPE_ID);if(flightType){flightType=flightType[0].checked?'RT':'OW';}else{flightType=DOUBLE_DASH;}}catch(error){var ds='DOM';var inputValue=CONST_FLIGHTTYPE_ID;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return flightType;}
function getPaxCount(){let requirementName="Get pax count";let methodName="getPaxCount";let paxCount;let CONST_PAXCOUNT_ID=".app-components-PassengerSelector-passengers__visuallyHidden--3Pdep";try{paxCount=$(CONST_PAXCOUNT_ID);if(paxCount){paxCount=paxCount.text().split(" ")[0];}else{paxCount=DOUBLE_DASH;}}catch(error){let ds='DOM';let inputValue=CONST_PAXCOUNT_ID;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return paxCount;}
function getTravelType(){let requirementName="Get travel type";let methodName="getTravelType";let travelType;let CONST_TRAVELTYPE_ID="#award";try{travelType=$(CONST_TRAVELTYPE_ID);if(travelType){travelType=travelType[0].checked?'Award':'Revenue';}else{travelType=DOUBLE_DASH;}}catch(error){let ds='DOM';let inputValue=CONST_TRAVELTYPE_ID;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return travelType;}
function getCabinType(){let requirementName="Get cabin type";let methodName="getCabinType";let cabinType;let CONST_CABINTYPE_ID="#cabinType";try{cabinType=$(CONST_CABINTYPE_ID);if(cabinType){cabinType=cabinType[0].textContent;}else{cabinType=DOUBLE_DASH;}}catch(error){let ds='DOM';let inputValue=CONST_CABINTYPE_ID;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return cabinType;}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase().indexOf('/website-search'.toLowerCase())>-1)){var CONST_EXT_NAME="Digital 3.0 - Website - Search",searchIconClass="atm-c-btn app-components-AutoComplete-Atmos-styles__searchButton--",searchButtonClass="[class*=app-components-WebsiteSearch-LandingForm-styles__c-web-search-search__btn--]";(function attachClickListeners(){try{if(!Bootstrapper.attatchedEventListeners){Bootstrapper.attatchedEventListeners=true;addEventListener("click",function(e){checkClassOfParent(e.target);});$(document.body).on("click",searchButtonClass,triggerWebSearchEvent);}}catch(error){var methodName="attachClickListeners",requirementName="attach Click Listeners",ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,searchButtonClass,methodName);}})();function checkClassOfParent(target){try{if(typeof target.className=="string"&&target.className.indexOf(searchIconClass)!==-1){triggerWebSearchEvent();}else if(typeof target.className=="object"){checkClassOfParent(target.parentElement);}}catch(error){var methodName="attachClickListeners",requirementName="attach Click Listeners",ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,JSON.stringify(target),methodName);}}
function triggerWebSearchEvent(){var inputValue="#inputAutosuggestModel",count=0;try{var input=$(inputValue)[0];if(input&&input.value){input.value=input.value.trim();var analyticsDataObject={};analyticsDataObject.eventCategory="User Interactions";analyticsDataObject.eventAction="Website Search";analyticsDataObject.tealiumEvent=analyticsDataObject.eventAction;analyticsDataObject.eventLabel=input.value;Bootstrapper.setUtagLinkForDOMEvent(analyticsDataObject);var query,intervalID=setInterval(function(){query=location.pathname.split('/');query=query[query.indexOf('website-search')+1];if(decodeURIComponent(query)==input.value||count++==25){utag.view(utag.data);clearInterval(intervalID);}},200);}}catch(error){var methodName="triggerWebSearchEvent",requirementName="Trigger Web Search Event",ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase().indexOf('/fly/travel/credit.html'.toLowerCase())>-1)){var CONST_EXTN_NAME="D3.0 - United travel credits",DOUBLE_DASH=Bootstrapper.dataObject.global.constant.doubleDash,ffcBoxClass=".ffcr-section",tcBoxClass=".etclookupsection",ffcBoxIDs="#ffcrLookUp-submit, #flyLoginBtn",tcBoxIds="#etcBalance-submit, #etcFindCert-submit, button.atm-c-btn.atm-c-btn--link",ffcCount=0,tcCount=0,ffcIntervalID=setInterval(function(){if($(ffcBoxClass).length||ffcCount++==30){$(ffcBoxClass).on("click",ffcBoxIDs,trackButton);clearInterval(ffcIntervalID);}},1000),tcIntervalID=setInterval(function(){if($(tcBoxClass).length||tcCount++==30){$(tcBoxClass).on("click",tcBoxIds,trackButton);clearInterval(tcIntervalID);}},1000);function trackButton(e){try{var target=e.currentTarget,id=target.id,className=target.className,buttonText="Clicked: "+(target.textContent||target.value||DOUBLE_DASH),feature=$("#main-heading").text()||DOUBLE_DASH,label,pageName;if(id=="ffcrLookUp-submit"||(id=="flyLoginBtn"&&checkInputs())){pageName=$("#ffc").text();label=getfeature("[name=radio-option]");prepareGAEvent(buttonText,feature,pageName,label);}else if(id=="etcBalance-submit"||id=="etcFindCert-submit"||className=="atm-c-btn atm-c-btn--link"){pageName=$("#tc").text();label=$(".etclookupsection .atm-c-tabs__item.atm-is-active").text();prepareGAEvent(buttonText,feature,pageName,label);}}catch(error){var methodName="trackButton",requirementName="Track Button",inputValue=e.currentTarget.id||e.currentTarget.className,ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getfeature(radio){try{for(var index=0;index<$(radio).length;index++){if($(radio)[index].checked){return $(radio)[index].parentElement.textContent;}}}catch(error){var methodName="getfeature",requirementName="Get feature",inputValue=radio,ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function prepareGAEvent(action,feature,pageName,label){var dataObj={};try{dataObj.eventCategory="User Interactions";dataObj.eventAction=action;dataObj.eventLabel=[feature,pageName||DOUBLE_DASH,label||DOUBLE_DASH].join('|');Bootstrapper.setUtagLinkForDOMEvent(dataObj);}catch(error){var methodName="prepareGAEvent",requirementName="Prepare GA event",inputValue=[action,feature,pageName,label].join('|'),ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function checkInputs(){var inputClass=".atm-c-text-input.atm-u-margin-top-large";try{var inputs=$(inputClass);for(var i=0;i<inputs.length;i++){if(!inputs[i].value){return;}}
return true;}catch(error){var methodName="checkInputs",requirementName="Check Inputs for MP",inputValue=inputClass,ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return;}}}catch(e){utag.DB(e)}},function(a,b){try{if(/(^\/[^\/]+\/[^\/]+\/?$)/.test(b['dom.pathname'])){var CONST_EXTN_NAME="Find Your Travel Credits Tracking",buttonClass="[class*=app-components-BookFlightForm-bookFlightForm__findTravelCreditsLink--]",intervalID=setInterval(function(){if($(buttonClass).length||document.readyState=="complete"){clearInterval(intervalID);if($(buttonClass).length){$(buttonClass).bind('click',prepareGAEvent);}}});function prepareGAEvent(){var dataObj={};try{dataObj.eventCategory=Bootstrapper.dataObject.global.constant.EC_HOME;dataObj.eventAction="Clicked: "+$(buttonClass).text();Bootstrapper.setUtagLinkForDOMEvent(dataObj);}catch(error){var methodName="prepareGAEvent",requirementName="Prepare GA event";inputValue=$(buttonClass),ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase().indexOf('/checkin/boarding-pass/guid/'.toLowerCase())>-1)||(b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase().indexOf('/checkin/recheckin/guid/'.toLowerCase())>-1)){var CONST_EXTN_NAME="Digital 3.0 KTN Error Tracking";var boardingPassConfirmationIndexClass="[class*=app-containers-Checkin-BoardingPass-Confirmation-index__content--]";var tsaStatusContainerClass="[class*=app-containers-Checkin-BoardingPass-index__tsaStatusContainer--]";var tsaStatusTitleClass="atm-c-alert__title";var tsaStatusDescriptionClass="atm-c-text-passage atm-c-alert__description";var reCheckInTabsClass="[class*=app-components-Checkin-TabbedPane-index__tabs--]";var DOUBLE_DASH="--";var intervalID=setInterval(function(){if(document.readyState=="complete"&&($(boardingPassConfirmationIndexClass).length||$(reCheckInTabsClass).length)){handleImpressionOfKTNError();checkViewBoardingPassOptions($(reCheckInTabsClass)[0]);clearInterval(intervalID);}},100);function handleImpressionOfKTNError(){try{var container=$(tsaStatusContainerClass)[0];if(container){var title=container.getElementsByClassName(tsaStatusTitleClass)[0],description=container.getElementsByClassName(tsaStatusDescriptionClass)[0];title=(title&&title.textContent)||DOUBLE_DASH;description=(description&&description.textContent)||DOUBLE_DASH;Bootstrapper.sendGAEvent("Checkin","Error Shown",[title,description].join('|'));}}catch(error){var methodName="handleImpressionOfKTNError",requirementName="Impression of KTN Error",ds="DOM",inputValue=tsaStatusContainerClass;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function checkViewBoardingPassOptions(reCheckInTabsClass){try{if(reCheckInTabsClass&&reCheckInTabsClass.lastElementChild){handleClickOnViewBoardingPassOptions(reCheckInTabsClass.lastElementChild);}}catch(error){var methodName="checkViewBoardingPassOptions",requirementName="Check View boarding pass options",ds="DOM",inputValue=reCheckInTabsClass;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function handleClickOnViewBoardingPassOptions(button){try{if(button.id!="selectedTabId"){$(button).on("click",function(){var intervalID=setInterval(function(){if($(boardingPassConfirmationIndexClass).length){handleImpressionOfKTNError();clearInterval(intervalID);}},100);});}}catch(error){var methodName="handleClickOnViewBoardingPassOptions",requirementName="Handle click on View boarding pass options",ds="DOM",inputValue=button;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(/(^(\/.*\/.*\/fly\/customer-support\.html\/?)$)/ig.test(b['dom.pathname'])||/(^(\/.*\/.*\/manageres\/tripdetails\/schedulechange\/?)$)/ig.test(b['dom.pathname'])||/(^(\/.*\/.*\/checkin\/?)$)/ig.test(b['dom.pathname'])){var CONST_EXTN_NAME="Chat Support Tracking";var CONST_EC="Chat Support";var chatButDomIdentifier='#unitedChatBtn';var isChatButtonClicked=false;var pageInitTime=new Date().getTime();var chatusClickedTime;var loop=0;function handleLPEvents(){var methodName='handleLPEvents';var requirementName="Handle Live Person Chat Event binding";try{window.addEventListener('lpTagEventsListener',function(e){var eventInfo=e.detail.eventInfo;var data=e.detail.data;if(eventInfo){if(eventInfo.appName=="LP_OFFERS"){if(eventInfo.eventName=="OFFER_IMPRESSION"&&!Bootstrapper.isChatButtonDisplayed&&!/(^(\/.*\/.*\/checkin\/?)$)/ig.test(utag_data['dom.pathname'])){loop=0;chatbotImpressionHandler();}else if(eventInfo.eventName=="OFFER_CLICK"){chatusClickedTime=new Date().getTime();chatbotClickHandler();}}else if(eventInfo.appName=="lpUnifiedWindow"&&eventInfo.eventName=="state"&&data&&data.state=="waiting"&&isChatButtonClicked){trackChatBotLoadTime();}}})}catch(error){var ds="Live Person eventInfo"
var inputValue="eventInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[170]=='undefined'){utag.runonce.ext[170]=1;handleLPEvents();}
var chatbotClickHandler=function(){var methodName="chatbotClickHandler";try{var eventLabel='N';if($(chatButDomIdentifier).length>0&&$(chatButDomIdentifier).attr('class')=='loggedIn'){eventLabel='Y';}
Bootstrapper.sendGAEvent(CONST_EC,"Clicked: Chatbot Button",eventLabel);isChatButtonClicked=true;}catch(e){var requirementName="Add Chatbot Click Handler and Trigger GA Call",ds="DOM "+chatButDomIdentifier;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,e.message,methodName);}};function chatbotImpressionHandler(){var methodName="chatbotImpressionHandler";try{if(!Bootstrapper.isChatButtonDisplayed&&loop<=35){setTimeout(function(){if($(chatButDomIdentifier).length>0){if(!Bootstrapper.isChatButtonDisplayed){Bootstrapper.trackChatButtonImpression();}}else{loop=loop+1;chatbotImpressionHandler();}},500);}else{loop=0;return;}}catch(e){var requirementName="Chatbot Impression Handler and Trigger GA Call once btn is visible",ds="DOM "+chatButDomIdentifier;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,e.message,methodName);}}
Bootstrapper.trackChatButtonImpression=function(data){var methodName='trackChatButtonImpression';var requirementName='Track Chat button impression';try{var eventValue=Math.round(calculateChatButtonLoadTime());Bootstrapper.isChatButtonDisplayed=true;var loggedInVal='N';if($(chatButDomIdentifier).attr('class')=='loggedIn'){loggedInVal='Y';}
var eventLabel=data?[loggedInVal,eventValue,data].join('|'):[loggedInVal,eventValue].join('|');Bootstrapper.sendGAEvent(CONST_EC,"Impression: Chatbot Button",eventLabel,eventValue);}catch(e){var ds="Date and DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,e.message,methodName);}}
function calculateChatButtonLoadTime(){var methodName='calculateChatButtonLoadTime';var requirementName='chat button load time tracking';var diffInSeconds=-1;try{var startTime=isNaN(Bootstrapper.pageInitTime)?pageInitTime:Bootstrapper.pageInitTime;var endTime=new Date();diffInSeconds=(endTime.getTime()-startTime)/1000;}catch(e){var ds="Date";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,e.message,methodName);}
return diffInSeconds;}
function trackChatBotLoadTime(){var methodName='trackChatBotLoadTime';var requirementName="Track Chat Bot load time State";try{var eventAction="Chatbot initial content loaded";var chatBotLoadTime=new Date().getTime();var eventLabel=Math.round((chatBotLoadTime-chatusClickedTime)/1000);isChatButtonClicked=false;Bootstrapper.sendGAEvent(CONST_EC,eventAction,eventLabel);}catch(error){var ds="Live Person eventInfo"
var inputValue="eventInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.pathname'].toString().toLowerCase()=='/en/US/Forgot-MileagePlus-Number'.toLowerCase()){var CONST_EXTN_NAME="MP Assistant Tracking - Forgot MPNumber";var GA_Category="Chat Support";var hiddenChatButton=".app-containers-ForgotMPNumber-styles__hidden--KExQn #unitedChatBtn";var mpNumberPath="/en/us/forgot-mileageplus-number";var isChatButtonShown=false;var isChatButtonClicked=false;var mpChatClickedTime=-1;Bootstrapper.MPAssistantChatButtonImpression=function(){var methodName="MPAssistantChatButtonImpression";try{if(utag_data["dom.pathname"].toLocaleLowerCase()==mpNumberPath&&$(hiddenChatButton).length==0&&!isChatButtonShown&&$("#unitedChatBtn button").length){isChatButtonShown=true;var eventAction="Impression: MP Assistant Chat";Bootstrapper.sendGAEvent(GA_Category,eventAction);}}catch(e){var requirementName="MileagePlus Assistant Impression tracking",ds="DOM "+hiddenChatButton;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,e.message,methodName);}}
function checkChatButtonShown(){var methodName="checkChatButtonShown";try{if($(hiddenChatButton).length>0){isChatButtonShown=false;}}catch(e){var requirementName="Check MP assistant chat button displayed",ds="DOM "+hiddenChatButton;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,e.message,methodName);}}
checkChatButtonShown();function handleLPEvents(){var methodName='handleLPEvents';var requirementName="Handle Live Person Chat Event binding";try{window.addEventListener('lpTagEventsListener',function(e){var eventInfo=e.detail.eventInfo;var data=e.detail.data;if(utag_data["dom.pathname"].toLocaleLowerCase()==mpNumberPath&&eventInfo){if(eventInfo.appName=="LP_OFFERS"&&eventInfo.eventName=="OFFER_CLICK"){mpChatClickedTime=new Date().getTime();mpAssistantChatClicked();}else if(eventInfo.appName=="lpUnifiedWindow"&&eventInfo.eventName=="state"&&data&&data.state=="waiting"&&isChatButtonClicked){trackChatBotLoadTime();}}})}catch(error){var ds="Live Person eventInfo"
var inputValue="eventInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[169]=='undefined'){utag.runonce.ext[169]=1;handleLPEvents();}
function mpAssistantChatClicked(){var methodName="mpAssistantChatClicked";try{Bootstrapper.sendGAEvent(GA_Category,"Clicked: MP Assistant Chat");isChatButtonClicked=true;}catch(e){var requirementName="MileagePlus Assistant Chat Clicked",ds="Live Person eventInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,EXTN_NAME,e.message,e,ds,e.message,methodName);}}
function trackChatBotLoadTime(){var methodName='trackChatBotLoadTime';var requirementName="Track Chat Bot load time State";try{var eventAction="Chatbot initial content loaded";var chatBotLoadTime=new Date().getTime();var evLabel=Math.round((chatBotLoadTime-mpChatClickedTime)/1000);isChatButtonClicked=false;Bootstrapper.sendGAEvent(GA_Category,eventAction,evLabel);}catch(error){var ds="Live Person eventInfo"
var inputValue="eventInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/(^\/[^\/]+\/[^\/]+\/?$)/.test(b['dom.pathname'])&&b['lang_code'].toString().toLowerCase()=='en'.toLowerCase())){let CONST_EXTN_NAME="Promotion Tracking - Home Page";let PRMOTION_IMG_CLS=".app-containers-Ad-ad__defaultLayout--295cO";let HOME_EC="Home";let CONST_EC_USER_INTERACTIONS="User Interactions";let isTriggered=false;function fetchPromotionTile(){var methodName="fetchPromotionTile";var requirementName="Fetch DOM element";try{$(PRMOTION_IMG_CLS).each(function(){trackPromotionTile($(this),"Impression");});$("body").on("click",PRMOTION_IMG_CLS,function(){trackPromotionTile($(this),"Clicked");});}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function trackPromotionTile(element,action){var methodName="trackPromotionTile";var requirementName="Track promotion"
try{var src=element.attr('src');var eventAction=action+': Promotion';var analyticUtagData={};analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory=HOME_EC;analyticUtagData.eventAction=eventAction;analyticUtagData.eventLabel=src;Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}catch(e){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[147]=='undefined'){utag.runonce.ext[147]=1;setTimeout(function(){fetchPromotionTile();},5000);setTimeout(function(){trackPlacementsImpressions();},5000);}
else if(!isTriggered){var reqName="Fetch promotion impression on location change only";try{setTimeout(function(){fetchPromotionTile();isTriggered=true;},5000);setTimeout(function(){trackPlacementsImpressions();},5000);}catch(error){var datasource="DOM Element";Bootstrapper.dataObject.initiateGapTracking(reqName,CONST_EXTN_NAME,error.message,error,datasource,"");}}
function trackPlacementsImpressions(){let requirementName="Track impression of placements on home page";let methodName="trackPlacementsImpressions";let CONST_TRIP_PLANNING=".fly-grid.fly-grid--colgap-medium.fly-grid--cardblock.atm-u-margin-bottom-xl .fly-sub-component .atm-c-heading";let CONST_WHEN_TO_FLY=".atm-l-container .fly-sub-component .atm-c-text-passage__inner .sdl-el-body h3:not(.atm-l-linelength-container)";let CONST_WAY_YOU_TRAVEL=".fly-link-block.atm-u-margin-bottom-medium .fly-link-block__content h4";try{let analyticUtagData={};if($(CONST_TRIP_PLANNING)){let tripPlanningElements=$(CONST_TRIP_PLANNING);for(let i=0;i<tripPlanningElements.length;i++){analyticUtagData=trackImpressionTripPlanning(tripPlanningElements[i],i);Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}}
if($(CONST_WHEN_TO_FLY)){let whenToFly=$(CONST_WHEN_TO_FLY);for(let j=0;j<whenToFly.length;j++){analyticUtagData=trackImpressionWhenToFly(whenToFly[j],j);Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}}
if($(CONST_WAY_YOU_TRAVEL)){let wayYouTravelsElements=$(CONST_WAY_YOU_TRAVEL);for(let k=0;k<wayYouTravelsElements.length;k++){analyticUtagData=trackImpressionWayYouTravel(wayYouTravelsElements[k],k);Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}}}catch(error){var datasource="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,datasource,methodName);}}
function trackImpressionTripPlanning(domElement,i){let requirementName="Track impression of trip planning section";let methodName="trackImpressionTripPlanning";let analyticsObject={};let CONST_CSS_BTN_URL=".fly-grid.fly-grid--colgap-medium.fly-grid--cardblock.atm-u-margin-bottom-xl .fly-sub-component .atm-c-card__footer .atm-c-btn";try{if(domElement){analyticsObject.tealiumEvent=domElement.textContent;analyticsObject.eventCategory=CONST_EC_USER_INTERACTIONS;analyticsObject.eventAction="Impression: "+domElement.textContent;let btn=$(CONST_CSS_BTN_URL);analyticsObject.eventLabel=(btn&&btn[i])?[btn[i].textContent,btn[i].href].join("|"):"--";}}catch(error){var datasource="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,datasource,methodName);}
return analyticsObject;}
function trackImpressionWhenToFly(domElement,i){let requirementName="Track impression of When to fly section";let methodName="trackImpressionWhenToFly";let analyticsObject={};let CONST_CSS_BTN_URL=".atm-l-container .fly-sub-component .atm-c-btn.atm-u-margin-top-medium.atm-c-btn--primary";try{if(domElement){analyticsObject.tealiumEvent=domElement.textContent;analyticsObject.eventCategory=CONST_EC_USER_INTERACTIONS;analyticsObject.eventAction="Impression: "+domElement.textContent;let btn=$(CONST_CSS_BTN_URL);analyticsObject.eventLabel=(btn&&btn[i])?[btn[i].textContent,btn[i].href].join("|"):"--";}}catch(error){var datasource="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,datasource,methodName);}
return analyticsObject;}
function trackImpressionWayYouTravel(domElement,i){let requirementName="Track impression of Way you travel section";let methodName="trackImpressionWayYouTravel";let analyticsObject={};let CONST_CSS_BTN_URL=".fly-link-block__link";try{if(domElement){analyticsObject.tealiumEvent=domElement.textContent;analyticsObject.eventCategory=CONST_EC_USER_INTERACTIONS;analyticsObject.eventAction="Impression: "+domElement.textContent;let btn=$(CONST_CSS_BTN_URL);analyticsObject.eventLabel=(btn&&btn[i])?[btn[i].textContent,btn[i].href].join("|"):"--";}}catch(error){var datasource="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,datasource,methodName);}
return analyticsObject;}}}catch(e){utag.DB(e)}},function(a,b){try{if(/^(.*\/en\/.*\/fly\/mileageplus.html)$/ig.test(b['dom.pathname'])){var CONST_EXT_NAME="MileagePlus Program";var DEAL_OFFER_CLS=".fly-grid.fly-grid--colgap-medium.fly-grid--cardblock.fly-grid--cardblock--box a";var FLY_SUB_COMPONENT_CLS=".fly-sub-component";var FEATURE_PARTNER_CLS=".fly-grid.fly-grid--colgap-medium.fly-grid--cardblock.atm-u-margin-bottom-large .atm-c-card__footer a";var EC="MileagePlus Program";var DOUBLE_DASH="--";function fetchDealAndOfferPromotion(){var methodName="fetchDealAndOfferPromotion";var requirementName="Fetch DOM element";try{$(DEAL_OFFER_CLS).each(function(){trackDealAndOffersPromotion($(this),"Impression");});$("body").on("click",DEAL_OFFER_CLS,function(){trackDealAndOffersPromotion($(this),"Clicked");});}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,methodName);}}
function trackDealAndOffersPromotion(element,action){var methodName="trackDealAndOffersPromotion";var requirementName="Track deal and offer promotion"
try{var parent=element.parentsUntil(FLY_SUB_COMPONENT_CLS);var message=parent.find('.atm-c-card__body').text();var hrefValue=element.attr('href')?element.attr('href'):DOUBLE_DASH;var linkValue=element.text();var feature="Deals & offers";var eventAction=action+': '+linkValue;var analyticUtagData={};analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory=EC;analyticUtagData.eventAction=eventAction;analyticUtagData.eventLabel=[feature,message,hrefValue].join('|');Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}catch(e){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,methodName);}}
function fetchFeaturedPartnersPromotion(){var methodName="fetchFeaturedPartnersPromotion";var requirementName="Fetch DOM element";try{$(FEATURE_PARTNER_CLS).each(function(){trackFeaturedPartnersPromotion($(this),"Impression");});$("body").on("click",FEATURE_PARTNER_CLS,function(){trackFeaturedPartnersPromotion($(this),"Clicked");});}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,methodName);}}
function trackFeaturedPartnersPromotion(element,action){var methodName="trackFeaturedPartnersPromotion";var requirementName="Fetch DOM element";try{var parent=element.parentsUntil(FLY_SUB_COMPONENT_CLS);var header=parent.find('.atm-c-heading').text();var message=parent.find('.sdl-el-body').text();var hrefValue=element.attr('href')?element.attr('href'):DOUBLE_DASH;var linkValue=element.text();var feature="Featured partners & more";var eventAction=action+': '+linkValue;var analyticUtagData={};analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory=EC;analyticUtagData.eventAction=eventAction;analyticUtagData.eventLabel=[feature,header,message,hrefValue].join('|');Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}catch(e){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,methodName);}}
utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[146]=='undefined'){utag.runonce.ext[146]=1;setTimeout(function(){fetchDealAndOfferPromotion();fetchFeaturedPartnersPromotion();},2000);}
else{var reqName="Fetch promotion impression on location change only";try{setTimeout(function(){$(DEAL_OFFER_CLS).each(function(){trackDealAndOffersPromotion($(this),"Impression");});$(FEATURE_PARTNER_CLS).each(function(){trackFeaturedPartnersPromotion($(this),"Impression");});},2000);}catch(error){var datasource="DOM Element";Bootstrapper.dataObject.initiateGapTracking(reqName,CONST_EXT_NAME,error.message,error,datasource,"");}}}}catch(e){utag.DB(e)}},function(a,b){try{if(/^(.*\/.*\/.*\/manageres\/tripdetails)$/ig.test(b['dom.pathname'])||/^(.*\/.*\/.*\/manageres\/tripdetails\/.*\/(bookingconfirmation|bookingconfirmationemail))$/ig.test(b['dom.pathname'])){var CONST_EXTN_NAME="Digital 3.0 - Promo Tracking - Manage Res";var CONST_CSS_TOP_BANNER=".app-containers-TripDetails-MerchAds-SingleLineOffer-styles__topComponent--1V_Ol";var CONST_CSS_TRIP_EXTRA1=".app-containers-TripDetails-TripDetailsExtras-styles__extraBlock--26uu5";var CONST_CSS_DEALS=".app-components-ExpediaWidget-styles__expediaWidget--35l2A";var CONST_CSS_TRIP_EXTRA_CLICKS=".app-containers-TripDetails-TripDetailsExtras-styles__action--2Ghjr";var CONST_EC_RESERVATIONS="Reservations";var CONST_OFFER_NAME_TRIP_EXTRA="Trip Extras";var CONST_CSS_SEC=".app-containers-TripDetails-MerchAds-styles__offers--NEim- .app-containers-TripDetails-CardblockTriple-styles__parent--2rFBv h4"
var CONST_CAR_WIDGET="#iFrameResizer1";var isTripExtra=false;var isDealsFound=false;var retryDealsCount=0;var retryTripExtraCount=0;var isPrimaryOfferFound=false;var retryPrimaryCount=0;var isSecondaryOfferFound=false;var retrySecondaryCount=0;var isCarWidget=false;var retryCarWidgetImpression=0;waitLoopForTripExtras();function waitLoopForTripExtras(){var methodName="waitLoopForTripExtras";var requirementName="Wait for Trip extra";try{if(isOffersVisible($(CONST_CSS_TRIP_EXTRA1))&&!isTripExtra){trackTripExtraOnTripDetails();isTripExtra=true;}else if(retryTripExtraCount<20){setTimeout(function(){waitLoopForTripExtras();},700);retryTripExtraCount++;}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
waitLoopForDeals();function waitLoopForDeals(){var methodName="waitLoopForDeals";var requirementName="Wait for deals";try{if(isOffersVisible($(CONST_CSS_DEALS))&&!isDealsFound){trackDealsOnTripDetails();isDealsFound=true;}else if(retryDealsCount<20){setTimeout(function(){waitLoopForDeals();},700);retryDealsCount++;}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
waitLoopForPrimaryOffer();function waitLoopForPrimaryOffer(){var methodName="waitLoopForPrimaryOffer";var requirementName="wait for Primary offer";try{if(isOffersVisible($(CONST_CSS_TOP_BANNER))&&!isPrimaryOfferFound){trackPrimaryOfferOnTripDetails();isPrimaryOfferFound=true;}else if(retryPrimaryCount<20){setTimeout(function(){waitLoopForPrimaryOffer();},700);retryPrimaryCount++;}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
waitLoopForSecondaryOffer();function waitLoopForSecondaryOffer(){var methodName="waitLoopForSecondaryOffer";var requirementName="Wait for Secondary offers";try{if(isOffersVisible($(CONST_CSS_SEC))&&!isSecondaryOfferFound){trackSecondaryOfferOnTripDetails();isSecondaryOfferFound=true;}else if(retrySecondaryCount<20){setTimeout(function(){waitLoopForSecondaryOffer();},700);retrySecondaryCount++;}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function trackPrimaryOfferOnTripDetails(){var requirementName="Track promo impression and clicks";var methodName="trackPrimaryOfferOnTripDetails";var analyticsData={};var action;var domSelector;try{analyticsData.eventCategory=CONST_EC_RESERVATIONS;if(isOffersVisible($(CONST_CSS_TOP_BANNER))){action="Impression: Primary Offer Link";domSelector=".app-containers-TripDetails-MerchAds-SingleLineOffer-styles__bodyText--396ah";preparePromoData(action,domSelector,analyticsData);}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function trackSecondaryOfferOnTripDetails(){var requirementName="Track promo impression and clicks";var methodName="trackSecondaryOfferOnTripDetails";var analyticsData={};var action;var domSelector;try{analyticsData.eventCategory=CONST_EC_RESERVATIONS;if(isOffersVisible($(CONST_CSS_SEC))){for(var i=0;i<$(CONST_CSS_SEC).length;i++){action="Impression: Secondary Offer Link";domSelector=$(CONST_CSS_SEC)[i];preparePromoData(action,domSelector,analyticsData);}}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function trackTripExtraOnTripDetails(){var requirementName="Track promo impression and clicks";var methodName="trackTripExtraOnTripDetails";var analyticsData={};try{if(isOffersVisible($(CONST_CSS_TRIP_EXTRA1))){setTimeout(function(){handleTripExtrasImpression();},2000);}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function trackDealsOnTripDetails(){var requirementName="Track promo impression and clicks";var methodName="trackDealsOnTripDetails";var analyticsData={};try{analyticsData.eventCategory=CONST_EC_RESERVATIONS;if(isOffersVisible($(CONST_CSS_DEALS))){analyticsData.eventAction="Impression: Hotel deals widget";if($(CONST_CSS_DEALS)&&$(CONST_CSS_DEALS).children()){analyticsData.eventLabel=$(CONST_CSS_DEALS).children()[0].src;}else{analyticsData.eventLabel="";}
Bootstrapper.setUtagLinkForDOMEvent(analyticsData);}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function handleTripExtrasImpression(){var requirementName="Handle impression of Trip extras";var methodName="handleTripExtrasImpression";var analyticsData={};var CONST_TRIP_EXTRA_TITLES=".app-containers-TripDetails-TripDetailsExtras-styles__extraBlock--26uu5 .app-containers-TripDetails-TripDetailsExtras-styles__header--1OZVS .app-containers-TripDetails-TripDetailsExtras-styles__title--35Y7d h3";try{var tripExtrasTitles=$('.app-containers-TripDetails-TripDetailsExtras-styles__extraBlock--26uu5 .app-containers-TripDetails-TripDetailsExtras-styles__header--1OZVS .app-containers-TripDetails-TripDetailsExtras-styles__title--35Y7d h3');analyticsData.eventCategory=CONST_EC_RESERVATIONS;for(var tripExtraTitle of tripExtrasTitles){analyticsData.eventAction="Impression: Trip Extras";analyticsData.tealiumEvent=analyticsData.eventAction;analyticsData.eventLabel=tripExtraTitle.textContent;Bootstrapper.setUtagLinkForDOMEvent(analyticsData);}
handleTripExtraClicks();}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function handleTripExtraClicks(){var requirementName="Handle clicks on trip extras";var methodName="handleOfferClicks";var analyticsData={};var CONST_CSS_TRIP_EXTRAS_DIV=".app-containers-TripDetails-TripDetailsExtras-styles__extraBlock--26uu5";try{var tripExtras=$(CONST_CSS_TRIP_EXTRA_CLICKS);analyticsData.eventCategory=CONST_EC_RESERVATIONS;for(var tripOffers of tripExtras){$(tripOffers).on("click",function(e){analyticsData.eventAction="Clicked: "+"Trip Extras";analyticsData.tealiumEvent=analyticsData.eventAction;var label=e.target.textContent;analyticsData.eventLabel=[getTextForOffer(e.target,CONST_CSS_TRIP_EXTRAS_DIV),label].join("|");Bootstrapper.setUtagLinkForDOMEvent(analyticsData);});}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function getTextForOffer(clickedEle,cssSelector){var requirementName="Fetch offer title";var methodName="getTextForOffer";var eventLabel="";try{var parentEle=$(clickedEle).closest(cssSelector);eventLabel=$(parentEle).find("h3").text();}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}
return eventLabel;}
function isOffersVisible(offerDOM){var requirementName="Check if offers visible on DOM";var methodName="isOffersVisible";var isOfferVisible=false;try{isOfferVisible=$(offerDOM).length>0;}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}
return isOfferVisible;}
function preparePromoData(action,offerDOM,analyticsData){var requirementName="Prepare Promo data";var methodName="preparePromoData";try{analyticsData.eventAction=action;analyticsData.tealiumEvent=analyticsData.eventAction;var title=$(offerDOM).text();analyticsData.eventLabel=title?title:"--";Bootstrapper.setUtagLinkForDOMEvent(analyticsData);}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function hotelAdsClickTracking(){var methodName="hotelAdsIClickTracking";var requirementName="Click tracking of Hotel Ad tile";try{var analyticsData={};$("document").on("click",CONST_CSS_DEALS,function(){analyticsData.eventCategory=CONST_EC_RESERVATIONS;analyticsData.eventAction="Clicked: Hotel deal tile";Bootstrapper.setUtagLinkForDOMEvent(analyticsData);});}catch(e){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,methodName);}}
(function waitLoopForCarWidgetImpression(){try{if(isOffersVisible($(CONST_CAR_WIDGET))&&!isCarWidget){prepareGAEventforCarWidget();isCarWidget=true;}else if(retryCarWidgetImpression<20){setTimeout(function(){waitLoopForCarWidgetImpression();},700);retryCarWidgetImpression++;}}catch(error){var requirementName="Wait for Car Widget Impression";var methodName="waitLoopForCarWidgetImpression";var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}})();function prepareGAEventforCarWidget(){var analyticsData={};try{analyticsData.eventCategory=CONST_EC_RESERVATIONS;analyticsData.eventAction="Impression: Car Widget";analyticsData.tealiumEvent=analyticsData.eventAction;analyticsData.eventLabel=$(CONST_CAR_WIDGET).attr("src");Bootstrapper.setUtagLinkForDOMEvent(analyticsData);}catch(error){var requirementName="Prepare GA Event for Car Widget Impression";var methodName="prepareGAEventforCarWidget";var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(/^(.*\/en\/.*\/baggage-calculator\/(any-flights|my-flights))$/ig.test(b['dom.pathname'])){var CONST_EXTN_NAME="Baggage Calculator - Promotion Tracking";var EC="Travel Information";var DOUBLE_DASH="--";var FEATURE_CONST="Baggage Calculator";function promotionImpression(){var methodName="promotionImpression";var requirementName="Track promotion impression tracking";var DOM_CSS='.app-containers-BaggageCalculator-Sections-PrepaidBagsInformation-styles__offerContainer--VBYNq'
try{if($(DOM_CSS).length>0){var title=$(DOM_CSS+' h3').text();var para=$(DOM_CSS+' p').text()?$(DOM_CSS+' p').text():DOUBLE_DASH;var button=$(DOM_CSS+' a').text()?$(DOM_CSS+' a').text():DOUBLE_DASH;var href=$(DOM_CSS+' a').attr('href')?$(DOM_CSS+' a').attr('href'):DOUBLE_DASH;var eventLabel=[FEATURE_CONST,para,button,href].join('|');var analyticUtagData={};var eventAction="Impression: "+title;analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory=EC;analyticUtagData.eventAction=eventAction;analyticUtagData.eventLabel=eventLabel;analyticUtagData.noninteraction=1;Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}}catch(error){var ds="DOM";var inputValue='.app-containers-BaggageCalculator-Sections-PrepaidBagsInformation-styles__offerContainer--VBYNq';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
promotionImpression();function linkCardImpression(){var methodName="linkCardImpression";var requirementName="Track link Card impression tracking";var DOM_CSS_CLS='.app-components-LinkCard-styles__linkCardContainer--2hceq';var TITLE_CLS='.app-components-LinkCard-styles__linkTitle--PsA8T';var DESCRIPTION_CLS='.app-components-LinkCard-styles__linkDescription--1h5Sl';try{$(DOM_CSS_CLS).each(function(){var title=$(this).find(TITLE_CLS).text();var description=$(this).find(DESCRIPTION_CLS).text()?$(this).find(DESCRIPTION_CLS).text():DOUBLE_DASH;var href=$(this).attr('href')?$(this).attr('href'):DOUBLE_DASH;var eventAction="Impression: "+title;var analyticUtagData={};analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory=EC;analyticUtagData.eventAction=eventAction;analyticUtagData.eventLabel=[FEATURE_CONST,description,href].join('|');analyticUtagData.noninteraction=1;Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);});}catch(error){var ds="DOM";var inputValue='.app-components-LinkCard-styles__linkCardContainer--2hceq';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
linkCardImpression();}}catch(e){utag.DB(e)}},function(a,b){try{if(/(^\/[^\/]+\/[^\/]+\/?$)/.test(b['dom.pathname'])){var CONST_EXTN_NAME="UA Home-Horizontal Booking Widget";var CONST_ID_HORIZONTAL_WIDGET="#home-book-flight";var isNewHome=false;waitLoopForHorizontalForm();var retryHomeCount=0;function waitLoopForHorizontalForm(){var methodName='waitLoopForHorizontalForm';var requirementName='Wait for Horozontal form';try{if(isElementVisible(CONST_ID_HORIZONTAL_WIDGET)&&!isNewHome){handleImpressionForHorizontalForm();isNewHome=true;}else if(retryHomeCount<20){setTimeout(function(){waitLoopForHorizontalForm();},700);retryHomeCount++;}}catch(error){var ds='DOM Element';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function isElementVisible(eleDOM){var requirementName="Check if offers visible on DOM";var methodName="isElementVisible";var isElementVisible=false;try{isElementVisible=$(eleDOM).length>0;}catch(error){var ds='DOM Element';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}
return isElementVisible;}
function handleImpressionForHorizontalForm(){var requirementName="handle impression for horizontal form";var methodName="handleImpressionForHorizontalForm";try{var newHome=$("#home-book-flight");if(newHome&&newHome.length>0){var analyticsData={};analyticsData.eventCategory=Bootstrapper.dataObject.global.constant.EC_HOME;analyticsData.eventAction="Impression: Horizontal Booking Widget";Bootstrapper.setUtagLinkForDOMEvent(analyticsData);}}catch(error){var ds='DOM Element';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
}};utag.o[loader].loader.LOAD(id);})("82","unitedairlines.united-v3");}catch(error){utag.DB(error);}
