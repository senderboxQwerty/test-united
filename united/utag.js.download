//tealium universal tag - utag.loader ut4.0.202311300408, Copyright 2023 Tealium.com Inc. All Rights Reserved.
var utag_condload=false;window.__tealium_twc_switch=false;try{try{!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.5.1",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(D).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,j=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^key/,we=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function Ce(){return!0}function Ee(){return!1}function Se(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function ke(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)ke(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Ae(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,Ce)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=Te.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=Te.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click",Ce),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ae(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ce:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ce,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ce,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ce,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&be.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&we.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Ae(this,e,Se),!1},trigger:function(){return Ae(this,e),!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return ke(this,e,t,n,r)},one:function(e,t,n,r){return ke(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){S.event.remove(this,e,n,t)})}});var Ne=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function qe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Oe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function Pe(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&De.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Pe(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),Le)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,He),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(je,""),u,l))}return n}function Re(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Oe(o[r],a[r]);else Oe(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Re(this,e,!0)},remove:function(e){return Re(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Pe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||qe(this,e).appendChild(e)})},prepend:function(){return Pe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=qe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Pe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Pe(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Me=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},We=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join("|"),"i");function Be(e,t,n){var r,i,o,a,s=e.style;return(n=n||Ie(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Me.test(a)&&Fe.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=3<parseInt(r.height),re.removeChild(e)),a}}))}();var _e=["Webkit","Moz","ms"],ze=E.createElement("div").style,Ue={};function Xe(e){var t=S.cssProps[e]||Ue[e];return t||(e in ze?e:Ue[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=_e.length;while(n--)if((e=_e[n]+t)in ze)return e}(e)||e)}var Ve=/^(none|table(?!-c[ea]).+)/,Ge=/^--/,Ye={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"};function Je(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ke(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Ze(e,t,n){var r=Ie(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=Be(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Me.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Ke(e,t,n||(i?"border":"content"),o,r,a)+"px"}function et(e,t,n,r,i){return new et.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Be(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Ge.test(t),l=e.style;if(u||(t=Xe(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Ge.test(t)||(t=Xe(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Be(e,t,r)),"normal"===i&&t in Qe&&(i=Qe[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ve.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ze(e,u,n):We(e,Ye,function(){return Ze(e,u,n)})},set:function(e,t,n){var r,i=Ie(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Ke(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Ke(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Je(0,t,s)}}}),S.cssHooks.marginLeft=$e(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-We(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Je)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ie(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=et).prototype={constructor:et,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=et.propHooks[this.prop];return e&&e.get?e.get(this):et.propHooks._default.get(this)},run:function(e){var t,n=et.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):et.propHooks._default.set(this),this}}).init.prototype=et.prototype,(et.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Xe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=et.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=et.prototype.init,S.fx.step={};var tt,nt,rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){nt&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(st):C.setTimeout(st,S.fx.interval),S.fx.tick())}function ut(){return C.setTimeout(function(){tt=void 0}),tt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(o,e,t){var n,a,r=0,i=ft.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=tt||ut(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:tt||ut(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=ft.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ct,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=ft(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&at.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(lt(r,!0),e,t,n)}}),S.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(tt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),tt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){nt||(nt=!0,st())},S.fx.stop=function(){nt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},rt=E.createElement("input"),it=E.createElement("select").appendChild(E.createElement("option")),rt.type="checkbox",y.checkOn=""!==rt.value,y.optSelected=it.selected,(rt=E.createElement("input")).value="t",rt.type="radio",y.radioValue="t"===rt.value;var pt,dt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=dt[t]||S.find.attr;dt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=dt[o],dt[o]=r,r=null!=a(e,t,n)?o:null,dt[o]=i),r}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match(P)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,yt(this)))});if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,yt(this)))});if(!arguments.length)return this.attr("class","");if((e=mt(t)).length)while(n=this[u++])if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,yt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=mt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=yt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+vt(yt(n))+" ").indexOf(t))return!0;return!1}});var xt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(xt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!bt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,bt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,wt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,wt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var Tt=C.location,Ct={guid:Date.now()},Et=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var St=/\[\]$/,kt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Dt(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||St.test(n)?i(n,t):Dt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)Dt(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt={},Mt={},It="*/".concat("*"),Wt=E.createElement("a");function Ft(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Bt(t,i,o,a){var s={},u=t===Mt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function $t(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Wt.href=Tt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":It,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$t($t(e,S.ajaxSettings),t):$t(S.ajaxSettings,e)},ajaxPrefilter:Ft(Rt),ajaxTransport:Ft(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Ht.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Tt.href)+"").replace(Pt,Tt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Wt.protocol+"//"+Wt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Bt(Rt,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Ot.test(v.type),f=v.url.replace(qt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(jt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Et.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Lt,"$1"),o=(Et.test(f)?"&":"?")+"_="+Ct.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+It+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Bt(Mt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var _t={0:200,1223:204},zt=S.ajaxSettings.xhr();y.cors=!!zt&&"withCredentials"in zt,y.ajax=zt=!!zt,S.ajaxTransport(function(i){var o,a;if(y.cors||zt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(_t[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Ut,Xt=[],Vt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Ct.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Vt,"$1"+r):!1!==e.jsonp&&(e.url+=(Et.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Ut=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=vt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):("number"==typeof f.top&&(f.top+="px"),"number"==typeof f.left&&(f.left+="px"),c.css(f))}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=$e(y.pixelPosition,function(e,t){if(t)return t=Be(e,n),Me.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Gt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Yt=C.jQuery,Qt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Qt),e&&C.jQuery===S&&(C.jQuery=Yt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});}catch(e){console.log(e)}}catch(e){console.log(e);}
if(!utag_condload){try{try{var CONST_TAG_NAME="Digital 3.0 Utility Functions";window.Bootstrapper={};Bootstrapper.currentTimeForPageLoadStart=Date.now();window.mm_async=true;Bootstrapper.dataObject={};Bootstrapper.reportException=function(){};Bootstrapper.ga_uid='11';Bootstrapper.dataObject.setConstants=function(){Bootstrapper.dataObject.global={};Bootstrapper.dataObject.global.constant={};Bootstrapper.dataObject.global.constant.web="web";Bootstrapper.dataObject.global.constant.doubleDash="--";Bootstrapper.dataObject.global.constant.EC_MY_ACC_UI="My Account-User Interactions";Bootstrapper.dataObject.global.constant.EC_HOME="Home";};Bootstrapper.pixelAuditAry=[];Bootstrapper.dataObject.setConstants();Bootstrapper.cacheBuster=Math.random()*10000000000000000;Bootstrapper.getInternetExplorerVersion=function(){var rv=-1;try{var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!==null){rv=parseFloat(RegExp.$1);}}catch(e){Bootstrapper.reportException(e);}
return rv;}
Bootstrapper.detectBrowser=function(){var b;try{b=navigator.userAgent;var a=Object.prototype.toString.call(window.opera)==='[object Opera]',c=b.indexOf('MSIE ')>-1||b.indexOf('Trident/')>-1,d={IE:!!c,MSEdge:b.indexOf('Edge/')>-1,Opera:a,WebKit:b.indexOf('AppleWebKit/')>-1,Chrome:b.indexOf('Chrome')>-1&&b.indexOf('Edge/')===-1,Gecko:b.indexOf('Gecko')>-1&&b.indexOf('KHTML')===-1,MobileSafari:/Apple.*Mobile.*Safari/.test(b),iOs:b.indexOf('iPad')>-1||b.indexOf('iPhone')>-1||b.indexOf('iPod')>-1,iOS67:b.search(/OS 6(.*)|7(.*) like Mac OS/i)>-1,BlackBerry:b.indexOf('BlackBerry')>-1,Fennec:b.indexOf('Fennec')>-1,IEMobile:b.indexOf('IEMobile')>-1,WindowsPhone:b.toLowerCase().indexOf('windows phone')>-1,WindowsTablet:b.toLowerCase().indexOf('windows nt')>-1&&b.toLowerCase().indexOf('touch')>-1,OperaMobile:b.search(/Opera (?:Mobi|Mini)/)>-1,Kindle:b.search(/[ ](Kindle|Silk)/)>-1,isChromeIOS:/crios/i.test(b),ua:b,Android:/Android/.test(b),facebookWebview:/FBAV/.test(b),googleWebview:/GSA/.test(b),AndroidChromiumWebview:/Chrome\/.* Mobile/.test(b),iOsWebview:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/.test(b)},e=false;d.isMobile=(d.MobileSafari||d.BlackBerry||d.Fennec||d.IEMobile||d.OperaMobile||d.Kindle||d.iOs||d.Android||d.WindowsPhone||d.WindowsTablet||d.AndroidChromiumWebview||d.iOsWebview||d.facebookWebview||d.googleWebview);d.isOrientationSupported=((typeof window.orientation!=="undefined")||(navigator.userAgent.indexOf('IEMobile')!==-1));d.isMobileNonIOS=(d.isMobile&&!d.iOs);}catch(error){Bootstrapper.reportException(error);}
return d;};Bootstrapper.isMobileBrowser=function(){var isMobile=false;try{var browser=Bootstrapper.detectBrowser();isMobile=(browser)?(browser.isMobile||browser.isOrientationSupported):false;}catch(e){Bootstrapper.reportException(e);}
return isMobile.toString();};Bootstrapper.getParamsFromURL=function(linkURL){var dataObj={};var methodName="getParamsFromURL";var requirementName="Parse UAL Params";try{if(linkURL&&typeof linkURL==="string"){var urlHash=linkURL.indexOf("#")>-1?linkURL.split("#")[1]:"",urlQuery=linkURL.indexOf("?")>-1?linkURL.substring(linkURL.indexOf("?")+1,urlHash?linkURL.indexOf("#"):linkURL.length):"",keyVals=urlQuery.split("\x26");if(keyVals.length>0){for(var n=0;keyVals.length>n;n++){var params=keyVals[n];if(params.length>0&&params.indexOf("\x3d")>0){var param=params.split("\x3d");dataObj[param[0]]=param[1];}}
if(!dataObj.mode)
dataObj.mode="d";}}}catch(e){var inputSource={"data_source":"Page/Link URLs","input_value":e.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAG_NAME,JSON.stringify(e.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}
return dataObj;};Bootstrapper.setCustomVars=function(dataObj){var campParamsArray=["mode","int_source","int_medium","int_campaign","alm","int_content","partner_category","partner_name","asset_type","asset_position","promo_code","targeting","launch_date","rpc","campaign_type","offer_trackingid","source_code","testGroupname","messageKey"],concatVal="",k=0;var requirementName="Process Promo URL params";var methodName="setCustomVars";try{for(var j=0;campParamsArray.length>j;j++){if(dataObj[campParamsArray[j]]!==undefined&&dataObj[campParamsArray[j]]!==""){if(campParamsArray[j]=="testGroupname"||campParamsArray[j]=="messageKey"){if(dataObj["asset_position"]=="hpcarsul1"){concatVal+=dataObj[campParamsArray[j]]+"|";}}else{concatVal+=dataObj[campParamsArray[j]]+"|";}}
else{if(campParamsArray[j]!="messageKey"){concatVal+="--|";}
k++;}}
if(k<campParamsArray.length){concatVal=concatVal.slice(0,concatVal.length-1);}else{concatVal="";}}catch(e){var inputSource={"data_source":"Promo Data object","input_value":e.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAG_NAME,JSON.stringify(e.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}
return concatVal;};Bootstrapper.dataObject.dataGapTracking=function(platform,customLabel,e){let dataObject={};try{if(!Date.now){Date.now=function now(){return new Date().getTime();};}
dataObject.tealiumEvent='DataGapTracking';dataObject.eventCategory='DataGapTracking';dataObject.eventAction=platform;dataObject.eventLabel=Bootstrapper.scrubberPII(JSON.stringify(customLabel),true);Bootstrapper.setUtagLinkForDOMEvent(dataObject);}catch(error){Bootstrapper.reportException(error)}};Bootstrapper.dataObject.customLogForGapTracking=function(requirement,tagName,errorLog,inputSource,methodName){var customLabel={"requirement":requirement,"tag_name":tagName,"exception":errorLog,"input_source":inputSource,"method_name":methodName};return customLabel;};Bootstrapper.getDescFromCallback=function(data){var methodName="getDescFromCallback";var CONST_REQ_NAME="Fetch description from callback data object";var desc;try{if(data.desc){desc=data.desc;}else{var inputSource={"data_source":"Data object for Login event","input_value":JSON.stringify(data)};var errorLog="desc is not available in callback data";var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_REQ_NAME,CONST_TAG_NAME,errorLog,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,"");}}catch(e){var inputsrc={"data_source":"data object for callback event","input_value":e.message};var custLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_REQ_NAME,CONST_TAG_NAME,JSON.stringify(e.message),inputsrc,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,custLabel,e);}
return desc;};Bootstrapper.safeInsertIframe=function(url,requirementName){var methodName="safeInsertIframe";try{var newFrame=document.createElement('iframe');newFrame.src=url;newFrame.width=newFrame.height='1px';newFrame.style.display='none';var rand=parseInt(100000*10000*Math.random()*Math.random());Bootstrapper['appendFrame'+rand]=setInterval(function(a,b){return function(){document.getElementsByTagName('body')&&0<document.getElementsByTagName('body').length&&(clearInterval(Bootstrapper['appendFrame'+b]),document.getElementsByTagName('body')[0].appendChild(a));};}(newFrame,rand),150);}catch(error){var inputSource={"data_source":"pixel url","input_value":error.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAG_NAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}};Bootstrapper.getPOSFromPathArray=function(urlPathArray){var methodName="getPOSFromPathArray";var requirementName="Fetch POS from URL path array";var pos;try{if(urlPathArray&&urlPathArray.length>0){pos=urlPathArray[2]?urlPathArray[2]:"--";pos=pos.toUpperCase();}}catch(error){var inputSource={"data_source":"urlPathArray","input_value":error.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAG_NAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}
return pos;};Bootstrapper.getURLPathArray=function(path){var methodName="getURLPathArray";var requirementName="Split URL path into array";var pathArray;try{if(path){pathArray=path.split("/");}}catch(error){var inputSource={"data_source":"url","input_value":error.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAG_NAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}
return pathArray;};Bootstrapper.getLocale=function(urlPathArray){var methodName="getLocale";var requirementName="Fetch Locale from URL path array";var locale;try{if(urlPathArray&&urlPathArray.length>0){locale=urlPathArray[1]?urlPathArray[1]:"--";locale=locale.toLowerCase();}}catch(error){var inputSource={"data_source":"url","input_value":error.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAG_NAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}
return locale;};Bootstrapper.dataObject.getPathElemByClassName=function(path,className){var methodName="getPathElemByClassName";var requirementName="fetch parent node from event.path of clicked element";var parentNode;try{var index;for(index=0;index<path.length;index++){if(path[index].className&&path[index].className.indexOf(className)>-1){parentNode=path[index];break;}}}catch(error){var inputSource={"data_source":"Event Object","input_value":event+" className "+className};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAG_NAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}
return parentNode;};Bootstrapper.dataObject.initiateGapTracking=function(requirementName,tagName,errorMsg,exception,ds,inputVal,methodName){try{var inputSource={"data_source":ds,"input_value":inputVal};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,tagName,errorMsg,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,exception);}catch(error){Bootstrapper.reportException(error);}};Bootstrapper.dataObject.getDataByKey=function(dataObject,key,requirementName){var methodName="getDataByKey";var ds="Data layer";var data="--";var inputValue="Data Object with key "+key;try{if(dataObject&&dataObject[key]){data=dataObject[key];}
}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return data;};Bootstrapper.dataObject.isLocaleEn=function(requirementName){var methodName="isLocaleEn";var isLocaleEnglish=false;var currentPath,pathArray,locale;try{currentPath=document.location.pathname;pathArray=Bootstrapper.getURLPathArray(currentPath);locale=Bootstrapper.getLocale(pathArray);if(locale&&locale=="en"){isLocaleEnglish=true;}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"document.location.pathname",currentPath,methodName);}
return isLocaleEnglish;};Bootstrapper.dataObject.fetchDecodedURIComponent=function(uriComponent){var methodName="fetchDecodedURIComponent";var requirementName="Decode and remove extra spaces from URI component";var decodedURIComponent;try{if(uriComponent){decodedURIComponent=decodeURIComponent(uriComponent);if(decodedURIComponent){decodedURIComponent=decodedURIComponent.replace(/[^A-Za-z0-9&\+\/\=]/g,"");}}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"URI component",uriComponent,methodName);}
return decodedURIComponent;};Bootstrapper.dataObject.getUniquePageNameForTI=function(path){var methodName="getUniquePageNameForTI";var requirementName="Fetch unique pageName for TI category pages";var uniquePageName;try{var pathArray=path.split("/");if(pathArray&&pathArray.length>3){var isTI=pathArray[3].toLowerCase()==="ti";var isCategoryPage=pathArray[4]?pathArray[4].toLowerCase()==="cat":false;var regExp=new RegExp("^(.*\/ti\/?)$");if(isTI){if(regExp.test(path)){uniquePageName="MainPage";}else if(isCategoryPage){uniquePageName=Bootstrapper.dataObject.fetchDecodedURIComponent(pathArray[5]);}}}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"document.location.pathname",path,methodName);}
return uniquePageName;};Bootstrapper.dataObject.isManageResPage=function(){var methodName="isManageResPage";var requirementName="Check whether currently loaded page is Manage res page or not";var path;var isManageRes=false;try{path=document.location.pathname;var pathArray=Bootstrapper.getURLPathArray(path);if(pathArray){for(var i=0;i<pathArray.length;i++){if(pathArray[i].toLowerCase()=="manageres"){isManageRes=true;break;}}}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"document.location.pathname",path,methodName);}
return isManageRes;};var CONST_EC_ADS="Ads";var CONST_EA_PARTNER_AD_CLICK="Clicked: Partner Ads";Bootstrapper.processAdLinkData=function(data){var methodName="processAdLinkData";var banners=data.desc,linkURL="",bannerEvt=data.action;var analyticsData=[];var promoAry=[];var adDetailsExist;try{if(banners&&typeof banners!="string"){for(var i=0;i<banners.length;i++){if(typeof banners!="string"&&banners[i].indexOf("?")>-1&&banners[i].indexOf("int_campaign=")>0){linkURL=banners[i];promoAry.push(Bootstrapper.addAdDetails(linkURL));adDetailsExist=true;}}}else if(banners&&typeof banners=="string"){if(banners.indexOf("?")>-1&&banners.indexOf("int_campaign=")>0){promoAry.push(Bootstrapper.addAdDetails(banners));adDetailsExist=true;}else if(bannerEvt=="AdClick"&&banners.indexOf("oasc17.247realmedia.com")>0){var adData={};adData.tealium_event=bannerEvt;adData.eventCategory=CONST_EC_ADS;adData.eventAction=CONST_EA_PARTNER_AD_CLICK;adData.eventLabel=banners;analyticsData.push(adData);}}
if(adDetailsExist){var gaCarrierEvent=Bootstrapper.sendAdGACall(bannerEvt);gaCarrierEvent.ecommercePromo=promoAry;analyticsData.push(gaCarrierEvent);}}catch(error){var requirementName="Track impression and click for Internal Promos";var ds="data object: AdLinks";var inputVal=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputVal,methodName);}
return analyticsData;};Bootstrapper.addAdDetails=function(linkURL){var linkData=Bootstrapper.getParamsFromURL(linkURL),concatVal=Bootstrapper.setCustomVars(linkData);var adData={};adData.enhancedEcommerceEvents={};adData.enhancedEcommerceEvents.promoId=[concatVal];adData.enhancedEcommerceEvents.promoName=[linkData.int_campaign];adData.enhancedEcommerceEvents.promoCreative=[linkData.int_content]||[Bootstrapper.dataObject.global.constant.doubleDash];adData.enhancedEcommerceEvents.promoPosition=[linkData.asset_position]||[Bootstrapper.dataObject.global.constant.doubleDash];adData.eventLabel=linkData.int_campaign;return adData;};Bootstrapper.sendAdGACall=function(action){var gaCarrierEvent={};if(action){if(action==="AdClick"){gaCarrierEvent.ga_enhanced_event="promo_click";gaCarrierEvent.eventName="select_promotion";}else if(action==="AdImpression"){gaCarrierEvent.eventAction="Impressions";gaCarrierEvent.eventName="view_promotion";}
gaCarrierEvent.tealium_event=action;gaCarrierEvent.eventCategory="Internal Campaigns";gaCarrierEvent.noninteraction="1";}
return gaCarrierEvent;};Bootstrapper.sendGAEvent=function(eventCategory,eventAction,eventLabel,eventValue){let dataObject={};try{if(eventCategory&&eventAction&&eventLabel){dataObject.tealium_event=eventAction;dataObject.ga_event_category=eventCategory;dataObject.ga_event_action=eventAction;dataObject.ga_event_label=Bootstrapper.scrubberPII(eventLabel,true);if(eventValue||eventValue==0){dataObject.ga_event_value=eventValue;}
Bootstrapper.setUtagLinkForDOMEvent(dataObject);}else if(eventCategory&&eventAction){dataObject.tealium_event=eventAction;dataObject.ga_event_category=eventCategory;dataObject.ga_event_action=eventAction;Bootstrapper.setUtagLinkForDOMEvent(dataObject);}}catch(error){Bootstrapper.reportException(error);}};Bootstrapper.getServerComponent=function(){try{utag.view();}catch(error){Bootstrapper.reportException(error);}};Bootstrapper.getCurrentCustomerId=function(){var customerId="--";try{if(utag&&utag.data&&utag.data.customer_id){customerId=utag.data.customer_id;}
if(customerId=="--"){var loginStatus=Bootstrapper.getDataFromLocalStorage("loginStatus");if(loginStatus){var custId=JSON.parse(loginStatus).CID;customerId=(custId&&custId!="--")?Bootstrapper.base64Decode(custId):"--";}}}catch(error){Bootstrapper.reportException(error);}
return customerId;};Bootstrapper.prepareLegInfo=function(info){var methodName="Bootstrapper.prepareLegInfo";var requirementName="Fetch details from leg info object";var legInfo="--";try{if(info&&info.leg){for(var i=0;i<info.leg.length;i++){if(i===0){legInfo="";}
var cabinInfo=Bootstrapper.prepareCabinInfo(info.leg[i].travelers);legInfo+='[Leg ';var origin=info.leg[i].origin?info.leg[i].origin:"--";var destination=info.leg[i].destination?info.leg[i].destination:"--";legInfo+=[i+1,origin,destination,cabinInfo].join("|");legInfo+=']';}}}catch(error){var ds="info object from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return legInfo;};Bootstrapper.prepareCabinInfo=function(cabinInfoObj){var methodName="Bootstrapper.prepareCabinInfo";var requirementName="Fetch details from cabin info object";var cabinInfo="--";try{var cabinUniqueList=prepareUniqueCabinArray(cabinInfoObj);if(cabinUniqueList){for(var i=0;i<cabinUniqueList.length;i++){if(i===0){cabinInfo="";}
cabinInfo+='[Cabin ';var cabin;if(cabinUniqueList[i].seatType){cabin=cabinUniqueList[i].seatType;}else{cabin=cabinUniqueList[i].cabin?cabinUniqueList[i].cabin:"--";}
var pax=cabinUniqueList[i].pax?cabinUniqueList[i].pax:"--";let isUpsell=cabinUniqueList[i].isUpsell?'Upsell:Y':'Upsell:N';if(isUpsell=="Upsell:Y"){cabinInfo+=[i+1,cabin,pax,cabinUniqueList[i].totalPrice,cabinUniqueList[i].milesInfo,isUpsell].join("|");}else{cabinInfo+=[i+1,cabin,pax,cabinUniqueList[i].totalPrice,cabinUniqueList[i].milesInfo].join("|");}
cabinInfo+=']';}}}catch(error){var ds="info object from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return cabinInfo;};function prepareUniqueCabinArray(cabinInfoObj){var methodName="prepareUniqueCabinArray";var requirementName="Prepare unique cabin array";var uniqueCabinList=[];try{if(cabinInfoObj){for(var i=0;i<cabinInfoObj.length;i++){var cabin=cabinInfoObj[i];if(!containsCabin(uniqueCabinList,cabin)){var count=containsCabin(cabinInfoObj,cabin);cabin.pax=count;if(count>1){let priceMilesInfo=calculatePriceAndMiles(count,cabinInfoObj);cabin.totalPrice=priceMilesInfo&&priceMilesInfo.totalPrice?priceMilesInfo.totalPrice:0;cabin.milesInfo=priceMilesInfo.milesInfo?priceMilesInfo.milesInfo:0;}else{cabin.totalPrice=cabin&&cabin.amount?cabin.amount:0;cabin.milesInfo=cabin&&cabin.miles?cabin.miles:0;}
uniqueCabinList.push(cabin);}}}}catch(error){var ds="Cabin info object from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return uniqueCabinList;}
function calculatePriceAndMiles(count,cabinInfoObject){let requirementName="Calculate price and miles info for cabins";let methodName="calculatePriceAndMiles";let priceInfo={};try{for(const c of cabinInfoObject){priceInfo.totalPrice=priceInfo.totalPrice?priceInfo.totalPrice+c.amount:c.amount;priceInfo.milesInfo=priceInfo.milesInfo?priceInfo.milesInfo+c.miles:c.miles;}}catch(error){let ds="Cabin info object from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return priceInfo;}
function containsCabin(list,item){var filtered_item=list.filter(function(i){if(item.seatType){return i.seatType===item.seatType}
return i.cabin===item.cabin});return filtered_item.length;}
Bootstrapper.browserSize=(function getBrowserSize(){var width="--";var height="--";try{width=window.innerWidth||document.body.clientWidth;height=window.innerHeight||document.body.clientHeight;width=Math.round(width/10)*10;height=Math.round(height/10)*10;}catch(error){Bootstrapper.reportException(error);}
return width+"x"+height;})();Bootstrapper.getCacheBusterBasedOnDate=function(){var methodName="getCacheBusterBasedOnDate";var requirementName="Get cache buster";var cachebuster;try{var date=new Date();cachebuster=Date.UTC(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDay(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds(),date.getUTCMilliseconds());}catch(error){var ds="Date object";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return cachebuster;};Bootstrapper.imageRequest=function(a){try{var c=new Image(0,0);c.src=a;return c;}catch(error){var ds="image request";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper.getPOSFromURL=function(){var methodName="getPOSFromURL";var requirementName="get POS from URL";try{var regExp_loyaltyPartner=new RegExp("(^(.*\/loyalty\/partnerupgrades\/ui))");var regexp_ssoLogin=new RegExp("(^(.*\/sso\/.*\/.*\/sso))");var currentPath=document.location.pathname;if(regExp_loyaltyPartner.test(currentPath)){return document.location.pathname.split('/')[5]?document.location.pathname.split('/')[5].toUpperCase():'';}else if(regexp_ssoLogin.test(currentPath)){return document.location.pathname.split('/')[3]?document.location.pathname.split('/')[3].toUpperCase():'';}else{return document.location.pathname.split('/')[2]?document.location.pathname.split('/')[2].toUpperCase():'';}}catch(error){var ds="document URL";var inputValue="document.location.pathname";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper.getLanguageFromURL=function(){var methodName="getLangauageFromURL";var requirementName="get Language from URL";try{var regExp_loyaltyPartner=new RegExp("(^(.*\/loyalty\/partnerupgrades\/ui))");var regexp_ssoLogin=new RegExp("(^(.*\/sso\/.*\/.*\/sso))");var currentPath=document.location.pathname;if(regExp_loyaltyPartner.test(currentPath)){return document.location.pathname.split('/')[4]?document.location.pathname.split('/')[4]:'';}else if(regexp_ssoLogin.test(currentPath)){return document.location.pathname.split('/')[2]?document.location.pathname.split('/')[2]:'';}else{return document.location.pathname.split('/')[1]?document.location.pathname.split('/')[1]:'';}}catch(error){var ds="document URL";var inputValue="document.location.pathname";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper._dateFormat=function(_dt,fmt){var dt=new Date(_dt),dateObj={rightSizeMe:function(me){return(me<10?"0":"")+me;},d:function(){return dt.getDate();},dd:function(){return dateObj.rightSizeMe(dt.getDate());},dddd:function(){return dt.getDayName();},DD:function(){return dateObj.rightSizeMe(dt.getDay());},yyyy:function(){return dt.getFullYear();},HH:function(){return dateObj.rightSizeMe(dt.getHours());},hh:function(){var hours=dt.getHours();return dateObj.rightSizeMe(((hours>12)?(hours-12):hours));},ms:function(){return dateObj.rightSizeMe(dt.getMilliseconds());},mm:function(){return dateObj.rightSizeMe(dt.getMinutes());},M:function(){return(dt.getMonth()+1);},MM:function(){return dateObj.rightSizeMe(dt.getMonth()+1);},MMMM:function(){return dt.getMonthName();},ss:function(){return dateObj.rightSizeMe(dt.getSeconds());},yy:function(){return dateObj.yyyy().toString().substring(2);}},retDate=fmt,i=0,fmtArr=[""],fmtIter=0,oldChar="";if(dt=="Invalid Date"||!fmt){return _dt;}
if(fmt.length>0){for(i=0;i<fmt.length;i++){if(fmt[i].match(/[^A-Za-z]/)===null){if(i>0&&fmt[i]!==oldChar){fmtIter++;fmtArr[fmtIter]="";}
fmtArr[fmtIter]=fmtArr[fmtIter]+fmt[i];oldChar=fmt[i];}}
for(i=0;i<fmtArr.length;i++){if(dateObj.hasOwnProperty(fmtArr[i])){retDate=retDate.replace(fmtArr[i],dateObj[fmtArr[i]]);}}}
return(retDate!==fmt)?retDate:dt;};Bootstrapper.getDate=function(dateTime,delimiter){var methodName="getDate";var requirementName="Fetch date from DateTime";var formattedDate="--";try{var date=new Date(dateTime);if(date){var year=date.getFullYear();var month=date.getMonth()+1;month=Bootstrapper.dataObject.convertSingleDigitToDouble(month);var day=date.getDate();day=Bootstrapper.dataObject.convertSingleDigitToDouble(day);formattedDate=[year,month,day].join(delimiter);}}catch(error){var ds="Function argument";var inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return formattedDate;};Bootstrapper.getTime=function(dateTime,delimiter){var methodName="getTime";var requirementName="Fetch time from DateTime";var formattedTime="--";try{var date=new Date(dateTime);if(date){var hours=date.getHours();hours=Bootstrapper.dataObject.convertSingleDigitToDouble(hours);var minutes=date.getMinutes();minutes=Bootstrapper.dataObject.convertSingleDigitToDouble(minutes);formattedTime=[hours,minutes].join(delimiter);}}catch(error){var ds="Function argument";var inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return formattedTime;};Bootstrapper.dataObject.convertSingleDigitToDouble=function(digit){var methodName="convertSingleDigitToDouble";var requirementName="Convert single digit into double digit";var doubleDigit;var prefix="0";try{doubleDigit=digit;if(digit<10){doubleDigit=prefix+digit;}}catch(error){var ds="function arguments";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,digit,methodName);}
return doubleDigit;};Bootstrapper.getSelectedFlightHash=function(data){var methodName="getSelectedFlightHash";var requirementName="get selected flight hash from the callback.";var currentHash="";try{if(data.params&&data.params.info&&data.params.info.flightHash){currentHash=data.params.info.flightHash;}}catch(error){var ds="callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return currentHash;}
Bootstrapper.broadcastEvent=function(eventType,eventName,payloadData){var methodName="Bootstrapper.broadcastEvent";var requirementName="Broadcasts an event with data layload";try{var event;if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent(eventName,true,true);event.eventName=eventName;event.eventType=eventType;event.payload=payloadData;document.dispatchEvent(event);}else{event=document.createEventObject();event.eventName=eventName;event.eventType=eventType;event.payload=payloadData;document.fireEvent("on"+event.eventType,event);}}catch(e){var ds="broadcast event";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,e.message,e,ds,inputValue,methodName);}}
Bootstrapper.getMarketType=function(originCountryCode,destinationCountryCode){var methodName="getMarketType";var requirementName="get market type";try{var marketType="--";if(originCountryCode!=='--'&&destinationCountryCode!=='--'){if(originCountryCode=='US'&&destinationCountryCode=='US'){marketType='Domestic';}else{marketType='International';}}}catch(error){var ds="callback";var inputValue="originCountryCode & destinationCountryCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return marketType;}
Bootstrapper.MPAccStatus={"GENERAL":{name:"non-elite",value:0},"SILVER":{name:"premier silver",value:1},"GOLD":{name:"premier gold",value:2},"PLATINUM":{name:"premier platinum",value:3},"ONEK":{name:"premier 1K",value:4},"GS":{name:"global services",value:5}};Bootstrapper.getMPAccStatusValue=function(){var requirementName="FB- Pixel Update for Loyalty Tier";var methodName="getMPAccStatusValue";try{if(utag_data.MPAccStatus){var mpAccStatus=utag_data.MPAccStatus.toLowerCase();switch(mpAccStatus){case Bootstrapper.MPAccStatus.GENERAL.name:return Bootstrapper.MPAccStatus.GENERAL.value;case Bootstrapper.MPAccStatus.SILVER.name:return Bootstrapper.MPAccStatus.SILVER.value;case Bootstrapper.MPAccStatus.GOLD.name:return Bootstrapper.MPAccStatus.GOLD.value;case Bootstrapper.MPAccStatus.PLATINUM.name:return Bootstrapper.MPAccStatus.PLATINUM.value;case Bootstrapper.MPAccStatus.ONEK.name:return Bootstrapper.MPAccStatus.ONEK.value;case Bootstrapper.MPAccStatus.GS.name:return Bootstrapper.MPAccStatus.GS.value;default:return 0;}}
else{return 0;}}catch(error){var ds="Bootstrapper.dataObject",inputValue="undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper.isEnvironmentProd=function(){var methodName="isEnvironmentProd";var requirementName="Check if environment is production or lower";var isProd=false;try{if(utag.data["dom.domain"].toLowerCase()=='www.united.com'.toLowerCase()){isProd=true;}}catch(error){var ds="utag object"
var inputValue='utag.data["dom.domain"]';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return isProd;};Bootstrapper.prepareLegDetails=function(origin,destination,departureDate){var methodName="prepareLegDetails";var requirementName="prepare flight leg deatils";var details;try{var odPair=[origin,destination].join("-");details=[odPair,departureDate].join("|");}catch(e){var ds="Callback/page URL";var inputValue='method arguments';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,e.message,e,ds,inputValue,methodName);}
return details;};Bootstrapper.isEnUS=function(){var requirementName="Check if locale and region is en and US";var methodName="isEnUS";var isEnUS=false;try{if(utag_data.lang_code&&utag_data.lang_code.toLowerCase()==="en"&&utag_data.point_of_sale&&utag_data.point_of_sale.toLowerCase()==="us"){isEnUS=true;}}catch(error){var ds="Data Layer";var inputValue="utag_data.lang_code and utag_data.point_of_sale";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return isEnUS;};Bootstrapper.isClickedLinkExternal=function(url){var requirementName="Is clicked link external";var methodName="isClickedLinkExternal";try{var linkURL=new URL(url);var isExternalLink=false;if(document.location.hostname!=linkURL.hostname&&linkURL.hostname!="www.united.com"){isExternalLink=true;}}catch(error){var ds="DOM";var inputValue="Clicked hyperlink";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return isExternalLink;};Bootstrapper.saveInLocalStorage=function(key,value){try{if(window.localStorage&&window.localStorage.setItem&&typeof(window.localStorage.setItem)==="function"){if(key&&value){window.localStorage.setItem(key,value);}}}catch(e){Bootstrapper.reportException(e);}}
Bootstrapper.removeFromLocalStorage=function(key){try{if(window.localStorage&&window.localStorage.removeItem&&typeof(window.localStorage.removeItem)==="function"){if(key){window.localStorage.removeItem(key);}}}catch(e){Bootstrapper.reportException(e);}}
Bootstrapper.readFromLocalStorage=function(key){var value="";try{if(window.localStorage&&window.localStorage.getItem&&typeof(window.localStorage.getItem)==="function"){if(key){value=window.localStorage.getItem(key);}}}catch(e){Bootstrapper.reportException(e);}
return value;}
Bootstrapper.readAndDeleteFromLocalStorage=function(key){var value="";try{value=Bootstrapper.readFromLocalStorage(key);Bootstrapper.removeFromLocalStorage(key);}catch(e){Bootstrapper.reportException(e);}
return value;}
Bootstrapper.hasInLocalStorage=function(key){var hasInLocalStorage=false;try{if(Bootstrapper.readFromLocalStorage(key)){hasInLocalStorage=true;}}catch(e){Bootstrapper.reportException(e);}
return hasInLocalStorage;}
Bootstrapper.base64Encode=function(data){try{if(typeof window['btoa']=='function'){return btoa(data);}
var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!data){return data;}
do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&0x3f;h2=bits>>12&0x3f;h3=bits>>6&0x3f;h4=bits&0x3f;tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4);}while(i<data.length);enc=tmp_arr.join('');var r=data.length%3;return(r?enc.slice(0,r-3):enc)+'==='.slice(r||3);}catch(error){var ds="Function argument";var inputValue=JSON.str(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}};var StringMaker=function(){this.str="";this.length=0;this.append=function(s){this.str+=s;this.length+=s.length;};this.prepend=function(s){this.str=s+this.str;this.length+=s.length;};this.toString=function(){return this.str;};}
Bootstrapper.base64Decode=function(input){try{var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var output=new StringMaker();var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=keyStr.indexOf(input.charAt(i++));enc2=keyStr.indexOf(input.charAt(i++));enc3=keyStr.indexOf(input.charAt(i++));enc4=keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output.append(String.fromCharCode(chr1));if(enc3!=64){output.append(String.fromCharCode(chr2));}
if(enc4!=64){output.append(String.fromCharCode(chr3));}}
return output.toString();}catch(error){var ds="Function argument";var inputValue=JSON.str(input);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper.base64Encode=function(data){try{if(typeof window['btoa']=='function'){return btoa(data);}
var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!data){return data;}
do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&0x3f;h2=bits>>12&0x3f;h3=bits>>6&0x3f;h4=bits&0x3f;tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4);}while(i<data.length);enc=tmp_arr.join('');var r=data.length%3;return(r?enc.slice(0,r-3):enc)+'==='.slice(r||3);}catch(error){var ds="Function argument";var inputValue=JSON.str(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}};var StringMaker=function(){this.str="";this.length=0;this.append=function(s){this.str+=s;this.length+=s.length;};this.prepend=function(s){this.str=s+this.str;this.length+=s.length;};this.toString=function(){return this.str;};}
Bootstrapper.base64Decode=function(input){try{var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var output=new StringMaker();var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=keyStr.indexOf(input.charAt(i++));enc2=keyStr.indexOf(input.charAt(i++));enc3=keyStr.indexOf(input.charAt(i++));enc4=keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output.append(String.fromCharCode(chr1));if(enc3!=64){output.append(String.fromCharCode(chr2));}
if(enc4!=64){output.append(String.fromCharCode(chr3));}}
return output.toString();}catch(error){var ds="Function argument";var inputValue=JSON.str(input);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper.getDataFromLocalStorage=function(key){var requirementName="Get data from local";var methodName="getDataFromLocalStorage";var value='';try{if(typeof(Storage)!=='undefined'){value=Bootstrapper.readFromLocalStorage(key);if(value){var valArr=value.split('~|~');if(valArr.length>1){var expDate=new Date(valArr[1]*1),currDate=new Date();if(expDate.getTime()>currDate.getTime()){value=valArr[0];}else{value='';Bootstrapper.removeFromLocalStorage(key);}}}}
if(!value){Bootstrapper.removeFromLocalStorage(key);}}catch(error){var ds="Function argument";var inputValue=key;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return value;};Bootstrapper.saveDataToLocalStorage=function(key,value,expiry){var requirementName="Save data to local storage";var methodName="saveDataToLocalStorage";try{if(typeof(Storage)!=='undefined'){var expDate=(new Date(expiry)).getTime();if(expiry&&!isNaN(expDate)){Bootstrapper.saveInLocalStorage(key,value+'~|~'+expDate);}}}catch(e){var ds="Function argument";var inputValue=key+" "+value;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}}
Bootstrapper.showSiteFeedback=function(){Bootstrapper.eveluateQualtricsSurvey();};Bootstrapper.eveluateQualtricsSurvey=function(){var requirementName="Eveluate Qualtrics Survey";var methodName="eveluateQualtricsSurvey";try{if(QSI&&QSI.API&&typeof QSI.API.unload==="function"&&typeof QSI.API.load==="function"&&typeof QSI.API.run==="function"){QSI.API.unload();QSI.API.load();QSI.API.run();}}catch(error){var ds="QSI";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}};function listenForSiteFeebackClickEvent(){var requirementName="Listen for site feedback click event for mooveweb";var methodName="listenForSiteFeebackClickEvent";try{document.addEventListener('showSiteFeedback',function(e){if(Bootstrapper.showSiteFeedback){Bootstrapper.showSiteFeedback();}})}catch(error){var ds="Event listener";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}};listenForSiteFeebackClickEvent();Bootstrapper.getGAClientID=function(){var requirementName="Fetch GA client ID from Cookie";var methodName="getGAClientId";var clientId="--";try{if(utag_data&&utag_data["cp._ga"]&&utag_data["cp._ga"].length>6){clientId=""+utag_data['cp._ga'].substring(6);}}catch(error){var ds="Cookies";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return clientId;};Bootstrapper.getMPAccStatus=function(){var requirementName="Fetch MP Acc Status";var methodName="getMPAccStatus";var mpAccStatus="--";try{if(utag_data&&utag_data.MPAccStatus){mpAccStatus=utag_data.MPAccStatus;}}catch(error){var ds="utag data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return mpAccStatus;};Bootstrapper.getMPBalance=function(){var requirementName="Fetch MP Balance";var methodName="getMPBalance";var mpBal="--";try{mpBal=(utag_data&&utag_data.MPBalance&&utag_data.MPBalance>-1)?utag_data.MPBalance:"--";}catch(error){var ds="utag data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return mpBal;}
Bootstrapper.taxForLowestFarePrice=function(){var methodName="taxForLowestFarePrice";var requirementName="Fetch tax for lowest fare price";try{var price=Bootstrapper.lowestFarePrice();if(utag_data.searchTrips&&utag_data.searchTrips.length>0){var fareList=utag_data.searchTrips[0].flights;for(let i=0;i<fareList.length;i++){var item=fareList[i].products;for(let j=0;j<item.length;j++){if(item[j].amount==price&&item[j].taxAndFees&&Number.isInteger(item[j].taxAndFees.amount)){return item[j].taxAndFees.amount;}}}}}catch(error){var ds="Data object from UDO";var inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return"--";};var DOUBLE_DASH=Bootstrapper.dataObject.global.constant.doubleDash;Bootstrapper.fetchFeatureAndPageName=function(params){try{if(params){var featureName=params.feature||params.featureName||DOUBLE_DASH;var pageName=params.pageName||DOUBLE_DASH;return[featureName,pageName].join("|");}}catch(error){var methodName="fetchFeatureAndPageName";var requirementName="fetch feature and pageName";var ds="params object from callback";var inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;};Bootstrapper.prepareLabelForErrorShown=function(params){try{if(params&&params.info&&params.info.errorData&&params.info.errorData.message){return params.info.errorData.message;}}catch(error){var methodName="prepareLabelForErrorShown";var requirementName="Prepare label for error shown";var ds="params object from callback";var inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;};Bootstrapper.readQMSessionIdFromCookie=function(){var requirementName="Read QM session cookie";var methodName="readQMSessionIdFromCookie";var qmSessionId=DOUBLE_DASH;try{qmSessionId=(utag_data&&utag_data["QuantumMetricSessionID"])||"--";}catch(error){var ds="QM Session Cookie read operation";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return qmSessionId};Bootstrapper.fetchTotalPaxCount=function(info){var paxCount=DOUBLE_DASH;try{var numOfChildren01=!isNaN(info.NumOfChildren01)?info.NumOfChildren01:0,numOfChildren02=!isNaN(info.NumOfChildren02)?info.NumOfChildren02:0,numOfChildren03=!isNaN(info.NumOfChildren03)?info.NumOfChildren03:0,numOfChildren04=!isNaN(info.NumOfChildren04)?info.NumOfChildren04:0,numOfSeniors=!isNaN(info.NumOfSeniors)?info.NumOfSeniors:0,numOfLapInfants=!isNaN(info.NumOfLapInfants)?info.NumOfLapInfants:0,numOfInfants=!isNaN(info.NumOfInfants)?info.NumOfInfants:0,numOfAdults=!isNaN(info.NumOfAdults)?info.NumOfAdults:0;paxCount=numOfChildren01+numOfChildren02+numOfChildren03+numOfChildren04+numOfSeniors+numOfLapInfants+numOfInfants+numOfAdults||DOUBLE_DASH;}catch(error){var requirementName="Fetch total paxCount",methodName="fetchTotalPaxCount",ds="Callback",inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return paxCount;};Bootstrapper.prepareErrorMessage=function(info){try{return(info&&typeof info.errorMessage=="string"&&info.errorMessage)||DOUBLE_DASH;}catch(error){var methodName="prepareErrorMessage",requirementName="Prepare label for errorMessage",ds="info object from callback",inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
Bootstrapper.prepareErrorData=function(info){try{var errorMessage=Bootstrapper.prepareErrorMessage(info),errorCode=(info&&info.errorCode)||DOUBLE_DASH;return[errorCode,errorMessage].join('|');}catch(error){var methodName="prepareErrorData",requirementName="Prepare label for errorData",ds="info object from callback",inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
Bootstrapper.isOptEmail=function(info){try{return((info&&typeof info.optEmail=="boolean")?(info.optEmail?'Y':'N'):DOUBLE_DASH);}catch(error){var methodName="isOptEmail",requirementName="Prepare label for optEmail",ds="info object from callback",inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
Bootstrapper.getUserAgent=function(){let requirementName="Get User agaent info";let methodName="getUserAgent";let userAgentInfo;try{userAgentInfo=(navigator&&navigator.userAgent)?navigator.userAgent:DOUBLE_DASH;}catch(error){let ds="info object from callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return userAgentInfo;}
Bootstrapper.isFSRPage=function(){let requirementName="Check if page is FSR page";let methodName="isFSRPage";let isFSR=false;try{let pageURL=document.location.pathname;if(pageURL){let regEXp=/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/gi
if(regEXp.test(utag.data['dom.pathname'])){isFSR=true;}}}catch(error){let ds="PageURL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return isFSR;}
Bootstrapper.sendPageView=function(){let requirementName="Send pageview";let methodName="sendPageView";try{utag.view(utag.data);}catch(error){let ds="utag.data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}}
Bootstrapper.getCurrency=function(){let requirementName="Get currency from DL";let methodName="getCurrency";let currency;try{if(utag_data&&utag_data._ccurrency){currency=utag_data._ccurrency;}}catch(error){let ds="utag.data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return currency;}
function setupQualtricsXMDirectory(){try{var customerId=Bootstrapper.getCurrentCustomerId();if(typeof QSI==="undefined"&&customerId!="--"){QSI={};QSI.config={externalReference:customerId};}}catch(error){Bootstrapper.reportException(error);}}
setupQualtricsXMDirectory();Bootstrapper.isBookingConfirmationPage=function(){let requirementName="Check if page is booking confirmation page";let methodName="isBookingConfirmationPage";let isBookingConfirmation=false;try{let pageURL=document.location.pathname;if(pageURL){let regEXp=/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig;if(regEXp.test(utag.data['dom.pathname'])){isBookingConfirmation=true;}}}catch(error){let ds="PageURL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return isBookingConfirmation;};Bootstrapper.getEncodedEmail=function(){let requirementName="Get encoded email";let methodName="getEncodedEmail";let encodedEmail;try{if(utag_data&&utag_data.encoded_email){encodedEmail=utag_data.encoded_email;}}catch(error){let ds="DL";let inputValue="encoded email";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return encodedEmail;};}catch(e){console.log(e)}}catch(e){console.log(e);}}
if(typeof utag=="undefined"&&!utag_condload){var utag={id:"unitedairlines.united-v3",o:{},sender:{},send:{},rpt:{ts:{a:new Date()}},dbi:[],db_log:[],loader:{q:[],lc:0,f:{},p:0,ol:0,wq:[],lq:[],bq:{},bk:{},rf:0,ri:0,rp:0,rq:[],ready_q:[],sendq:{"pending":0},run_ready_q:function(){for(var i=0;i<utag.loader.ready_q.length;i++){utag.DB("READY_Q:"+i);try{utag.loader.ready_q[i]()}catch(e){utag.DB(e)};}},lh:function(a,b,c){a=""+location.hostname;b=a.split(".");c=(/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\.|\...\.jp$/.test(a))?3:2;return b.splice(b.length-c,c).join(".");},WQ:function(a,b,c,d,g){utag.DB('WQ:'+utag.loader.wq.length);try{if(utag.udoname&&utag.udoname.indexOf(".")<0){utag.ut.merge(utag.data,window[utag.udoname],0);}
if(utag.cfg.load_rules_at_wait){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};d=0;g=[];for(a=0;a<utag.loader.wq.length;a++){b=utag.loader.wq[a];b.load=utag.loader.cfg[b.id].load;if(b.load==4){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.load>0){g.push(b);d++;}else{this.f[b.id]=1;}}
for(a=0;a<g.length;a++){utag.loader.AS(g[a]);}
if(d==0){utag.loader.END();}},AS:function(a,b,c,d){utag.send[a.id]=a;if(typeof a.src=='undefined'){a.src=utag.cfg.path+((typeof a.name!='undefined')?a.name:'ut'+'ag.'+a.id+'.js')}
a.src+=(a.src.indexOf('?')>0?'&':'?')+'utv='+(a.v?utag.cfg.template+a.v:utag.cfg.v);utag.rpt['l_'+a.id]=a.src;b=document;this.f[a.id]=0;if(a.load==2){utag.DB("Attach sync: "+a.src);a.uid=a.id;b.write('<script id="utag_'+a.id+'" src="'+a.src+'"></scr'+'ipt>')
if(typeof a.cb!='undefined')a.cb();}else if(a.load==1||a.load==3){if(b.createElement){c='utag_unitedairlines.united-v3_'+a.id;if(!b.getElementById(c)){d={src:a.src,id:c,uid:a.id,loc:a.loc}
if(a.load==3){d.type="iframe"};if(typeof a.cb!='undefined')d.cb=a.cb;utag.ut.loader(d);}}}},GV:function(a,b,c){b={};for(c in a){if(a.hasOwnProperty(c)&&typeof a[c]!="function")b[c]=a[c];}
return b},OU:function(tid,tcat,a,b,c,d,f,g){g={};utag.loader.RDcp(g);try{if(typeof g['cp.OPTOUTMULTI']!='undefined'){c=utag.loader.cfg;a=utag.ut.decode(g['cp.OPTOUTMULTI']).split('|');for(d=0;d<a.length;d++){b=a[d].split(':');if(b[1]*1!==0){if(b[0].indexOf('c')==0){for(f in utag.loader.GV(c)){if(c[f].tcat==b[0].substring(1))c[f].load=0;if(c[f].tid==tid&&c[f].tcat==b[0].substring(1))return true;}
if(tcat==b[0].substring(1))return true;}else if(b[0]*1==0){utag.cfg.nocookie=true}else{for(f in utag.loader.GV(c)){if(c[f].tid==b[0])c[f].load=0}
if(tid==b[0])return true;}}}}}catch(e){utag.DB(e)}
return false;},RDdom:function(o){var d=document||{},l=location||{};o["dom.referrer"]=d.referrer;o["dom.title"]=""+d.title;o["dom.domain"]=""+l.hostname;o["dom.query_string"]=(""+l.search).substring(1);o["dom.hash"]=(""+l.hash).substring(1);o["dom.url"]=""+d.URL;o["dom.pathname"]=""+l.pathname;o["dom.viewport_height"]=window.innerHeight||(d.documentElement?d.documentElement.clientHeight:960);o["dom.viewport_width"]=window.innerWidth||(d.documentElement?d.documentElement.clientWidth:960);},RDcp:function(o,b,c,d){b=utag.loader.RC();for(d in b){if(d.match(/utag_(.*)/)){for(c in utag.loader.GV(b[d])){o["cp.utag_"+RegExp.$1+"_"+c]=b[d][c];}}}
for(c in utag.loader.GV((utag.cl&&!utag.cl['_all_'])?utag.cl:b)){if(c.indexOf("utag_")<0&&typeof b[c]!="undefined")o["cp."+c]=b[c];}},RDqp:function(o,a,b,c){a=location.search+(location.hash+'').replace("#","&");if(utag.cfg.lowerqp){a=a.toLowerCase()};if(a.length>1){b=a.substring(1).split('&');for(a=0;a<b.length;a++){c=b[a].split("=");if(c.length>1){o["qp."+c[0]]=utag.ut.decode(c[1])}}}},RDmeta:function(o,a,b,h){a=document.getElementsByTagName("meta");for(b=0;b<a.length;b++){try{h=a[b].name||a[b].getAttribute("property")||"";}catch(e){h="";utag.DB(e)};if(utag.cfg.lowermeta){h=h.toLowerCase()};if(h!=""){o["meta."+h]=a[b].content}}},RDva:function(o){var readAttr=function(o,l){var a="",b;a=localStorage.getItem(l);if(!a||a=="{}")return;b=utag.ut.flatten({va:JSON.parse(a)});utag.ut.merge(o,b,1);}
try{readAttr(o,"tealium_va");readAttr(o,"tealium_va_"+o["ut.account"]+"_"+o["ut.profile"]);}catch(e){utag.DB(e)}},RDut:function(o,a){var t={};var d=new Date();var m=(utag.ut.typeOf(d.toISOString)=="function");o["ut.domain"]=utag.cfg.domain;o["ut.version"]=utag.cfg.v;t["tealium_event"]=o["ut.event"]=a||"view";t["tealium_visitor_id"]=o["ut.visitor_id"]=o["cp.utag_main_v_id"];t["tealium_session_id"]=o["ut.session_id"]=o["cp.utag_main_ses_id"];t["tealium_session_number"]=o["cp.utag_main__sn"];t["tealium_session_event_number"]=o["cp.utag_main__se"];try{t["tealium_datasource"]=utag.cfg.datasource;t["tealium_account"]=o["ut.account"]=utag.cfg.utid.split("/")[0];t["tealium_profile"]=o["ut.profile"]=utag.cfg.utid.split("/")[1];t["tealium_environment"]=o["ut.env"]=utag.cfg.path.split("/")[6];}catch(e){utag.DB(e)}
t["tealium_random"]=Math.random().toFixed(16).substring(2);t["tealium_library_name"]="ut"+"ag.js";t["tealium_library_version"]=(utag.cfg.template+"0").substring(2);t["tealium_timestamp_epoch"]=Math.floor(d.getTime()/1000);t["tealium_timestamp_utc"]=(m?d.toISOString():"");d.setHours(d.getHours()-(d.getTimezoneOffset()/60));t["tealium_timestamp_local"]=(m?d.toISOString().replace("Z",""):"");utag.ut.merge(o,t,0);},RDses:function(o,a,c){a=(new Date()).getTime();c=(a+parseInt(utag.cfg.session_timeout))+"";if(!o["cp.utag_main_ses_id"]){o["cp.utag_main_ses_id"]=a+"";o["cp.utag_main__ss"]="1";o["cp.utag_main__se"]="1";o["cp.utag_main__sn"]=(1+parseInt(o["cp.utag_main__sn"]||0))+"";}else{o["cp.utag_main__ss"]="0";o["cp.utag_main__se"]=(1+parseInt(o["cp.utag_main__se"]||0))+"";}
o["cp.utag_main__pn"]=o["cp.utag_main__pn"]||"1";o["cp.utag_main__st"]=c;utag.loader.SC("utag_main",{"_sn":(o["cp.utag_main__sn"]||1),"_se":o["cp.utag_main__se"],"_ss":o["cp.utag_main__ss"],"_st":c,"ses_id":(o["cp.utag_main_ses_id"]||a)+";exp-session","_pn":o["cp.utag_main__pn"]+";exp-session"});},RDpv:function(o){if(typeof utag.pagevars=="function"){utag.DB("Read page variables");utag.pagevars(o);}},RD:function(o,a){utag.DB("utag.loader.RD");utag.DB(o);utag.loader.RDcp(o);if(!utag.loader.rd_flag){utag.loader.rd_flag=1;o["cp.utag_main_v_id"]=o["cp.utag_main_v_id"]||utag.ut.vi((new Date()).getTime());o["cp.utag_main__pn"]=(1+parseInt(o["cp.utag_main__pn"]||0))+"";utag.loader.SC("utag_main",{"v_id":o["cp.utag_main_v_id"]});utag.loader.RDses(o);}
if(a&&!utag.cfg.noview)utag.loader.RDses(o);utag.loader.RDqp(o);utag.loader.RDmeta(o);utag.loader.RDdom(o);utag.loader.RDut(o,a||"view");utag.loader.RDpv(o);utag.loader.RDva(o);},RC:function(a,x,b,c,d,e,f,g,h,i,j,k,l,m,n,o,v,ck,cv,r,s,t){o={};b=(""+document.cookie!="")?(document.cookie).split("; "):[];r=/^(.*?)=(.*)$/;s=/^(.*);exp-(.*)$/;t=(new Date()).getTime();for(c=0;c<b.length;c++){if(b[c].match(r)){ck=RegExp.$1;cv=RegExp.$2;}
e=utag.ut.decode(cv);if(typeof ck!="undefined"){if(ck.indexOf("ulog")==0||ck.indexOf("utag_")==0){e=cv.split("$");g=[];j={};for(f=0;f<e.length;f++){try{g=e[f].split(":");if(g.length>2){g[1]=g.slice(1).join(":");}
v="";if((""+g[1]).indexOf("~")==0){h=g[1].substring(1).split("|");for(i=0;i<h.length;i++)h[i]=utag.ut.decode(h[i]);v=h}else v=utag.ut.decode(g[1]);j[g[0]]=v;}catch(er){utag.DB(er)};}
o[ck]={};for(f in utag.loader.GV(j)){if(j[f]instanceof Array){n=[];for(m=0;m<j[f].length;m++){if(j[f][m].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);if(k>t)n[m]=(x==0)?j[f][m]:RegExp.$1;}}
j[f]=n.join("|");}else{j[f]=""+j[f];if(j[f].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);j[f]=(k<t)?null:(x==0?j[f]:RegExp.$1);}}
if(j[f])o[ck][f]=j[f];}}else if(utag.cl[ck]||utag.cl['_all_']){o[ck]=e}}}
return(a)?(o[a]?o[a]:{}):o;},SC:function(a,b,c,d,e,f,g,h,i,j,k,x,v){if(!a)return 0;if(a=="utag_main"&&utag.cfg.nocookie)return 0;v="";var date=new Date();var exp=new Date();exp.setTime(date.getTime()+(365*24*60*60*1000));x=exp.toGMTString();if(c&&c=="da"){x="Thu, 31 Dec 2009 00:00:00 GMT";}else if(a.indexOf("utag_")!=0&&a.indexOf("ulog")!=0){if(typeof b!="object"){v=b}}else{d=utag.loader.RC(a,0);for(e in utag.loader.GV(b)){f=""+b[e];if(f.match(/^(.*);exp-(\d+)(\w)$/)){g=date.getTime()+parseInt(RegExp.$2)*((RegExp.$3=="h")?3600000:86400000);if(RegExp.$3=="u")g=parseInt(RegExp.$2);f=RegExp.$1+";exp-"+g;}
if(c=="i"){if(d[e]==null)d[e]=f;}else if(c=="d")delete d[e];else if(c=="a")d[e]=(d[e]!=null)?(f-0)+(d[e]-0):f;else if(c=="ap"||c=="au"){if(d[e]==null)d[e]=f;else{if(d[e].indexOf("|")>0){d[e]=d[e].split("|")}
g=(d[e]instanceof Array)?d[e]:[d[e]];g.push(f);if(c=="au"){h={};k={};for(i=0;i<g.length;i++){if(g[i].match(/^(.*);exp-(.*)$/)){j=RegExp.$1;}
if(typeof k[j]=="undefined"){k[j]=1;h[g[i]]=1;}}
g=[];for(i in utag.loader.GV(h)){g.push(i);}}
d[e]=g}}else d[e]=f;}
h=new Array();for(g in utag.loader.GV(d)){if(d[g]instanceof Array){for(c=0;c<d[g].length;c++){d[g][c]=encodeURIComponent(d[g][c])}
h.push(g+":~"+d[g].join("|"))}else h.push((g+":").replace(/[\,\$\;\?]/g,"")+encodeURIComponent(d[g]))}
if(h.length==0){h.push("");x=""}
v=(h.join("$"));}
document.cookie=a+"="+v+";path=/;domain="+utag.cfg.domain+";expires="+x;return 1},LOAD:function(a,b,c,d){if(!utag.loader.cfg){return}
if(this.ol==0){if(utag.loader.cfg[a].block&&utag.loader.cfg[a].cbf){this.f[a]=1;delete utag.loader.bq[a];}
for(b in utag.loader.GV(utag.loader.bq)){if(utag.loader.cfg[a].load==4&&utag.loader.cfg[a].wait==0){utag.loader.bk[a]=1;utag.DB("blocked: "+a);}
utag.DB("blocking: "+b);return;}
utag.loader.INIT();return;}
utag.DB('utag.loader.LOAD:'+a);if(this.f[a]==0){this.f[a]=1;if(utag.cfg.noview!=true){if(utag.loader.cfg[a].send){utag.DB("SENDING: "+a);try{if(utag.loader.sendq.pending>0&&utag.loader.sendq[a]){utag.DB("utag.loader.LOAD:sendq: "+a);while(d=utag.loader.sendq[a].shift()){utag.DB(d);utag.sender[a].send(d.event,utag.handler.C(d.data));utag.loader.sendq.pending--;}}else{utag.sender[a].send('view',utag.handler.C(utag.data));}
utag.rpt['s_'+a]=0;}catch(e){utag.DB(e);utag.rpt['s_'+a]=1;}}}
if(utag.loader.rf==0)return;for(b in utag.loader.GV(this.f)){if(this.f[b]==0||this.f[b]==2)return}
utag.loader.END();}},EV:function(a,b,c,d){if(b=="ready"){if(!utag.data){try{utag.cl={'_all_':1};utag.loader.initdata();utag.loader.RD(utag.data);}catch(e){utag.DB(e)};}
if((document.attachEvent||utag.cfg.dom_complete)?document.readyState==="complete":document.readyState!=="loading")setTimeout(c,1);else{utag.loader.ready_q.push(c);var RH;if(utag.loader.ready_q.length<=1){if(document.addEventListener){RH=function(){document.removeEventListener("DOMContentLoaded",RH,false);utag.loader.run_ready_q()};if(!utag.cfg.dom_complete)document.addEventListener("DOMContentLoaded",RH,false);window.addEventListener("load",utag.loader.run_ready_q,false);}else if(document.attachEvent){RH=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",RH);utag.loader.run_ready_q()}};document.attachEvent("onreadystatechange",RH);window.attachEvent("onload",utag.loader.run_ready_q);}}}}else{if(a.addEventListener){a.addEventListener(b,c,false)}else if(a.attachEvent){a.attachEvent(((d==1)?"":"on")+b,c)}}},END:function(b,c,d,e,v,w){if(this.ended){return};this.ended=1;utag.DB("loader.END");b=utag.data;if(utag.handler.base&&utag.handler.base!='*'){e=utag.handler.base.split(",");for(d=0;d<e.length;d++){if(typeof b[e[d]]!="undefined")utag.handler.df[e[d]]=b[e[d]]}}else if(utag.handler.base=='*'){utag.ut.merge(utag.handler.df,b,1);}
utag.rpt['r_0']="t";for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}
utag.rpt.ts['s']=new Date();v=utag.cfg.path;w=v.indexOf(".tiqcdn.");if(w>0&&b["cp.utag_main__ss"]==1&&!utag.cfg.no_session_count)utag.ut.loader({src:v.substring(0,v.indexOf("/ut"+"ag/")+6)+"tiqapp/ut"+"ag.v.js?a="+utag.cfg.utid+(utag.cfg.nocookie?"&nocookie=1":"&cb="+(new Date).getTime()),id:"tiqapp"})
if(utag.cfg.noview!=true)utag.handler.RE('view',b,"end");utag.handler.INIT();}},DB:function(a,b){if(utag.cfg.utagdb===false){return;}else if(typeof utag.cfg.utagdb=="undefined"){b=document.cookie+'';utag.cfg.utagdb=((b.indexOf('utagdb=true')>=0)?true:false);}
if(utag.cfg.utagdb===true){var t;if(utag.ut.typeOf(a)=="object"){t=utag.handler.C(a)}else{t=a}
utag.db_log.push(t);try{if(!utag.cfg.noconsole)console.log(t)}catch(e){}}},RP:function(a,b,c){if(typeof a!='undefined'&&typeof a.src!='undefined'&&a.src!=''){b=[];for(c in utag.loader.GV(a)){if(c!='src')b.push(c+'='+escape(a[c]))}
this.dbi.push((new Image()).src=a.src+'?utv='+utag.cfg.v+'&utid='+utag.cfg.utid+'&'+(b.join('&')))}},view:function(a,c,d){return this.track({event:'view',data:a||{},cfg:{cb:c,uids:d}})},link:function(a,c,d){return this.track({event:'link',data:a||{},cfg:{cb:c,uids:d}})},track:function(a,b,c,d,e){a=a||{};if(typeof a=="string"){a={event:a,data:b||{},cfg:{cb:c,uids:d}}}
for(e in utag.loader.GV(utag.o)){utag.o[e].handler.trigger(a.event||"view",a.data||a,a.cfg||{cb:b,uids:c})}
a.cfg=a.cfg||{cb:b};if(typeof a.cfg.cb=="function")a.cfg.cb();return true},handler:{base:"",df:{},o:{},send:{},iflag:0,INIT:function(a,b,c){utag.DB('utag.handler.INIT');if(utag.initcatch){utag.initcatch=0;return}
this.iflag=1;a=utag.loader.q.length;if(a>0){utag.DB("Loader queue");for(b=0;b<a;b++){c=utag.loader.q[b];utag.handler.trigger(c.a,c.b,c.c)}}
},test:function(){return 1},LR:function(b){utag.DB("Load Rules");for(var d in utag.loader.GV(utag.cond)){utag.cond[d]=false;}
utag.DB(b);utag.loader.loadrules(b);utag.DB(utag.cond);utag.loader.initcfg();utag.loader.OU();for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}},RE:function(a,b,c,d,e,f,g){if(c!="alr"&&!this.cfg_extend){return 0;}
utag.DB("RE: "+c);if(c=="alr")utag.DB("All Tags EXTENSIONS");utag.DB(b);if(typeof this.extend!="undefined"){g=0;for(d=0;d<this.extend.length;d++){try{e=0;if(typeof this.cfg_extend!="undefined"){f=this.cfg_extend[d];if(typeof f.count=="undefined")f.count=0;if(f[a]==0||(f.once==1&&f.count>0)||f[c]==0){e=1}else{if(f[c]==1){g=1};f.count++}}
if(e!=1){this.extend[d](a,b);utag.rpt['ex_'+d]=0}}catch(er){utag.DB(er);utag.rpt['ex_'+d]=1;utag.ut.error({e:er.message,s:utag.cfg.path+'utag.js',l:d,t:'ge'});}}
utag.DB(b);return g;}},trigger:function(a,b,c,d,e,f){utag.DB('trigger:'+a+(c&&c.uids?":"+c.uids.join(","):""));b=b||{};utag.DB(b);if(!this.iflag){utag.DB("trigger:called before tags loaded");for(d in utag.loader.f){if(!(utag.loader.f[d]===1))utag.DB('Tag '+d+' did not LOAD')}
utag.loader.q.push({a:a,b:utag.handler.C(b),c:c});return;}
utag.ut.merge(b,this.df,0);utag.loader.RD(b,a);utag.cfg.noview=false;function sendTag(a,b,d){try{if(typeof utag.sender[d]!="undefined"){utag.DB("SENDING: "+d);utag.sender[d].send(a,utag.handler.C(b));utag.rpt['s_'+d]=0;}else if(utag.loader.cfg[d].load!=2){utag.loader.sendq[d]=utag.loader.sendq[d]||[];utag.loader.sendq[d].push({"event":a,"data":utag.handler.C(b)});utag.loader.sendq.pending++;utag.loader.AS({id:d,load:1});}}catch(e){utag.DB(e)}}
if(c&&c.uids){this.RE(a,b,"alr");for(f=0;f<c.uids.length;f++){d=c.uids[f];if(!utag.loader.OU(utag.loader.cfg[d].tid)){sendTag(a,b,d);}}}else if(utag.cfg.load_rules_ajax){this.RE(a,b,"blr");this.LR(b);this.RE(a,b,"alr");for(f=0;f<utag.loader.cfgsort.length;f++){d=utag.loader.cfgsort[f];if(utag.loader.cfg[d].load&&utag.loader.cfg[d].send){sendTag(a,b,d);}}}else{this.RE(a,b,"alr");for(d in utag.loader.GV(utag.sender)){sendTag(a,b,d);}}
this.RE(a,b,"end");},C:function(a,b,c){b={};for(c in utag.loader.GV(a)){if(a[c]instanceof Array){b[c]=a[c].slice(0)}else{b[c]=a[c]}}
return b}},ut:{pad:function(a,b,c,d){a=""+((a-0).toString(16));d='';if(b>a.length){for(c=0;c<(b-a.length);c++){d+='0'}}return""+d+a},vi:function(t,a,b){if(!utag.v_id){a=this.pad(t,12);b=""+Math.random();a+=this.pad(b.substring(2,b.length),16);try{a+=this.pad((navigator.plugins.length?navigator.plugins.length:0),2);a+=this.pad(navigator.userAgent.length,3);a+=this.pad(document.URL.length,4);a+=this.pad(navigator.appVersion.length,3);a+=this.pad(screen.width+screen.height+parseInt((screen.colorDepth)?screen.colorDepth:screen.pixelDepth),5)}catch(e){utag.DB(e);a+="12345"};utag.v_id=a;}
return utag.v_id},hasOwn:function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a)},isEmptyObject:function(o,a){for(a in o){if(utag.ut.hasOwn(o,a))return false}
return true},isEmpty:function(o){var t=utag.ut.typeOf(o);if(t=="number"){return isNaN(o)}else if(t=="boolean"){return false}else if(t=="string"){return o.length===0}else return utag.ut.isEmptyObject(o)},typeOf:function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},flatten:function(o){var a={};function r(c,p){if(Object(c)!==c||c instanceof Array){a[p]=c;}else{if(utag.ut.isEmptyObject(c)){}else{for(var d in c){r(c[d],p?p+"."+d:d);}}}}
r(o,"");return a;},merge:function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d]}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined")a[d]=b[d]}}},decode:function(a,b){b="";try{b=decodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=unescape(a)};return b},encode:function(a,b){b="";try{b=encodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=escape(a)};return b},error:function(a,b,c){if(typeof utag_err!="undefined"){utag_err.push(a)}},loader:function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){m.parentNode.removeChild(m);}
b=a.createElement("iframe");o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}
if(o.id){b.id=o.id};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l])}
b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}
if(typeof o.error=="function"){utag.loader.EV(b,"error",o.error);}
if(o.type!="img"){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}}};utag.o['unitedairlines.united-v3']=utag;utag.cfg={template:"ut4.46.",load_rules_ajax:true,load_rules_at_wait:false,lowerqp:false,noconsole:false,session_timeout:1800000,readywait:0,noload:0,domain:utag.loader.lh(),datasource:"##UTDATASOURCE##".replace("##"+"UTDATASOURCE##",""),path:"//tags.tiqcdn.com/utag/unitedairlines/united-v3/prod/",utid:"unitedairlines/united-v3/202311300408"};utag.cfg.v=utag.cfg.template+"202311300408";utag.cond={10:0,14:0,16:0,17:0,18:0,21:0,22:0,26:0,29:0,30:0,32:0,36:0,37:0,39:0,40:0,41:0,42:0,43:0,45:0,46:0,48:0,49:0,50:0};utag.loader.initdata=function(){try{utag.data=(typeof utag_data!='undefined')?utag_data:{};utag.udoname='utag_data';}catch(e){utag.data={};utag.DB('idf:'+e);}};utag.loader.loadrules=function(_pd,_pc){var d=_pd||utag.data;var c=_pc||utag.cond;for(var l in utag.loader.GV(c)){switch(l){case'10':try{c[10]|=(/(\/ti(\/|\b))/.test(d['dom.pathname'])&&d['ut.event'].toString().toLowerCase()=='view'.toLowerCase())}catch(e){utag.DB(e)};break;case'14':try{c[14]|=(d['IE_version']=='-1')||(parseFloat(d['IE_version'])>=parseFloat(9))}catch(e){utag.DB(e)};break;case'16':try{c[16]|=(d['dom.url'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'17':try{c[17]|=(d['dom.domain'].toString().toLowerCase()=='qa9.united.com'.toLowerCase())||(d['dom.domain'].toString().toLowerCase()=='preprod.united.com'.toLowerCase())||(d['dom.domain'].toString().toLowerCase()=='www.united.com'.toLowerCase())||(d['dom.domain'].toString().toLowerCase()=='dev26.united.com'.toLowerCase())||(d['dom.domain'].toString().toLowerCase()=='dev25.united.com'.toLowerCase())}catch(e){utag.DB(e)};break;case'18':try{c[18]|=(/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(d['dom.pathname']))}catch(e){utag.DB(e)};break;case'21':try{c[21]|=(/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(d['dom.pathname'])&&d['flight_segment_index']=='1'&&d['tealium_event']=='Recent Searches')}catch(e){utag.DB(e)};break;case'22':try{c[22]|=(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='US'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='CA'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='JP'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['product_impression_position'].toString().toLowerCase()=='IN'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='PH'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='GU'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='TW'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='MP'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='MX'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='BR'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='PA'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='PR'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='PE'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='GT'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='EC'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='CL'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='GB'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='AU'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='SG'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='FR'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='IS'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='CZ'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='AR'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='IL'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='NZ'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='IT'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='PT'.toLowerCase())||(typeof d['point_of_sale']!='undefined'&&d['point_of_sale'].toString().toLowerCase()=='CR'.toLowerCase())}catch(e){utag.DB(e)};break;case'26':try{c[26]|=(/^(.*\/en\/us\/fsr\/choose-flights\/?)$/ig.test(d['dom.pathname'])&&d['flight_segment_index']=='1'&&d['tealium_event']=='Result Load')}catch(e){utag.DB(e)};break;case'29':try{c[29]|=(/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(d['dom.pathname'])&&d['flight_segment_index']=='1'&&d['tealium_event']=='Result Load')}catch(e){utag.DB(e)};break;case'30':try{c[30]|=(/\/en-us\/flights-to-washington$/i.test(d['dom.pathname']))||(/\/en-us\/flights-from-washington-to-myrtle-beach$/i.test(d['dom.pathname']))||(/\/en-us\/flights-from-washington-to-milwaukee$/i.test(d['dom.pathname']))||(/\/en-us\/flights-from-milwaukee-to-washington$/i.test(d['dom.pathname']))}catch(e){utag.DB(e)};break;case'32':try{c[32]|=(/^(.*\/en\/us\/fsr\/choose-flights\/?)$/ig.test(d['dom.pathname'])&&d['dom.query_string'].toString().toLowerCase().indexOf('rsid'.toLowerCase())<0)||(/^(.*\/en\/us\/traveler\/choose-travelers\/?)$/ig.test(d['dom.pathname'])&&d['dom.query_string'].toString().toLowerCase().indexOf('rsid'.toLowerCase())<0)||(/^(.*\/en\/us\/book-flight\/seatmap\/?)/ig.test(d['dom.pathname'])&&d['dom.query_string'].toString().toLowerCase().indexOf('rsid'.toLowerCase())<0)||(/^(.*\/en\/us\/book-flight\/checkout\/?)/ig.test(d['dom.pathname'])&&d['dom.query_string'].toString().toLowerCase().indexOf('rsid'.toLowerCase())<0)||(/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(d['dom.pathname']))}catch(e){utag.DB(e)};break;case'36':try{c[36]|=(d['dom.pathname'].toString().toLowerCase().indexOf('/traveler/choose-travelers'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'37':try{c[37]|=(/^(.*\/.*\/.*\/book-flight\/checkout\/?)/ig.test(d['dom.pathname']))}catch(e){utag.DB(e)};break;case'39':try{c[39]|=(/(^(.*\/.*\/book-flight\/united-award-travel)$)/ig.test(d['dom.pathname']))}catch(e){utag.DB(e)};break;case'40':try{c[40]|=(/^(\/en-[a-z]{2}\/flights-to-tenerife)$/ig.test(d['dom.pathname']))}catch(e){utag.DB(e)};break;case'41':try{c[41]|=(d['dom.domain'].toString().indexOf('united.com')>-1&&d['dom.pathname']=='/en-us/flights-to-new-york'&&d['ut.event']=='view')||(d['dom.domain'].toString().indexOf('united.com')>-1&&d['dom.pathname']=='/en-gb/flights-to-new-york'&&d['ut.event']=='view')}catch(e){utag.DB(e)};break;case'42':try{c[42]|=(/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(d['dom.pathname']))}catch(e){utag.DB(e)};break;case'43':try{c[43]|=(d['tealium_event']=='Ticket Purchases')}catch(e){utag.DB(e)};break;case'45':try{c[45]|=(d['dom.pathname'].toString().toLowerCase().indexOf('/account/enroll/'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'46':try{c[46]|=(d['dom.pathname'].toString().toLowerCase().indexOf('/en/us'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'48':try{c[48]|=(/(^(.*\/.*\/manageres\/tripdetails\/?)$)/ig.test(d['dom.pathname'])&&d['tealium_event']=='view')}catch(e){utag.DB(e)};break;case'49':try{c[49]|=(/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(d['dom.domain'])&&d['tealium_event']=='Ticket Purchases')}catch(e){utag.DB(e)};break;case'50':try{c[50]|=(/^(.*\/.*\/traveler\/choose-travelers\/?)$/ig.test(d['dom.pathname'])&&d['tealium_event']=='view')}catch(e){utag.DB(e)};break;}}};utag.pre=function(){utag.loader.initdata();try{utag.loader.RD(utag.data)}catch(e){utag.DB(e)};utag.loader.loadrules();};utag.loader.GET=function(){utag.cl={'_all_':1};utag.pre();utag.handler.extend=[function(a,b){try{if(1){try{b['point_of_sale']=Bootstrapper.getPOSFromURL()}catch(e){};try{b['lang_code']=Bootstrapper.getLanguageFromURL()}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[38]=='undefined'){utag.runonce.ext[38]=1;if(1){var CONST_TAG_NAME="Digital 3.0 - Error handler - Production";var CONST_EC_USER_ERROR="User Error";var CONST_EC_AJAX_ERROR="AJAX Error";var ajaxErrorData=[];Bootstrapper.handleAjaxError=function(errorData){var methodName="Bootstrapper.handleAjaxError";var requirementName="Handle Ajax errors";try{if(errorData&&errorData.desc){var eventAction=getAjaxErrorStatus(errorData.desc);var eventLabel=createEventlabel(errorData.desc);ajaxErrorData=getAjaxErrorData(eventAction,eventLabel);}else{var ds="data object for ajax error";var iv="errorData.desc is not defined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,err.message,err,ds,iv,methodName);}}catch(error){var datasource="data object for ajax error";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,datasource,inputValue,methodName);}return ajaxErrorData;};Bootstrapper.handleAjaxErrorCallback=function(data){var methodName="handleAjaxErrorCallback";var requirementName="handle Ajax Error Callback that has data.params.info Object";try{if(data.params&&data.params.info){var info=data.params.info;var eventAction=getAjaxErrorStatus(info);var eventLabel=createEventlabel(info);ajaxErrorData=getAjaxErrorData(eventAction,eventLabel);}
else{var ds="data object for ajax error";var iv="data.params.info is not defined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,err.message,err,ds,iv,methodName);}}catch(error){var datasource="data object for ajax error";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,datasource,inputValue,methodName);}
return ajaxErrorData;};function getAjaxErrorData(eventAction,eventLabel){var methodName="getAjaxErrorData";var requirementName="get GA event data for AJAX error";try{var ajaxErrorDetails={};ajaxErrorDetails.tealiumEvent=eventAction;ajaxErrorDetails.eventCategory=CONST_EC_AJAX_ERROR;ajaxErrorDetails.eventAction=eventAction;ajaxErrorDetails.eventLabel=JSON.stringify(eventLabel);ajaxErrorDetails.eventValue='1';ajaxErrorDetails.noninteraction='1';ajaxErrorData.push(ajaxErrorDetails);}catch(error){var ds="data object for ajax error";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return ajaxErrorData;};var getAjaxErrorStatus=function(data){var methodName="Bootstrapper.getAjaxErrorStatus";var requirementName="Get Ajax Error status code";var statusCode='--';try{statusCode=data.statusCode;if(typeof statusCode=="number"){statusCode=statusCode.toString();}}catch(error){var ds="data object for ajax error";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return statusCode;};var createEventlabel=function(data){var methodName="Bootstrapper.createEventlabel";var requirementName="Create Ajax error event label";var errorData={};try{var thrownError=data.thrownError;var errorID="--";var errorDetail="--";var statusText=thrownError.response&&thrownError.response.statusText?thrownError.response.statusText:"--";if(thrownError.response&&thrownError.response.data&&thrownError.response.data.errors&&thrownError.response.data.errors[0]&&thrownError.response.data.errors[0].id){errorID=thrownError.response.data.errors[0].id;}
if(thrownError.response&&thrownError.response.data&&thrownError.response.data.errors&&thrownError.response.data.errors[0]&&thrownError.response.data.errors[0].detail){errorDetail=thrownError.response.data.errors[0].detail;}
errorData={"requestUrl":data.requestUrl?data.requestUrl:"--","errorID":errorID,"errorDetail":errorDetail,"thrownError":statusText};}catch(error){var ds="data object for ajax error";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return errorData;};Bootstrapper.userErrorGAcall=function(data){var methodName="Bootstrapper.validationError";var requirementName="Send user error GA call";var errorObjects=[];try{if(data.desc&&data.desc.errorData){var errorObj={};errorObj.eventCategory=CONST_EC_USER_ERROR;errorObj.eventValue='1';var errorData=data.desc.errorData;if(typeof errorData=="string"){errorObj.eventAction=errorData;errorObj.eventLabel=document.title;errorObj.tealiumEvent=errorObj.eventAction;errorObjects.push(errorObj);}else if(Array.isArray(errorData)){for(var i=0;i<errorData.length;i++){var errorObject={};errorObject.eventCategory=CONST_EC_USER_ERROR
errorObject.eventValue='1';errorObject.eventAction=data.desc.formName?data.desc.formName:JSON.stringify(errorData[i]);var field=errorData[i].field?errorData[i].field:"--";var errMessage=errorData[i].message?errorData[i].message:"--";errorObject.eventLabel=field!=="--"&&errMessage!=="--"?[field,errMessage].join("|"):document.title;errorObject.tealiumEvent=errorObj.eventAction;errorObjects.push(errorObject);}}else if(typeof errorData=="object"&&!Array.isArray(errorData)&&data.desc.formName){errorObj.eventAction=data.desc.formName;var fieldName=errorData.field?errorData.field:"--";var message=errorData.message?errorData.message:"--";errorObj.eventLabel=fieldName+"|"+message;errorObj.tealiumEvent=errorObj.eventAction;errorObjects.push(errorObj);}}}catch(error){var ds="data object for ajax error";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return errorObjects;};Bootstrapper.handleUserError=function(data){var methodName="handleUserError";var requirementName="handle user error when data object is data.param.info";var userErrorObjects=[];try{if(data.params&&data.params.info){var errorObj={};var info=data.params.info;errorObj.eventCategory=CONST_EC_USER_ERROR;if(info.formName){errorObj.eventAction=info.formName;var field=info.errorData.field?info.errorData.field:"--";var message=info.errorData.message?info.errorData.message:"--";errorObj.eventLabel=[field,message].join("|");errorObj.eventValue='1';userErrorObjects.push(errorObj);}}}catch(error){var ds="data object for ajax error";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return userErrorObjects;};}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){try{b['IE_version']=Bootstrapper.getInternetExplorerVersion()}catch(e){};try{b['is_mobile_browser']=Bootstrapper.isMobileBrowser()}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[26]=='undefined'){utag.runonce.ext[26]=1;if(/(^(\/.*\/.*\/?)$)/.test(b['dom.pathname'])){var CONST_TAGNAME='Digital 3.0 - Trigger Page Change to Ensighten';var myAccountLandingPagePathNameRegex='^(\/[^\/]*\/[^\/]*\/account\/?$)';var tiPagePathNameRegex='(/ti(/|\b))';var requirementName='Notify page Change to Ensighten';Bootstrapper.notifyPageChangeToEnsighten=function(data){var methodName='notifyPageChangeToEnsighten';try{if(window.location.pathname.match(myAccountLandingPagePathNameRegex)){}else if(window.location.pathname.match(tiPagePathNameRegex)){}}catch(error){var ds=window.location.pathname;var inputVal=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAGNAME,inputVal,error,ds,inputVal,methodName);}};Bootstrapper.getExtraParams=function(data){if(data){return{'signInVal':data.action.toLowerCase()};}};}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[164]=='undefined'){utag.runonce.ext[164]=1;if(1){var CONST_EXTN_NAME="Facebook - Base Code";var CONST_DOUBLE_DASH="--";var tealium_data_source="amng57";Bootstrapper.tealium_data_source="amng57";utag.globals=utag.globals||{};var md5;md5=function(t,n){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r&&"function"==typeof require)try{r=require("crypto")}catch(t){}var e=function(){if(r){if("function"==typeof r.getRandomValues)
try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(n){var r;return t.prototype=n,r=new t,t.prototype=null,r}}(),o={},s=o.lib={},a=s.Base={extend:function(t){var n=i(this);return t&&n.mixIn(t),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var n=this.words,r=t.words,e=this.sigBytes,i=t.sigBytes;if(this.clamp(),e%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;n[e+o>>>2]|=s<<24-(e+o)%4*8}else for(o=0;o<i;o+=4)n[e+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var n=this.words,r=this.sigBytes;n[r>>>2]&=4294967295<<32-r%4*8,n.length=t.ceil(r/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(e());return new c.init(n,t)}}),u=o.enc={},f=u.Hex={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push((o>>>4).toString(16)),e.push((15&o).toString(16))}return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e+=2)r[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new c.init(r,n/2)}},h=u.Latin1={stringify:function(t){for(var n=t.words,r=t.sigBytes,e=[],i=0;i<r;i++){var o=n[i>>>2]>>>24-i%4*8&255;e.push(String.fromCharCode(o))}
return e.join("")},parse:function(t){for(var n=t.length,r=[],e=0;e<n;e++)r[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new c.init(r,n)}},d=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},l=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(n){var r,e=this._data,i=e.words,o=e.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=n?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*s,f=t.min(4*u,o);if(u){for(var h=0;h<u;h+=s)this._doProcessBlock(i,h);r=i.splice(0,u),e.sigBytes-=f}
return new c.init(r,f)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(s.Hasher=l.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(n,r){return new t.init(r).finalize(n)}},_createHmacHelper:function(t){return function(n,r){return new p.HMAC.init(t,r).finalize(n)}}}),o.algo={});return o}(Math);(function(t){var n=md5,r=n.lib,e=r.WordArray,i=r.Hasher,o=n.algo,s=[];!function(){for(var n=0;n<64;n++)s[n]=4294967296*t.abs(t.sin(n+1))|0}();var a=o.MD5=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(var r=0;r<16;r++){var e=n+r,i=t[e];t[e]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}
var o=this._hash.words,a=t[n+0],d=t[n+1],l=t[n+2],p=t[n+3],y=t[n+4],g=t[n+5],w=t[n+6],v=t[n+7],_=t[n+8],m=t[n+9],B=t[n+10],x=t[n+11],b=t[n+12],S=t[n+13],H=t[n+14],z=t[n+15],C=o[0],M=o[1],A=o[2],D=o[3];C=c(C,M,A,D,a,7,s[0]),D=c(D,C,M,A,d,12,s[1]),A=c(A,D,C,M,l,17,s[2]),M=c(M,A,D,C,p,22,s[3]),C=c(C,M,A,D,y,7,s[4]),D=c(D,C,M,A,g,12,s[5]),A=c(A,D,C,M,w,17,s[6]),M=c(M,A,D,C,v,22,s[7]),C=c(C,M,A,D,_,7,s[8]),D=c(D,C,M,A,m,12,s[9]),A=c(A,D,C,M,B,17,s[10]),M=c(M,A,D,C,x,22,s[11]),C=c(C,M,A,D,b,7,s[12]),D=c(D,C,M,A,S,12,s[13]),A=c(A,D,C,M,H,17,s[14]),C=u(C,M=c(M,A,D,C,z,22,s[15]),A,D,d,5,s[16]),D=u(D,C,M,A,w,9,s[17]),A=u(A,D,C,M,x,14,s[18]),M=u(M,A,D,C,a,20,s[19]),C=u(C,M,A,D,g,5,s[20]),D=u(D,C,M,A,B,9,s[21]),A=u(A,D,C,M,z,14,s[22]),M=u(M,A,D,C,y,20,s[23]),C=u(C,M,A,D,m,5,s[24]),D=u(D,C,M,A,H,9,s[25]),A=u(A,D,C,M,p,14,s[26]),M=u(M,A,D,C,_,20,s[27]),C=u(C,M,A,D,S,5,s[28]),D=u(D,C,M,A,l,9,s[29]),A=u(A,D,C,M,v,14,s[30]),C=f(C,M=u(M,A,D,C,b,20,s[31]),A,D,g,4,s[32]),D=f(D,C,M,A,_,11,s[33]),A=f(A,D,C,M,x,16,s[34]),M=f(M,A,D,C,H,23,s[35]),C=f(C,M,A,D,d,4,s[36]),D=f(D,C,M,A,y,11,s[37]),A=f(A,D,C,M,v,16,s[38]),M=f(M,A,D,C,B,23,s[39]),C=f(C,M,A,D,S,4,s[40]),D=f(D,C,M,A,a,11,s[41]),A=f(A,D,C,M,p,16,s[42]),M=f(M,A,D,C,w,23,s[43]),C=f(C,M,A,D,m,4,s[44]),D=f(D,C,M,A,b,11,s[45]),A=f(A,D,C,M,z,16,s[46]),C=h(C,M=f(M,A,D,C,l,23,s[47]),A,D,a,6,s[48]),D=h(D,C,M,A,v,10,s[49]),A=h(A,D,C,M,H,15,s[50]),M=h(M,A,D,C,g,21,s[51]),C=h(C,M,A,D,b,6,s[52]),D=h(D,C,M,A,p,10,s[53]),A=h(A,D,C,M,B,15,s[54]),M=h(M,A,D,C,d,21,s[55]),C=h(C,M,A,D,_,6,s[56]),D=h(D,C,M,A,z,10,s[57]),A=h(A,D,C,M,w,15,s[58]),M=h(M,A,D,C,S,21,s[59]),C=h(C,M,A,D,y,6,s[60]),D=h(D,C,M,A,x,10,s[61]),A=h(A,D,C,M,l,15,s[62]),M=h(M,A,D,C,m,21,s[63]),o[0]=o[0]+C|0,o[1]=o[1]+M|0,o[2]=o[2]+A|0,o[3]=o[3]+D|0},_doFinalize:function(){var n=this._data,r=n.words,e=8*this._nDataBytes,i=8*n.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(e/4294967296),s=e;r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var f=c[u];c[u]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return a},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,n,r,e,i,o,s){var a=t+(n&r|~n&e)+i+s;return(a<<o|a>>>32-o)+n}function u(t,n,r,e,i,o,s){var a=t+(n&e|r&~e)+i+s;return(a<<o|a>>>32-o)+n}function f(t,n,r,e,i,o,s){var a=t+(n^r^e)+i+s;return(a<<o|a>>>32-o)+n}function h(t,n,r,e,i,o,s){var a=t+(r^(n|~e))+i+s;return(a<<o|a>>>32-o)+n}n.MD5=i._createHelper(a),n.HmacMD5=i._createHmacHelper(a)}(Math));Bootstrapper.generateFBEventID=function(event,data,lookup_id,id){var hash_input=(data["tealium_timestamp_epoch"]||(function(){var d=new Date();return Math.floor(d.getTime()/1000);})())+"-"+lookup_id+"-"+event+"-"+id,event_id=md5.MD5(hash_input).toString();return event_id;};Bootstrapper.prepareDataForFBCAPI=function(eventName){var requirementName="Prepare Data for FB CAPI";var methodName="prepareDataForFBCAPI";var fbData={};try{var tealiumEventName="tealium_collect_fb_"+eventName.toLowerCase();utag.data.tealium_collect_event=tealiumEventName;var event_id=Bootstrapper.generateFBEventID(eventName,utag_data,utag_data.tealium_random,70);utag_data.tealium_datasource=tealium_data_source;if(utag_data&&utag_data.point_of_sale){fbData["fb_event_id_"+eventName]=event_id;fbData.tealium_collect_event=tealiumEventName;fbData.searched_origin=Bootstrapper.getSelectedTripOrigin(1);fbData.searched_destination=Bootstrapper.getSelectedTripDestination(1);fbData.departure_date=Bootstrapper.getDate(Bootstrapper.getTravelDateFromSelectedTrip(0),"-");if(Bootstrapper.getTripTypeCodes()=="RT"){fbData.search_return_date=Bootstrapper.getDate(Bootstrapper.getTravelDateFromSelectedTrip(1),"-")}
fbData.pax_count=Bootstrapper.getPaxCount();fbData.product_price=Bootstrapper.getShoppingCartTotalAmount();fbData.currency=Bootstrapper.getProductCurrencyCode();fbData._ccurrency=Bootstrapper.getProductCurrencyCode();fbData.MPAccStatusValue=Bootstrapper.getMPAccStatusValue();fbData.cabin_type=Bootstrapper.getCabinFromSelectedTrips(0);fbData.travelType=Bootstrapper.getSearchTravelType();fbData.product_days_to_departure=Bootstrapper.getNumDaysTilTravelFromSelectedTrip(1);fbData.point_of_sale=utag_data.point_of_sale;if(fbData.travelType.toLowerCase()=="award"){fbData.product_price=Bootstrapper.getProductTax();fbData.award_amount=Bootstrapper.getShoppingCartTotalAmount();}else{let isConfirmationPage=(eventName=="Purchase")||false;let paymentInfo=Bootstrapper.getPaymentsDetail(isConfirmationPage);let milesInfo;if(paymentInfo&&paymentInfo.miles){fbData.award_amount=paymentInfo.miles;}}
fbData.eid=event_id;fbData.mpbal=Bootstrapper.getMPBalance();fbData.MPAccStatus=Bootstrapper.getMPAccStatus()!="--"?Bootstrapper.getMPAccStatus():"none";fbData.mpidn=(Bootstrapper.getCurrentCustomerId()!="--")?Bootstrapper.getCurrentCustomerId():Bootstrapper.getGAClientID();fbData.userAgentInfo=Bootstrapper.getUserAgent();if(typeof Bootstrapper.getEncodedEmail==="function"&&Bootstrapper.getEncodedEmail()){fbData.encoded_email=Bootstrapper.getEncodedEmail();}
fbData.od_pair=fbData.searched_destination;}}catch(error){var dataSource="Bootsrapper.dataObject.page";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,dataSource,error.message,methodName);}
return fbData;};Bootstrapper.sendDataToFBCAPI=function(fbData){var requirementName="Send data through FB CAPI on RTI";var methodName="sendDataToFBCAPI";try{utag.link(fbData,null,[54]);if(fbData.tealium_collect_event!="tealium_collect_fb_pageview"){utag_data.tealium_collect_event='';}}catch(error){var dataSource="function argument";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,dataSource,error.message,methodName);}};Bootstrapper.prepareFBPixelURL=function(fbData,eventName){var requirementName="Prepare pixel URL for FB";var methodName="prepareFBPixelURL";var pixelURL="";try{pixelURL="//www.facebook.com/tr?id=1245757155444013&ev="+eventName;if(Bootstrapper.getTripTypeCodes()=="RT"){pixelURL+="&cd[returning_departure_date]="+fbData.search_return_date;}
pixelURL+="&cd[content_type]="+JSON.stringify(['destination']);pixelURL+="&cd[origin_airport]="+fbData.searched_origin;pixelURL+="&cd[destination_airport]="+fbData.searched_destination;pixelURL+="&cd[departing_departure_date]="+fbData.departure_date;pixelURL+="&cd[num_travelers]="+fbData.pax_count;pixelURL+="&cd[loyalty_tier]="+fbData.MPAccStatusValue;pixelURL+="&cd[travel_class]="+fbData.cabin_type;pixelURL+="&cd[currency]="+fbData.currency;pixelURL+="&cd[pos]="+fbData.point_of_sale;pixelURL+="&cd[search_type]="+fbData.travelType;let award_amount=(fbData.award_amount&&fbData.award_amount!=undefined)?fbData.award_amount:0;pixelURL+="&cd[award_amount]="+award_amount;pixelURL+="&eid="+fbData.eid;if(eventName!="Search"){pixelURL+="&cd[purchase_price]="+fbData.product_price;pixelURL+="&cd[value]="+fbData.product_price;}
pixelURL+="&cd[mpbal]="+fbData.mpbal;pixelURL+="&cd[mplvl]="+fbData.MPAccStatus;pixelURL+="&cd[mpidn]="+fbData.mpidn;if(fbData.encoded_email){pixelURL+="&cd[em]="+fbData.encoded_email;}
pixelURL+="&cd[content_ids]="+fbData.od_pair;}catch(error){var dataSource="function argument";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,dataSource,error.message,methodName);}
return pixelURL;};Bootstrapper.sendFBPixelAndCAPI=function(eventName){var methodName="sendFBPixelAndCAPI";var requirementName="Prepare send data for Facebook pixel and CAPI";try{if(utag_data&&utag_data.point_of_sale){var pos=utag_data.point_of_sale;var posList={US:!0,GB:!0,JP:!0,AU:!0,HK:!0};if(posList[pos]){var fbData=Bootstrapper.prepareDataForFBCAPI(eventName);if(fbData){var pixelURL=Bootstrapper.prepareFBPixelURL(fbData,eventName);Bootstrapper.imageRequest(pixelURL);Bootstrapper.sendDataToFBCAPI(fbData);if(typeof Bootstrapper.pixelAuditBookingPath==="function"){Bootstrapper.pixelAuditBookingPath("Facebook");}}}}}catch(error){var ds="utag data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}};Bootstrapper.sendFBPageView=function(pixelId){var requirementName="Send FB Pageview";var methodName="sendFBPageView";try{var fbData={};var eventName="PageView";var pixelURL="https://www.facebook.com/tr?id="+pixelId+"&ev="+eventName;var tealiumEventName="tealium_collect_fb_"+eventName.toLowerCase();utag.data.tealium_collect_event=tealiumEventName;utag.data.tealium_event=tealiumEventName;utag_data.tealium_datasource=tealium_data_source;var event_id=Bootstrapper.generateFBEventID(eventName,utag_data,utag_data.tealium_random,70);fbData["fb_event_id_"+eventName]=event_id;fbData.tealium_collect_event=tealiumEventName;fbData.eid=event_id;pixelURL+="&eid="+fbData.eid;Bootstrapper.imageRequest(pixelURL);}catch(error){var ds="fB Page view call";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}};Bootstrapper.triggerFBPageView=function(pixelId){var requirementName="Send FB Pageview";var methodName="triggerFBPageView";try{var fbData={};var eventName="PageView";var pixelURL="https://www.facebook.com/tr?id="+pixelId+"&ev="+eventName;var tealiumEventName="tealium_collect_fb_"+eventName.toLowerCase();utag.data.tealium_collect_event=tealiumEventName;utag.data.tealium_event=tealiumEventName;utag_data.tealium_datasource=tealium_data_source;var event_id=Bootstrapper.generateFBEventID(eventName,utag_data,utag_data.tealium_random,70);fbData["fb_event_id_"+eventName]=event_id;fbData.tealium_collect_event=tealiumEventName;fbData.eid=event_id;pixelURL+="&eid="+fbData.eid;Bootstrapper.imageRequest(pixelURL);}catch(error){var ds="fB Page view call";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}};}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[6]=='undefined'){utag.runonce.ext[6]=1;if((b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&/(^(.*\/manageres\/tripdetails\/?)$)/ig.test(b['dom.pathname']))){var CONST_TAGNAME="Trip Details Interactions - Prod";var CONST_EC_VIEWRES="View Reservation";var CONST_PIPE_SEPARATOR="|";var optimizelyCampaignDetails={};var CONST_KEY_CAMPAIGN_NAME="campaignName";var CONST_KEY_CAMPAIGN_VARIANT="variant";addClickListener();function addClickListener(){var methodName="addClickListener";var requirementName="Add click listener to body element of document";try{document.body.addEventListener("click",function(event){setTimeout(function(){handleNavigationClicks(event);},200);});}catch(error){var inputSource={"data_source":"DOM"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}}
function handleNavigationClicks(event){var methodName="handleNavigationClicks";var requirementName="Track user clicks on Trip details page";var eventAction,eventLabel;try{if(event&&event.target){if(event.target.id&&event.target.id=="insuranceButton"){eventAction="Clicked on Button: Total premium";sendGAEvent(CONST_EC_VIEWRES,eventAction,eventLabel);}else if(event.target.textContent){var text=event.target.textContent;if(text=="Learn more"){handleClicksBasedOnClassNames(event);}else if(text=="Save to My Account"||text=="Save to My trips"||text=="Share itinerary"||text=="Print trip"||text=="Add to calendar"||text=="Inflight purchases"||text=="View ticket receipt"||text=="See hotel deals"||text=="Get a quote"){eventAction="Clicked on Button: "+text;sendGAEvent(CONST_EC_VIEWRES,eventAction,eventLabel);}else{text=getAccordionText(event.target,text);handleClickByTitle(text,event);}}else if(event.target.className){handleClicksBasedOnClassNames(event);}}}catch(error){var ds="Event object";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,inputValue,error,ds,inputValue,methodName);}}
function handleClicksBasedOnClassNames(event,className){var methodName="handleClicksBasedOnClassNames";var requirementName="Process clicks by ClassNames";var CONST_CSS_ARROW="atm-c-accordion-panel__icon";var CONST_CSS_GRID="atm-c-accordion-panel__button";var CONST_QUERY_SELECTOR_PRIMARY_OFFER="app-components-MerchAds-SingleLineOffer-styles";try{if(getParentNodebyClassName(event.target,CONST_CSS_ARROW)){var title=getAccordionTitle(event.target,CONST_CSS_GRID);handleClickByTitle(title,event);}}catch(error){var ds="Event object";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,inputValue,error,ds,inputValue,methodName);}}
function sendGAEvent(eventCategory,eventAction,eventLabel){try{var analyticUtagData={};if(eventCategory&&eventAction){analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory=eventCategory;analyticUtagData.eventAction=eventAction;if(eventLabel){analyticUtagData.eventLabel=eventLabel;}
Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}}catch(error){Bootstrapper.reportException(error);}}
function fetchAccordionState(event){var methodName="fetchAccordionState";var requirementName="Get state of selected Accordion";var accordionState="Collapsed";var CONST_CSS_ATTR_EXPANDED="aria-expanded";var CONST_ID_ACCORDION_TITLE="accordion__title";try{var node=event.target;var nextParentNode;if(node){nextParentNode=getParentNode(node);if(nextParentNode){var attrExpand=nextParentNode.getAttribute(CONST_CSS_ATTR_EXPANDED);accordionState=(attrExpand&&attrExpand=="true")?"Expanded":"Collapsed";}}}catch(error){var inputSource={"data_source":"Event object","input_value":JSON.stringify(event)};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}
return accordionState;}
function getParentNode(node){var methodName="getParentNode";var requirementName="fetch parent node of clicked element";var parentNode=null;try{while(node.parentNode){if(node.id){parentNode=node;break;}
node=node.parentNode;}}catch(error){var inputSource={"data_source":"Node Object","input_value":node+" id "+eleId};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}
return parentNode;}
function getParentNodebyClassName(node,className){var methodName="getParentNodebyClassName";var requirementName="fetch parent node of clicked element by getParentNodebyClassName";var parentNode=null;try{while(node){if(node.getAttribute&&node.getAttribute('class')&&node.getAttribute('class').indexOf(className)>-1){parentNode=node;break;}
node=node.parentNode;}}catch(error){var inputSource={"data_source":"Node Object","input_value":node+" className "+className};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}
return parentNode;}
function getAccordionTitle(node,eleClass){var methodName="getAccordionTitle";var requirementName="Fetch title of Accordion";var title;try{var parentNode=getParentNodebyClassName(node,eleClass);if(parentNode){title=getAccordionText(parentNode,parentNode.textContent);}}catch(error){var inputSource={"data_source":"Node Object","input_value":node+" id "+eleClass};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}
return title;}
function getAccordionText(nodes,title){var methodName="getAccordionText";var requirementName="Fetch Text of Accordion";var text=title;try{var node=nodes;if(nodes.nodeName=="BUTTON"){node=nodes.querySelector('h3 > div')||nodes.querySelector('h3');}
if(node){var childNodes=node.childNodes;for(var i=0;i<childNodes.length;i++){if(childNodes[i].nodeName=='#text'){text=childNodes[i].nodeValue;break;}}}}catch(error){var ds="Node Object",iv=nodes;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,iv,methodName);}
return text;}
function processFaqClick(text,event){var methodName="processFaqClick";var requirementName="Handle clicks of FAQs section";try{var accordionState=fetchAccordionState(event);var eventAction="Clicked on: FAQ";var eventLabel=text+CONST_PIPE_SEPARATOR+accordionState;sendGAEvent(CONST_EC_VIEWRES,eventAction,eventLabel);}catch(error){var inputSource={"data_source":"event Object","input_value":event};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}}
function processBagsClick(text,event){var methodName="processBagsClick";var requirementName="Handle clicks of Bags section";try{var accordionState=fetchAccordionState(event);var eventAction="Clicked on: Bags";var eventLabel=text+CONST_PIPE_SEPARATOR+accordionState;sendGAEvent(CONST_EC_VIEWRES,eventAction,eventLabel);}catch(error){var inputSource={"data_source":"event Object","input_value":event};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}}
function processSpecialReqs(text,event){var methodName="processSpecialReqs";var requirementName="Handle clicks of Special Requests & accomodations section";try{var accordionState=fetchAccordionState(event);var eventAction="Clicked on: "+text;var eventLabel=text+CONST_PIPE_SEPARATOR+accordionState;sendGAEvent(CONST_EC_VIEWRES,eventAction,eventLabel);}catch(error){var inputSource={"data_source":"event Object","input_value":event};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}}
function handleClickByTitle(title,event){var methodName="handleClickByTitle";var requirementName="Handle clicks by title";var SPECIAL_ACCOMMODATION="Special accommodations";var SPECIAL_MEALS="Special meals";try{switch(title){case"Special meals":case"Special accommodations":processSpecialReqs(title,event);break;case"Carry-on bags":case"Checked bags":processBagsClick(title,event);break;case"How can I change my flight, and how much does it cost?":case"Can I make a same-day change with a discounted change fee?":case"What can I do if my flight is delayed or canceled?":processFaqClick(title,event);break;}}catch(error){var inputSource={"data_source":"event Object","input_value":event};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_TAGNAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}}
Bootstrapper.handleManageResInteractionsForOptimizely=function(data,campaignDetails){var methodName="handleManageResInteractionsForOptimizely";var requirementName="Process interactions on Manage Res page";var ds="Data object recieved in callback";var inputValue="data.detail.params.info";var manageResObjects=[];try{optimizelyCampaignDetails=campaignDetails;if(Bootstrapper.dataObject.isLocaleEn(requirementName)&&Bootstrapper.dataObject.isManageResPage()){if(data.detail&&data.detail.action){var campaignInfo=getCampaignData();var manageRes={};var action=data.detail.action;manageRes.tealiumEvent=action;manageRes.eventCategory=CONST_EC_VIEWRES;manageRes.eventAction=action;manageRes.eventLabel=campaignInfo;manageResObjects.push(manageRes);}}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return manageResObjects;};function fetchOfferTitle(cssSelector){var methodName="fetchOfferTitle";var requirementName="Fetch text of Offer tile of specified queryselector";var offerTitle;try{var offerTitleEle=document.querySelector(cssSelector);if(offerTitleEle){offerTitle=offerTitleEle.textContent;}}catch(error){var ds="DOM: "+cssSelector;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,"undefined",methodName);}
return offerTitle;}
function fetchOfferButtonTitle(cssSelector){var methodName="fetchOfferButtonTitle";var requirementName="Fetch text of button of specified queryselector";var offerBtnText;try{var offerButton=document.querySelector(cssSelector);if(offerButton){offerBtnText="Clicked: "+offerButton.textContent;}}catch(error){var ds="DOM: "+cssSelector;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,"undefined",methodName);}
return offerBtnText;}
function fetchSecondaryOfferTextVal(target){var methodName="fetchSecondaryOfferBtnVal";var requirementName="Fetch secondary offer value from DOM";var CONST_QUERY_SELECTOR_SECONDARY_OFFER_BTN="TripleBottom";var secondaryOfferBtn;try{if(target.parentNode){var parent=target.parentNode;if(parent&&parent.className&&parent.className.indexOf(CONST_QUERY_SELECTOR_SECONDARY_OFFER_BTN)>-1){if(parent.previousSibling&&parent.previousSibling.childNodes){var cNodes=parent.previousSibling.childNodes;if(cNodes&&cNodes.length>=2){secondaryOfferBtn=cNodes[1].textContent;}}}}}catch(error){var ds="DOM";var inputValue="Click Event object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return secondaryOfferBtn;}
function getCampaignData(){var methodName="getCampaignData";var requirementName="Process campaign data to capture on GA";var campaignInfo;try{if(optimizelyCampaignDetails){var name=optimizelyCampaignDetails[CONST_KEY_CAMPAIGN_NAME];var variant=optimizelyCampaignDetails[CONST_KEY_CAMPAIGN_VARIANT];if(name&&variant){campaignInfo=[name,variant].join("|");}}}catch(error){var ds="Fetch data from optimizelyCampaignDetails data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,optimizelyCampaignDetails,methodName);}
return campaignInfo;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[29]=='undefined'){utag.runonce.ext[29]=1;if(1){var CONST_TAG_NAME="Optimizely Campaign tracking";var CONST_EC_CAMPAIGN='Optimizely_Campaign';var CONST_EVENT_TYPE_OPTIMIZELY='OPTIMIZELY';var CONST_EVENT_NAME_OPTIMIZELY_CAMPAIGN_ACTIVATED='OPTIMIZELY_CAMPAIGN_ACTIVATED';Bootstrapper.handleOptimizelyCampaignsTracking=function(data){var requirementName='Optimizley Campaign Generic Tracking';var methodName='handleOptimizelyCampaignsTracking';var dataSource={};var optimizelyGAData=[];var optimizelyCampaign={};try{if(data.desc&&data.detail&&data.detail.variation_name&&data.detail.opt_datafile_version){optimizelyCampaign.campaignName=data.desc;optimizelyCampaign.variant=data.detail.variation_name;optimizelyCampaign.dataFileVersion=data.detail.opt_datafile_version;setDataLayerForOptimizelyCampaign(optimizelyCampaign.campaignName,optimizelyCampaign.variant,optimizelyCampaign.dataFileVersion,utag.data["dom.url"]);var eventLabel=optimizelyCampaign.variant.concat('|',optimizelyCampaign.dataFileVersion);var eventDetails={};eventDetails.tealiumEvent=data.desc;eventDetails.eventCategory=CONST_EC_CAMPAIGN
eventDetails.eventAction=data.desc;eventDetails.eventLabel=eventLabel;eventDetails.noninteraction='1';optimizelyGAData.push(eventDetails);Bootstrapper.broadcastEvent(CONST_EVENT_TYPE_OPTIMIZELY,CONST_EVENT_NAME_OPTIMIZELY_CAMPAIGN_ACTIVATED,data);}else{var ds="Campaign JSON";var inputValue=data;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,null,null,ds,inputValue,methodName);}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,null,null,methodName);}
dataSource.optimizelyCampaign=optimizelyCampaign;dataSource.optimizelyGAData=optimizelyGAData;return dataSource;};window.DO=(window&&window.DO)?window.DO:{};window.DO.optimizely={};window.DO.optimizely={"campaigns":{}};function setDataLayerForOptimizelyCampaign(_campaignName,_campaignVariant,_dataFileVersion,_pageUrl){var requirementName='Optimizley campaign Data layer setup';var methodName='setDataLayerForOptimizelyCampaign';try{var campaignName=_campaignName?_campaignName:'';if(campaignName){var campaignVariant=_campaignVariant?_campaignVariant:'';var campaignDataFileVersion=_dataFileVersion?_dataFileVersion:'';var pageUrl=_pageUrl?_pageUrl:'';window.DO.optimizely.campaigns[campaignName]={};window.DO.optimizely.campaigns[campaignName].variation={};window.DO.optimizely.campaigns[campaignName].variation.element1=campaignVariant;window.DO.optimizely.campaigns[campaignName].otherInfo={};window.DO.optimizely.campaigns[campaignName].otherInfo.pageURL=pageUrl;window.DO.optimizely.campaigns[campaignName].otherInfo.dataFileVersion=campaignDataFileVersion;}}catch(e){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,e.message,e,null,null,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[24]=='undefined'){utag.runonce.ext[24]=1;if(/(^(\/.*\/.*\/?)$)/.test(b['dom.pathname'])){var CONST_TAG_NAME="Digital 3.0 - TI Impression Tracking - IO";Bootstrapper.processTIIOEvents=function(data){var methodName="processTIIOEvents";var requirementName="Track Impressions of TI on Homepage received through IO";try{if(data.detail&&data.detail.info){var detailsObject=data.detail;var infoObject=detailsObject.info;var category=detailsObject.category;var eventAction,eventLabel;if(category&&isPageNameHome(detailsObject)){eventAction="Impression: "+category;if(category=="Travel Inspiration Category"){eventLabel=Bootstrapper.dataObject.getDataByKey(infoObject,"discoverByCategory",requirementName);}else if(category=="Travel Inspiration Destination"){var cities=Bootstrapper.dataObject.getDataByKey(infoObject,"discoverByCities",requirementName);if(typeof cities==="object"&&Object.getOwnPropertyNames(cities).length>0){eventLabel=JSON.stringify(cities);}}
if(eventLabel&&eventLabel!="--"){Bootstrapper.batch("event",Bootstrapper.dataObject.global.constant.EC_HOME,eventAction,eventLabel);}}}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"data object from callback event using IO",JSON.stringify(data),methodName);}};function isPageNameHome(detailsObject){var methodName="isPageNameHome";var requirementName="Check if value of pageName is Home";var isHome=false;try{if(detailsObject.params&&detailsObject.params.pageName&&detailsObject.params.pageName=="Home"){isHome=true;}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"detail DataObject from callback event using IO",JSON.stringify(detailsObject),methodName);}
return isHome;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[7]=='undefined'){utag.runonce.ext[7]=1;if(/(^(\/.*\/.*\/?)$)/.test(b['dom.pathname'])){var CONST_TAG_NAME="Digital 3.0 - TI Tracking";Bootstrapper.processTIEvents=function(data){var methodName="processTIEvents";var requirementName="Track Impressions and Clicks of TI on Homepage";try{if(data.detail&&data.detail.category&&data.detail.action=="Tile impression"){var category=data.detail.category;if(category=="Travel Inspiration"&&!isTIDestPickerVisible()){var eventAction="Impression: Travel Inspiration";utag.data.tealium_event=eventAction;utag.data.ga_event_category=Bootstrapper.dataObject.global.constant.EC_HOME;utag.data.ga_event_action=eventAction;utag.link(utag.data,'',[Bootstrapper.ga_uid])}}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"data object",JSON.stringify(data),methodName);}};Bootstrapper.processTICampaign_Optimizely=function(data){var methodName="processTICampaign_Optimizely";var requirementName="Track which TI campaign is served through Optimizely";try{if(data.desc&&data.detail&&data.desc=="travel_inspiration_ab_test"){tiExperimentTracking(data.detail);utag.data.tealium_event=eventAction;utag.data.ga_event_category=Bootstrapper.dataObject.global.constant.EC_HOME;utag.data.ga_event_action=data.desc;utag.data.ga_event_label=data.detail;utag.link(utag.data,'',[Bootstrapper.ga_uid])}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"data object from callback event",JSON.stringify(data),methodName);}};function tiExperimentTracking(callbackKey){var ExperimentID="P9kSnukFRDyLgREtyFCC_w";var ExperimentVariant=0;try{if(callbackKey=='ti'){ExperimentVariant=1;}
utag.data.ga_exp_id=ExperimentID;utag.data.ga_exp_var=ExperimentVariant;}catch(e){}}
function isTIDestPickerVisible(){var methodName="isTIDestPickerVisible";var requirementName="Check if TI destination picker is visible on page";var isTIDestPicker=false;var CONST_TI_PICKER_ID="ti-destpicker";try{var tiPicker=document.getElementById(CONST_TI_PICKER_ID);if(tiPicker){isTIDestPicker=true;}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"DOM",CONST_TI_PICKER_ID,methodName);}
return isTIDestPicker;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[16]=='undefined'){utag.runonce.ext[16]=1;if(1){var CONST_TAG_NAME="Digital 3.0 - Callback Utility tag";var CONST_SUFFIX_CCE="CCE";var optimizelyCampaign={};var lastDataAction="";var CONST_UTAG_LINK=0;var CONST_UTAG_VIEW=1
var myAccount_regex=/^(\/[^\/]*\/[^\/]*\/account\/?)$/i;Bootstrapper.previousPathName="";Bootstrapper.contentRefresh=function(data){var analyticsData=[];let ga4AnalyticsData=[];try{if(data&&data.action){if(typeof data.action=='string'){if(data.category&&typeof data.category=='string'){checkConditionForPageLoadTime(data.category,data.action);Bootstrapper.storeDataInUDO(data);analyticsData=Bootstrapper.parseGenericData(data);ga4AnalyticsData=Bootstrapper.handleEcommerce(data);}
else if((data.action=="AdImpression")||(data.action=="AdClick")){analyticsData=Bootstrapper.processAdLinkData(data);}else if((data.action=="Book Hotel Form")||(data.action=="Book Car Form")){analyticsData=Bootstrapper.processHomeWidgetData(data);}else if(data.action.toLowerCase()=="sign-in success"){if(data.action!=lastDataAction){analyticsData=Bootstrapper.processLoginEvents(data);Bootstrapper.setLoginStatus(data);Bootstrapper.storeMPUserInfoInUDO(data);sendDataToES();}
if(Bootstrapper.notifyRouteChange){Bootstrapper.notifyRouteChange(data);}}else if(data.action.toLowerCase()=="not sign-in"){utag.data.tealium_event=data.action;utag.data=Object.assign(utag.data,data.detail);if(data.action!=lastDataAction){utag.link(utag.data)}
}else if(data.action=="Ajax error"){analyticsData=Bootstrapper.handleAjaxError(data);}else if(data.action=="User error"){analyticsData=Bootstrapper.userErrorGAcall(data);}else if(data.action=="CCE-Impression"){analyticsData=Bootstrapper.processCCEEvents(data,"Impression: "+CONST_SUFFIX_CCE,'1');}else if(data.action=="CCE-Click"){analyticsData=Bootstrapper.processCCEEvents(data,"Clicked: "+CONST_SUFFIX_CCE);}else if(data.action=="Travel-Inspiration"){analyticsData=Bootstrapper.processTIEvents(data);Bootstrapper.processTIIOEvents(data);}else if(data.action=="Optimizely Activation"){var dataSource=Bootstrapper.handleOptimizelyCampaignsTracking(data);optimizelyCampaign=dataSource.optimizelyCampaign;analyticsData=dataSource.optimizelyGAData;}
else if(data.action=="View Reservation"&&data.detail&&data.detail.params&&Object.getOwnPropertyNames(data.detail.params).length===0){analyticsData=Bootstrapper.handleManageResInteractionsForOptimizely(data,optimizelyCampaign);}else if(data.action=="My Account"){analyticsData=Bootstrapper.parseMyAccountData(data);}
else if(data.detail&&data.detail.action&&typeof data.detail.action=='string'&&data.detail.category&&typeof data.detail.category=='string'&&data.detail.params){analyticsData=Bootstrapper.parseGenericData(data.detail);}else if(data.desc&&data.desc=="Shopping Advanced Search"){analyticsData=Bootstrapper.parseAdvancedSearchData(data);}else if(data.desc&&data.desc=="Home Page"){analyticsData=Bootstrapper.parseHomePageDataWithDescDetailStructure(data);}
}else if(data.action.type=="@@router/LOCATION_CHANGE"&&utag.data["dom.url"]!==window.location.href){utag.data["dom.pathname"]=window.location.pathname;utag.data["dom.url"]=window.location.href;if(data.action.payload&&data.action.payload.action){if(data.action.payload.action.toLowerCase()=='replace'){return;}
Bootstrapper.pageLoadStartTime=Date.now();Bootstrapper.pageLoadType="Soft Page Change";Bootstrapper.checkBagsImpression=false;Bootstrapper.displayError=false;Bootstrapper.displayCardMemberWidget=false;}
var previousTitle=utag.data["dom.title"];var count=0;var maxCount=30;var waitForData=function(){if(previousTitle!==document.title||count==maxCount){setPageName();utag.data["dom.title"]=document.title;utag.view();count=maxCount;}else if(count<maxCount){setTimeout(function(){waitForData()},100)}
count++};waitForData();handleLocationChange();handleUpgradeFlow(data.action.payload);}
else if(data.action.type=="@@router/LOCATION_CHANGE"){handleFeedBackLibrary();handleUpgradeFlow(data.action.payload);}
else if(data.action.type=="FORM_SUBMIT_FORGOT_MP"){analyticsData=forgotMPFormSuccess();}
else if(data.action.type=="PAGE_CHANGE"){utag.view();}
else if(data.action.type){if(data.action.type.indexOf("OPEN_MODAL")>0){analyticsData=Bootstrapper.parseModalOpenData(data);}else if(data.action.type.indexOf("TRANSFER_FLEX")>0){analyticsData=Bootstrapper.processMyAccountFlex(data);}else if(data.action.type.indexOf("FORM_SUBMIT")>-1){analyticsData=Bootstrapper.handleFormSubmit(data);}else if(data.action.type.indexOf("CSL_FAIL_")>0){analyticsData=Bootstrapper.handleCSLError(data);if(data.action.type=="unitedapp/forgotMp/CSL_FAIL_FORGOT_MP"&&typeof Bootstrapper.MPAssistantChatButtonImpression==="function"){Bootstrapper.MPAssistantChatButtonImpression();}}}
if(data.action.type=="unitedapp/App/ROUTE_LOADED"||data.action.type=="@@router/LOCATION_CHANGE"){if(Bootstrapper.notifyRouteChange){Bootstrapper.notifyRouteChange(data);}}
if(data.action.type=="unitedapp/App/ROUTE_LOADED"&&typeof Bootstrapper.checkForBundlePurchases=="function"){Bootstrapper.checkForBundlePurchases(data);}
if(data.action.type=="unitedapp/App/ROUTE_LOADED"&&data.action.name&&data.action.name=="home"){if(Bootstrapper.PinterestPixelHome){Bootstrapper.PinterestPixelHome();}}}
if(analyticsData){setUtagAndLink(analyticsData,CONST_UTAG_LINK);}
if(ga4AnalyticsData&&ga4AnalyticsData.length>0){prepareGA4Object(ga4AnalyticsData,CONST_UTAG_LINK);}
if(!Bootstrapper.eventArray){Bootstrapper.eventArray=Bootstrapper.getArrayWithLimitedLength(30);}
Bootstrapper.eventArray.push(data);Bootstrapper.callbackObserver.trigger(data);window.previousURL=window.location.href;lastDataAction=data.action}catch(e){Bootstrapper.reportException(e);lastDataAction=data.action||""
}};function checkConditionForPageLoadTime(category,action){try{if(((action=="Result Load"&&category=="Shopping Search")||(action=="Page Load"&&checkCategory(category)))&&Bootstrapper.pageLoadStartTime){Bootstrapper.sendTimingEvents((Date.now()-Bootstrapper.pageLoadStartTime),"Page Load",Bootstrapper.pageLoadType);Bootstrapper.pageLoadStartTime=0;}}catch(error){Bootstrapper.reportException(error);}}
function checkCategory(category){try{if(category=="Shopping Review"||category=="Shopping "||category=="Shopping seats"||category=="Shopping Purchase"){return true;}}catch(error){Bootstrapper.reportException(error);}
return false;}
function handleLocationChange(){try{Bootstrapper.hasLocationChanged=true;handleFeedBackLibrary();var pathName=utag.data["dom.pathname"].toString().toLowerCase();if(pathName!=Bootstrapper.previousPathName){if(pathName.slice(0,-1)!=Bootstrapper.previousPathName){Bootstrapper.isChatButtonDisplayed=false;Bootstrapper.pageInitTime=new Date().getTime();}
Bootstrapper.previousPathName=pathName
Bootstrapper.resetShoppingUtagData();}
if(Bootstrapper.triggerPixelAudit&&typeof Bootstrapper.triggerPixelAudit==="function"){Bootstrapper.triggerPixelAudit("","",true);}
try{var regExp_tripDetails=new RegExp(/(^(\/.*\/.*\/manageres\/tripdetails\/?)$)/ig);var regExp_tripDetailsRdir=new RegExp(/(^(\/.*\/.*\/manageres\/tripdetails\/.*\/(bookingconfirmation|bookingconfirmationemail))$)/ig);if(regExp_tripDetails.test(pathName)||regExp_tripDetailsRdir.test(pathName)){Bootstrapper.trackUniquePNR();}}catch(e){Bootstrapper.reportException(e);}}catch(e){Bootstrapper.reportException(e);}}
function handleFeedBackLibrary(){try{try{if(typeof Bootstrapper.reloadQualtrics!='undefined'){Bootstrapper.reloadQualtrics();}}catch(e){Bootstrapper.reportException(e);}}catch(e){Bootstrapper.reportException(e);}}
function setUtagAndLink(analyticsData,trackingType){try{try{}catch(e){}
utag.data.visitor_id=getVisitorId();for(const element of analyticsData){let event_id=utag_data.tealium_session_id+"_"+Date.now();utag.data.event_id=event_id;utag.data.tealium_event=element.tealiumEvent;utag.data.ga_event_category=element.eventCategory;utag.data.ga_event_action=element.eventAction;utag.data.ga_event_label=Bootstrapper.scrubberPII(element.eventLabel,true);if(element.eventValue){utag.data.ga_event_value=element.eventValue;}
if(element.customDimensions){for(let key in element.customDimensions){utag.data[key]=element.customDimensions[key];}}
if(element.customUtagData&&Object.getOwnPropertyNames(element.customUtagData).length){Bootstrapper.setCustomUtagData(element.customUtagData);}
if(element.noninteraction){utag.data.ga_event_noninteraction=element.noninteraction;}
if(element.currency){utag.data._ccurrency=element.currency;}
if(element.ecommerceProducts){parseEcommerceProducts(element.ecommerceProducts);}
if(element.ecommercePromo){parseEcommercePromos(element.ecommercePromo);utag.data.ga_enhanced_event=element.ga_enhanced_event;}
if(trackingType==CONST_UTAG_LINK){utag.link(utag.data);}else if(trackingType==CONST_UTAG_VIEW){utag.view(utag.data);}}
setTimeout(function(){prepareGA4Object(analyticsData,trackingType);},500);}catch(error){Bootstrapper.reportException(error);}}
function getVisitorId(){let visitorId;try{visitorId=Bootstrapper.getGAClientID();}catch(error){Bootstrapper.reportException(error);}
return visitorId;}
function prepareGA4Object(analyticsData,trackingType){try{for(const element of analyticsData){parseGA4Object(element);if(element.currency){utag.data._ccurrency=element.currency;}
if(element.ecommerceProducts){parseGA4EcommerceProducts(element.ecommerceProducts);}
let event_id=utag_data.tealium_session_id+"_"+Date.now();utag.data.event_id=event_id;if(trackingType==CONST_UTAG_LINK){utag.link(utag.data,"",[118]);}else if(trackingType==CONST_UTAG_VIEW){utag.view(utag.data,"",[118]);}}}catch(error){Bootstrapper.reportException(error);}}
function parseGA4Object(element){try{utag.data.tealium_event=element.eventCategory;utag.data.ga_event_category=element.eventCategory;utag.data.ga_event_action=element.eventAction;utag.data.ga_event_label=element.eventLabel;if(element.eventName){utag.data.eventName=element.eventName;}else if(element.eventCategory!="ecommerce"){utag.data.eventName=element.eventCategory;}
if(utag.data.eventName=="select_promotion"){utag.data.ga_event_action="click";}
if(element.eventCategory=="ecommerce"){utag.data.tealium_event=element.eventName;}
if(element.eventCategory=="Internal Campaigns"){utag.data.tealium_event=element.eventName;}
if(element.eventCategory=="Ticket Purchases"){utag.data.ga_event_category="purchase";utag.data.eventName="purchase";utag.data.tealium_event="purchase";}
if(element.noninteraction){utag.data.ga_event_noninteraction=element.noninteraction;}
if(element.ecommercePromo){parseEcommercePromos(element.ecommercePromo);utag.data.ga_enhanced_event=element.ga_enhanced_event;}
if(element.customDimensions){for(let key in element.customDimensions){utag.data[key]=element.customDimensions[key];}}
if(element.eventValue){utag.data.ga_event_value=element.eventValue;}}catch(error){Bootstrapper.reportException(error);}}
Bootstrapper.sendTimingEvents=function(pageLoadTime,category,loadType){try{utag.data.tealium_event='timing';utag.data.timingCategory=category;utag.data.timingVar=loadType;utag.data.timingValue=Math.round(pageLoadTime);utag.link(utag.data);}catch(error){Bootstrapper.reportException(error);}};function parseEcommercePromos(ecommercePromotions){try{for(var i=0;i<ecommercePromotions.length;i++){var promoEvent=ecommercePromotions[i].enhancedEcommerceEvents;utag.data.ga_promo_id=promoEvent.promoId;utag.data.ga_promo_name=promoEvent.promoName;utag.data.ga_promo_creative=promoEvent.promoCreative;utag.data.ga_promo_position=promoEvent.promoPosition;utag.data.ga_event_label=promoEvent.promoName;}}catch(error){Bootstrapper.reportException(error);}}
function parseEcommerceProducts(products){try{utag.data.product_impression_id=products.productImpressionId;utag.data.product_impression_name=products.productImpressionName;utag.data.product_impression_list=products.productImpressionList;utag.data.product_impression_category=products.productImpressionCategory;utag.data.product_impression_variant=products.productImpressionVariant;utag.data.product_impression_brand=products.productImpressionBrand;utag.data.product_impression_position=products.productImpressionPosition;utag.data.product_impression_price=products.productImpressionPrice;utag.data.product_flight_number=products.productFlightNumber;utag.data.product_award_miles=products.productAwardMiles;utag.data.plus_points=products.productPoints;utag.data.product_id=products.productId;utag.data.product_name=products.productName;utag.data.product_brand=products.productBrand;utag.data.product_category=products.productCategory;utag.data.product_variant=products.productVariant;utag.data.product_price=products.productPrice;utag.data.product_position=products.productPosition;utag.data.product_quantity=products.productQuantity;utag.data.order_id=products.order_id;}catch(error){Bootstrapper.reportException(error);}}
function parseGA4EcommerceProducts(products){try{utag.data.product_impression_id=products.productId;utag.data.product_impression_name=products.productName;utag.data.product_impression_list=products.productList;utag.data.product_impression_category=products.productCategory;utag.data.product_impression_variant=products.productVariant;utag.data.product_impression_brand=products.productBrand;utag.data.product_impression_position=products.productPosition;utag.data.product_impression_price=products.productPrice;utag.data.product_flight_number=products.productFlightNumber;utag.data.product_award_miles=products.productAwardMiles;utag.data.plus_points=products.productPoints;utag.data.product_id=products.productId;utag.data.product_name=products.productName;utag.data.product_brand=products.productBrand;utag.data.product_category=products.productCategory;utag.data.product_variant=products.productVariant;utag.data.product_price=products.productPrice;utag.data.product_position=products.productPosition;utag.data.product_quantity=products.productQuantity;}catch(error){Bootstrapper.reportException(error);}}
function parseGA4Promos(products){try{for(let i=0;i<products.length;i++){let promoEvent=products[i].enhancedEcommerceEvents;utag.data.product_impression_id=promoEvent.promoId;utag.data.product_impression_name=promoEvent.promoName;utag.data.ga_promo_creative=promoEvent.promoCreative;utag.data.product_impression_position=promoEvent.promoPosition;utag.data.ga_promo_position=promoEvent.promoPosition;utag.data.ga_event_label=promoEvent.promoName;}}catch(error){Bootstrapper.reportException(error);}}
Bootstrapper.setUtagLinkForDOMEvent=function(data){let analyticsData=[];try{if(data&&Array.isArray(data)){setUtagAndLink(data,CONST_UTAG_LINK);Bootstrapper.pixelAuditAry=[];}else{analyticsData.push(data);setUtagAndLink(analyticsData,CONST_UTAG_LINK);}}catch(error){Bootstrapper.reportException(error);}};Bootstrapper.UTAG_CONST={customer_id:'customer_id',MPAccStatus:'MPAccStatus',MPBalance:'MPBalance',MPPremierMiles:'MPPremierMiles',MPPremierSegments:'MPPremierSegments',TravelCertificate:'TravelCertificate',searchCriteria:'searchCriteria',searchTrips:'searchTrips',cabin_type:'cabin_type',ticket_type:'ticket_type',od_pair:'od_pair',departure_date:'departure_date',saturday_night_stay:'saturday_night_stay',tripModel:'tripModel',timeStamp:'timeStamp',searched_itinerary:'searched_itinerary',tripType:'tripType',last_searched_itinerary:'last_searched_itinerary',search_remarketing:'search_remarketing',searched_origin:'searched_origin',searched_destination:'searched_destination',search_return_date:'search_return_date',remarket_decision:'remarket_decision',flight_segment_index:'flight_segment_index',searchedFilters:'searchedFilters',selected_flight_filters_qa:'selected_flight_filters_qa',selected_flight_filters_prod:'selected_flight_filters_prod',selectedTrips:'selectedTrips',travelOptions:'travelOptions',cart:'cart',seatSelector:'seatSelector',upliftInfo:'upliftInfo',refundableFareShown:'refundableFareShown',travelGuardPageId:'travelGuardPageId',fbEid:'fbEid',cookiedata:'cookiedata',shoppingOfferQA:'shoppingOfferQA',shoppingOfferProd:'shoppingOfferProd',point_of_sale:'point_of_sale',lang_code:'lang_code',pnr:"pnr",date_pnr:"date_pnr",order_id:"order_id",payment_info:"payment_info",carbon_emission_data:"carbon_emission_data",cost:"cost",taxes:"taxes",currency:"currency",purchase_itinerary:"purchase_itinerary",encoded_email:"encoded_email",current_age:"current_age",is_subscribed:"is_subscribed",maxymiser_tests:"maxymiser_tests",maxymiser_tests_combined:"maxymiser_tests_combined",visitor_id:"visitor_id",upgrade_type:"upgrade_type",plus_points:"plus_points",plus_point_qa:"plus_points_qa"};Bootstrapper.pageNames={AwardAccelerator:"awardAcceleratorConfirmation",TripInsurance:"tripInsuranceConfirmation",PremierAccess:"premierAccessConfirmation",Bundles:"bundlesConfirmation"};Bootstrapper.setCustomUtagData=function(analyticsData){try{for(var key in analyticsData){var currentKey=Bootstrapper.UTAG_CONST[key]
if(currentKey){utag.data[currentKey]=analyticsData[key];}}}catch(error){Bootstrapper.reportException(error);}}
Bootstrapper.getCustomUtagData=function(key){try{var currentKey=Bootstrapper.UTAG_CONST[key]
if(currentKey){return utag.data[currentKey];}}catch(error){Bootstrapper.reportException(error);}
return undefined;}
Bootstrapper.callbackObserverClass=function(){var thisScope=this;this.handlers=[];this.subscribe=function(fn){thisScope.handlers.push(fn);};this.trigger=function(response,thisObj){var scope=thisObj||window;thisScope.handlers.forEach(function(item){item.call(scope,response);});};this.unsubscribe=function(fn){thisScope.handlers=thisScope.handlers.filter(function(item){if(item!==fn){return item;}});};};Bootstrapper.callbackObserver=new Bootstrapper.callbackObserverClass();Bootstrapper.getArrayWithLimitedLength=function(length){try{var array=new Array();array.push=function(){if(this.length>=length){this.shift();}
return Array.prototype.push.apply(this,arguments);};return array;}catch(error){Bootstrapper.reportException(error);}};function forgotMPFormSuccess(){try{var eventCategory="Forgot MP",eventAction="Tapped button: Submit",eventLabel="Forgot MP Form Success";var forgotMPFormSuccessDetails={};var forgotMPFormSuccessData=[];forgotMPFormSuccessDetails.tealiumEvent=eventAction;forgotMPFormSuccessDetails.eventCategory=eventCategory;forgotMPFormSuccessDetails.eventAction=eventAction;forgotMPFormSuccessDetails.eventLabel=eventLabel;forgotMPFormSuccessData.push(forgotMPFormSuccessDetails);return forgotMPFormSuccessData;}catch(error){Bootstrapper.reportException(error);}}
function setPageName(){try{var utagObjName='page_name';var pathname=document.location.pathname;var homepageRegex=/^\/[^\/]+\/[^\/]+\/?$/;var myAccountRegex=/^\/[^\/]+\/[^\/]+\/(account)+(\/|(\?.*))?$/;var homepageName='Home',myAccountPage='My Account';if(pathname.match(homepageRegex)){utag.data[utagObjName]=homepageName;}else if(pathname.match(myAccountRegex)){utag.data[utagObjName]=myAccountPage;}}catch(error){Bootstrapper.reportException(error);}}
setPageName();function sendDataToES(){try{if(Bootstrapper.isBookingConfirmationPage()){utag_data.tealium_collect_event="tealium_collect_ticket_purchase";utag.link(utag_data,null,[54]);}}catch(error){Bootstrapper.reportException(error);}}
function handleUpgradeFlow(payload){let UPGRADE_REGEX=/^(\/.*\/.*\/upgrade?)$/;try{if(payload&&payload.location&&payload.location.pathname){let pathName=payload.location.pathname;if(pathName.match(UPGRADE_REGEX)&&typeof Bootstrapper.triggerUpgradePixels==="function"){setTimeout(function(){Bootstrapper.triggerUpgradePixels();},1500);}}}catch(error){Bootstrapper.reportException(error);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[5]=='undefined'){utag.runonce.ext[5]=1;if(1){var CONST_TAG_NAME="Digital 3.0 - CSL Error handler";var CONST_EC_CSL_ERROR="CSL Error";var requirementName="Handle CSL errors";var CONST_CSL_ERROR_ACTION="Csl error";Bootstrapper.handleCSLError=function(data){var methodName="Bootstrapper.handleCSLError";var cslErrorObjects=[];try{if(isErrorsAry(data.action)){cslErrorObjects=handleCSLErrorsAry(data);}else{cslErrorObjects=handleCSLErrorJSON(data);}}catch(err){var inputSource={"data_source":"CSL error data","input_value":err.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirement,CONST_TAG_NAME,JSON.stringify(err.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,err);}
return cslErrorObjects;};function isErrorsAry(action){var methodName="isErrorsAry";var isAry=false;try{if(action.errors&&Array.isArray(action.errors)||action.error&&Array.isArray(action.error)){isAry=true;}}catch(error){var ds="CSL error data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return isAry;}
function handleCSLErrorsAry(data){var methodName="handleCSLErrorsAry";var cslErrorObjects=[];try{if(data.action.errors){cslErrorObjects=iterateErrorsArray(data);}else if(data.action.error){cslErrorObjects=processError(data);}}catch(error){var ds="Data object recieved from middleware";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return cslErrorObjects;}
function processError(data){var requirementName="Process error array object";var methodName="processError";var cslErrorObjects=[];try{var error=data.action.error;for(var i=0;i<error.length;i++){var csl={};csl.eventCategory=CONST_EC_CSL_ERROR;csl.eventAction=data.action.type;csl.eventLabel=error[i];csl.tealiumEvent=csl.eventAction;cslErrorObjects.push(csl);}}catch(error){var ds="Data object recieved from middleware";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return cslErrorObjects;}
function iterateErrorsArray(data){var requirementName="Iterarte errors array object";var methodName="iterateErrorsArray";var cslErrorObjects=[];try{var errors=data.action.errors;for(var i=0;i<errors.length;i++){var csl={};csl.eventCategory=CONST_EC_CSL_ERROR;csl.eventAction=data.action.type;csl.eventLabel=errors[i];csl.tealiumEvent=csl.eventAction;cslErrorObjects.push(csl);}}catch(error){var ds="Data object recieved from middleware";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}}
function handleCSLErrorJSON(data){var methodName="handleCSLErrorJSON";var cslErrorObjects=[];try{cslErrorObjects=iterateCSLErrors(data);}catch(error){var ds="CSL error data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return cslErrorObjects;}
function iterateCSLErrors(data){let methodName="iterateCSLErrors";let cslErrorObjects=[];try{let errorObj=data.action.error;if(errorObj){let cslErrorResponse=(errorObj.response&&errorObj.response.cslResponse&&errorObj.response.cslResponse.CslErrorResponse)?errorObj.response.cslResponse.CslErrorResponse:"";if(cslErrorResponse){cslErrorObjects=handleCSLErrorResponse(data.action.type,cslErrorResponse);}else{cslErrorObjects.push(prepareCSLObject(data.action.type,errorObj));}}}catch(error){let ds="CSL error data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return cslErrorObjects;}
function handleCSLErrorResponse(type,cslErrorResponse){let requirementName="Handle CSL error different forms";let methodName="handleCSLErrorResponse";let cslErrorObjects=[];try{let errors=cslErrorResponse.Errors;if(errors&&errors.length>0){for(const err of errors){cslErrorObjects.push(prepareCSLObject(type,err));}}}catch(error){let ds="CSL error data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return cslErrorObjects;}
function prepareCSLObject(type,err){let requirementName="Prepare CSL GA object";let methodName="prepareCSLObject";let csl={};try{csl.tealiumEvent=type||"Exceptions";csl.eventCategory=CONST_EC_CSL_ERROR;csl.eventAction=type||"Exceptions";csl.eventLabel=JSON.stringify(err);}catch(error){let ds="CSL error data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,error.message,methodName);}
return csl;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[52]=='undefined'){utag.runonce.ext[52]=1;if(1){var CONST_EXTN_NAME="Generic Parser";var CONST_REQ_NAME="Parse New Callback JSON logs with generic parser";var CONST_EC_ANCILLARY_PURCHASES="Ancillary Purchases";var CONST_EC_TIMATIC="Timatic";Bootstrapper.parseGenericData=function(data){var methodName="parseGenericData";var parseObjects=[];try{var parseData={};var parseMultipleData=[];parseData.tealiumEvent=data.action;parseData.eventCategory=data.category;parseData.eventAction=data.action;if(data.params){if(data.action=="Page Load"){if(Bootstrapper.hasLocationChanged!==undefined&&!Bootstrapper.hasLocationChanged&&data.category!="Shopping Review"){parseObjects.push({})
return parseObjects;}
Bootstrapper.hasLocationChanged=false;}
if(data.action=="Ajax error"){parseMultipleData=Bootstrapper.handleAjaxErrorCallback(data);}else if(data.action=="User error"){parseMultipleData=Bootstrapper.handleUserError(data);}else if(data.category=="Home"){parseData=Bootstrapper.parseHomepageEvents(data,parseData);if(Array.isArray(parseData)){parseMultipleData=parseData;}}else if(data.category=="Cancel Flight"){parseData=Bootstrapper.processCancelFlightTracking(data,parseData);}else if(data.category=="View Reservation"){parseData.eventCategory="Reservations";parseMultipleData=Bootstrapper.processPPRTrackingOnReservation(data,parseData);}else if(data.category=="Upgrade Mall"){parseMultipleData=Bootstrapper.processUpgradeMallTracking(data,parseData);}else if(data.category=="Reservations"||data.category=="Reservation"){parseData.eventCategory="Reservations";parseMultipleData=Bootstrapper.prepareLabelForReservations(data,parseData);if(data.action=="Task trained service dog added"){parseData.eventAction="Clicked: Add task trained service dog";parseData.tealiumEvent=parseData.eventAction;}}else if(data.category=="Seat Map"){parseData.eventCategory="Seats";parseMultipleData=Bootstrapper.prepareLabelForSeatMap(data,parseData);}else if(data.category=="Ancillary Purchases"){parseMultipleData=Bootstrapper.prepareLabelForAncillaryPurchases(data,parseData);}else if(data.category=="Refunds"&&data.action=="No item selected"){parseData="";}else if(data.category=="MileagePlus Program"){parseData=location.host.toLowerCase().indexOf('mpenroll.')>-1?Bootstrapper.mpEnrollment(data,parseData):Bootstrapper.mpProgramsAwdChart(data,parseData);}else if(data.category.toLowerCase()=="timatic"){parseData.eventCategory=CONST_EC_TIMATIC;}else if(data.category=="Checkin"){parseMultipleData=Bootstrapper.processCheckInEvents(data,parseData);}else if(data.category=="Sign In"){parseMultipleData=Bootstrapper.processSwitchAccoutEvent(data,parseData);}else if(data.category=="MP Partner Signin"){parseMultipleData=Bootstrapper.processSSOLoginEvents(data,parseData);}else if((data.category=="Shopping Search"&&Bootstrapper.isFSRPage())||(data.category=="Shopping Search"&&data.params&&data.params.feature==="RAS check modal")||isFSRFeature(data)){parseMultipleData=Bootstrapper.processShoppingSearchEvents(data,parseData);}else if(data.category=="ECommerce"){parseData.eventCategory="Shopping Search";parseMultipleData=Bootstrapper.processProductClickEvent(data,parseData);}else if(data.category=="Flight Shopping Search"){parseData.eventCategory="Shopping Search";parseMultipleData=Bootstrapper.prepareDataForSortAndFilter(data,parseData);}else if(data.category=="United Promotions"){parseMultipleData=Bootstrapper.processOffersPageEvents(data,parseData);}else if(data.category=="Shopping seats"){parseMultipleData=Bootstrapper.processShoppingSeatEvents(data,parseData);}else if(data.category=="Shopping Cart"){parseMultipleData=Bootstrapper.processShoppingCartEvents(data,parseData);}else if(data.category=="Shopping payment"||data.category=="Shopping Purchase"){parseData.eventCategory="Shopping Purchase";parseMultipleData=Bootstrapper.processShoppingPurchaseEvents(data,parseData);}else if(data.category=="My Account"){parseMultipleData=Bootstrapper.processMyAccountEvents(data,parseData);}else if(data.category=="Shopping Review"){parseMultipleData=Bootstrapper.parseShoppingReview(data,parseData);}else if(data.category.trim()=="Preorder Meals"){parseData.eventCategory=data.category.trim();parseMultipleData=Bootstrapper.processPreorderMeals(data,parseData);}else if(data.category=="Preorder Meals Purchase"&&data.action=="Page Load"){parseData={};}else if(data.category.trim()=="Shopping"){parseData={};}else if(data.category=="Shopping Cart"){parseMultipleData=Bootstrapper.processShoppingCartEvents(data,parseData);}else if(data.action.indexOf("Days before trip")>-1){parseData.eventCategory="OptlyTestKPI";}else if(data.category=="Service Animal"){parseMultipleData=Bootstrapper.processSVANEvent(data,parseData);}else if(data.category=="Pet In Cabin"){parseMultipleData=Bootstrapper.processPetCEvent(data,parseData);}else if(data.category=="Performance Measurement"){parseMultipleData=Bootstrapper.handlePerformanceMeasurements(data,parseData);}else if(data.category=="Shopping Confirmation"){parseMultipleData=Bootstrapper.handleBookingConfirmation(data,parseData);}else if(data.category=="Payment Services"){parseMultipleData=Bootstrapper.handlePaymentServices(data,parseData);}else if(data.category=="Notifications"){parseMultipleData=Bootstrapper.handleNotifications(data,parseData);}else if(data.category=="Seats"){parseMultipleData.push(Bootstrapper.processATMEvents(data,parseData));}else if(data.category=="Status Lift"){parseMultipleData.push(Bootstrapper.processStatusLiftEvents(data,parseData));}else if(data.category=="Reshop Search"){parseMultipleData=Bootstrapper.processReShopSearchEvents(data,parseData);}else if(data.category=="Baggage Resolution"){parseMultipleData=Bootstrapper.prepareLabelForBaggageResolution(data,parseData);}else if(data.category=="Internal Campaigns"){parseMultipleData=Bootstrapper.parseChaseSSOEvents(data,parseData);}
else if(data.params.eventType){if(data.params.eventType=="Maxymiser"){parseMultipleData=Bootstrapper.processMaxymiserEvents(data,parseData);}
else if(data.params.eventType=="Optimizely"){parseMultipleData=Bootstrapper.processOptimizelyEvents(data,parseData);}}else if(data.category=="UMNR Custodians"){parseMultipleData=Bootstrapper.processUMNREvents(data,parseData);}}
if(parseData.eventCategory=="Shopping Search"){if(parseData.eventAction=="Page Load"||parseData.eventAction=="Result Load"||parseData.eventAction=="Clicked: 3-day matrix"){parseData={};}}
if(parseMultipleData.length){parseObjects=parseMultipleData;}else{parseObjects.push(parseData);}}catch(e){var ds="Data object for Generic Parser";var inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return parseObjects;};Bootstrapper.handleFormSubmit=function(data){var methodName="handleFormSubmit";var requirementName="Handle Form submit for Upgrade mall";var analyticsData=[];try{var type=data.action.type;if(data.action){var dataObject="";var category="";var formName="";var feature="";if(type=="unitedapp/UpgradeMall/Storefront/TRACK_FORM_SUBMIT_FAILURE"){dataObject=data.action.error;}else if(type=="unitedapp/ManageResCancelFlight/FORM_SUBMIT_SUCCESS_UPDATE_CANCEL_PNR"||type=="unitedapp/Checkin/CHECKIN_FORM_SUBMIT"||type=="unitedapp/ManageResPurchase/FORM_SUBMIT_SUCCESS"){dataObject=data.action.payload;}else if(type=="unitedapp/UpgradeMall/Storefront/TRACK_FORM_SUBMIT"||type=="unitedapp/UpgradeMall/Storefront/TRACK_FORM_SUBMIT_SUCCESS"||type=="unitedapp/ContinuousImprovement/REFUNDSSUBMIT/FORM_SUBMIT_SUCCESS_REFUNDS"||type=="unitedapp/ContinuousImprovement/REFUNDSTATUS/FORM_SUBMIT_SUCCESS_REFUNDS_STATUS"||type=="unitedapp/ContinuousImprovement/TIMATICSUBMIT/FORM_SUBMIT_SUCCESS_TIMATIC"){dataObject=data.action.data;}else if(type=="FORM_SUBMIT_SUCCESS"||type=="FORM_SUBMIT_FAILURE"){dataObject=data.action.Payload;}
if(dataObject){category=dataObject.category;formName=dataObject.formName;feature=dataObject.feature;}
if(category){if(category==CONST_EC_ANCILLARY_PURCHASES&&formName=="UpgradeFlightConfirmation"){analyticsData=Bootstrapper.trackAncillaryPurchasesUpgradeMall(dataObject,category,type);}else if(category=="Reservations"){analyticsData=Bootstrapper.handleReservationsFormSubmit(type,dataObject);}else if(category=="View Reservation"&&feature=="Cancel Upgrade Request"){analyticsData=Bootstrapper.handleCancelUpgradeRequest(type);}}else{if(formName=="Request Refund Form"||formName=="Refund Status Form"){analyticsData=Bootstrapper.handleRefundsFormSubmit(type,dataObject);}else if(formName=="timatic"){analyticsData=Bootstrapper.handleTimaticFormSubmit(type,dataObject);}else if(formName=="confirmationNumberForm"||formName=="baggageClaim"||formName=="travelerForm"||formName=='TSAConfirmation'||formName=='mpSignIn'||formName=='AddInfant'||formName=='RemoveInfant'||formName=="documentVerification"){analyticsData=Bootstrapper.handleCheckInFormSubmit(type,dataObject);}}}}catch(error){var ds="Data object for Form Submit";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsData;};function isFSRFeature(data){let requirementName="Check if FSR specific feature";let methodName="isFSRFeature";let isFSRFeature=false;try{if((data.category=="Shopping Search"&&data.params&&data.params.feature==="Update 30-day Calendar")){isFSRFeature=true;}}catch(error){let ds="Data object from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return isFSRFeature;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[10]=='undefined'){utag.runonce.ext[10]=1;if(/(^(\/.*\/.*\/?)$)/.test(b['dom.pathname'])){var CONST_TAG_NAME="Digital 3.0 - CCE Tracking";Bootstrapper.processCCEEvents=function(data,action,noninteraction){var methodName="processCCEEvents";var requirementName="Handle and process CCE callback and send events on GA";var ds="Data object recieved in callback";var inputValue="data.detail.params.info";var cceGAData=[];var ccePosition="carousel";var title;try{if(Bootstrapper.dataObject.isLocaleEn(requirementName)){if(data.detail&&data.detail.params&&data.detail.params.info){var infoObject=data.detail.params.info;title=Bootstrapper.dataObject.getDataByKey(infoObject,"title",requirementName);if(title&&title!="--"){cceGAData.push(prepareCCEData(action,infoObject,ccePosition,noninteraction,title));}}else{var errMessage="detail JSON object is not available in callback event object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,errMessage,null,ds,inputValue,methodName);}}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return cceGAData;};function prepareCCEData(action,infoObject,ccePosition,noninteraction,title){var requirementName="Prepare CCE data";var methodName="prepareCCEData";var cceDetails;try{var cta=infoObject.cta?infoObject.cta:"--";var destinationURL=infoObject.destinationURL?infoObject.destinationURL:"--";var carouselRank=infoObject.rank?infoObject.rank:"--";var testGroupName=infoObject.testGroupName?infoObject.testGroupName:"--";var messageKey=infoObject.messageKey?infoObject.messageKey:"--";var eventLabel={"position":ccePosition,"title":title,"cta":cta,"link":destinationURL,"rank":carouselRank,"testGroupName":testGroupName,"messageKey":messageKey};cceDetails=preprareGAData(action,eventLabel,noninteraction);}catch(error){var ds="Data object recieved in callback";var inputValue="data.detail.params.info";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return cceDetails;}
function preprareGAData(action,eventLabel,noninteraction){var requirementName="Prepare GA data for CCE";var methodName="preprareGAData";var cceDetails={};try{cceDetails.tealiumEvent=action;cceDetails.eventCategory=Bootstrapper.dataObject.global.constant.EC_HOME;cceDetails.eventAction=action;cceDetails.eventLabel=JSON.stringify(eventLabel);cceDetails.noninteraction=noninteraction;}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return cceDetails;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[13]=='undefined'){utag.runonce.ext[13]=1;if(1){var CONST_TAG_NAME="Digital 3.0 - MP Login events";var CONST_REQ_NAME="Track MP Login events";Bootstrapper.processLoginEvents=function(data){var methodName="processLoginEvents";var eventCategory="Login";var eventLabel;var loginObjects=[];var MPAdditonalParams=['MPBalance','MPPremierMiles','MPPremierSegments'];var DLConstants=Bootstrapper.UTAG_CONST;try{var customerID=Bootstrapper.getCustomerIdFromLogin(data);var mpStatus=Bootstrapper.getMPStatusFromLogin(data);var MPBalance=Bootstrapper.getMPValuesFromLogin(data,MPAdditonalParams[0]);var MPPremierMiles=Bootstrapper.getMPValuesFromLogin(data,MPAdditonalParams[1]);var MPPremierSegments=Bootstrapper.getMPValuesFromLogin(data,MPAdditonalParams[2]);var login={};eventLabel=customerID;var desc=Bootstrapper.getDescFromCallback(data);if(desc.toLowerCase()!="already sign-in"){eventLabel=eventLabel+"|"+data.action;}
eventLabel=eventLabel+"|"+desc+"|"+MPBalance;login.tealiumEvent=data.action;login.eventCategory=eventCategory;login.eventAction=mpStatus;login.eventLabel=eventLabel;login.customUtagData={};login.customUtagData[DLConstants.customer_id]=data.detail.CustomerId;login.customUtagData[DLConstants.MPAccStatus]=mpStatus;login.customUtagData[DLConstants.MPBalance]=MPBalance;login.customUtagData[DLConstants.MPPremierMiles]=MPPremierMiles;login.customUtagData[DLConstants.MPPremierSegments]=MPPremierSegments;loginObjects.push(login);}catch(e){var inputSource={"data_source":"Data object for Login event","input_value":e.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_REQ_NAME,CONST_TAG_NAME,JSON.stringify(e.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}
return loginObjects;};Bootstrapper.getCustomerIdFromLogin=function(data){var methodName="getCustomerIdFromLogin";var customerID;try{if(data.detail){customerID=data.detail.CustomerId;}
if(!customerID){customerID=Bootstrapper.dataObject.global.constant.doubleDash;var inputSource={"data_source":"Detail object for Login event","input_value":JSON.stringify(data)};var errorLog="CustomerId is not available for Login action";var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_REQ_NAME,CONST_TAG_NAME,errorLog,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}}catch(e){var inputsrc={"data_source":"Detail object for Login event","input_value":e.message};var customLbl=Bootstrapper.dataObject.customLogForGapTracking(CONST_REQ_NAME,CONST_TAG_NAME,JSON.stringify(e.message),inputsrc,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLbl,e);}
return customerID;};Bootstrapper.getMPStatusFromLogin=function(data){var methodName="getMPStatusFromLogin";var mpAccStatus;try{if(data.detail){mpAccStatus=data.detail.MPAccStatus;}
if(!mpAccStatus){mpAccStatus=Bootstrapper.dataObject.global.constant.doubleDash;var inputSource={"data_source":"Detail object for Login event","input_value":JSON.stringify(data)};var errorLog="MP Status is not available for Login action";var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_REQ_NAME,CONST_TAG_NAME,errorLog,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}}catch(e){var inputsrc={"data_source":"Detail object for Login event","input_value":e.message};var customLbl=Bootstrapper.dataObject.customLogForGapTracking(CONST_REQ_NAME,CONST_TAG_NAME,JSON.stringify(e.message),inputsrc,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLbl,e);}
return mpAccStatus;};Bootstrapper.getMPValuesFromLogin=function(data,extractKey){var methodName="getMPValuesFromLogin";var mpExtractValue;try{if(data.detail){mpExtractValue=data.detail[extractKey];}
}catch(e){var inputsrc={"data_source":"Detail object for Login event","input_value":e.message};Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_TAG_NAME,e.message,e,inputsrc.data_source,inputsrc.input_value,methodName);}
return mpExtractValue;};Bootstrapper.processSwitchAccoutEvent=function(data,parseData){try{var eventData=[];if(data.action=="Sign In: Switch accounts"){parseData.eventCategory="User Interactions";parseData.eventAction="Clicked: Switch accounts";eventData.push(parseData);}}catch(e){var inputSource={"data_source":"Details from switch account event","input_value":e.message};Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_TAG_NAME,e.message,e,inputSource.data_source,inputSource.input_value,methodName);}
return eventData;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[14]=='undefined'){utag.runonce.ext[14]=1;if(/(^(\/[^\/]*\/[^\/]*\/account\/activity\/?))/.test(b['dom.pathname'])){var CONST_EXTN_NAME='My Account-Activity Page - Prod';var CONST_DOWNLOADACTIVITY_CLASSNAME='exportActivities';var CONST_INNERHTML_CLASSNAME_EXPORTLOADING='class="app-components-ActivitiesView-activitiesView__exportLoading';addClickListener();function addClickListener(){var methodName='addClickListener';var requirementName='Add click listener to body element of document';try{document.body.addEventListener('click',function(event){setTimeout(function(){handleClicks(event);},100);});}catch(error){var inputSource={'data_source':'DOM','input_value':error.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_EXTN_NAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}}
function handleClicks(event){var methodName='handleClicks';var requirementName='Track user clicks on My Account activity page';try{var exportActivity=document.getElementsByClassName(CONST_DOWNLOADACTIVITY_CLASSNAME);if(exportActivity&&exportActivity.length>0&&(exportActivity[0].contains(event.target)||exportActivity[0].innerHTML.indexOf(CONST_INNERHTML_CLASSNAME_EXPORTLOADING)>0)){var analyticUtagData={};var eventAction='Clicked Link: Download activity';analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory=Bootstrapper.dataObject.global.constant.EC_MY_ACC_UI;analyticUtagData.eventAction=eventAction;Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}}catch(error){var inputSource={'data_source':'Event/exportActivity object','input_value':error.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(requirementName,CONST_EXTN_NAME,error.message,inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,error);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[53]=='undefined'){utag.runonce.ext[53]=1;if(1){var CONST_EXTN_NAME="Home Page Parser",DOUBLE_DASH="--",EC_CONST="Home",EC_LABEL="Horizontal Booking Widget";Bootstrapper.parseHomepageEvents=function(data,parseData){var methodName="parseHomepageEvents";var CONST_REQ_NAME="Track Homepage event";var parseDataObject=parseData;var eventLabel;try{var params=data.params,action=data.action;if(params&&params.feature&&params.feature=="Shop by maps"){eventLabel=params.feature;if(params.info){var from=params.info.from?params.info.from:DOUBLE_DASH;eventLabel=[eventLabel,from].join('|');if(data.action=="Clicked: Apply filters"||data.action=="Clicked: Zoom In"||data.action=="Clicked: Zoom Out"||data.action.indexOf("Map Scrolled")>-1){var filterType=params.info.filterType?params.info.filterType:DOUBLE_DASH;var searchType=params.info.searchType?params.info.searchType:DOUBLE_DASH;var stopType=params.info.isNonStopOnly?"NonStop":"WithStop";eventLabel=[eventLabel,filterType,searchType,stopType].join('|');}else if(data.action=="Clicked: Price Pin"){var city=params.info.city?params.info.city:DOUBLE_DASH;var date=params.info.date?params.info.date:DOUBLE_DASH;var price=params.info.price?params.info.price:DOUBLE_DASH;eventLabel=[eventLabel,city,date,price].join('|');}}else{eventLabel=[eventLabel,DOUBLE_DASH].join('|');}
parseDataObject.eventLabel=eventLabel;}else if(params&&params.featureName&&params.featureName=="Pick up where you left off"){parseDataObject=trackPUWYLOFeatureOnHomepage(data,parseData);}else if(checkActionForHorizontalBookingWidgetDropDown(action)){parseDataObject.eventLabel=EC_LABEL;}else if(action=="Clicked tab: travelTab"||action=="Clicked tab: tripsTab"||action=="Clicked tab: checkinTab"||action=="Clicked tab: statusTab"){parseDataObject.eventAction=parseDataObject.tealiumEvent="Clicked Tab:"+action.split(":")[1];parseDataObject.eventLabel=EC_LABEL;}else if(action=="Clicked link: More search options"){parseDataObject.eventAction=parseDataObject.tealiumEvent="Clicked Link: More search options";parseDataObject.eventLabel=EC_LABEL;}else if(action=="Clicked: Find Flight"){parseDataObject.eventLabel=[EC_LABEL,trackFindFlightClicksOnHorizontalWidget(params)].join("|");}else if(action=="Clicked: Find Packages"){parseDataObject.eventAction=parseDataObject.tealiumEvent="Clicked: Find Trips";parseDataObject.eventLabel=[EC_LABEL,trackFindtripsClicksOnHorizontalWidget(params)].join("|");}else if(action=="Impression: Personalized Tiles"){parseDataObject=prepareLabelForPersonalizedTile(data);}else if(action=="Impression: Feature carousel"||action=="Clicked: Feature carousel"||action=="Clicked: Personalized Tiles"){parseDataObject.eventLabel=[Bootstrapper.fetchFeatureAndPageName(data.params),prepareLabelForFeatureCarousel(data)].join('|');}else if(action=="Error Shown"){let msg=(data.params&&data.params.info&&data.params.info.message)?data.params.info.message:"--";parseDataObject.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),msg].join('|');}}catch(e){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return parseDataObject;};Bootstrapper.processHomeWidgetData=function(data){var methodName="processHomeWidgetData";var widgetDataObjects=[],action;var ds="Data object for Homepage Widget";var inputValue="data.action";var requirementName="Handle and process Homepage Widget and send events on GA";try{var widgetData={};widgetData.eventCategory=Bootstrapper.dataObject.global.constant.EC_HOME;if(data.action=="Book Car Form"){action="Clicked: Find cars";widgetData.tealiumEvent=action;widgetData.eventAction=action;widgetData.eventLabel=prepareCarWidgetLabel();widgetDataObjects.push(widgetData);}else if(data.action=="Book Hotel Form"){action="Clicked: Find hotels";widgetData.tealiumEvent=action;widgetData.eventAction=action;widgetDataObjects.push(widgetData);}}catch(e){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,JSON.stringify(e.message),e,ds,inputValue,methodName);}
return widgetDataObjects;};function trackPUWYLOFeatureOnHomepage(data,parseData){var methodName="trackPUWYLOFeatureOnHomepage";var requirementName="Track clicks on PUWYLO feature on Homepage";var parseDataObj=parseData;try{if(data.action=="Clicked: Continue"||data.action=="Clicked link: View more flight times"){if(data.action=="Clicked: Continue"){parseDataObj.eventAction='Clicked: Continue booking';}
parseDataObj.eventLabel=prepareLabelForPUWYLOClickEvents(data,parseData);}}catch(e){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return parseDataObj;}
function prepareLabelForPUWYLOClickEvents(data,parseData){var methodName="prepareLabelForPUWYLOClickEvents";var requirementName="prepare label for PUWYLO click events";var label;try{label=data.params.featureName;var flightInfo=DOUBLE_DASH;if(data.params.info){var info=data.params.info;var tripType=info.tripType=='one-way'?'OW':info.tripType=='roundtrip'?'RT':info.tripType=='multi-city'?'MC':'--';var cost=info.cost?info.cost:DOUBLE_DASH;var currency=info.currency?info.currency:DOUBLE_DASH;flightInfo=prepareFlightInfo(info);label=[label,tripType,cost,currency,flightInfo].join("|");}}catch(e){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return label;}
function prepareFlightInfo(info){var methodName="prepareFlightInfo";var requirementName="prepare flight info";var flightInfo=DOUBLE_DASH;try{if(info){var legInfo=[];var originArray=info.origin?info.origin.split(','):[];var destinationArray=info.destination?info.destination.split(','):[];var departureDateArray=info.departureDate?info.departureDate.split(','):[];if(originArray.length&&destinationArray.length&&departureDateArray.length&&originArray.length==destinationArray.length==departureDateArray.length>0){var length=originArray.length;for(var i=0;i<length;i++){var details=Bootstrapper.prepareLegDetails(originArray[i],destinationArray[i],departureDateArray[i]);legInfo.push(details);if(info.tripType=='roundtrip'){var departureDate=info.returnDate?info.returnDate:'--';details=Bootstrapper.prepareLegDetails(destinationArray[i],originArray[i],departureDate);legInfo.push(details);}}
flightInfo='['+legInfo.join(",")+']';}}}catch(e){var ds="Callback";var inputValue='info object';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return flightInfo;}
Bootstrapper.parseHomePageDataWithDescDetailStructure=function(data){var methodName="parseHomePageDataWithDescDetailStructure";var requirementName="Track Homepage event";var homeDataObjects=[];var homeData={};homeData.eventCategory=EC_CONST;try{if(data.action){homeData.eventAction=data.action;homeData.tealiumEvent=data.action;if(data.action=="Clicked: Find Trips"){homeData.eventLabel=prepareFindTripsEL(data);}}
homeDataObjects.push(homeData);}catch(e){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return homeDataObjects;};function prepareFindTripsEL(data){var methodName="prepareFindTripsEL";var requirementName="prepare event label for find trips";var label;try{if(data.detail){var detail=data.detail;var tripSelection=detail.tripSelection?detail.tripSelection:fetchTripSelectionFromDOM();var origin=detail.origin?detail.origin:DOUBLE_DASH;var destination=detail.destination?detail.destination:DOUBLE_DASH;var departureDate=detail.departureDate?detail.departureDate:DOUBLE_DASH;var returnDate=detail.returnDate?detail.returnDate:DOUBLE_DASH;label=[tripSelection,origin,destination,departureDate,returnDate].join("|");if(tripSelection=="Flight + hotel"||tripSelection=="Flight + hotel + car"){var totalRooms=detail.totalRooms?detail.totalRooms:DOUBLE_DASH;label=[label,totalRooms].join("|");}}}catch(e){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return label;}
function fetchTripSelectionFromDOM(){var methodName="fetchTripSelectionFromDOM";var requirementName="fetch Trip Selection From DOM";var tripSelection=DOUBLE_DASH;try{if($("#radiofield-item-id-packageType-0").length>0&&$("#radiofield-item-id-packageType-0")[0].checked){tripSelection="Flight + hotel";}else if($("#radiofield-item-id-packageType-1").length>0&&$("#radiofield-item-id-packageType-1")[0].checked){tripSelection="Flight + hotel + car";}else if($("#radiofield-item-id-packageType-2").length>0&&$("#radiofield-item-id-packageType-2")[0].checked){tripSelection="Flight + car";}}catch(e){var ds="DOM";var inputValue="Radio button ids";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return tripSelection;}
function prepareCarWidgetLabel(){var requirementName='Prepare labels for Car form tracking';var methodName='prepareCarWidgetLabel';var CONST_ID_PICKUP_LOCATION='bookCarPickupInput';var CONST_IP_PICKUP_LCATION_BOOKING_WIDGET="home-form-pickupLocation";var CONST_ID_MILES='awardCarTravel';var CONST_ID_MILES_BOOKING_WIDGET='BookWithMiles';var label;try{var pickUpLocation=document.getElementById(CONST_ID_PICKUP_LOCATION)||document.getElementById(CONST_IP_PICKUP_LCATION_BOOKING_WIDGET);var isMiles=document.getElementById(CONST_ID_MILES)||document.getElementById(CONST_ID_MILES_BOOKING_WIDGET);var isBookingWidget=document.getElementById(CONST_IP_PICKUP_LCATION_BOOKING_WIDGET);label=(pickUpLocation&&pickUpLocation.value)?pickUpLocation.value:DOUBLE_DASH;var isAward=(isMiles&&isMiles.checked)?'Y':'N';label=[label,isAward].join('|');if(isBookingWidget){label=[label,EC_LABEL].join("|");}}catch(error){var ds='DOM';var inputValue='Car Form elements';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function checkActionForHorizontalBookingWidgetDropDown(action){try{if(action=="Selected: Packages"||action=="Selected: Hotel"||action=="Selected: Car"||action=="Selected: Flight"||action=="Selected: Cruise"){return true;}}catch(error){var requirementName="Check action for Horizontal booking widget drop-down",methodName="checkActionForHorizontalBookingWidgetDropDown",ds="Callback",inputValue=action;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return false;}
function trackFindFlightClicksOnHorizontalWidget(params){var label=DOUBLE_DASH;try{if(params&&params.info){var info=params.info,origin=(info.Origin&&info.Origin.locationCode)||DOUBLE_DASH,destination=(info.Destination&&info.Destination.locationCode)||DOUBLE_DASH,flightType=info.flightType||DOUBLE_DASH,departDate=info.DepartDate?Bootstrapper.getDate(info.DepartDate,"-"):DOUBLE_DASH,returnDate=flightType=="roundTrip"&&info.ReturnDate?Bootstrapper.getDate(info.ReturnDate,"-"):DOUBLE_DASH,paxCount=Bootstrapper.fetchTotalPaxCount(info),travelType=typeof info.AwardTravel=="boolean"?info.AwardTravel?"Award":"Revenue":DOUBLE_DASH,cabinType=travelType=="Revenue"?fetchType("cabinType"):fetchType("awardCabinType"),advancedSearch=parseAdvancedSearch(info);label=[origin,destination,flightType,departDate,returnDate,paxCount,travelType,cabinType,advancedSearch].join("|");}}catch(error){var requirementName="Track 'Find Flight' clicks on Horizontal Widget",methodName="trackFindFlightClicksOnHorizontalWidget",ds="Callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function parseAdvancedSearch(info){var advancedSearch=DOUBLE_DASH;try{advancedSearch=info.advancedSearch||advancedSearch;if(advancedSearch!=DOUBLE_DASH){var isCheckedSearchNearByFrom=typeof advancedSearch.isCheckedSearchNearByFrom=="boolean"?advancedSearch.isCheckedSearchNearByFrom?"Y":"N":DOUBLE_DASH,isCheckedSearchNearByTo=typeof advancedSearch.isCheckedSearchNearByTo=="boolean"?advancedSearch.isCheckedSearchNearByTo?"Y":"N":DOUBLE_DASH,fareType=fetchType("advancedSearch.fareType"),upgradeType=advancedSearch.upgradeType||DOUBLE_DASH;if(info.AwardTravel==true){upgradeType=DOUBLE_DASH;}
advancedSearch=[isCheckedSearchNearByFrom,isCheckedSearchNearByTo,fareType,upgradeType].join("|");}}catch(error){var requirementName="Parse advancedSearch",methodName="parseAdvancedSearch",ds="Callback",inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return advancedSearch;}
function trackFindtripsClicksOnHorizontalWidget(params){var label=DOUBLE_DASH;try{if(params&&params.info){var info=params.info,packageType=(info.packageType&&info.packageType.replace(/A/,"F"))||DOUBLE_DASH,origin=(info.origin&&info.origin.cityName)||DOUBLE_DASH,destination=(info.destination&&info.destination.cityName)||DOUBLE_DASH,departDate=Array.isArray(info.dates)?Bootstrapper.getDate(info.dates[0],'-'):DOUBLE_DASH,returnDate=Array.isArray(info.dates)?Bootstrapper.getDate(info.dates[1],'-'):DOUBLE_DASH,paxCount=Bootstrapper.fetchTotalPaxCount(info),rooms=(packageType!="FC"&&info.rooms)||DOUBLE_DASH;label=[packageType,origin,destination,departDate,returnDate,paxCount,rooms].join("|");}}catch(error){var requirementName="Track 'Find trips' clicks on Horizontal Widget",methodName="trackFindtripsClicksOnHorizontalWidget",ds="Callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function fetchType(type){var selected=DOUBLE_DASH;try{type=$('[name="bookFlightModel.'+type+'"] option:selected')[0];selected=(type&&type.textContent)||DOUBLE_DASH;}catch(error){var requirementName="Fetch fare/cabin type",methodName="fetchType",ds="DOM Element",inputValue=type;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return selected;}
function prepareLabelForFeatureCarousel(data){let methodName="prepareLabelForFeatureCarousel";let requirementName="Prepare Label For Feature Carousel";let label;try{if(data.params&&data.params.info){let info=data.params.info;let title=info.title?info.title:DOUBLE_DASH;let destinationURL=info.destinationURL?info.destinationURL:DOUBLE_DASH;if(data.action=="Clicked: Personalized Tiles"){label=[title,destinationURL].join("|");}else{let cta=info.cta?info.cta:DOUBLE_DASH;let rank=info.rank?info.rank:DOUBLE_DASH;let messageKey=info.messageKey?info.messageKey:DOUBLE_DASH;label=[destinationURL,title,cta,rank,messageKey].join("|");}}}catch(e){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return label;}
function prepareLabelForPersonalizedTile(data){let methodName="prepareLabelForPersonalizedTile";let requirementName="Prepare Label For Personalized Tile";let parseDataObj=[];try{if(data.params&&data.params.info){let info=data.params.info;let tiles;if(Array.isArray(info)){tiles=info;}else if(info&&info.tiles&&info.tiles.length>0){tiles=info.tiles;}
if(tiles){for(const tile of tiles){let dataObject=parsePersonalizedTile(data,data.action,tile);parseDataObj.push(dataObject);}}}}catch(e){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return parseDataObj;}
function parsePersonalizedTile(data,action,tile){let requirementName="Handle personalized interactions";let methodName="parsePersonalizedTile";let dataObject={};try{let title=tile.title||DOUBLE_DASH;let rank=tile.rank||DOUBLE_DASH;let messageKey=tile.messageKey||DOUBLE_DASH;let destinationLink=tile.destinationLink||DOUBLE_DASH;label=[Bootstrapper.fetchFeatureAndPageName(data.params),title,rank,messageKey,destinationLink].join("|");dataObject.eventCategory=data.category;dataObject.eventAction=action;dataObject.tealiumEvent=action;dataObject.eventLabel=label;}catch(error){let ds="Callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataObject;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[104]=='undefined'){utag.runonce.ext[104]=1;if(1){var CONST_EXTN_NAME="Prepare and Set Data on UDO";var DOUBLE_DASH="--";var ds="Callabck";Bootstrapper.storeDataInUDO=function(data){var methodName="storeDataInUDO";var requirementName="Store data in UDO from callback";try{if(data.action=="Result Load"){storeSearchCriteriaData(data);storeSearchTripsData(data);storeFiltersData(data);utag.data._ccurrency=Bootstrapper.getSearchTripCurrencyValue();Bootstrapper.fetchFlightSegmentIndex();storeFBID("Search");}
else if(data.action=="Page Load"&&data.category!="Shopping Search"&&data.category!="Shopping "&&data.category!="ManageRes Purchase"&&data.category!="Checkin Purchase"){storeSearchCriteriaData(data);storeSelectedTripsData(data);storeTravelOptionsData(data);storeCartData(data);storeCostAndTaxes(data);storeSeatSelectorData(data);storeUpliftInfoData(data);storePNR(data);storePaymentInfo(data);utag.data._ccurrency=getCurrency(data);storeCurrency(data);}
else if(data.action=="Unchecked: Show Refundable fares"||data.action=="Checked: Show Refundable fares"){storeRefundableFaresShowData(data.action);}
else if(data.action=="Impression: Travel Guard"){storeTravelGuardPageId(data);}else if(data.action=="Impression: carbon emission"){storeCarbonEmissionInfo(data);}else if(data.action=="Page Load"&&data.category=="Shopping "){storeTravelOptionsData(data);}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
Bootstrapper.resetShoppingUtagData=function(){var methodName="resetShoppingUtagData";var requirementName="Reset data of shopping path";try{var customUtagData={};if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.searchCriteria)){customUtagData[Bootstrapper.UTAG_CONST.searchCriteria]=undefined;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.searchTrips)){customUtagData[Bootstrapper.UTAG_CONST.searchTrips]=undefined;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.searchedFilters)){customUtagData[Bootstrapper.UTAG_CONST.searchedFilters]=undefined;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.selectedTrips)){customUtagData[Bootstrapper.UTAG_CONST.selectedTrips]=undefined;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.travelOptions)){customUtagData[Bootstrapper.UTAG_CONST.travelOptions]=undefined;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.cart)){customUtagData[Bootstrapper.UTAG_CONST.cart]=undefined;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.seatSelector)){customUtagData[Bootstrapper.UTAG_CONST.seatSelector]=undefined;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.upliftInfo)){customUtagData[Bootstrapper.UTAG_CONST.upliftInfo]=undefined;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.refundableFareShown)){customUtagData[Bootstrapper.UTAG_CONST.refundableFareShown]=false;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.travelGuardPageId)){customUtagData[Bootstrapper.UTAG_CONST.travelGuardPageId]=undefined;}
if(Bootstrapper.getCustomUtagData(Bootstrapper.UTAG_CONST.flight_segment_index)){customUtagData[Bootstrapper.UTAG_CONST.flight_segment_index]=undefined;}
utag_data.trigger_point=undefined;utag_data.tiktok_event=undefined;Bootstrapper.setCustomUtagData(customUtagData);}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}};function storeSearchCriteriaData(data){var methodName="storeSearchCriteriaData";var requirementName="Store data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.searchCriteria]=data.params.info.searchCriteria;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
Bootstrapper.getUpgradeType=function(){let methodName="getUpgradeType";let requirementName="Get upgradeType from DL";let upgradeType;try{if(utag_data&&utag_data.searchCriteria&&utag_data.searchCriteria.upgradeType){upgradeType=utag_data.searchCriteria.upgradeType;}}catch(error){let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return upgradeType;};function storeSearchTripsData(data){var methodName="storeSearchTripsData";var requirementName="Store data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.searchTrips]=data.params.info.trips;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storeFiltersData(data){var methodName="storeFiltersData";var requirementName="Store filters data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.searchedFilters]=data.params.info.filters;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storeSelectedTripsData(data){var methodName="storeSelectedTripsData";var requirementName="Store data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.selectedTrips]=data.params.info.selectedTrips;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storeTravelOptionsData(data){var methodName="storeTravelOptionsData";var requirementName="Store data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.travelOptions]=data.params.info.travelOptions;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storeCartData(data){var methodName="storeCartData";var requirementName="Store data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.cart]=data.params.info.cart;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storeCostAndTaxes(data){let methodName="storeCostAndTaxes";let requirementName="Save fare total and taxes values";try{if(data.params&&data.params.info){let cart=data.params.info.cart;var customUtagData={};let travelOptions=processTravelOptionsAmount(data.params.info);let feesInfo=getFeeInfo(data.params.info);if((utag_data.travelType&&utag_data.travelType=="Revenue")||(utag_data.searchCriteria&&utag_data.searchCriteria.travelType&&utag_data.searchCriteria.travelType=="Revenue")){customUtagData[Bootstrapper.UTAG_CONST.cost]=(data.params.info.cart&&data.params.info.cart.fareTotals&&data.params.info.cart.fareTotals.length>0&&data.params.info.cart.fareTotals[0].amount)?(data.params.info.cart.fareTotals[0].amount).toFixed(2):0;}else{customUtagData[Bootstrapper.UTAG_CONST.cost]=0.00;}
if(travelOptions){customUtagData[Bootstrapper.UTAG_CONST.cost]=parseFloat(customUtagData[Bootstrapper.UTAG_CONST.cost])+parseFloat(travelOptions);}
if(feesInfo&&feesInfo.amount){customUtagData[Bootstrapper.UTAG_CONST.cost]=parseFloat(customUtagData[Bootstrapper.UTAG_CONST.cost])+parseFloat(feesInfo.amount);}
if(cart&&cart.isMoneyAndMilesSelected&&cart.moneyAndMiles&&cart.moneyAndMiles.price&&cart.moneyAndMiles.price.amount){customUtagData[Bootstrapper.UTAG_CONST.cost]=parseFloat(customUtagData[Bootstrapper.UTAG_CONST.cost])-Math.abs(data.params.info.cart.moneyAndMiles.price.amount);}
customUtagData[Bootstrapper.UTAG_CONST.taxes]=(data.params.info.cart&&data.params.info.cart.taxesAndFeesTotal&&data.params.info.cart.taxesAndFeesTotal.amount)?(data.params.info.cart.taxesAndFeesTotal.amount).toFixed(2):0;customUtagData[Bootstrapper.UTAG_CONST.taxes]=parseFloat(customUtagData[Bootstrapper.UTAG_CONST.taxes]).toFixed(2);customUtagData[Bootstrapper.UTAG_CONST.cost]=parseFloat(customUtagData[Bootstrapper.UTAG_CONST.cost]).toFixed(2);Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){let ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function processTravelOptionsAmount(info){let requirementName="Process traveloptions amount";let methodName="processTravelOptionsAmount";let travelOptionsAmt=0;try{if(info&&info.cart&&info.cart.travelOptionsTotal&&info.cart.travelOptionsTotal.totals&&info.cart.travelOptionsTotal.totals.length>0){let travelOptionTotals=info.cart.travelOptionsTotal.totals;for(let i=0;i<travelOptionTotals.length;i++){if(travelOptionTotals[i].currencyCode&&travelOptionTotals[i].currencyCode.toLowerCase()!="miles"){travelOptionsAmt=travelOptionTotals[i].amount?travelOptionTotals[i].amount:0;}}}}catch(error){let ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return travelOptionsAmt;}
function storeSeatSelectorData(data){var methodName="storeSeatSelectorData";var requirementName="Store data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.seatSelector]=data.params.info.seatSelector;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storeUpliftInfoData(data){var methodName="storeUpliftInfoData";var requirementName="Store data in UDO from callback";try{var params=data.params;if(params&&params.info){var upliftInfo=params.info.upliftInfo;if(upliftInfo&&upliftInfo.tripInfo&&typeof upliftInfo.tripInfo.order_lines=="object"){var order_lines=upliftInfo.tripInfo.order_lines;var add_ons=[];for(var i=0;i<order_lines.length;i++){var add_on={};add_on["id"]=i;add_on["name"]=order_lines[i]["name"];add_on["price"]=order_lines[i]["unit_price"];add_ons.push(add_on);}
upliftInfo.tripInfo.add_ons=add_ons;}
var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.upliftInfo]=upliftInfo;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storeRefundableFaresShowData(action){var methodName="storeRefundableFaresShowData";var requirementName="Store Refundable Fares shown data in UDO from callback";try{var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.refundableFareShown]=false;if(action=="Checked: Show Refundable fares"){customUtagData[Bootstrapper.UTAG_CONST.refundableFareShown]=true;}
Bootstrapper.setCustomUtagData(customUtagData);}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storeTravelGuardPageId(data){var methodName="storeTravelGuardPageId";var requirementName="Store travel gaurd page id data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.travelGuardPageId]=data.params.info.pageId;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
Bootstrapper.storeMPUserInfoInUDO=function(data){var methodName="storeMPUserInfoInUDO";var requirementName="Store MP user data in UDO from callback";try{if(data.action&&data.action=="Sign-in success"){if(data.detail){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.encoded_email]=data.detail.email;customUtagData[Bootstrapper.UTAG_CONST.current_age]=data.detail.currentAge;customUtagData[Bootstrapper.UTAG_CONST.is_subscribed]=data.detail.isSubscribed;Bootstrapper.setCustomUtagData(customUtagData);}}else if(data.category&&data.category=="My Account"&&data.action&&(data.action=="Clicked: Continue"||data.action=="Sucessful enrollment")){if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.encoded_email]=data.params.info.email;customUtagData[Bootstrapper.UTAG_CONST.current_age]=data.params.info.currentAge;customUtagData[Bootstrapper.UTAG_CONST.is_subscribed]=data.params.info.isSubscribed;Bootstrapper.setCustomUtagData(customUtagData);}}}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
Bootstrapper.getSearchTravelType=function(){var methodName="getSearchTravelType";var requirementName="Fetch travel type from UDO";var travelType="Revenue";try{if(document.location.href.indexOf("at=1")>-1||document.location.href.indexOf("tqp=A")>-1){travelType="Award";}else if(utag_data.searchCriteria){if(utag_data.searchCriteria.travelType&&utag_data.searchCriteria.travelType!="n/a"){travelType=utag_data.searchCriteria.travelType;}
}
utag_data.travelType=travelType;return travelType;}catch(error){var ds="Data from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}};Bootstrapper.getSearchCabinType=function(){var methodName="getSearchCabinType";var requirementName="Fetch Cabin type from UDO";try{if(utag_data.searchTrips&&utag_data.searchTrips.length>0&&utag_data.searchTrips[0]&&utag_data.searchTrips[0].fareColumns&&utag_data.searchTrips[0].fareColumns.length>0&&utag_data.searchTrips[0].fareColumns[0]&&utag_data.searchTrips[0].fareColumns[0].fareFamily){return utag_data.searchTrips[0].fareColumns[0].fareFamily[0]+utag_data.searchTrips[0].fareColumns[0].fareFamily.substr(1).toLowerCase();}}catch(error){var ds="Data object received from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getSearchTripModel=function(){var methodName="getSearchTripModel";var requirementName="Fetch Trip Model from UDO";try{if(utag_data.searchCriteria&&utag_data.searchCriteria.tripModel){return utag_data.searchCriteria.tripModel;}}catch(error){var ds="Data object received from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.fetchFlightSegmentIndex=function(){var methodName="fetchFlightSegmentIndex";var requirementName="Fetch Flight segement Index";var index=1;try{if(utag_data.searchCriteria&&utag_data.searchCriteria.flightSegment){index=utag_data.searchCriteria.flightSegment;}
var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.flight_segment_index]=index;Bootstrapper.setCustomUtagData(customUtagData);}catch(error){var ds="Document location";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return index;};Bootstrapper.getFlightSearchOrigin=function(index){var methodName="getFlightSearchOrigin";var requirementName="Fetch flight search origin";try{var searchIndex=index-1;if(utag_data.searchCriteria&&utag_data.searchCriteria.flights&&utag_data.searchCriteria.flights.length>searchIndex&&utag_data.searchCriteria.flights[searchIndex]){return utag_data.searchCriteria.flights[searchIndex].origin?utag_data.searchCriteria.flights[searchIndex].origin:DOUBLE_DASH;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getFlightSearchDestination=function(index){var methodName="getFlightSearchDestination";var requirementName="Fetch flight search destination";try{var searchIndex=index-1;if(utag_data.searchCriteria&&utag_data.searchCriteria.flights&&utag_data.searchCriteria.flights.length>searchIndex&&utag_data.searchCriteria.flights[searchIndex]){return utag_data.searchCriteria.flights[searchIndex].destination?utag_data.searchCriteria.flights[searchIndex].destination:DOUBLE_DASH;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getFlightSearchDepartureDate=function(index){var methodName="getFlightSearchDepartureDate";var requirementName="Fetch flight search DepartureDate";try{var searchIndex=index-1;if(utag_data.searchCriteria&&utag_data.searchCriteria.flights&&utag_data.searchCriteria.flights.length>searchIndex&&utag_data.searchCriteria.flights[searchIndex]&&utag_data.searchCriteria.flights[searchIndex].departureDate){return Bootstrapper._dateFormat(utag_data.searchCriteria.flights[searchIndex].departureDate,"MM-d-yyyy");}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getStayLength=function(){var methodName="getStayLength";var requirementName="Fetch Stay length";try{if(utag_data.searchCriteria&&utag_data.searchCriteria.flights){if(utag_data.searchCriteria.flights.length==1){return 1;}
else{var length=utag_data.searchCriteria.flights.length
return(new Date(utag_data.searchCriteria.flights[length-1].departureDate)-new Date(utag_data.searchCriteria.flights[0].departureDate))/(1000*60*60*24)+1;}}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getTripType=function(){var methodName="getTripType";var requirementName="Fetch Trip Type ";try{if(utag_data.searchCriteria&&utag_data.searchCriteria.tripType){return utag_data.searchCriteria.tripType;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getTripTypeValue=function(){var methodName="getTripTypeValue";var requirementName="Fetch Trip Type value ";try{var tripType=Bootstrapper.getTripType();if(tripType!=DOUBLE_DASH){if(tripType=='OW'||tripType=='oneway'){return"One Way";}
else if(tripType=='RT'||tripType=='roundtrip'){return"Round Trip";}
else if(tripType=='MC'){return"Multiple Destinations";}}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getPaxCount=function(){var methodName="getPaxCount";var requirementName="Fetch Pax Count ";try{if(utag_data.searchCriteria&&utag_data.searchCriteria.paxCount){return utag_data.searchCriteria.paxCount;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getNumDaysTilTravel=function(index){var methodName="getNumDaysTilTravel";var requirementName="Fetch Number of days till travel";try{var searchIndex=index-1;if(utag_data.searchCriteria&&utag_data.searchCriteria.flights&&utag_data.searchCriteria.flights.length>searchIndex&&utag_data.searchCriteria.flights[searchIndex]&&utag_data.searchCriteria.flights[searchIndex].departureDate){return parseInt((new Date(utag_data.searchCriteria.flights[searchIndex].departureDate)-new Date())/(1000*60*60*24))+1;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.updateSearchedFilters=function(data){var methodName="updateSearchedFilters";var requirementName="Update searchFilters object if filters are changed";try{if(data.params&&data.params.info&&utag_data.searchedFilters){var info=data.params.info;utag_data.searchedFilters.nonStop=info.nonStop?info.nonStop:false;utag_data.searchedFilters.withStops=info.withStops?info.withStops:false;utag_data.searchedFilters.mixedCabins=info.mixedCabins?info.mixedCabins:false;}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper.getSelectedTripOrigin=function(index){var methodName="getSelectedTripOrigin";var requirementName="Fetch selected trip origin";try{var selectedIndex=index-1;if(utag_data.selectedTrips&&utag_data.selectedTrips.length>selectedIndex&&utag_data.selectedTrips[selectedIndex]){return utag_data.selectedTrips[selectedIndex].origin?utag_data.selectedTrips[selectedIndex].origin:DOUBLE_DASH;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getSelectedTripDestination=function(index){var methodName="getSelectedTripDestination";var requirementName="Fetch selected trip destination";try{var selectedIndex=index-1;if(utag_data.selectedTrips&&utag_data.selectedTrips.length>selectedIndex&&utag_data.selectedTrips[selectedIndex]){return utag_data.selectedTrips[selectedIndex].destination?utag_data.selectedTrips[selectedIndex].destination:DOUBLE_DASH;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};Bootstrapper.getSelectedTripFlightNumber=function(index){var methodName="getSelectedTripFlightNumber";var requirementName="Fetch selected trip flight number";try{var selectedIndex=index-1;if(utag_data.selectedTrips&&utag_data.selectedTrips.length>selectedIndex&&utag_data.selectedTrips[selectedIndex]){var trip=utag_data.selectedTrips[selectedIndex];var marketingCarrierCode=trip.marketingCarrierCode?trip.marketingCarrierCode:"";var flightNumber=trip.flightNumber?marketingCarrierCode+trip.flightNumber:DOUBLE_DASH;if(trip.connections){flightNumber=getSelectedTripConnectionFlightNumber(trip,flightNumber);}
return flightNumber;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return DOUBLE_DASH;};function getSelectedTripConnectionFlightNumber(trip,flightNumber){var requirementName="Get flight number of connecting flights for selected trip";var methodName="getSelectedTripConnectionFlightNumber";try{for(var i=0;i<trip.connections.length;i++){var oc=trip.connections[i].marketingCarrierCode?trip.connections[i].marketingCarrierCode:"";var fn=trip.connections[i].flightNumber?oc+trip.connections[i].flightNumber:DOUBLE_DASH;flightNumber=i==0?flightNumber:[flightNumber,fn].join('|');}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return flightNumber;}
Bootstrapper.getEachProductPrice=function(isMiles){let methodName="getEachProductPrice";let requirementName="Fetch each product price";let eachProductPrice=0;try{let tripType=Bootstrapper.getSearchTravelType()!=DOUBLE_DASH?Bootstrapper.getSearchTravelType():'Revenue';if(isMiles&&tripType=="Revenue"){eachProductPrice=getEachProductMiles();}else{let amount=(utag_data.cart&&utag_data.cart.fareTotals&&utag_data.cart.fareTotals.length>0&&utag_data.cart.fareTotals[0].amount)?utag_data.cart.fareTotals[0].amount:0;let totalAmount=utag_data.cart.taxesAndFeesTotal&&utag_data.cart.taxesAndFeesTotal.amount&&tripType=='Revenue'?amount+utag_data.cart.taxesAndFeesTotal.amount:amount;let tripCount=utag_data.selectedTrips&&utag_data.selectedTrips.length>0?utag_data.selectedTrips.length:1;let pax=Bootstrapper.getPaxCount()!=DOUBLE_DASH?Bootstrapper.getPaxCount():1;let eachTripCost=Math.round(totalAmount)/tripCount;eachProductPrice=Math.round(eachTripCost/pax);}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return eachProductPrice;};Bootstrapper.getEachProductPoints=function(isMiles){let methodName="getEachProductPoints";let requirementName="Fetch each product points";let eachProductPoints=0;try{if(utag_data.cart&&utag_data.cart.fees&&utag_data.cart.fees.length>0&&utag_data.cart.fees[0].price&&utag_data.cart.fees[0].price.currencyCode&&utag_data.cart.fees[0].price.currencyCode=="POINTS"){let amount=utag_data.cart.fees[0].price.amount?utag_data.cart.fees[0].price.amount:0;let tripCount=utag_data.selectedTrips&&utag_data.selectedTrips.length>0?utag_data.selectedTrips.length:1;let pax=Bootstrapper.getPaxCount()!=DOUBLE_DASH?Bootstrapper.getPaxCount():1;let eachTripCost=Math.round(amount)/tripCount;eachProductPoints=parseInt(Math.round(eachTripCost/pax));}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return eachProductPoints;};Bootstrapper.getProductCurrencyCode=function(){var methodName="getProductCurrencyCode";var requirementName="Fetch currency code of selected product";try{if(utag_data.cart&&utag_data.cart.taxesAndFeesTotal){return utag_data.cart.taxesAndFeesTotal.currencyCode?utag_data.cart.taxesAndFeesTotal.currencyCode:"USD";}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return"USD";};Bootstrapper.getProductTax=function(){var methodName="getProductTax";var requirementName="Fetch product tax value";try{if(utag_data.cart&&utag_data.cart.taxesAndFeesTotal){return utag_data.cart.taxesAndFeesTotal.amount?Math.round(utag_data.cart.taxesAndFeesTotal.amount):0;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return 0;};Bootstrapper.getShoppingCartTotalAmount=function(){var methodName="getShoppingCartTotalAmount";var requirementName="Fetch total amount tom shopping cart";try{if(utag_data.cart&&utag_data.cart.totals&&utag_data.cart.totals.length>0){return(utag_data.cart.totals[0].amount)?Math.round(utag_data.cart.totals[0].amount):0;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return 0;};Bootstrapper.getShoppingCartCurrencyCode=function(){var methodName="getShoppingCartCurrencyCode";var requirementName="Fetch currency code of shopping cart";var currencyCode='--';try{if(utag_data.cart){if(Bootstrapper.getSearchTravelType()=="Award"){currencyCode=(utag_data.cart.taxesAndFeesTotal&&utag_data.cart.taxesAndFeesTotal.currencyCode)?utag_data.cart.taxesAndFeesTotal.currencyCode:"--";}else{if(utag_data.cart.fareTotals&&utag_data.cart.fareTotals.length>0&&utag_data.cart.fareTotals[0].currencyCode){currencyCode=utag_data.cart.fareTotals[0].currencyCode;}}}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return currencyCode;};Bootstrapper.getMarketTypeFromDL=function(){var requirementName="Fetch market type from Utag data layer";var methodName="getMarketTypeFromDL";var marketType;try{if(utag_data.searchCriteria&&utag_data.searchCriteria.marketType){marketType=utag_data.searchCriteria.marketType;}else{marketType="--";}}catch(error){var ds="data layer";var inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return marketType;};Bootstrapper.fetchSelectedTripsFromDL=function(){var requirementName="Fetch selected trips from DL";var methodName="fetchSelectedTripsFromDL";var trips;try{if(utag_data&&utag_data.selectedTrips){trips=utag_data.selectedTrips;}}catch(error){var ds="Data Layer";var inputValue="utag_data.selectedTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return trips;};Bootstrapper.getTravelOptionsTotalAmount=function(){var methodName="getTravelOptionsTotalAmount";var requirementName="Fetch travel options total amount";try{if(utag_data.cart&&utag_data.cart.travelOptionsTotal&&utag_data.cart.travelOptionsTotal.totals&&utag_data.cart.travelOptionsTotal.totals.length>0){return utag_data.cart.travelOptionsTotal.totals[0].amount?Math.round(utag_data.cart.travelOptionsTotal.totals[0].amount):0;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return 0;};Bootstrapper.setLoginStatus=function(data){var loginStatus={};try{if(data.detail){var info=data.detail;var custId=info.CustomerId?Bootstrapper.base64Encode(info.CustomerId):DOUBLE_DASH;var mpStatus=info.MPAccStatus?Bootstrapper.base64Encode(info.MPAccStatus):DOUBLE_DASH;loginStatus='{"MPS": "'+mpStatus+'","CID":"'+custId+'","MPN": "'+""+'"}';var daysToExpire=7*24*60*60*1000;var future=new Date().getTime();Bootstrapper.saveDataToLocalStorage("loginStatus",loginStatus,(future+daysToExpire));}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storeFBID(event_name){var requirementName="Store FB event id to DL";var methodName="storeFBID";try{if(utag_data&&utag_data.searchCriteria&&utag_data.searchCriteria.flightSegment&&utag_data.searchCriteria.flightSegment===1){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.fbEid]=Bootstrapper.generateFBEventID(event_name,utag_data,utag_data.tealium_random,70);Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function storePNR(data){var methodName="storePNR";var requirementName="Store data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.pnr]=data.params.info.pnr;customUtagData[Bootstrapper.UTAG_CONST.order_id]=data.params.info.pnr;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function storePaymentInfo(data){var methodName="storePaymentInfo";var requirementName="Store data in UDO from callback";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.payment_info]=data.params.info.paymentInfo;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getCurrency(data){let requirementName="Get currency";let methodName="getCurrency";let currency;try{if(data.params&&data.params.info&&data.params.info.cart&&data.params.info.cart.taxesAndFeesTotal){currency=data.params.info.cart.taxesAndFeesTotal.currencyCode||"--";}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return currency;}
function storeCarbonEmissionInfo(data){let requirementName="Save carbon emission info";let methodName="storeCarbonEmissionInfo";try{if(data.params&&data.params.info){var customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.carbon_emission_data]=data.params.info.carbonEmissionData;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function storeCurrency(data){let requirementName="Save currency";let methodName="storeCurrency";try{if(data.params&&data.params.info&&data.params.info.cart&&data.params.info.cart.totals&&data.params.info.cart.totals.length>0){let currency=data.params.info.cart.totals[0].currencyCode||"USD";let customUtagData={};customUtagData[Bootstrapper.UTAG_CONST.currencyCode]=currency;Bootstrapper.setCustomUtagData(customUtagData);}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getEachProductMiles(){let requirementName="Get miles for each product";let methodName="getEachProductMiles";let eachProductPrice=0;try{let tripCount=utag_data.selectedTrips&&utag_data.selectedTrips.length>0?utag_data.selectedTrips.length:1;let pax=Bootstrapper.getPaxCount()!=DOUBLE_DASH?Bootstrapper.getPaxCount():1;if(utag_data.cart){if(utag_data.cart.fees&&utag_data.cart.fees.length>0){for(const fee of utag_data.cart.fees){let miles=(fee.price&&fee.price.currencyCode&&fee.price.currencyCode=="MILES"&&fee.price.amount)?fee.price.amount:0;let tripCost=Math.round(miles)/tripCount;eachProductPrice=Math.round(tripCost/pax);}}
if(utag_data.cart.isMoneyAndMilesSelected&&utag_data.cart.moneyAndMiles&&utag_data.cart.moneyAndMiles&&utag_data.cart.moneyAndMiles.price&&utag_data.cart.moneyAndMiles.price.milesApplied){let miles=utag_data.cart.moneyAndMiles.price.milesApplied;let tripCost=Math.round(miles)/tripCount;eachProductPrice=(eachProductPrice)?eachProductPrice+Math.round(tripCost/pax):Math.round(tripCost/pax);}}
}catch(error){let inputValue=error.message;let ds="DL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eachProductPrice;}
function getFeeInfo(info){let requirementName="Get fee info";let methodName="getFeeInfo";let feeInfo={};try{if(info.cart&&info.cart.fees&&info.cart.fees.length>0){let fees=info.cart.fees;for(let i=0;i<fees.length;i++){if(fees[i].price&&fees[i].price.currencyCode&&fees[i].price.currencyCode&&fees[i].price.currencyCode==="MILES"){feeInfo.miles=fees[i].price.amount?fees[i].price.amount:0;}else{feeInfo.amount=fees[i].price&&fees[i].price.amount?fees[i].price.amount:0;}}}}catch(error){let inputValue=error.message;let ds="callback object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return feeInfo;}
Bootstrapper.getMilesInfo_Payment=function(){let requirementName="Get miles from payment for MUA and M+M cases";let methodName="getMilesInfo_Payment";let paymentMiles=0;try{if(utag_data.cart){if(utag_data.cart){if(utag_data.cart.fees&&utag_data.cart.fees.length>0){for(const fee of utag_data.cart.fees){let miles=(fee.price&&fee.price.currencyCode&&fee.price.currencyCode=="MILES"&&fee.price.amount)?fee.price.amount:0;paymentMiles=paymentMiles+miles;}}
if(utag_data.cart.isMoneyAndMilesSelected&&utag_data.cart.moneyAndMiles&&utag_data.cart.moneyAndMiles&&utag_data.cart.moneyAndMiles.price&&utag_data.cart.moneyAndMiles.price.milesApplied){let miles=utag_data.cart.moneyAndMiles.price.milesApplied;paymentMiles=paymentMiles+miles;}}}}catch(error){let inputValue=error.message;let ds="DL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return paymentMiles;};}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[141]=='undefined'){utag.runonce.ext[141]=1;if(1){var CONST_EXTN_NAME="Shopping Utility Functions";var DOUBLE_DASH="--";Bootstrapper.prepareEcommerceProducts=function(product,index,ecommerceProducts){var methodName="prepareEcommerceProducts";var requirementName="Prepared e-commerce product Checkout";try{if(product){var id=prepareEcommProductId(index,product);var tripType=Bootstrapper.getSearchTravelType()!=DOUBLE_DASH?Bootstrapper.getSearchTravelType():"Revenue";var paxCount=Bootstrapper.getPaxCount()!=DOUBLE_DASH?Bootstrapper.getPaxCount():1;var flightNumber=Bootstrapper.getSelectedTripFlightNumber(index);var tripCount=utag_data.selectedTrips&&utag_data.selectedTrips.length>0?utag_data.selectedTrips.length:1;var taxAmountPerFare=Math.round((Bootstrapper.getProductTax()/paxCount)/tripCount);ecommerceProducts.productId.push(id);ecommerceProducts.productName.push(prepareODPair(index));ecommerceProducts.productBrand.push(product.productType?product.productType:DOUBLE_DASH);ecommerceProducts.productCategory.push(tripType);ecommerceProducts.productVariant.push(product.cabinDesc?product.cabinDesc:DOUBLE_DASH);ecommerceProducts.productPrice.push(tripType=="Revenue"?Bootstrapper.getEachProductPrice(false):taxAmountPerFare);ecommerceProducts.productQuantity.push(paxCount);ecommerceProducts.productFlightNumber.push(flightNumber);ecommerceProducts.productAwardMiles.push(Bootstrapper.getEachProductPrice(true));ecommerceProducts.productPoints.push(Bootstrapper.getEachProductPoints());}}catch(error){var ds="Data object from argument";var inputValue="flight products";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return ecommerceProducts;};function prepareODPair(index){var requirementName="Prepare OD pair";var methodName="prepareODPair";var odPair;try{var origin=Bootstrapper.getSelectedTripOrigin(index);var destination=Bootstrapper.getSelectedTripDestination(index);odPair=[origin,destination].join("-");}catch(error){var ds="Data object from argument";var inputValue="flight products";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return odPair;}
function prepareEcommProductId(index,product){var requirementName="Prepare ecomm product id";var methodName="prepareEcommProductId";var id;try{var origin=Bootstrapper.getSelectedTripOrigin(index);var destination=Bootstrapper.getSelectedTripDestination(index);var departureDate=product.departureDateTime?Bootstrapper.getDate(product.departureDateTime,""):DOUBLE_DASH;var departureTime=product.departureDateTime?Bootstrapper.getTime(product.departureDateTime,""):DOUBLE_DASH;var arrivalTime=product.arrivalDateTime?Bootstrapper.getTime(product.arrivalDateTime,""):DOUBLE_DASH;var noOfStops=product.connections&&product.connections.length>0?product.connections.length-1:0;id=[origin+destination,departureDate,departureTime,arrivalTime,noOfStops].join('|');}catch(error){var ds="Data object from argument";var inputValue="flight products";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return id;}
Bootstrapper.resetEEProductArray=function(ecommerceProducts){var methodName="resetEEProductArray";var requirementName="Reset Enhance ecommerce product items array";try{if(ecommerceProducts){var products=ecommerceProducts;products.productFlightNumber=[];products.productAwardMiles=[];products.productPoints=[];products.productId=[];products.productName=[];products.productBrand=[];products.productCategory=[];products.productVariant=[];products.productPrice=[];products.productPosition=[];products.productQuantity=[];}}catch(error){var ds="Data from argument";var inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return products;};Bootstrapper.getFlightDurationFromSelectedTrips=function(index){var requirementName="Fetch flight duration";var methodName="getFlightDurationFromSelectedTrips";var flightDuration=DOUBLE_DASH;try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>index){var duration=trips[index].duration;if(duration){flightDuration=[duration.hours,duration.minutes].join("");}}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return flightDuration;};Bootstrapper.getStopsFromSelectedTrips=function(index){var requirementName="Fetch number of stops from selected trip";var methodName="getStopsFromSelectedTrips";var stops=DOUBLE_DASH;try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>index){stops=trips[index].connections&&trips[index].connections.length>0?trips[index].connections.length-1:0;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return stops;};Bootstrapper.getWiFiFromSelectedTrips=function(index){var requirementName="Fetch is WiFi option for selected flight";var methodName="getWiFiFromSelectedTrips";var hasWiFi=DOUBLE_DASH;try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>index){hasWiFi=trips[index].hasWifi;if(hasWiFi&&hasWiFi==true){hasWiFi="Y";}else{hasWiFi="N";}}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return hasWiFi;};Bootstrapper.getPowerFromSelectedTrips=function(index){var requirementName="Fetch power key value for selected flight";var methodName="getPowerFromSelectedTrips";var power=DOUBLE_DASH;try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>index){power=trips[index].hasPower;if(power&&power==true){power="Y";}else{power="N";}}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return power;};Bootstrapper.getTVFromSelectedTrips=function(index){var requirementName="Fetch Direct TV otion";var methodName="getTVFromSelectedTrips";var hasDirectTv=DOUBLE_DASH;try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>index){hasDirectTv=trips[index].hasDirectTv;if(hasDirectTv&&hasDirectTv==true){hasDirectTv="Y";}else{hasDirectTv="N";}}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return hasDirectTv;};Bootstrapper.getOperatingCarrierFromSelectedTrips=function(index){var requirementName="Fetch Carrier from selected trip";var methodName="getOperatingCarrierFromSelectedTrips";var carrier;try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>index){carrier=trips[index].operatingCarrierDescription?trips[index].operatingCarrierDescription:"--";}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return carrier;};Bootstrapper.getCabinFromSelectedTrips=function(index){var requirementName="Get cabin for selected trip";var methodName="getCabinFromSelectedTrips";var cabin=DOUBLE_DASH;try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>index){cabin=trips[index].cabinDesc?trips[index].cabinDesc:DOUBLE_DASH;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return cabin;};Bootstrapper.getStayLengthFromSelectedTrip=function(index){var requirementName="Fetch Carrier from selected trip";var methodName="getStayLengthFromSelectedTrip";var stayLength=DOUBLE_DASH;try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>index){if(trips.length==1){stayLength=0;}
else{var startTravelDate=Bootstrapper.getTravelDateFromSelectedTrip(0);var endTravelDate=Bootstrapper.getTravelDateFromSelectedTrip(trips.length-1);stayLength=parseInt((endTravelDate-startTravelDate)/(1000*60*60*24)+1);}}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return stayLength;};Bootstrapper.getNumDaysTilTravelFromSelectedTrip=function(index){var requirementName="Fetch days to departure for selected trips";var methodName="getNumDaysTilTravelFromSelectedTrip";var daysToDaparture=DOUBLE_DASH;try{var searchIndex=index-1;var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>searchIndex){var departureDateTime=new Date(trips[searchIndex].departureDateTimeText);daysToDaparture=parseInt((departureDateTime-new Date())/(1000*60*60*24))+1;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return daysToDaparture;};Bootstrapper.getProductType=function(trips){var requirementName="Fetch product type for selected flight";var methodName="getProductType";var productType;try{productType=trips.productType?trips.productType:DOUBLE_DASH;}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return productType;};Bootstrapper.getTravelDateFromSelectedTrip=function(index){var requirementName="Fetch travel date from selected trip";var methodName="getTravelDateFromSelectedTrip";var travelDate=DOUBLE_DASH;try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>index){travelDate=new Date(trips[index].departureDateTimeText);}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return travelDate;};Bootstrapper.prepareLOFData=function(lof,index,legsInfo){var requirementName="Prepare line of flihgt data";var methodName="prepareLOFData";try{var travelType=Bootstrapper.getSearchTravelType();var origin=Bootstrapper.getSelectedTripOrigin(index+1);var destination=Bootstrapper.getSelectedTripDestination(index+1);var travelDate=Bootstrapper.getDate(lof.departureDateTime,"-");var tripType=Bootstrapper.getTripTypeCodes();var productType=Bootstrapper.getProductType(lof);var flightNumber=Bootstrapper.getSelectedTripFlightNumber(index+1);var cabin=Bootstrapper.getCabinFromSelectedTrips(index);var arrivalTime=Bootstrapper.getTime(lof.arrivalDateTime,"");var departureTime=Bootstrapper.getTime(lof.departureDateTime,"");var stops=Bootstrapper.getStopsFromSelectedTrips(index);var hasWiFi=Bootstrapper.getWiFiFromSelectedTrips(index);var hasDirectTV=Bootstrapper.getTVFromSelectedTrips(index);var hasPower=Bootstrapper.getPowerFromSelectedTrips(index);var flightDuration=Bootstrapper.getFlightDurationFromSelectedTrips(index);var price=Bootstrapper.getShoppingCartTotalAmount();var currency=Bootstrapper.getShoppingCartCurrencyCode();var daysToDeparture=Bootstrapper.getNumDaysTilTravelFromSelectedTrip(index+1);var tripModel=DOUBLE_DASH;var paxCount=Bootstrapper.getPaxCount();var isSatNightStay=DOUBLE_DASH;var stayLength=Bootstrapper.getStayLengthFromSelectedTrip(index);var uniqueCarrier=Bootstrapper.getOperatingCarrierFromSelectedTrips(index);if(index==0){legsInfo=[index,origin,destination,travelType,travelDate,tripType,cabin,flightNumber,departureTime,arrivalTime,stops,flightDuration,hasWiFi,hasDirectTV,hasPower,productType,price,currency,index,daysToDeparture,tripModel,paxCount,isSatNightStay,stayLength,uniqueCarrier].join("|");}else{legsInfo=[legsInfo,index,origin,destination,travelType,travelDate,tripType,cabin,flightNumber,departureTime,arrivalTime,stops,flightDuration,hasWiFi,hasDirectTV,hasPower,productType,price,currency,index,daysToDeparture,tripModel,paxCount,isSatNightStay,stayLength,uniqueCarrier].join("|");}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return legsInfo;};Bootstrapper.getTripTypeCodes=function(){var requirementName="fetch trip type codes from searchCriteria";var methodName="getTripTypeCodes";var tripType=DOUBLE_DASH;try{var searchData=utag_data.searchCriteria;if(searchData){switch(searchData.tripType){case"oneway":case"OW":tripType="OW";break;case"roundtrip":case"RT":tripType="RT";break;case"mutlicity":case"MD":case"MC":tripType="MD";break;default:tripType=DOUBLE_DASH;break;}}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return tripType;};Bootstrapper.getTravelBundleList=function(){var methodName="getTravelBundleList";var requirementName="Fetch selected travel bundel option from travelOptions";var bundleArray=[];try{if(utag_data.travelOptions){bundleArray=utag_data.travelOptions.filter(function(a){return(a.productCode=="bundle");});}}catch(error){var ds="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return bundleArray;};Bootstrapper.getSearchedCountryCode=function(key){var requirementName="Get country code for searched trip";var methodName="getSearchedCountryCode";var countryCode=DOUBLE_DASH;try{if(key&&utag_data&&Array.isArray(utag_data.searchTrips)){countryCode=(utag_data.searchTrips[0]&&utag_data.searchTrips[0][key]);}else{countryCode=DOUBLE_DASH;}}catch(error){var ds="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return countryCode;};Bootstrapper.getSelectedTripCountryCode=function(index,key){var requirementName="Get country code for selected trip";var methodName="getSelectedTripCountryCode";var countryCode;try{if(key&&utag_data&&utag_data.selectedTrips&&utag_data.selectedTrips.length>0&&index<=utag_data.selectedTrips.length){countryCode=utag_data.selectedTrips[index][key]||DOUBLE_DASH;}}catch(error){var ds="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return countryCode;};Bootstrapper.decodedODData=function(ODData){var requirementName="Decode OD info";var methodName="decodedODData";var regex=/\s*([^,]*),?\s*([^\(]*),(?:[^,\(]+,)?\s+([^\(]*)\s+/;var returnODData={'city':'--','state':'--','country':'--'};try{if(ODData){var matchCityStateCountry=ODData.match(regex);if(matchCityStateCountry&&matchCityStateCountry.length==4){returnODData.city=matchCityStateCountry[1]?matchCityStateCountry[1].trim():'--';returnODData.state=matchCityStateCountry[2]?matchCityStateCountry[2].trim():'--';returnODData.country=matchCityStateCountry[3]?matchCityStateCountry[3].trim():'--';}}}catch(error){var ds="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return returnODData;};Bootstrapper.getOfferNameFSR=function(){let requirementName="Fetch offer name";let methodName="getOfferNameFSR";let offerName;try{if(utag_data.searchTrips&&utag_data.searchTrips.length>0){for(const trips of utag_data.searchTrips){let flights=trips.flights;offerName=iterateFlights(flights);if(offerName){return offerName;}}}}catch(error){let ds="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return offerName;};function iterateFlights(flights){let requirementName="Iterate flights array";let methodName="iterateFlights";let offerName;try{if(flights&&flights.length>0){for(const flight of flights){let products=flight.products;for(const product of products){offerName=iterateOffers(product.offers);if(offerName){return offerName;}}}}}catch(error){let ds="utag_data.searchTrips.flights.products";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return offerName;}
function iterateOffers(offers){let requirementName="Iterate offers array";let methodName="iterateOffers";let offerName;try{if(offers&&offers.length>0){for(const offer of offers){offerName=offer.name;if(offerName){return offerName;}}}}catch(error){let ds="utag_data.searchTrips.flights.products.offers";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return offerName;}
Bootstrapper.getOfferNameForFlightSelection=function(data){let requirementName="Get offer for flight selection";let methodName="getOfferNameForFlightSelection";let offerInfo;try{if(data&&data.info){let info=data.info;let offers=info.offers;if(offers){for(const offer of offers){let offerName=offer.name;let originalPrice=offer.originalPrice;let offerPrice=offer.offerPrice;let currency=offer.currency;offerInfo=offerInfo?[offerInfo,offerName,originalPrice,offerPrice,currency].join("|"):[offerName,originalPrice,offerPrice,currency].join("|");}}}}catch(error){let ds="callback data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return offerInfo;};Bootstrapper.getOfferName=function(data){let requirementName="Get offer for flight selection";let methodName="getOfferName";let offerName;try{if(data&&data.info){let info=data.info;let offers=info.offers;if(offers){for(const offer of offers){offerName=offer.name;}}}}catch(error){let ds="callback data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return offerName;};Bootstrapper.getSelectedFlightOperator=function(){let methodName="getSelectedFlightOperator";let requirementName="Get selected flight operator description";let flightOperatorDescription=DOUBLE_DASH;try{if(utag_data.selectedTrips&&utag_data.selectedTrips.length>0&&utag_data.selectedTrips[0].operatingCarrierDescription){flightOperatorDescription=utag_data.selectedTrips[0].operatingCarrierDescription;}}
catch(error){let ds="utag.data.selectedTrips";let inputValue="flight operator description";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return flightOperatorDescription;}
Bootstrapper.getBase64EncodedPNR=function(){let requirementName="Get encoded pnr";let methodName="getBase64EncodedPNR";let pnr;try{if(utag_data&&utag_data.pnr){pnr=Bootstrapper.base64Encode(utag_data.pnr);}}catch(error){let ds="DL";let inputValue="pnr";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return pnr;}
Bootstrapper.getCostInMiles=function(){let requirementName="Get cost in miles";let methodName="getCostInMiles";let cost;try{if(Bootstrapper.getSearchTravelType()=="Award"&&utag_data.cart){let cart=utag_data.cart;let totals=cart.totals;if(totals&&totals.length>0){for(const element of totals){if(element.currencyCode=="MIL"){cost=element.amount;}}}}}catch(error){let ds="DL";let inputValue="cart";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);;}
return cost;}
Bootstrapper.getPaymentType=function(){let methodName="getPaymentType";let requirementName="Get payment type";let paymentType;try{if(utag_data&&utag_data.payment_info&&utag_data.payment_info.length>0){paymentType=utag_data.payment_info[0].paymentType;}}catch(error){let ds="DL";let inputValue="payment_info";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
Bootstrapper.getTaxes=function(){let requirementName="Get taxes";let methodName="getTaxes";let taxes;try{if(utag_data.cart){let cart=utag_data.cart;let totals=cart.taxesAndFeesTotal;if(totals){taxes=utag_data.cart.taxesAndFeesTotal.amount;}}}catch(error){let ds="DL";let inputValue="cart object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);;}
return taxes;}
Bootstrapper.getFareTotalAmount=function(){var methodName="getFareTotalAmount";var requirementName="Fetch fare amount from shopping cart";try{if(utag_data.cart&&utag_data.cart.fareTotals&&utag_data.cart.fareTotals.length>0){return utag_data.cart.fareTotals[0].amount?Math.round(utag_data.cart.fareTotals[0].amount):0;}}catch(error){var ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return 0;};Bootstrapper.getCabinTypeFromSelectedTrips=function(){let methodName="getCabinTypeFromSelectedTrips";let requirementName="Fetch product type from selected trips";let cabinType="--";try{if(utag_data&&utag_data.selectedTrips&&utag_data.selectedTrips.length>0&&utag_data.selectedTrips[0].productType){cabinType=utag_data.selectedTrips[0].productType;}}catch(error){let ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return cabinType;};Bootstrapper.getCabinFromSelectedTrips=function(index){let methodName="getCabinTypeFromSelectedTrips";let requirementName="Fetch product type from selected trips";let cabin="--";try{if(utag_data&&utag_data.selectedTrips&&utag_data.selectedTrips.length>0&&index<=utag_data.selectedTrips.length){cabin=utag_data.selectedTrips[index].productType?utag_data.selectedTrips[index].productType:"--";}}catch(error){let ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return cabin;};Bootstrapper.getFareClassFromSelectedTrips=function(index){let methodName="getCabinTypeFromSelectedTrips";let requirementName="Fetch product type from selected trips";let fareClass="--";try{if(utag_data&&utag_data.selectedTrips&&utag_data.selectedTrips.length>0&&index<=utag_data.selectedTrips.length){fareClass=utag_data.selectedTrips[index].fareClass?utag_data.selectedTrips[index].fareClass:"--";}}catch(error){let ds="Data object recieved from UDO";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return fareClass;};Bootstrapper.getPNR=function(){let requirementName="Get pnr";let methodName="getPNR";let pnr;try{if(utag_data&&utag_data.pnr){pnr=utag_data.pnr;}}catch(error){let ds="DL";let inputValue="pnr";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return pnr;};Bootstrapper.getPaymentsDetail=function(isConfirmationPage){let requirementName="Get payment details";let methodName="getPaymentsDetail";let payment={};try{if(utag_data&&utag_data.payment_info&&utag_data.payment_info.length>0){for(const payInfo of utag_data.payment_info){if(payInfo.currencyCode&&payInfo.currencyCode=="MILES"){payment.miles=payInfo.amount;}else{payment.amount=payInfo.amount;}}}
if(!isConfirmationPage&&typeof Bootstrapper.getMilesInfo_Payment==="function"&&Bootstrapper.getMilesInfo_Payment()>0){payment.miles=Bootstrapper.getMilesInfo_Payment();}}catch(error){let ds="DL";let inputValue="payment_info";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return payment;};}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[165]=='undefined'){utag.runonce.ext[165]=1;if(1){var CONST_EXTN_NAME="PII Scrubber Utility";var poBoxRegex=/P\.? ?O\.?\+? *(Box |Box\+?)+\d+/gi;var creditCardNumber=/\d{4}[ -]?\d{4}[ -]?\d{4}[ -]?\d{4}|\d{4}[ +]?\d{4}[ +]?\d{4}[ +]?\d{4}/g;var creditCardRegex=/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/
var zipcodeRegex=/\b\d{5}\b(-\d{4})?\b/g;var phoneNumberRegex=/(\(?\+?[0-9]{1,2}\)?[-. ]?)?(\(?[0-9]{3}\)?|[0-9]{3})[-. ]?([0-9]{3}[-. ]?[0-9]{4}|\b[A-Z0-9]{7}\b)/g;var ipAddressRegex=/(\d{1,3}(\.\d{1,3}){3}|[0-9A-F]{4}(:[0-9A-F]{4}){5}(::|(:0000)+))/gi;var usSocialSecurityNumberRegex=/\b\d{3}[ -.]\d{2}[ -.]\d{4}\b/g;var emailAddressRegex=/([a-z0-9_\-.+]+)@\w+(\.\w+)*/gi;var URL_REGX=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g;var isEventLabel=false;var EmailAddressMask="xxxx@xxx";var PhoneNumberMask="111-111-1111";var CreditCardMask="1111-1111-1111-1111";var ZipcodeMask="*****";var POBoxMask="xxxxx1111";var IPAddressMask="1.1.1.1";var SSNMask="000.00.0000";Bootstrapper.scrubberPII=function(input_str,eventLabel){var methodName="scrubberPII";var requirementName="Scrubbed PII";try{isEventLabel=eventLabel;if(input_str&&(typeof input_str==='string'||input_str instanceof String)){var output_str=input_str;output_str=scrubberEmailId(output_str);output_str=scrubberCreditCardNumber(output_str,input_str);output_str=scrubberPoBox(output_str);output_str=scrubberIPAddress(output_str);output_str=scrubberUSSocialSecurityNumber(output_str);output_str=scrubberQueryParams(output_str,input_str);return output_str;}}catch(error){var ds="Argument string"
var inputValue="input_str";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return input_str;}
function isPageUrl(input_str){var methodName="isPageUrl";var requirementName="Check passed string is page url";try{if(input_str&&!isEventLabel){var res=input_str.match(URL_REGX)
return res!==null;}}catch(error){var ds="Argument string"
var inputValue="input_str";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return false;}
function scrubberEmailId(input_str){var methodName="scrubberEmailId";var requirementName="Scrub email id if present in string";try{return input_str.replace(emailAddressRegex,EmailAddressMask);}catch(error){var ds="Argument string"
var inputValue="input_str";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function scrubberPhoneNumber(input_str,originalStr){var methodName="scrubberPhoneNumber";var requirementName="Scrub phone number if present in string";try{if(isPageUrl(originalStr)){return input_str;}else{return input_str.replace(phoneNumberRegex,PhoneNumberMask);}}catch(error){var ds="Argument string"
var inputValue="originalStr or input_str ";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function scrubberPageURLQueryParam(url,regex,convertStr){var methodName="scrubberPageURLQueryParam";var requirementName="Scrubbed page url query params";try{if(isPageUrl(url)){var urlSplit=url.split('?');var baseUrl=urlSplit[0];var qp=urlSplit.length>1?urlSplit[1].replace(regex,convertStr):"";return qp?[baseUrl,qp].join('?'):baseUrl;}
return url;}catch(error){var ds="Argument string"
var inputValue="url, regex or convertStr ";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function scrubberCreditCardNumber(input_str,originalStr){var methodName="scrubberCreditCardNumber";var requirementName="Scrubbed Credit card number";try{if(isPageUrl(originalStr)){return scrubberPageURLQueryParam(input_str,creditCardRegex,CreditCardMask);}else{return input_str.replace(creditCardRegex,CreditCardMask);}}catch(error){var ds="Argument string"
var inputValue="input_str or originalStr";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function scrubberZipCode(input_str){var methodName="scrubberZipCode";var requirementName="Scrubbed Address zip code";try{return input_str.replace(zipcodeRegex,ZipcodeMask);}catch(error){var ds="Argument string"
var inputValue="input_str";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function scrubberPoBox(input_str){var methodName="scrubberPoBox";var requirementName="Scrubbed PO Box";try{return input_str.replace(poBoxRegex,POBoxMask);}catch(error){var ds="Argument string"
var inputValue="input_str";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function scrubberIPAddress(input_str){var methodName="scrubberIPAddress";var requirementName="Scrubbed IP Address";try{return input_str.replace(ipAddressRegex,IPAddressMask);}catch(error){var ds="Argument string"
var inputValue="input_str";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function scrubberUSSocialSecurityNumber(input_str){var methodName="scrubberUSSocialSecurityNumber";var requirementName="Scrubbed SSN";try{return input_str.replace(usSocialSecurityNumberRegex,SSNMask);}catch(error){var ds="Argument string"
var inputValue="input_str";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function scrubberQueryParams(url,originalStr){var methodName="scrubberQueryParams";var requirementName="Scrubbed Query Params";try{if(isPageUrl(originalStr)){var urlSplit=url.split('?');var baseUrl=urlSplit[0];var qp='';if(urlSplit.length>1){var query=urlSplit[1];var queryArray=query.split(/[&;]/);var resultArray=[];var result="";for(var i=0;i<queryArray.length;i++){var tempSplit=queryArray[i].split("=");var name=tempSplit[0];var value=tempSplit[1];if(tempSplit.length>2){value=tempSplit.slice(1,tempSplit.length).join('=')}
else if(value){if(name.indexOf('phone')>-1||name.indexOf('mobile')>-1){value=scrubberPhoneNumber(value);}else if(name.indexOf('zipcode')>-1||name.indexOf('addresszip')>-1){value=scrubberZipCode(value);}else if(name.indexOf('dateofbirth.day')>-1){value='00'}else if(name.indexOf('dateofbirth.year')>-1){value='0000'}else if(name.indexOf('cardnumber')>-1){value=value.replace(creditCardNumber,CreditCardMask);}}
resultArray.push({name:name,value:value});}
for(var j=0;j<resultArray.length;j++){result+=resultArray[j].name;result+="=";result+=resultArray[j].value;if(j!==resultArray.length-1){result+="&";}}
qp=result;}
return qp?[baseUrl,qp].join('?'):baseUrl;}}catch(error){var ds="Argument string"
var inputValue="url or originalStr";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return url;}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){try{b['clean_url']=Bootstrapper.scrubberPII(utag.data["dom.url"],false)}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1')||(/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')){let CONST_EXTN_NAME="Yahoo Base Lib";Bootstrapper.loadYahooLib=function(){let requirementName="Load base lib";let methodName="loadYahooLib";try{!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}
n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)
for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(){if("undefined"==typeof TextEncoder){window.TextEncoder=function(){},window.TextEncoder.prototype.encode=function(e){for(var t=e.length,n=-1,r="undefined"==typeof Uint8Array?new Array(1.5*t):new Uint8Array(3*t),i=0,o=0,a=0;a!==t;){if(i=e.charCodeAt(a),a+=1,i>=55296&&i<=56319){if(a===t){r[n+=1]=239,r[n+=1]=191,r[n+=1]=189;break}
if(!((o=e.charCodeAt(a))>=56320&&o<=57343)){r[n+=1]=239,r[n+=1]=191,r[n+=1]=189;continue}
if(a+=1,(i=1024*(i-55296)+o-56320+65536)>65535){r[n+=1]=240|i>>>18,r[n+=1]=128|i>>>12&63,r[n+=1]=128|i>>>6&63,r[n+=1]=128|63&i;continue}}
i<=127?r[n+=1]=0|i:i<=2047?(r[n+=1]=192|i>>>6,r[n+=1]=128|63&i):(r[n+=1]=224|i>>>12,r[n+=1]=128|i>>>6&63,r[n+=1]=128|63&i)}
return"undefined"!=typeof Uint8Array?r.subarray(0,n+1):(r.length=n+1,r)},window.TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(window.TextEncoder.prototype,"encoding",{get:function(){if(window.TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch(e){window.TextEncoder.prototype.encoding="utf-8"}
"undefined"!=typeof Symbol&&(window.TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}
var e,t,n,r;Array.from||(Array.from=(e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,r=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)},function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}
for(var s,u=r(i.length),d=t(n)?Object(new n(u)):new Array(u),c=0;c<u;)s=i[c],d[c]=a?void 0===o?a(s,c):a.call(o,s,c):s,c+=1;return d.length=u,d})),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>=e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))})}
n.r(t);var i,o,a=function(){return window.location.hostname},s=function(){return window.location.search},u=function(){return window.location.hash},d=function(e){return window.frames[e]},c=function(e,t,n){window.__cmp(e,t,n)},p=function(e,t,n){window.__uspapi(e,t,n)},f=function(e,t,n,r){window.__tcfapi(e,t,n,r)},l=function(e,t,n){e.postMessage(t,n)};var m=function(e){"__tcfapi"===e||"__cmp"===e?i=!0:"__uspapi"===e&&(o=!0),pe()},v=function(e){de.gdpr_consent=e.tcString,de.gdpr=!0===e.gdprApplies?1:0,de.isOathFirstParty=!0===e.isOathFirstParty?1:0},h=function(e,t,n,r){if(!window[e]){var i=function(e){for(var t,n=window;n;){try{if(d(e)){t=n;break}}catch(e){}
if(n===window.top)break;n=n.parent}
return t}(t);if(!i)return void m(e);var o={},a=Math.random()+"";"__tcfapiLocator"===t?function(e,t,n,r){window[e]=function(e,i,o,a){var s={__tcfapiCall:{command:e,parameter:a,version:i,callId:r}};n[r]=o,l(t,s,"*")}}(e,i,o,a):function(e,t,n,r,i){window[e]=function(e,o,a){var s={};s[t]={command:e,parameter:o,callId:i},r[i]=a,l(n,s,"*")}}(e,n,i,o,a),window.addEventListener("message",(function(e){!function(e,t,n){var r={};try{r="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}
var i=r[t];i&&"function"==typeof n[i.callId]&&(n[i.callId](i.returnValue,i.success),n[i.callId]=null)}(e,r,o)}),!1)}},g=function(){var e,t;h("__cmp","__cmpLocator","__cmpCall","__cmpReturn"),window.__cmp&&(e=function(e,t){t&&v(e),m("__cmp")},t=setTimeout((function(){e(void 0,!1)}),1e3),c("getConsentData",null,(function(n,r){clearTimeout(t),r?e({tcString:n.consentData,gdprApplies:n.gdprApplies,isOathFirstParty:n.isOathFirstParty},!0):e(void 0,!1)})))},w=function(){var e,t;h("__uspapi","__uspapiLocator","__uspapiCall","__uspapiReturn"),window.__uspapi&&(e=function(e,t){t&&(de.us_privacy=void 0===e.uspString?"":e.uspString),m("__uspapi")},t=setTimeout((function(){e(void 0,!1)}),1e3),p("getUSPData",1,(function(n,r){clearTimeout(t),r?e({uspVersion:n.version,uspString:n.uspString,isOathFirstParty:n.isOathFirstParty},!0):e(void 0,!1)})))},y=function(){var e,t;h("__tcfapi","__tcfapiLocator","__tcfapiCall","__tcfapiReturn"),window.__tcfapi?(e=function(e,t){t?(v(e),m("__tcfapi")):g()},t=setTimeout((function(){e(void 0,!1)}),1e3),f("addEventListener",2,(function(n,r){clearTimeout(t),r&&"error"!==n.cmpStatus?"tcloaded"!==n.eventStatus&&"useractioncomplete"!==n.eventStatus||e({tcString:n.tcString,gdprApplies:n.gdprApplies,isOathFirstParty:14===n.cmpId},!0):e(void 0,!1)}))):g()};function _(){if(void 0===M?k:M.use1stPartyCookies){var e=I(A(),"vmcid","&");if(void 0===e||""===e)return;x("vmcid",e);var t=O("vmuuid");void 0!==t&&""!==t||(t=b()),x("vmuuid",t)}}
var E=function(e,t,n){var r;if(void 0!==n&&""!==n)
for(r=0;r<e.length;r+=1){var i=e[r].properties;i.qstrings=i.qstrings||{},i.qstrings[t]=n}},O=function(e){var t=(document.cookie||"").replace(/\s/g,""),n=I(t,e,";");if(void 0===n||""===n){var r;try{r=localStorage.getItem(e)}catch(e){r=null}
if(null!==r){try{r=JSON.parse(r)}catch(e){return}(new Date).getTime()<=r.timestamp+6048e5&&(n=r.id)}}
return n},x=function(e,t){S({name:e,value:t,expiryOffset:604800,domain:a(),path:"/"});var n={id:t,timestamp:(new Date).getTime()};try{localStorage.setItem(e,JSON.stringify(n))}catch(e){}},S=function(e){var t,n,r;arguments.length<1||void 0!==e.name&&(e.value=void 0!==e.value?e.value:"true",e.domain=void 0!==e.domain?e.domain:"",e.path=void 0!==e.path?e.path:"/",e.expiryOffset=void 0!==e.expiryOffset?e.expiryOffset:180,(r=new Date).setTime(r.getTime()+1e3*e.expiryOffset),t=e.expiryOffset>=0?"; expires="+r.toGMTString():"; expires=Thu, 01-Jan-1970 00:00:01 GMT",n=e.name+"="+e.value+t+"; path="+e.path+(""!==e.domain?"; domain=."+e.domain:"")+"; SameSite=Lax",document.cookie=n)},b=function(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n},I=function(e,t,n){var r=new RegExp(n+t+"=([^"+n+"#]*)"),i=(n+e).match(r);if(null!==i)return i[1]},A=function(){var e=s();if(e)return e.substring(1);var t=u();return t?t.substring(t.indexOf("?")+1):""};function j(e){var t=e.auid;if(t){var n=t.trim();we(n)?de.hashedAuids[e.pixelId]=n:-1===n.indexOf("<sha256_hashed_user_id>")&&(de.plainAuids[e.pixelId]=n)}}
var T=function(e){var t=0;for(var n in de.plainAuids){var r=Array.from(new Uint8Array(e[t])).map((function(e){return e.toString(16).padStart(2,"0")}));de.hashedAuids[n]=r.join(""),t++}
de.auidsAreHashed=!0,pe()},P=function(e,t){var n=function(n){t.push(n.target.result),t.length===e.length&&T(t)};for(var r in e)e[r].oncomplete=n};function C(e){var t=e.properties;t.pixelId&&t.auid&&(t.auid=de.hashedAuids[t.pixelId])}
var H,M,F=function(e){var t=(new window.TextEncoder).encode(e);return(window.crypto||window.msCrypto).subtle.digest("SHA-256",t)},k=!1;function L(e){if(void 0!==e){var t=new XMLHttpRequest,n="https://s.yimg.com/wi/config/"+e+".json";t.open("GET",n,!0),t.timeout=2e3,t.ontimeout=function(e){H--,pe()},t.send(),t.onreadystatechange=N}}
function N(){if(this.readyState===this.DONE){if(200===this.status&&this.responseText&&"{}"!==this.responseText)try{var e=JSON.parse(this.responseText);de.pixelConfigs[e.pixelId]=e,void 0!==M&&!0===M.use1stPartyCookies||(M=e)}catch(e){}
H--,pe()}}
function q(e){!function(e){e.he&&(e.userEmail=e.he,delete e.he)}(e),function(e){var t=e.userEmail,n=e.userHashedEmail;if(!D(t)&&n){var r=n.toLowerCase().trim();D(r)&&(e.userEmail=r,delete e.userHashedEmail)}}(e),e.userEmail?(e.userEmail=e.userEmail.toLowerCase().trim(),D(e.userEmail)?(de.emails[e.pixelId]=e.userEmail,e.userHashedEmail&&delete e.userHashedEmail):function(e){var t=e.userEmail;!we(e.userHashedEmail)&&we(t)&&(e.userHashedEmail=e.userEmail,delete e.userEmail)}(e)):delete e.userEmail}
function D(e){return new RegExp(['^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@',"((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$"].join("")).test(e)}
function R(e){var t=e.properties;t.pixelId&&t.userEmail&&(t.userEmail=de.emails[t.pixelId]),t.userHashedEmail&&(we(t.userHashedEmail)||delete t.userHashedEmail)}
var U=function(e,t){var n=function(n){t.push(n.target.result),t.length===e.length&&V(t)};for(var r in e)e[r].oncomplete=n},V=function(e){var t=0;for(var n in de.emails){var r=Array.from(new Uint8Array(e[t])).map((function(e){return e.toString(16).padStart(2,"0")}));de.emails[n]=r.join(""),t++}
de.emailsAreHashed=!0,pe()},z=function(e){var t=(new window.TextEncoder).encode(e);return(window.crypto||window.msCrypto).subtle.digest("SHA-256",t)};var Y={};function G(e,t,n){B(e)[t]=n}
function J(e){var t,n,r;if(void 0!==e.projectId)
if(e.properties&&e.properties.url){e.properties.url=document.location.href;}
for(n=0,r=(t=["documentName","url","referrer"]).length;n<r;n+=1)try{G(e.projectId,t[n],e.properties[t[n]])}catch(e){}}
function B(e){return void 0===Y[e]&&(Y[e]={}),Y[e]}
function Z(e){var t,n,r=[];return r.push("https://sp.analytics.yahoo.com/sp.pl"),r.push("?a="+encodeURIComponent(e.projectId)),t=e.projectId,n="isPageViewTracked",B(t)[n]||r.push(function(){var e,t;return e=[],(t=new Date).ywaStandardTimezoneOffset=function(){var e,t;return e=new Date((new Date).getFullYear(),0,1),t=new Date((new Date).getFullYear(),6,1),Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())}(),e.push("&d="+encodeURIComponent(t.toGMTString())),e.push("&n="+encodeURIComponent(parseInt(t.getTimezoneOffset()/60,10)+(t.getTimezoneOffset()<t.ywaStandardTimezoneOffset?"d":""))),e.join("")}()),r.join("")}
var $=[{name:"tealium",interface:"utag_data"},{name:"gtm",interface:"google_tag_manager"},{name:"adobe",interface:"_satellite"},{name:"ensighten",interface:"ensBootstraps"},{name:"signal",interface:"BrightTag"}];var X=function(){return $.filter((function(e){return!!window[e.interface]})).map((function(e){return e.name})).join(",")};function K(e){var t;return e.projects&&e.properties&&(t=[],W(e),ee(e),te(e,t),delete(e=t).projects,delete e.properties),ne(e),function(e){var t,n;void 0!==(t=O("vmcid"))&&""!==t&&(void 0!==(n=O("vmuuid"))&&""!==n||(n=b()),E(e,"vmcid",t),E(e,"vmuuid",n))}(e),function(e){var t,n=X();if(n)
for(t=0;t<e.length;t+=1){var r=e[t].properties;r.qstrings=r.qstrings||{},r.qstrings.tagmgr=n}}(e),e}
var Q,W=function(e){var t;if("string"==typeof(t=e.projects)){try{t=t.join("|")}catch(e){}
"string"==typeof t&&(e.projects=t.replace(",","|").split("|"))}},ee=function(e){var t,n,r,i;for(t=0,n=(i=e.projects).length;t<n;t+=1)"string"==typeof i[t]&&(r=i[t],i[t]={projectId:r,coloId:"SP"})},te=function(e,t){var n,r,i;for(n=0,r=e.projects.length;n<r;n+=1)(i=e.projects[n]).coloId=i.coloId||"SP",void 0===i.properties&&(i.properties=re(e.properties)),t.push(i)},ne=function(e){var t;for(t=e.length-1;t>=0;t-=1)void 0===e[t].projectId&&e.splice(t,1)},re=function(e){var t,n;for(n in t={},e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},ie=[];function oe(e){le((function(){var t,n,r,i,o,a;for(n=0,r=(t=K(e)).length;n<r;n+=1)i=t[n],o=void 0,a=void 0,void 0!==i.projectId&&(a=B(i.projectId),void 0===(o=i.properties).documentName&&(o.documentName=a.documentName||document.title),void 0===o.url&&(document.URL?o.url=document.URL:document.location.href?o.url=document.location.href:window.location.href?o.url=window.location.href:o.url="",o.url=a.url||o.url),void 0===o.referrer&&(o.referrer=a.referrer||document.referrer||"")),J(t[n]),R(t[n]),C(t[n]),ae(t[n])}))}
function ae(e){var t,n;he("prerender")?ie.push(e):void 0!==(n=function(e){var t,n,r,i,o;if(void 0===e.projectId||null===e.projectId||""===e.projectId)return;t=[],e.properties.pageEncoding=e.properties.pageEncoding||de.pageEncoding,void 0!==de.gdpr&&(e.properties.gdpr=de.gdpr);de.gdpr_consent&&(e.properties.gdpr_consent=de.gdpr_consent);de.isOathFirstParty&&(e.properties.isOathFirstParty=de.isOathFirstParty);de.us_privacy&&(e.properties.us_privacy=de.us_privacy);de.ytcVersion&&(e.properties.ytcVersion=de.ytcVersion);try{t=t.concat(function(e){var t,n,r,i,o,a;if(!e.pixelId)throw new Error("Mandatory 'pixelId' property is missing");for(t={documentName:"b",documentGroup:"c",url:"f",referrer:"e",pageEncoding:"enc",pixelId:".yp",userEmail:"he",userHashedEmail:"he",gdpr:"gdpr",gdpr_consent:"gdpr_consent",isOathFirstParty:"isOathFirstParty",us_privacy:"us_privacy",ytcVersion:"yv",auid:"auid"},a=[],r=0,i=(n=["documentName","pixelId","userEmail","userHashedEmail","documentGroup","url","referrer","pageEncoding","gdpr","gdpr_consent","isOathFirstParty","us_privacy","ytcVersion","auid"]).length;r<i;r+=1)o=n[r],e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&""!==e[o]&&a.push({name:t[o],value:e[o]});var s=!1;try{s=window.self!==window.top}catch(e){s=!0}
s&&a.push({name:"isIframe",value:1});var u=e.qstrings;for(var d in u)u.hasOwnProperty(d)&&a.push({name:d,value:u[d]});return a}(e.properties))}catch(e){if("Mandatory 'pixelId' property is missing"===e.message)return}
for(i=[],n=0,r=t.length;n<r;n+=1)void 0!==(o=t[n]).name&&void 0!==o.value&&i.push(o.name+"="+encodeURIComponent(o.value));return i=i.join("&"),Z(e)+"&"+i}(e))&&((t=document.createElement("img")).className="ywa-"+e.projectId,t.style.display="none",t.src=n,t.alt="dot image pixel",G(e.projectId,"isPageViewTracked",!0),null===document.body?document.addEventListener("DOMContentLoaded",(function(e){document.body.appendChild(t)})):document.body.appendChild(t))}
var se=[],ue=[],de={pixelConfigs:{},emails:{},plainAuids:{},hashedAuids:{}};function ce(){me(),ve(),i=!1,o=!1,y(),w(),function(){for(var e in de.pixelConfigs)L(e);le(_)}()}
function pe(){if(fe())
for(;se.length;)try{se.shift()()}catch(e){}}
function fe(){return i&&o&&0===H&&de.emailsAreHashed&&de.auidsAreHashed}
function le(e){fe()?e():se.push(e)}
var me=function(){Q={},function(){if(H=0,M={use1stPartyCookies:!1},window.dotq)
for(var e=0;e<window.dotq.length;e++)
if(void 0!==window.dotq[e]&&void 0!==window.dotq[e].properties&&void 0!==window.dotq[e].properties.pixelId&&void 0===de.pixelConfigs[window.dotq[e].properties.pixelId]){var t=window.dotq[e].properties;H++,de.pixelConfigs[t.pixelId]={},q(t),j(t)}}(),de.ytcVersion="1.13.0",Object.keys(de.emails).length>0?function(){var e=[];for(var t in de.emails){var n=z(de.emails[t]);e.push(n)}
if(window.msCrypto){U(e,[])}else Promise.all(e).then((function(e){V(e)}))}():de.emailsAreHashed=!0,Object.keys(de.plainAuids).length>0?function(){var e=[];for(var t in de.plainAuids){var n=F(de.plainAuids[t]);e.push(n)}
if(window.msCrypto){P(e,[])}else Promise.all(e).then((function(e){T(e)}))}():de.auidsAreHashed=!0},ve=function(){de.pageEncoding=document.charset||document.characterSet||"",void 0!==Q.pageEncoding&&""!==Q.pageEncoding&&(de.pageEncoding=Q.pageEncoding),de.isInPrerenderPhase=he("prerender"),document.attachEvent&&(document.attachEvent("webkitvisibilitychange",ge),document.attachEvent("visibilitychange",ge)),document.addEventListener&&(document.addEventListener("webkitvisibilitychange",ge,!1),document.addEventListener("visibilitychange",ge,!1))};function he(e){return("visible"===e||"hidden"===e||"preview"===e||"prerender"===e)&&(void 0!==document.webkitVisibilityState&&document.webkitVisibilityState===e||void 0!==document.visibilityState&&document.visibilityState===e)}
var ge=function(){var e,t;if(de.isInPrerenderPhase){for(e=0,t=ue.length;e<t;e+=1)ae(ue[e]);de.isInPrerenderPhase=!1}};function we(e){return/^[A-Fa-f0-9]{64}$/.test(e)}
window.YAHOO=window.YAHOO||{},window.YAHOO.ywa=window.YAHOO.ywa||{},void 0===window.YAHOO.ywa.I13N&&(window.YAHOO.ywa.I13N=(r(),ce(),{modules:{},version:"1.13.0",fireBeacon:oe}))}]);}catch(error){let ds="Yahoo pixel base code";let inputValue="";let requirementName="Send yahoo pixel";let methodName="YahooBaseCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}};}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="Pixel Audit";let CONST_EVENT_CATEGORY="Pixel Audit";Bootstrapper.triggerPixelAudit=function(pixelName,otherDetails,isLocChange){let requirementName="Trigger pixel audit";let methodName="triggerPixelAudit";try{if((Bootstrapper.pixelAuditAry&&Bootstrapper.pixelAuditAry.length>5)||(isLocChange&&Bootstrapper.pixelAuditAry.length>0)){if(pixelName&&otherDetails){setPixelAuditAry(pixelName,otherDetails);}
setTimeout(function(){Bootstrapper.setUtagLinkForDOMEvent(Bootstrapper.pixelAuditAry);},2000);}else{setPixelAuditAry(pixelName,otherDetails);}}catch(error){let ds="Function argument";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper.pixelAuditFSR=function(pixelName){let requirementName="Prepare pixel audit event for FSR";let methodName="pixelAuditFSR";try{if(pixelName){let travelType=Bootstrapper.getSearchTravelType();let origin=Bootstrapper.getFlightSearchOrigin(1)||"--";let destination=Bootstrapper.getFlightSearchDestination(1)||"--";let odPair=[origin,destination].join("-");let pos=Bootstrapper.getPOSFromURL();let tripType=Bootstrapper.getTripTypeCodes();let cabinType=Bootstrapper.getSearchCabinType()||"--";let currency=Bootstrapper.getCurrency()||"--";let label=[travelType,odPair,pos,tripType,cabinType,currency].join("|");Bootstrapper.triggerPixelAudit(pixelName,label,false);}}catch(error){let ds="Function argument";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper.pixelAuditBookingPath=function(pixelName){let requirementName="Prepare pixel audit event for confirmation page";let methodName="pixelAuditBookingPath";try{if(pixelName){let travelType=Bootstrapper.getSearchTravelType();let origin=Bootstrapper.getSelectedTripOrigin(1)||"--";let destination=Bootstrapper.getSelectedTripDestination(1)||"--";let odPair=[origin,destination].join("-");let pos=Bootstrapper.getPOSFromURL();let tripType=Bootstrapper.getTripTypeCodes();let cabinType=Bootstrapper.getCabinFromSelectedTrips(0)||"--";let currency=Bootstrapper.getCurrency()||"--";let price=Bootstrapper.getShoppingCartTotalAmount();let label=[travelType,odPair,pos,tripType,cabinType,currency,price].join("|");Bootstrapper.triggerPixelAudit(pixelName,label,false);}}catch(error){let ds="Function argument";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}};Bootstrapper.pixelAuditOthers=function(pixelName,podName){let requirementName="Prepare pixel audit event for other pages";let methodName="pixelAuditOthers";try{if(pixelName){Bootstrapper.triggerPixelAudit(pixelName,podName,false);}}catch(error){let ds="Function argument";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}};function setPixelAuditAry(pixelName,otherDetails){let requirementName="Set pixel audit array";let methodName="setPixelAuditAry";let dataObject={};try{if(pixelName&&otherDetails){dataObject.eventName=CONST_EVENT_CATEGORY;dataObject.eventAction=pixelName;dataObject.tealiumEvent=CONST_EVENT_CATEGORY;dataObject.eventLabel=otherDetails;Bootstrapper.pixelAuditAry.push(dataObject);}}catch(error){let ds="Function argument";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')||(/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')||(/^(\/.*\/(us|au|gb)\/upgrade?)$/ig.test(b['dom.pathname'])&&b['tealium_event']=='Impression: Cabin Upgrade Amount')||(/^(\/.*\/.*\/traveler\/choose-travelers\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')||(/^(\/.*\/.*\/book-flight\/checkout\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')||(/^(\/.*\/(us|au|gb)\/manageres\/seatmap\/confirmation?)$/ig.test(b['dom.pathname'])&&b['tealium_event']=='Paid Seat purchase success')){var CONST_EXTN_NAME="Tiktok Pixel - Base Code";var tiktokPixelCallMade=false;(function loadTiktokScript(){var methodName="loadTiktokScript";var requirementName="Load tiktok pixel script";try{if(!tiktokPixelCallMade){!function(w,d,t){tiktokPixelCallMade=true;w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=d.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=d.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};let pixelId="C6OEBV448LJ6QNNJ9P6G";let UPGRADE_REGEX=/^(\/.*\/.*\/upgrade?)$/;if(document.location.pathname){let pathName=document.location.pathname;if(pathName.match(UPGRADE_REGEX)){ttq.load('CH8KQ6JC77U3VDB5OCHG');}else{ttq.load('C6OEBV448LJ6QNNJ9P6G');}}
ttq.page();}(window,document,'ttq');}}catch(error){var ds="Tiktok script";var inputValue="ttq";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}})();}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[51]=='undefined'){utag.runonce.ext[51]=1;if(1){var CONST_EXTN_NAME="Digital 3.0 - My Account Data Parser";var CONST_EC_MY_ACCOUNT="My Account";var DOUBLE_DASH="--";var ETC="ETC";var FFC="FFC";var NONE="None";var prevEventAction="";var prevTime=0;Bootstrapper.parseMyAccountData=function(data){try{var methodName="parseMyAccountData";var requirementName="Parse My Account Data";var myAccountDataObjects=[];if(data.detail&&data.detail.category==CONST_EC_MY_ACCOUNT){var myAccountData={};myAccountData.eventCategory=data.detail.category;myAccountData.eventAction=data.detail.action;var action=data.detail.action;if(action=="Impression: Travel credit"||action=="Clicked Link : Travelers"||action=="Clicked Link : View details"||action=="Clicked Link : Search travel credits"){myAccountData=trackTravelCredit(data,myAccountData);}
else if(data.detail.params&&data.detail.params.info){if(action=="Impression: United Quest Card"||action=="Clicked link: Learn how it works"){var feature=data.detail.params.feature?data.detail.params.feature:"--";var flightCredits=data.detail.params.info.hasFlightCredits?"flightCredits:Y":"flightCredits:N";myAccountData.eventLabel=[feature,flightCredits].join('|');}
else{myAccountData.eventLabel=JSON.stringify(data.detail.params.info);}}
myAccountDataObjects.push(myAccountData);return myAccountDataObjects;}}catch(error){var ds="Callback",inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function trackTravelCredit(data,parseData){var methodName="trackTravelCredit";var requirementName="Track Travel credit feature on My aacount summary page";var parseObj=parseData;try{if(data.detail.params){var params=data.detail.params;var feature=params.feature?params.feature:DOUBLE_DASH;var pageName=params.pageName?params.pageName:DOUBLE_DASH;var eventLabel=[feature,pageName].join("|");parseObj.eventLabel=eventLabel;if(data.detail.action=="Impression: Travel credit"&&data.detail.params.info){var info=data.detail.params.info;parseObj=getELForTravelCreditImpression(info,parseObj);}}}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseObj;}
function getELForTravelCreditImpression(info,parseObj){var methodName="getELForTravelCreditImpression";var requirementName="Prepare event label for travel credit Impression";var obj=parseObj;try{var isETCShown=info.ETC?info.ETC:false;var isFFCShown=info.FFC?info.FFC:false;var isFFCRShown=info.FFCR?info.FFCR:false;var isnonOTAShown=info.nonOTA?info.nonOTA:false;obj.eventLabel=[obj.eventLabel,isETCShown?"ETC:Y":"ETC:N",isFFCShown?"FFC:Y":"FFC:N",isFFCRShown?"FFCR:Y":"FFCR:N",isnonOTAShown?"nonOTA:Y":"nonOTA:N"].join("|")
var travel_certficates;if(isETCShown&&isFFCShown){travel_certficates=[ETC,FFC].join("|");}else if(isETCShown){travel_certficates=ETC;}else if(isFFCShown){travel_certficates=FFC;}else{travel_certficates=NONE;}
obj.customUtagData={}
obj.customUtagData[Bootstrapper.UTAG_CONST.TravelCertificate]=travel_certficates;}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return obj;}
Bootstrapper.processMyAccountEvents=function(data,parseData){var methodName="processMyAccountEvents";var requirementName="Process My account events";var dataObjects=[];var currentTime=new Date().getTime();try{var myAccountParseData=parseData;var label,action=data.action,params=data.params;if(data.action==prevEventAction&&data.action!='Impression: Promotion'&&(currentTime-prevTime)<300){myAccountParseData={};}
else{if(action=="Impression: TSA PreCheck®, Global Entry, NEXUS, or SENRTI"||action=="Clicked: Add Known Traveler Number or PASS ID"||action=="Clicked link: Print this Page"||action=="Clicked link: Request credit for additional travel"||action=="Clicked link: View mileageplus activity since last statement"){label=fetchFeatureAndPageName(data);}else if((params.feature&&params.feature!="Covid-19 Vaccination")&&checkActionOfEnhancedEnrollmentFeature(data)||data.action=="Clicked Link : Learn about using travel credit"||data.action=="Clicked Link: Book with travel certificate"){if(data.action=="Clicked: Agree and create account"){utag_data.tealium_collect_event="tealium_collect_mpenrollment_agree_and_create_account";}else if(data.action=="Clicked: Continue"){utag_data.tealium_collect_event="tealium_collect_mpenrollment_create_account";Bootstrapper.storeMPUserInfoInUDO(data);}
label=fetchFeatureAndPageName(data);}else if(data.action=="Clicked Link: View details"){if(data.params&&data.params.feature=="Future flight credits"){label=fetchFeatureAndPageName(data);}
else if(data.params&&data.params.feature=="TravelBank"){label=getLabelWithLinkURL(data);}}else if(params.feature&&params.feature=="Mileage Credit"&&(action=="Clicked : submit"||action=="Clicked : Add a segment")){let ticketNumber=(data.params&&data.params.info&&data.params.info.ticketNumber)?data.params.info.ticketNumber:DOUBLE_DASH;label=[fetchFeatureAndPageName(data),ticketNumber].join("|");}else if(params.feature&&params.feature=="Mileage Credit"&&(action=="Clicked : Request credit"||action=="Clicked : Continue")){label=[fetchFeatureAndPageName(data),prepareLabelForRetroCreditClick(data.params)].join("|");}else if(params.feature&&params.feature=="Data and preferences request"&&(action=="Clicked: Submit"||data.action=="Clicked: Confirm")){label=[fetchFeatureAndPageName(data),prepareLabelForModalSubmit(params)].join("|");}else if(checkActionOfMyUnitedFeature(data)){label=getLabelWithLinkURL(data);}else if(data.action=="Clicked: Next"||data.action=="Clicked: Internal link"||data.action=="Clicked: Save my email address"||data.action=="Clicked: Save my security questions"||data.action=="Clicked: Save My Password"||data.action=="Password created successfully"||data.action=="Clicked: Go to United.com"){label=fetchFeatureAndPageName(data);}else if(data.action=="Information Shown"){let infoMessage=(data.params&&data.params.info&&data.params.info.message)?data.params.info.message:DOUBLE_DASH;label=infoMessage;}else if(data.action=="Clicked Link: View all trips"){var position=(data.params&&data.params.info&&data.params.info.position)?data.params.info.position:DOUBLE_DASH;label=[getLabelWithLinkURL(data),position].join('|');}else if(data.action=="Clicked: Make another conversions"||data.action=="Clicked: Go to my united"){label=fetchFeatureAndPageName(data);}else if(data.action=="Page Load"||data.action=="Clicked: Exchange now"||data.action=="Currency Conversion Successful"||data.action=="Currency Conversion Failed"){label=fetchCurrencyConvertorInfo(data,data.action);}else if(data.action=="Trip Selected"){label=fetchLabelForTripSelected(data);}else if(checkCallbacksWithTitle(data)){var title=(data.params&&data.params.info&&data.params.info.title)?data.params.info.title:DOUBLE_DASH;label=[getLabelWithLinkURL(data),title].join('|');}else if(data.params&&data.params.info&&data.params.info.accordionHeader){label=data.params.info.accordionHeader;}
else if(data.action=="Impression: United Quest Card"||data.action=="Impression: Travel credit"){myAccountParseData={};}
else if(data.action=="Impression: Promotion"||data.action=="Clicked: Promotion"||data.action=="Clicked: App download"){label=[fetchFeatureAndPageName(data),prepareLabelForChasePromotionLabel(data.params)].join("|");}else if(checkActionOfKTNRedress(data)){label=fetchFeatureAndPageName(data);}else if(action=="Clicked: Save"||action=="Saved successfully"){label=[fetchFeatureAndPageName(data),checkEditOperation(params)].join("|");}else if(action=="Save operation failed"||action=="Document upload failed"){label=[fetchFeatureAndPageName(data),checkEditOperation(params),prepareErrorData(params)].join("|");}else if(action=="Error Shown"||action=="Remove failed"){label=[fetchFeatureAndPageName(data),prepareErrorData(params)].join("|");}else if(checkActionForChaseCard(data)){label=[fetchFeatureAndPageName(data),fetchSelectedCard(params)].join("|");}else if(action=="Cardmember widget display error"&&!Bootstrapper.displayError){Bootstrapper.displayError=true;label=[fetchFeatureAndPageName(data),fetchErrorType(params)].join("|");}else if(action=="Impression: Cardmember widget"&&!Bootstrapper.displayCardMemberWidget){Bootstrapper.displayCardMemberWidget=true;label=[fetchFeatureAndPageName(data),fetchSelectedCard(params)].join("|");}else if((action=="Cardmember widget display error"&&Bootstrapper.displayError)||(action=="Impression: Cardmember widget"&&Bootstrapper.displayCardMemberWidget)){myAccountParseData={};}else if(checkActionForCovid19(action)){label=Bootstrapper.fetchFeatureAndPageName(params);}else if(params.feature&&params.feature=="Progressive Profile"&&(action=="Clicked: Submit"||"Clicked: X")){label=[fetchFeatureAndPageName(data),prepareLabelForSubmitButton(params)].join("|");}else if(checkActionsForPetC(action)){label=Bootstrapper.fetchFeatureAndPageName(params);}else if(action=="Clicked: Back"&&data.params.feature&&data.params.feature=="Progressive Profiling Email"){label=[fetchFeatureAndPageName(data),getProgressiveProfilingInfo(params)].join("|");}else if(action=="Clicked: Continue"||action=="Clicked: Back"||action=="Clicked: I agree"){label=[fetchFeatureAndPageName(data),checkEditOperation(params),checkStepNumAndStepTitle(params,action)].join("|");}else if(action=="Sucessful enrollment"){utag_data.tealium_collect_event="tealium_collect_mpenrollment_successful";Bootstrapper.storeMPUserInfoInUDO(data);}else if(action=="Impression: Progressive Profiling"||action=="Clicked: email"||action=="Clicked: edit emails"||action=="Clicked: Resend email"||action=="Clicked: Closed"){label=[fetchFeatureAndPageName(data),getProgressiveProfilingInfo(params)].join("|");}else if(action=="Clicked: Return to Homepage"||action=="Clicked: Back to your info"||action=="Clicked: Save my password"||action=="Password changed successfully"||action=="Clicked: My United"){label=fetchFeatureAndPageName(data);}else if(data.action=="Clicked: Merge accounts"||data.action=="Clicked: Add account"||data.action=="Clicked: Cancel"||data.action=="Clicked: Confirm"||data.action=="Clicked: Confirm and merge another account"||data.action=="Clicked: Merge another account"){label=fetchFeatureAndPageName(data);}else if(data.action=="Clicked: Close"||data.action=="Clicked: Get Started"||data.action=="Impression: Sign In"||data.action=="Clicked: Sign In"||data.action=="Impression: Multiple accounts found"){label=data.params&&data.params.info&&data.params.info.modalType?[fetchFeatureAndPageName(data),data.params.info.modalType].join("|"):fetchFeatureAndPageName(data);}else if(data.action=="Clicked: Remove account"||data.action=="Merge Request Submitted Successfully"){label=[fetchFeatureAndPageName(data),preparelabelForRemoveAccount(data)].join("|");}else if(data.action=="Impression: Account is merged"){label=[fetchFeatureAndPageName(data),prepareLabelForMergeAccounts(data)].join("|");}else if(data.action=="Impression: Multiple accounts found"||data.action=="Impression: Account found"||data.action=="Clicked: Return to homepage"||data.action=="Clicked: Re-enter your information"){label=fetchFeatureAndPageName(data);}else if(data.action=="Clicked: Printer friendly pass"||data.action=="Clicked: Email pass"||data.action=="Clicked: Send"||data.action=="Impression: Modal Close MP"||data.action=="Impression: Modal Delete"){label=fetchFeatureAndPageName(data);}}
if(label){myAccountParseData.eventLabel=label;}
dataObjects.push(myAccountParseData);prevEventAction=data.action;prevTime=currentTime;}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataObjects;}
function checkActionOfEnhancedEnrollmentFeature(data){var methodName="checkActionOfEnhancedEnrollmentFeature";var requirementName="check action of the enhanced enrollment feature";try{if(data.action=="Clicked: Continue"||data.action=="Clicked: Cancel"||data.action=="Clicked: Leave page"||data.action=="Clicked: Finish creating an account"||data.action=="Clicked: Back to About me"||data.action=="Clicked: Back to Contact info"||data.action=="Clicked: Agree and create account"){return true;}}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return false;}
function checkActionOfMyUnitedFeature(data){var methodName="checkActionOfMyUnitedFeature";var requirementName="check action of my united feature";try{if(data.action=="Clicked Link: Buy Miles"||data.action=="Clicked Link: View upgrades"||data.action=="Clicked Link: View my member benefits"||data.action=="Clicked Link: View Premier status tracker"||data.action=="Clicked Link: Find a reservation"||data.action=="Clicked Link: Book a flight"||data.action=="Clicked Link: View full activity details"){return true;}}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return false;}
function getLabelWithLinkURL(data){var methodName="getLabelWithLinkURL";var requirementName="get label with linkURL";var label=DOUBLE_DASH;try{if(data.params&&data.params.info){var linkURL=data.params.info.linkURL||DOUBLE_DASH;label=[fetchFeatureAndPageName(data),linkURL].join("|");}}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function fetchFeatureAndPageName(data){var methodName="fetchFeatureAndPageName";var requirementName="fetch feature and pageName";var label=DOUBLE_DASH;try{if(data.params){var params=data.params;var featureName=params.feature||DOUBLE_DASH;var pageName=params.pageName||DOUBLE_DASH;label=[featureName,pageName].join("|");}}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function fetchLabelForTripSelected(data){var methodName="fetchLabelForTripSelected";var requirementName="fetch label for selected trip";var label=DOUBLE_DASH;try{label=fetchFeatureAndPageName(data);if(data.params&&data.params.info){var info=data.params.info;var pnr=info.pnr||DOUBLE_DASH;var trips=info.trips;var tripDetails=Array.isArray(trips)?trips[0]:DOUBLE_DASH;var origin=tripDetails.origin||DOUBLE_DASH;var destination=tripDetails.destination||DOUBLE_DASH;var departure_date=tripDetails.departureDate||DOUBLE_DASH;label=[label,pnr,origin,destination,departure_date].join('|');}}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function checkCallbacksWithTitle(data){var methodName="checkCallbacksWithTitle";var requirementName="fetch label for callbacks with title";try{if(data.action=="Clicked Link: More info"||data.action=="Clicked Link: View TravelBank details"||data.action=="Clicked Link: View all payments"||data.action=="Clicked Link: Add payment information"||data.action=="Clicked Link: View all"||data.action=="Clicked Link: View receipts"||data.action=="Clicked Link: Manage subscriptions"){return true;}}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return false;}
function prepareLabelForChasePromotionLabel(params){try{if(params&&params.info){var info=params.info;var title=info.title||DOUBLE_DASH;var buttonText=info.buttonText||DOUBLE_DASH;var redirectionUrl=info.redirectionUrl||DOUBLE_DASH;var isChaseCreditFlow=typeof info.isChaseCreditFlow=="boolean"?info.isChaseCreditFlow:DOUBLE_DASH;if(isChaseCreditFlow!=DOUBLE_DASH){isChaseCreditFlow=isChaseCreditFlow?"Y":"N";}
return[title,buttonText,redirectionUrl,isChaseCreditFlow].join('|');}}catch(error){var methodName="prepareLabelForChasePromotionLabel";var requirementName="Prepare label for Chase Promotion";var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function checkActionOfKTNRedress(data){try{var action=data.action,params=data.params;if(action=="Clicked: Add redress number"||action=="Clicked: Tooltip"||((action=="Clicked: Close"||action=="Remove failed")&&params&&(params.feature=="KTN"||params.feature=="Redress number"))||action=="Clicked: About me"||action=="Clicked: Edit redress number"||action=="Clicked: Edit"||action=="Clicked: Remove"||action=="Removed successfully"||action=="Clicked link: Remove"){return true;}}catch(error){var methodName="checkActionOfKTNRedress",requirementName="Check Action for KTN/Redress",ds="data from callback",inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return false;}
function checkEditOperation(params){try{if(params&&params.info&&typeof params.info.isEditOperation=="boolean"){return params.info.isEditOperation?"Y":"N";}}catch(error){var methodName="checkEditOperation",requirementName="Check edit operation",ds="params object from callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function prepareErrorData(params){try{if(params&&params.featureName&&params.featureName=="Currency Convertor"&&params.info){let errMessage=params.info.errorMessage||DOUBLE_DASH;let currency=params.info.currentCurrency||DOUBLE_DASH;return[errMessage,currency].join("|");}
if(params&&params.info&&params.info.errorMessage){return params.info.errorMessage;}
if(params&&params.featureName&&params.featureName=="Change MP Password"&&params.info&&params.info.errorMessages){return JSON.stringify(params.info.errorMessages);}}catch(error){let methodName="prepareErrorData";let requirementName="Prepare errorData";let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function checkActionForChaseCard(data){try{var action=data.action,params=data.params;return(action=="Clicked: View more details"||action=="Card Selected"||action=="Clicked: See Benefits at Chase"||(action=="Clicked: Close"&&params&&params.feature=="Cardmember widget"));}catch(error){var methodName="checkActionForChaseCard",requirementName="Check action for Chase Card",ds="data object from callback",inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return false;}
function fetchSelectedCard(params){var label=DOUBLE_DASH;try{if(params&&params.info&&typeof params.info.selectedCard=="string"){label=params.info.selectedCard;}}catch(error){var methodName="fetchSelectedCard",requirementName="Fetch selected card",ds="params object from callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function fetchErrorType(params){var label=DOUBLE_DASH;try{if(params&&params.info&&typeof params.info.errorType=="string"){label=params.info.errorType;}}catch(error){var methodName="fetchErrorType",requirementName="Fetch errorType",ds="params object from callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function checkActionForCovid19(action){try{return(action=="Clicked: View"||action=="Clicked: Close"||action=="Clicked: Add"||action=="Clicked: Update"||action=="Clicked: Cancel"||action=="Clicked: Remove"||action=="Impression: Legal and privacy acknowledgement");}catch(error){var methodName="checkActionForCovid19",requirementName="Check action for Covid19",ds="data object from callback",inputValue=action;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function checkActionsForPetC(action){var requirementName="Check actions for Pet in cabin";var methodName="checkActionsForPetC";try{return(action=="Clicked: Add Pet in cabin"||action=="Clicked: Submit"||action=="Clicked: Edit"||action=="Clicked: Remove"||action=="Successfully removed pet in cabin"||action=="Selected PDF: Pet in cabin vaccine verification form");}catch(error){var ds="params object from callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,action,methodName);}
return false;}
Bootstrapper.processPetCEvent=function(data,parseData){var requirementName="Process Pet in cabin interactions";var methodName="processPetCEvent";var parseMultipleData=[];var label;var isEditOperation="N";try{if(prevEventAction=="Clicked: Edit"){isEditOperation="Y";}
label=[Bootstrapper.fetchFeatureAndPageName(data.params),getOriginPOD(data.params.info),isEditOperation].join("|");parseData.eventLabel=label;parseMultipleData.push(parseData);}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseMultipleData;};function getOriginPOD(info){var requirementName="Fetch origin pod info";var methodName="getOriginPOD";var originPOD;try{originPOD=(info&&info.originPod)?info.originPod:"--";}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return originPOD;}
function checkStepNumAndStepTitle(params,action){let stepNum;let stepTitle;try{if(params&&params.info){if(action!="Clicked: I agree"){stepNum=params.info.stepNum||DOUBLE_DASH;stepTitle=params.info.stepTitle||DOUBLE_DASH;return[stepNum,stepTitle].join("|");}else{stepTitle=params.info.stepTitle||DOUBLE_DASH;return stepTitle;}}}catch(error){let methodName="checkStepNumAndStepTitle",requirementName="Prepare step number and title",ds="params object from callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getProgressiveProfilingInfo(params){let requirementName="Get label for progressive profiling";let methodName="getProgressiveProfilingInfo";let label;try{if(params&&params.info){let info=params.info;let modalType=info.modalType||"--";label=modalType;}}catch(error){let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function fetchCurrencyConvertorInfo(data,action){let methodName="fetchCurrencyConvertorInfo";let requirementName="Fetch label for currency convertor";try{if(data.params&&data.params.info){let currentBal=data.params.info.currentBal||DOUBLE_DASH;let currentCurrency=data.params.info.currentCurrency||DOUBLE_DASH;let convertingCurrency=data.params.info.convertingCurrency||DOUBLE_DASH;if(action=="Page Load"||action=="Clicked: Exchange now"){let expirationDate=data.params.info.expirationDate||DOUBLE_DASH;if(expirationDate!=DOUBLE_DASH){expirationDate=Bootstrapper._dateFormat(expirationDate,"yyyy-MM-dd");}
label=(convertingCurrency!=DOUBLE_DASH)?[currentBal,expirationDate,currentCurrency,convertingCurrency].join("|"):[currentBal,expirationDate,currentCurrency].join("|");}else if(action=="Currency Conversion Successful"||action=="Currency Conversion Failed"){let newBal=data.params.info.newBal||DOUBLE_DASH;label=[currentBal,currentCurrency,convertingCurrency,newBal].join("|");}}}
catch(error){let ds="params object from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function prepareLabelForSubmitButton(params){let modalType="--";try{modalType=(params&&params.info&&params.info.modalType)?params.info.modalType:DOUBLE_DASH;}catch(error){let methodName="prepareLabelForSubmitButton";let requirementName="Prepare label for Submit Button Click";let ds="Data object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return modalType;}
function prepareLabelForMergeAccounts(data){try{if(data.params&&data.params.info){let info=data.params.info;let modalType=info.modalType||DOUBLE_DASH;let status=info.status||DOUBLE_DASH;return[modalType,status].join('|');}}catch(error){let methodName="prepareLabelForMergeAccounts";let requirementName="Prepare label for Merge Accounts";let ds="Data object from callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function preparelabelForRemoveAccount(data){try{if(data.params&&data.params.info){let info=data.params.info;let mpStatus=info.mpStatus||DOUBLE_DASH;let milesBalance=info.milesBalance||DOUBLE_DASH;return[mpStatus,milesBalance].join('|');}}catch(error){let methodName="preparelabelForRemoveAccount";let requirementName="Prepare label for Remove Account";let ds="Data object from callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function prepareLabelForModalSubmit(params){let methodName="prepareLabelForModalSubmit";let requirementName="Prepare label for Modal Submit Button";let requestOptions="--";try{requestOptions=(params&&params.info&&params.info.requestOptions)?"["+params.info.requestOptions+"]":DOUBLE_DASH;}
catch(error){let ds="Data object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return requestOptions;}
function prepareLabelForRetroCreditClick(data){let methodName="prepareLabelForRetroCreditClick";let requirementName="Prepare Label for Retro Credit Button Click";let label;try{if(data.info){let info=data.info;let ticketNumber=info.ticketNumber?info.ticketNumber:DOUBLE_DASH;let segmentDetail=DOUBLE_DASH;if(info.segments&&info.segments.length>0){let segments=info.segments;let origin,destination,odPair,flightOperator,departDate,segmentInfo,segmentCount;let segmentArray=[];for(let i=0;i<segments.length;i++){departDate=segments[i].departureDate?Bootstrapper._dateFormat(segments[i].departureDate,"yyyy-MM-dd"):DOUBLE_DASH;ticketNumber=segments[i].ticketNumber?segments[i].ticketNumber:DOUBLE_DASH;origin=segments[i].departureAirportName||segments[i].departureAirportCode||DOUBLE_DASH;destination=segments[i].arrivalAirportName||segments[i].arrivalAirportCode||DOUBLE_DASH;flightOperator=segments[i].operatingAirlineName||segments[i].operatingAirlineCode||DOUBLE_DASH;odPair=[origin,destination].join("|");segmentCount=i+1;segmentInfo=[("segment"+segmentCount),odPair,flightOperator,departDate,ticketNumber].join("|");segmentArray.push(segmentInfo);}
segmentDetail="["+segmentArray.join(",")+"]";}
label=[segmentDetail].join("|");}}catch(error){let ds="Data object from callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var CONST_EXT_NAME="Digital 3.0 - Open_Close_Modal_Parser";var CONST_EA_OPEN__SIGNIN_MODAL="Open Modal: Sign In";var CONST_EC_USER_INTERACTION="User Interactions";var CONST_EC_CHECKIN="Checkin";var REQ_NAME="Opening of Modal"
Bootstrapper.parseModalOpenData=function(data){var methodName="parseModalOpenData";var modalOpenDataObjects=[];try{if(data.action.type.indexOf("LoginButton")>-1){var modalOpenData={};modalOpenData.eventCategory=CONST_EC_USER_INTERACTION;modalOpenData.eventAction=CONST_EA_OPEN__SIGNIN_MODAL;modalOpenDataObjects.push(modalOpenData);}else if(document.location.pathname.indexOf("checkin")>-1&&data.action.modalName){modalOpenDataObjects.push(handleModalsForCheckIn(data));}}catch(error){var ds="Data object for Open Modal",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(REQ_NAME,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return modalOpenDataObjects;}
function handleModalsForCheckIn(data){var methodName="handleModalsForCheckIn";var requirementName="Handle open modal cases in checkin Path";var modalOpenData={};try{modalOpenData.eventCategory=CONST_EC_CHECKIN;modalOpenData.eventAction="Open Modal";modalOpenData.eventLabel=data.action.modalName;}catch(error){var ds="Data object for Open Modal",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return modalOpenData;}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[87]=='undefined'){utag.runonce.ext[87]=1;if(1){var CONST_EXTN_NAME="Maxymiser Tracking";var maxymiser_supported_dimensions={dimension41:'maxymiser_tests',dimension42:'maxymiser_tests_combined',dimension43:'maxymiser_pc_1',dimension44:'maxymiser_pc_2',dimension45:'maxymiser_pc_3',dimension46:'maxymiser_pc_4',dimension47:'maxymiser_pc_5',}
Bootstrapper.processMaxymiserEvents=function(data,parsedData){var methodName="processMaxymiserEvents";var requirementName="Handle Maxymiser events through callbacks";var analyticsDataObjects=[];try{var parseDataObj=parsedData;var params=data.params;if(params.eventLabel){parseDataObj.eventLabel=params.eventLabel;if(params.eventLabel.indexOf('Closed: 3d seatmap')!=-1&&params.eventLabel.indexOf('isLastLeg: true')!=-1){Bootstrapper.eveluateQualtricsSurvey();}}
parseDataObj.customDimensions={};if(params.dimensions){for(var key in params.dimensions){var currentKey=maxymiser_supported_dimensions[key];if(currentKey){parseDataObj.customDimensions[currentKey]=params.dimensions[key];}}}
parseDataObj.noninteraction=1;analyticsDataObjects.push(parseDataObj);storeCampaignInfo(data);}catch(error){var ds="Data object",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObjects;}
function getVariationInfo(data){var variationInfo;try{if(data&&data.params&&data.params.eventLabel){var arr=data.params.eventLabel.split('=');if(arr&&arr.length>1){variationInfo=arr[1];}}}catch(e){Bootstrapper.reportException(e);}
return variationInfo;}
function storeCampaignInfo(data){try{if(data.category&&data.category=="Maxymiser Tests"){if(data.action.indexOf("RO - Manageres_Preferred_Seats_Branding")!=-1){Bootstrapper.saveInLocalStorage(data.action,getVariationInfo(data));}}}catch(e){Bootstrapper.reportException(e);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[82]=='undefined'){utag.runonce.ext[82]=1;if(1){var CONST_EXTN_NAME="Route Change Event Broadcaster";var MAX_BUFFER=10;Bootstrapper.notifyRouteChange=function(data){var methodName="notifyRouteChange";var requirementName="Broadcast notification for route change";try{var payloadData=prepareDataPayload(data);if(!Bootstrapper.routeData){Bootstrapper.routeData=Bootstrapper.getArrayWithLimitedLength(MAX_BUFFER);}
Bootstrapper.routeData.push(payloadData);triggerEvent(payloadData.name,payloadData.payload);}catch(error){var ds="data object recieved from callback/middleware";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}};function prepareDataPayload(data){var methodName="prepareDataPayload";var requirementName="Prepare callback payload for DO layer";var payloadData={};try{if(data.action=="Sign-in success"){payloadData.name=data.action;let payload;if(data.desc&&data.detail){payload=prepareSignInPayload(data.detail);payload.desc=data.desc;}
payloadData.payload=payload;}else if(data.action){payloadData.name=data.action.type;payloadData.payload=data.action.payload?data.action.payload:data.action.name;}}catch(error){var ds="data object recieved from callback/middleware";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return payloadData;}
Bootstrapper.clearRouteData=function(){var methodName="clearRouteData";var requirementName="Clear routeData from Bootstrapper";try{Bootstrapper.routeData=Bootstrapper.getArrayWithLimitedLength(MAX_BUFFER);}catch(error){var ds="Bootstrapper.routeData";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function triggerEvent(name,payloadData){var methodName="triggerEvent";var requirementName="Trigger events";try{var event;var namesAry=splitParam(name,"/");var eventName=(namesAry.length>0)?"REACT_"+namesAry[namesAry.length-1]:"";if(document.createEvent){event=document.createEvent("HTMLEvents");event.initEvent(eventName,true,true);event.eventName=eventName;event.eventType=name;event.payload=payloadData;document.dispatchEvent(event);}else{event=document.createEventObject();event.eventName=eventName;event.eventType=name;event.payload=payloadData;document.fireEvent("on"+event.eventType,event);}}catch(error){var ds="Bootstrapper.routeData";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function splitParam(params,splitter){var methodName="splitParam";var requirementName="Split the params";var paramsAry=[];try{if(params){paramsAry=params.split(splitter);}}catch(error){var ds="params";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return paramsAry;}
function prepareSignInPayload(detail){let requirementName="Prepare payload for sign in event";let methodName="prepareSignInPayload";let payload={};try{if(detail){payload.loggedIn=detail.loggedIn;payload.CustomerId=detail.CustomerId;payload.MPAccStatus=detail.MPAccStatus;payload.MPBalance=detail.MPBalance;payload.MPPremierMiles=detail.MPPremierMiles;payload.MPPremierSegments=detail.MPPremierSegments;}}catch(error){let ds="params";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return payload;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[54]=='undefined'){utag.runonce.ext[54]=1;if(1){var CONST_EXT_NAME="Digital 3.0 - Qualtrics API Integration";Bootstrapper.reloadQualtrics=function(data,action){var methodName="Bootstrapper.reloadQualtrics";var requirementName="Reload Qualtrics on LOCATION_CHANGE callback event";try{if(typeof QSI!='undefined'&&typeof QSI.API!='undefined'){QSI.API.unload();QSI.API.load();}}catch(error){Bootstrapper.reportException(error);}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var CONST_EXTN_NAME="ManageRes PPR Cancel path";var DOUBLE_DASH="--";Bootstrapper.processCancelFlightTracking=function(data,parsedData){var methodName="processCancelFlightTracking";var CONST_REQ_NAME="ManageRes Cancel path GA Tracking";var params=data.params;var eventLabel;try{if(params.pageName&&params.pageName=="Cancel Confirmation"){eventLabel=params.pageName;if(params.info){if(data.action=="Error Shown – Cancel Flight Error"){parsedData.eventCategory="CSL Error";var pnr=DOUBLE_DASH;if(params.info.data&&params.info.data.RecordLocator){pnr=params.info.data.RecordLocator}
var errorMessage=DOUBLE_DASH;if(params.info.errorMessage){errorMessage=params.info.errorMessage;}
eventLabel=[eventLabel,pnr,errorMessage].join('|');}else{eventLabel=[eventLabel,DOUBLE_DASH].join('|');}}else{eventLabel=[eventLabel,DOUBLE_DASH].join('|');}
parsedData.eventLabel=eventLabel;}}catch(e){var ds="Data object for ManageRes PPR Cancel path tracking";var inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,JSON.stringify(e.message),e,ds,inputValue,methodName);}
return parsedData;};}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var CONST_EXTN_NAME="Digital 3.0 - ManageRes";var DOUBLE_DASH="--";var ERROR_INSUFFICIENT_BAL="Error Shown- Insufficient PlusPoints";let CONST_ORIGIN_CODE_SELECTOR="app-containers-TripDetails-SingleFlight-singleFlight__departureCity--15Cgh";let CONST_DEST_CODE_SELECTOR="app-containers-TripDetails-SingleFlight-singleFlight__arrivalCity--2P4-K";let CONST_CSS_UPSELL_LINK=".atm-c-btn.app-containers-TripDetails-ManageResTitle-styles__beBuyOutOfferLink--2SjZI.atm-c-btn--link .atm-c-btn__text";Bootstrapper.processPPRTrackingOnReservation=function(data,parseData){var methodName="processPPRTrackingOnReservation";var CONST_REQ_NAME="PPR ManageRes Tracking";var parseObjects=[];try{var parseDataObj=parseData;var params=data.params;var action=data.action;if(action&&action.indexOf("Error Shown")>-1){if(params.info){parseObjects=handleErrorTracking(params,parseDataObj,action);}else{parseObjects.push(parseDataObj);}}else{if(action=="Clicked on Button: Apply filter"){var filter=params.fieldName?params.fieldName:DOUBLE_DASH;parseDataObj.eventLabel=filter;}else if(action=="Clicked on Button: Sort by date/Flight"||action=="Clicked on Button: Sort by trip"){var sortType=params.sortType?params.sortType:DOUBLE_DASH;parseDataObj.eventLabel=sortType;}else if(params.info&&(action=="Clicked: Primary Offer Link"||action=="Clicked: Secondary Offer Link")){parseDataObj=prepareLabelForOffersOnTD(params.info,parseData);}
parseObjects.push(parseDataObj);}
}catch(e){var ds="Data object for PPR tracking on Manage Reservations";var inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return parseObjects;};function handleErrorTracking(params,parseData,action){var methodName="handleErrorTracking";var CONST_REQ_NAME="PPR ManageRes error Tracking";var errorDetailObj=[];try{var errorData=parseData;if(params.info.errorDetails){var errorDetails=params.info.errorDetails;for(var i=0;i<errorDetails.length;i++){errorData=prepareELForErrorTracking(errorDetails[i],errorData,action);errorDetailObj.push(errorData);}}else{errorData=prepareELForErrorTracking(params.info,errorData,action);errorDetailObj.push(errorData);}}catch(e){var ds="Data object for Manage Reservation error ";var inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return errorDetailObj;}
function prepareELForErrorTracking(errorDetail,parseData,action){var methodName="prepareELForErrorTracking";var CONST_REQ_NAME="PPR ManageRes - prepare event label for error tracking";var errorData=parseData;try{var pnr=errorDetail.pnr?errorDetail.pnr:DOUBLE_DASH;var errMessage=errorDetail.errorMessage?errorDetail.errorMessage:DOUBLE_DASH;errorData.eventLabel=[pnr,errMessage].join('|');if(action==ERROR_INSUFFICIENT_BAL){errorData.eventLabel=errMessage;}}catch(e){var ds="Data object for Manage Reservation error ";var inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return errorData;}
Bootstrapper.prepareLabelForReservations=function(data,analyticsData){var methodName="prepareLabelForReservations";var requirementName="Prepare label for Reservations";var analyticsDataAry=[];try{var gaData=analyticsData;var action=data.action;var params=data.params;if(data.action=="Clicked: Cancel Flight"||data.action=="Clicked: Cancel reservation"){gaData=handleCancelFlight(data,gaData);}else if(data.action=="Clicked: View seat map"||data.action=="Impression: Floating seat map"||data.action=="Clicked: Close Icon"){gaData=handleFeatureLabel(data,gaData);}else if(data.action=="Clicked: View/change Seat"||data.action=="Clicked link: Seat link"||data.action=="Clicked link: Change Seat"){gaData=handleChangeSeat(data,gaData);}else if(data.action=="Impression: Farelock"||data.action=="Clicked on Button: Purchase reservation"){gaData=prepareFeatureAndPnr(data,gaData);}else if(data.params&&data.params.feature=="One click enrollment"){gaData=handleOneClickEnrollment(data,gaData);}else if(isTravelCreditAction(data)){gaData.eventAction=data.action=="Clicked Link : Search travel credits"?"Clicked Link: Search travel credits":data.action;gaData=prepareELForFFCTrackingOnManageres(data,gaData);}else if(data.action=="Clicked link: Snacks for Purchase"||data.action=="Clicked link: Select meal"||data.action=="Clicked: View preorder meal"){gaData=prepareELForPOM(data,gaData);}else if(checkActionForRecognitionMessaging(action)){gaData=prepareELForRecognitionMessaging(params,gaData);}else if(data.action=="Clicked: Prepay Bags"||data.action=="Clicked: Pay for checked bags"||data.action=="Error Shown - Ineligible for prepaid bags"){gaData=prepareELForIneligibity(params,gaData);}else if(data.action=="Clicked: X"&&params.feature=="MP add modal"){gaData.eventLabel=Bootstrapper.fetchFeatureAndPageName(params);}else if(data.action=="Clicked : Buy Now"||data.action=="Impression: Switch to Economy"||data.action=="Clicked: Switch to Economy"||data.action=="Clicked: Stay in Basic Economy"||data.action=="Clicked: X"||data.action=="Clicked : Back to trip details"||data.action=="Clicked : Continue to checkout"){gaData=prepareELForIBEBuyout(data,gaData);}else if(data.action=="Impression: SAF"||data.action=="Clicked: SAF"){gaData=prepareELForSAF(data,gaData);}else if((data.action=="Clicked: Back to trip details"||data.action=="Clicked: Continue to checkout")&&data.params&&data.params.feature&&data.params.feature=="Prepaid bags"){gaData=prepareELForPrepaidBags(data,gaData);}else if(data.action=="Clicked: Sign in"||data.action=="Clicked: Close"){gaData.eventLabel=Bootstrapper.fetchFeatureAndPageName(params);if(data.action=="Clicked: Sign in"&&params.info){let position=params.info.position||DOUBLE_DASH;gaData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),position].join("|");}}else if(action=="Impression: Modal MP Add"||action=="Clicked: Add MileagePlus Number"||action=="MileagePlus number added successfully"||action=="Impression: Pet Added"||action=="Clicked: Add Pet"||action=="Clicked: Back to trip details"){gaData.eventLabel=Bootstrapper.fetchFeatureAndPageName(params);}else if(action=="Error Shown"){let msg=(data.params.info&&data.params.info.errorMessage)?data.params.info.errorMessage:"--";gaData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(data.params),msg].join('|');}else if(action=="Clicked: Continue to select flights"){let petCount=(params.info&&params.info.petCount&&params.info.petCount)?params.info.petCount:0;gaData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(data.params),petCount].join("|");}else if(action=="Clicked: Continue to Pet Info page"){gaData=parseLabelForContinueClick(data,gaData);}else if(action=="Clicked: Continue to Checkout page"){gaData=parseLabelForCheckoutClick(data,gaData);}
analyticsDataAry.push(gaData);}catch(error){var ds="data object from callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,JSON.stringify(data),methodName);}
return analyticsDataAry;};function isTravelCreditAction(data){var methodName="isTravelCreditAction";var requirementName="Is the action of Travel Credits";try{if(data.action=="Impression: Future flight credit"||data.action=="Tab Selected: Future flight credit"||data.action=="Clicked: My Account"||data.action=="Impression: Search travel credits"||data.action=="Impression: non-OTA agency"||data.action=="Clicked Link: Search travel credits"||data.action=="Clicked Link : Search travel credits"){return true;}}catch(error){var ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,JSON.stringify(data),methodName);}
return false;}
function getOriginDestinations(infoObject){var methodName="getOriginDestinations";var requirementName="Fetch OD pair from info data object";var odPair=DOUBLE_DASH;try{if(infoObject&&infoObject.itineraryDetails){for(var i=0;i<infoObject.itineraryDetails.length;i++){if(i==0){odPair=[i+1,infoObject.itineraryDetails[i].origin,infoObject.itineraryDetails[i].destination].join("|");}else{odPair=[odPair,i+1,infoObject.itineraryDetails[i].origin,infoObject.itineraryDetails[i].destination].join("|");}}}}catch(error){var ds="info data object from callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,JSON.stringify(infoObject),methodName);}
return odPair;}
Bootstrapper.handleReservationsFormSubmit=function(type,dataObject){var methodName="handleReservationsFormSubmit";var requirementName="Handle form submit actions on reservation path";var analyticsDataAry=[];try{var analyticsData={};analyticsData.eventCategory=dataObject.category;var pnr=dataObject.pnr?dataObject.pnr:"--";var referral=dataObject.referral==""?"Trip Details":dataObject.referral;analyticsData.eventLabel=[referral,pnr].join("|");if(type=="unitedapp/ManageResCancelFlight/FORM_SUBMIT_SUCCESS_UPDATE_CANCEL_PNR"){analyticsData.eventAction="Cancel Reservation";analyticsData.tealiumEvent=analyticsData.eventAction;}else if(type=="unitedapp/ManageResPurchase/FORM_SUBMIT_SUCCESS"){analyticsData.eventAction="Purchase";analyticsData.tealiumEvent=analyticsData.eventAction;}else{analyticsData={};}
analyticsDataAry.push(analyticsData);}catch(error){var ds="type value from Middleware";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataAry;};Bootstrapper.handleCancelUpgradeRequest=function(type){var methodName="handleCancelUpgradeRequest";var requirementName="Handle cancel Upgrade Request";try{var cancelRequestDataAry=[];if(type){var cancelRequestDetails={};cancelRequestDetails.eventCategory="Reservations";cancelRequestDetails.eventAction="Cancel Upgrade";cancelRequestDetails.tealiumEvent=cancelRequestDetails.eventAction;if(type=="FORM_SUBMIT_SUCCESS"){cancelRequestDetails.eventLabel="Success";}else if(type=="FORM_SUBMIT_FAILURE"){cancelRequestDetails.eventLabel="Failed";}
cancelRequestDataAry.push(cancelRequestDetails);}}catch(error){var ds="type value from Middleware";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return cancelRequestDataAry;};function handleChangeSeat(data,gaData){var methodName="handleChangeSeat";var requirementName="Handle view/change seat interactions";try{var params=data.params;if(params){var feature=params.feature?params.feature:DOUBLE_DASH;var pageName=params.pageName?params.pageName:DOUBLE_DASH;var eventLabel=[feature,pageName].join("|");var info=params.info;if(info){var position=info.position?info.position:DOUBLE_DASH;if(data.action=="Clicked link: Seat link"){var origin=info.origin?info.origin:DOUBLE_DASH;var destination=info.destination?info.destination:DOUBLE_DASH;var fareClass=info.fareClass?info.fareClass:DOUBLE_DASH;eventLabel+='|'+[position,origin,destination,fareClass].join("|");}else if(data.action=="Clicked link: Change Seat"){eventLabel+='|'+position;}}
gaData.eventLabel=eventLabel;}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return gaData;}
function handleCancelFlight(data,gaData){var methodName="handleCancelFlight";var requirementName="Handle cancel flight interaction";try{var params=data.params;if(params&&params.info){var featureAndPnr=prepareFeatureAndPnr(data,gaData);var featureAndPnrEL=featureAndPnr.eventLabel?featureAndPnr.eventLabel:DOUBLE_DASH;var info=params.info;var eventLabel=getOriginDestinations(info);gaData.eventLabel=[featureAndPnrEL,eventLabel].join("|");}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return gaData;}
function handleFeatureLabel(data,gaData){var methodName="handleFeatureLabel";var requirementName="Handle feature label";try{var params=data.params;if(params&&params.feature){gaData.eventLabel=params.feature;}
if(data.action=="Impression: Floating seat map"){gaData.noninteraction='1';}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return gaData;}
function prepareLabelForOffersOnTD(infoObject,parseData){var methodName="prepareLabelForOffersOnTD";var requirementName="Prepare event label for Offer clicks on Trip details page";try{if(infoObject){var title=infoObject.title?infoObject.title:"--";var actionURL=infoObject.actionURL?infoObject.actionURL:"--";parseData.eventLabel=[title,actionURL].join("|");}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function prepareFeatureAndPnr(data,parseData){var methodName="prepareFeatureAndPnr";var requirementName="prepare event label with feature and pnr";try{var params=data.params;if(params){var feature=params.feature?params.feature:"--";var pnr=params.info&&params.info.pnr?params.info.pnr:"--";parseData.eventLabel=[feature,pnr].join("|");}
if(data.action=="Impression: Farelock"){parseData.noninteraction='1';}}catch(error){var ds="data objects from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function handleOneClickEnrollment(data,parseData){var methodName="handleOneClickEnrollment";var requirementName="prepare event label for one click enrollment";try{var params=data.params;var feature=params.feature;var pageName=params.pageName?params.pageName:DOUBLE_DASH;parseData.eventLabel=[feature,pageName].join("|");if(data.action=="Clicked: Cancel"){var position=params.info&&params.info.position?params.info.position:DOUBLE_DASH;parseData.eventLabel=[parseData.eventLabel,position].join("|");}else if(data.action=="Error Shown"){parseData={};}}catch(error){var ds="data objects from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function prepareELForFFCTrackingOnManageres(data,parseData){var methodName="prepareELForFFCTrackingOnManageres";var requirementName="prepare event label for FFC residual tracking on Mytrips and Tripdetails";try{var params=data.params;var label=params.pageName?params.pageName:DOUBLE_DASH;if(params.feature){label=[params.feature,label].join("|");}
if(params.info&&params.info.message){label=[label,params.info.message].join("|");}
parseData.eventLabel=label;}catch(error){var ds="data objects from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function prepareELForPOM(data,parseData){var methodName="prepareELForPOM";var requirementName="prepare event label for preorder meal link";try{var params=data.params;var label;if(params&&params.info){var info=params.info;var fetaureName=params.featureName?params.featureName:DOUBLE_DASH;var pnr=info.pnr?info.pnr:DOUBLE_DASH;label=[fetaureName,pnr].join('|');if(data.action!="Clicked: View preorder meal"){var origin=info.origin?info.origin:DOUBLE_DASH;var destination=info.destination?info.destination:DOUBLE_DASH;var fareClass=info.fareClass?info.fareClass:DOUBLE_DASH;var flightNumber=info.flightNumber?info.flightNumber:DOUBLE_DASH;label=[label,origin,destination,fareClass,flightNumber].join('|');}}
parseData.eventLabel=label;}catch(error){var ds="data objects from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function checkActionForRecognitionMessaging(action){try{if(action=="Impression: United Packages"||action=="Clicked link: Find My Trip"||action=="Clicked: Find My Trip"||action=="Clicked: Go back"||action=="Clicked: Closed"){return true;}}catch(error){var methodName="checkActionForRecognitionMessaging";var requirementName="Check action for Recognition Messaging";var ds="Data object from callback";var inputValue=action;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return false;}
function prepareELForRecognitionMessaging(params,parseData){try{if(params){var feature=params.feature||DOUBLE_DASH;var pageName=params.pageName||DOUBLE_DASH;parseData.eventLabel=[feature,pageName].join("|");var info=params.info;if(info){var title=info.title||DOUBLE_DASH;var message=info.message||DOUBLE_DASH;parseData.eventLabel=[parseData.eventLabel,title,message].join('|');}}}catch(error){var methodName="prepareELForRecognitionMessaging";var requirementName="Prepare Event Label for Recognition Messaging";var ds="Data object from callback";var inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function prepareELForIneligibity(params,parseData){let requirementName="Prepare label for ineligibity error for prepay bags";let methodName="prepareELForIneligibity";try{let feature=params.feature||DOUBLE_DASH;let pageName=params.pageName||DOUBLE_DASH;let eventLabel=[feature,pageName].join("|");let info=params.info;if(info){let tripType=info.tripType||DOUBLE_DASH;let itneraryInfo=processItineraryDetails(info.itineraryDetails);parseData.eventLabel=[eventLabel,tripType,itneraryInfo].join('|');}}catch(error){let ds="Data object from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function processItineraryDetails(itineraryDetails){let requirementName="Prepare label for ineligibity error for prepay bags";let methodName="processItineraryDetails";let itineraryDetail;try{if(itineraryDetails){let itneraryInfo;for(const element of itineraryDetails){let origin=element.origin||DOUBLE_DASH;let destination=element.destination||DOUBLE_DASH;let departureDate=element.departureDate||DOUBLE_DASH;let returnDate=element.returnDate||DOUBLE_DASH;itneraryInfo=[origin,destination,departureDate,returnDate].join("|");itineraryDetail=itineraryDetail?'['+[itineraryDetail,itneraryInfo].join(',')+']':'['+itneraryInfo+']';}}}catch(error){let ds="Data object from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return itineraryDetail;}
function prepareELForIBEBuyout(data,parseData){let requirementName="Prepare label for IBE Buyout";let methodName="prepareELForIBEBuyout";try{let feature=data&&data.params.feature||DOUBLE_DASH;let pageName=data&&data.params.pageName||DOUBLE_DASH;let eventLabel=[feature,pageName].join("|");let info=data&&data.params.info;if(info){let amount=info.amount||DOUBLE_DASH;let currency=info.currency||DOUBLE_DASH;let paxCount=info.paxCount||DOUBLE_DASH;let productCode=info.productCode||DOUBLE_DASH;let pnr=info.pnr||DOUBLE_DASH;let origincode=fetchDataFromDOM(CONST_ORIGIN_CODE_SELECTOR);let destinationcode=fetchDataFromDOM(CONST_DEST_CODE_SELECTOR);let originCountryCode=origincode?origincode.slice(-2):DOUBLE_DASH;let destinationCountryCode=destinationcode?destinationcode.slice(-2):DOUBLE_DASH;let marketType=Bootstrapper.getMarketType(originCountryCode,destinationCountryCode);let legsDetail=prepareDataForLeg(info,data.action,feature);if(data.action=="Clicked: Switch to Economy"||data.action=="Clicked: Stay in Basic Economy"){let position=info.position||DOUBLE_DASH;parseData.eventLabel=[eventLabel,amount,currency,pnr,marketType,legsDetail,paxCount,productCode,position].join('|');}else if(data.action=="Clicked : Back to trip details"||data.action=="Clicked : Continue to checkout"||data.action=="Clicked : Buy Now"){parseData.eventLabel=[eventLabel,amount,currency,pnr,legsDetail,paxCount,productCode].join('|');}else{parseData.eventLabel=[eventLabel,amount,currency,pnr,marketType,legsDetail,paxCount,productCode].join('|');}}
if(data.action=="Impression: Switch to Economy"){setTimeout(function(){trackUpsellLinkClick();},3500);}}catch(error){let ds="Data object from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function prepareDataForLeg(info,action,feature){var methodName="prepareDataForLeg";var requirementName="Prepare Data For Leg";let legsDetail=DOUBLE_DASH;try{if(info.legs&&info.legs.length>0){let legs=info.legs;let origin,destination,odPair,legInfo,legCount;let legsArray=[];for(let i=0;i<legs.length;i++){origin=legs[i].origin?legs[i].origin:legs[i].Origin?legs[i].Origin:"--";destination=destination=legs[i].destination?legs[i].destination:legs[i].Destination?legs[i].Destination:"--";odPair=[origin,destination].join("-");legCount=i+1;if(feature=="Prepaid bags"&&(action=="Clicked: Back to trip details"||action=="Clicked: Continue to checkout")){let departDate=Bootstrapper._dateFormat(legs[i].departDate,"yyyy-MM-d");legInfo=[("leg"+legCount),odPair,departDate,parseTravelerArray(legs[i])].join("|");}else{legInfo=[("leg"+legCount),odPair].join("|");}
legsArray.push(legInfo);}
legsDetail="["+legsArray.join(",")+"]";}}catch(e){let ds="Data object from callback";let inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return legsDetail;}
function fetchDataFromDOM(selector){let data=DOUBLE_DASH;try{if(selector){let elements=document.getElementsByClassName(selector);if(elements&&elements.length>0){for(let i=0;i<elements.length;i++){if(elements[i].innerText){data=elements[i].innerText;}}}}}catch(e){let methodName="fetchDataFromDOM";let requirementName="Fetch Data From DOM";let ds="DOM";let inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return data;}
function trackUpsellLinkClick(){let requirementName="Track upsell hyperlink";let methodName="trackUpsellLinkClick";try{let ele=$(CONST_CSS_UPSELL_LINK);if(ele&&ele.length>0){$(ele).on("click",function(){let dataObject={};dataObject.eventAction="Clicked Link: Add United Economy benefits for fewer restrictions";dataObject.eventCategory="Reservations";dataObject.eventLabel="Basic Economy BuyOut|Trip Details";dataObject.tealiumEvent=dataObject.eventAction;Bootstrapper.setUtagLinkForDOMEvent(dataObject);});}}catch(error){let ds="DOM";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function prepareELForSAF(data,gaData){let requirementName="Prepare label for SAF";let methodName="prepareELForSAF";try{if(data.params){let params=data.params;let feature=params.feature||DOUBLE_DASH;let pageName=params.pageName||DOUBLE_DASH;let amount=(params&&params.info&&params.info.amount)?params.info.amount:DOUBLE_DASH;let currency=(params&&params.info&&params.info.currency)?params.info.currency:DOUBLE_DASH;let eventLabel;if(data.action=="Impression: SAF"){let safOptions=(params&&params.info&&params.info.safOptions)?params.info.safOptions:DOUBLE_DASH;let options="["+safOptions+"]";eventLabel=[feature,pageName,options,currency].join("|");}else{eventLabel=[feature,pageName,amount,currency].join("|");}
gaData.eventLabel=eventLabel;}}catch(error){let ds="callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return gaData;}
function prepareELForPrepaidBags(data,gaData){let requirementName="Prepare label for Prepaid bags - miles as FOP";let methodName="prepareELForPrepaidBags";let eventLabel;try{if(data.params&&data.params.info){let params=data.params;let feature=params.feature||DOUBLE_DASH;let pageName=params.pageName||DOUBLE_DASH;let info=params.info;let originPod=info.originPod||DOUBLE_DASH;let purchasePod=info.purchasePod||DOUBLE_DASH;let marketType=info.marketType||DOUBLE_DASH;let isBE=info.isBasicEconomy?"BE: Y":"BE: N";let pnr=info.pnr||DOUBLE_DASH;let legsDetails=prepareDataForLeg(params.info,data.action,feature);eventLabel=[feature,pageName,originPod,purchasePod,marketType,isBE,pnr,legsDetails].join("|");if(data.action=="Clicked: Continue to checkout"){let amount=info.totalAmount||0;let miles=info.totalMiles||0;let currency=info.currency||DOUBLE_DASH;eventLabel=[eventLabel,amount,miles,currency].join("|");}
gaData.eventLabel=eventLabel;}}catch(error){let ds="callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return gaData;}
function parseTravelerArray(legsDetails){let requirementName="Parse traveler array";let methodName="parseTravelerArray";let details;try{let travelersDetails=legsDetails.travelers;if(travelersDetails&&travelersDetails.length>0){let paxCount=travelersDetails.length;let bagCount=0;for(const traveler of travelersDetails){bagCount+=(traveler.bagCount)?traveler.bagCount:0;}
let info=[paxCount,bagCount].join("|");info="["+info+"]";details=details?[details,info].join(","):info;}}catch(error){let ds="callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return details;}
function parseLabelForCheckoutClick(data,parseData){let methodName="parseLabelForCheckoutClick";let requirementName="Prepare event label for Continue to checkout page";try{let params=data.params;if(params){let eventLabel=Bootstrapper.fetchFeatureAndPageName(params);let info=params.info;let petCount=0;let petArray=[];let petInfo;if(info){let type,weight,endangerDisclaimer,petData;for(const element of info.petDetails){type=element.type?element.type:DOUBLE_DASH;weight=element?element.weight:DOUBLE_DASH;endangerDisclaimer=element?element.endangerDisclaimer:DOUBLE_DASH;petData=[type,weight,endangerDisclaimer].join("|");petCount++;petInfo=[("pet"+petCount),petData].join("|");petArray.push(petInfo);}
let petDetail="["+petArray.join(",")+"]";parseData.eventLabel=[eventLabel,petDetail].join("|");}}}catch(error){let ds="data objects from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function parseLabelForContinueClick(data,parseData){let methodName="parseLabelForContinueClick";let requirementName="Prepare event label for Continue to pet info page";try{let params=data.params;if(params){let eventLabel=Bootstrapper.fetchFeatureAndPageName(params);let info=params.info;if(info){let segmentNumber,origin,destination,departDate,flightOperator,legInfo,odPair,legsDetail;let legsArray=[];let legCount=0;for(const element of info.legs){segmentNumber=element.segmentNumber?element.segmentNumber:DOUBLE_DASH;origin=element.origin?element.origin:DOUBLE_DASH;destination=element.destination?element.destination:DOUBLE_DASH;departDate=element.departDate?Bootstrapper._dateFormat(element.departDate,"yyyy-MM-dd"):DOUBLE_DASH;flightOperator=element?element.flightOperator:DOUBLE_DASH;odPair=[origin,destination,departDate,flightOperator].join("|");legCount++;legInfo=[("leg"+legCount),odPair].join("|");legsArray.push(legInfo);}
legsDetail="["+legsArray.join(",")+"]";parseData.eventLabel=[eventLabel,segmentNumber,legsDetail].join("|");}}}catch(error){let ds="data objects from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var CONST_EXT_NAME="Digital 3.0 - My Account Flex";var CONST_EC_ACCOUNT_FLEX="My Account";Bootstrapper.processMyAccountFlex=function(data){var methodName="processMyAccountFlex";var accountFlexDataObjects=[];var ds="Data object for Account Flex";var inputValue="data.action.data";var requirementName="Handle and process My Account Flex and send events on GA";try{if(data.action.data&&data.action.data.pageName&&data.action.data.pageName=="My Account Flex"){var accountFlexData={};accountFlexData.eventCategory=CONST_EC_ACCOUNT_FLEX;if(data.action.type==="FORM_SUBMIT_TRANSFER_FLEX"){accountFlexData.eventAction="Clicked: Agree and confirm transfer";accountFlexData.eventLabel=["Transfer miles",data.action.data.pageName].join('|');accountFlexDataObjects.push(accountFlexData);}else if(data.action.type==="FORM_SUBMIT_SUCCESS_TRANSFER_FLEX"){accountFlexData.eventAction="Transfer miles successful";accountFlexData.eventLabel=data.action.data.pageName;accountFlexDataObjects.push(accountFlexData);}}else{var errMessage="Data JSON object is not available in middleware event object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,errMessage,null,ds,inputValue,methodName);}}catch(e){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,JSON.stringify(e.message),e,ds,inputValue,methodName);}
return accountFlexDataObjects;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="Upgrade Mall";let DOUBLE_DASH="--";let FB_PIXEL_ID="250925910724073";let CONST_DATA_CSS=".app-components-UpgradeMall-ReviewUpgrades-ReviewUpgradesStyles__trip--J2NLp";let FLS_PIXEL_URL="https://ad.doubleclick.net/ddm/activity/src=3463749;type=upgra00;cat=upgpurch;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};";let cabin,pos;Bootstrapper.processUpgradeMallTracking=function(data,parseData){let methodName="processUpgradeMallTracking";let CONST_REQ_NAME="Upgrade Mall Tracking";let parseObjects=[];try{let parseDataObj=parseData;let params=data.params;let action=data.action;if(action=="Error Shown"&&params.info){parseObjects=handleErrorTracking(params,parseDataObj);}else{parseObjects.push(parseDataObj);}}catch(e){let ds="Data object for Upgrade Mall tracking";let inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return parseObjects;};function handleErrorTracking(params,parseData){let methodName="handleErrorTracking";let CONST_REQ_NAME="Upgrade mall error Tracking";let errorDetailObj=[];try{let errorData=parseData;if(params.info.errorDetails){let errorDetails=params.info.errorDetails;for(const err of errorDetails){errorData=prepareELForErrorTracking(err,errorData);errorDetailObj.push(errorData);}}else{errorData=prepareELForErrorTracking(params.info,errorData);errorDetailObj.push(errorData);}}catch(e){let ds="Data object for Upgrade Mall error ";let inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return errorDetailObj;}
function prepareELForErrorTracking(errorDetail,parseData){let methodName="prepareELForErrorTracking";let CONST_REQ_NAME="Upgrade mall - prepare event label for error tracking";let errorData=parseData;try{let errMessage=errorDetail.errorMessage?errorDetail.errorMessage:DOUBLE_DASH;errorData.eventLabel=errMessage;}catch(e){let ds="Data object for Upgrade Mall error ";let inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,e.message,e,ds,inputValue,methodName);}
return errorData;}
Bootstrapper.trackAncillaryPurchasesUpgradeMall=function(dataObject,category,type){let methodName="trackAncillaryPurchasesUpgradeMall";let requirementName="Handle ancillary purchases thourgh Middleware";let analyticsDataAry=[];try{if(type=="unitedapp/UpgradeMall/Storefront/TRACK_FORM_SUBMIT"){analyticsDataAry=trackAncillaryFormSubmit(dataObject,category);}else if(type=="unitedapp/UpgradeMall/Storefront/TRACK_FORM_SUBMIT_SUCCESS"){analyticsDataAry=handleAncillaryFormSuccess(dataObject,category);}else if(type=="unitedapp/UpgradeMall/Storefront/TRACK_FORM_SUBMIT_FAILURE"){analyticsDataAry=getFormSubmitFailureErrors(dataObject,category);}}catch(error){let ds="Data object for Form Submit";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataAry;};function trackAncillaryFormSubmit(data,category){let methodName="trackAncillaryFormSubmit";let requirementName="Handle Form submit for Upgrade mall";let formSubmitDataAry=[];let formSubmitData={};try{if(data.buttonName){formSubmitData.eventAction="Clicked: "+data.buttonName;formSubmitData.tealiumEvent=formSubmitData.eventAction;formSubmitData.eventCategory=category;formSubmitDataAry.push(formSubmitData);}else{let dataSource="Data object for Form Submit";let message="Button name is not availble in Middleware";Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,message,null,dataSource,JSON.stringify(data),methodName);}}catch(error){let ds="Data object for Form Submit";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return formSubmitDataAry;}
function handleAncillaryFormSuccess(data,category){let methodName="handleAncillaryFormSuccess";let requirementName="Handle Form submit success for Upgrade mall";let analyticsData={};let analyticsDataAry=[];try{analyticsData.eventCategory=category;analyticsData.eventAction="Upgrade Success";analyticsData.tealiumEvent=analyticsData.eventAction;analyticsData.eventLabel=(data.response&&data.response.CartId)?data.response.CartId:"--";analyticsDataAry.push(analyticsData);setTimeout(function(){waitLoopForUpgradeAmount();},200);}catch(error){let ds="Data object for Form Submit Success";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataAry;}
function getFormSubmitFailureErrors(dataObject,category){let methodName="getFormSubmitFailureErrors";let requirementName="Handle Form submit failures for Upgrade mall";let errorObjects=[];try{let error=dataObject.error;errorObjects.push(trackAncillaryPurchaseError(error,category));if(error){let innerErrors=error.errors;if(innerErrors){for(const err of innerErrors){let errorObj={};if(err.Message){errorObj.eventCategory="Upgrade Mall";errorObj.eventAction="Error Shown";errorObj.tealiumEvent=errorObj.eventAction;errorObj.eventLabel=[error.cartId,err.Message].join("|");errorObjects.push(errorObj);}}}}}catch(error){let ds="Data object for Form Submit Failure";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return errorObjects;}
function trackAncillaryPurchaseError(errorObject,category){let methodName="trackAncillaryPurchaseError";let requirementName="Handle ancillary purchase error on Upgrade mall";let ancillaryError={};try{ancillaryError.eventCategory=category;ancillaryError.eventAction="Upgrade Failed";ancillaryError.tealiumEvent=ancillaryError.eventAction;ancillaryError.eventLabel=(errorObject)?errorObject.cartId:"";}catch(error){let ds="Data object for Form Submit Failure";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return ancillaryError;}
function trackUpgradeAmount(){let requirementName="Track upgrade cabin amount";let methodName="trackUpgradeAmount";let CONST_CSS_TOTAL_AMOUNT=".app-components-UpgradeMall-TotalAmount-TotalAmountStyles__total--uHAHV";let CONST_CSS_PNR=".app-components-UpgradeMall-FormSteps-FormSteps__number--hLuO4";try{let analyticsData={};let totalAmt=getUpgradeAmountDetails(CONST_CSS_TOTAL_AMOUNT);let pnr=$(CONST_CSS_PNR).text()?$(CONST_CSS_PNR).text():DOUBLE_DASH;analyticsData.eventCategory="Ancillary Purchases";analyticsData.eventAction="Impression: Cabin Upgrade Amount";analyticsData.tealiumEvent=analyticsData.eventAction;analyticsData.eventLabel=[pnr,totalAmt].join("|");Bootstrapper.setUtagLinkForDOMEvent(analyticsData);triggerPixels(pnr);}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
var waitloopForUpgradeAmount=0;var isUpgradeAmountCaptured=false;function waitLoopForUpgradeAmount(){try{let CONST_CSS_TOTAL_AMOUNT=".app-components-UpgradeMall-TotalAmount-TotalAmountStyles__total--uHAHV";if($(CONST_CSS_TOTAL_AMOUNT).length>0&&!isUpgradeAmountCaptured){trackUpgradeAmount();isUpgradeAmountCaptured=true;}else if(waitloopForUpgradeAmount<10){setTimeout(function(){waitLoopForUpgradeAmount();},200);waitloopForUpgradeAmount++;}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function getUpgradeAmountDetails(eleCSS){let requirementName="Fetch miles and price details";let methodName="getUpgradeAmountDetails";let total=DOUBLE_DASH;let amount;try{let totalDetails=$(eleCSS);for(let i=0;i<totalDetails.length;i++){if($(totalDetails[i]).attr("data-test")){if($(totalDetails[i]).attr("data-test")=="price-amount"){amount=totalDetails[i].textContent;}
if($(totalDetails[i]).attr("data-test")=="miles-amount"){amount=totalDetails[i].textContent;}
if($(totalDetails[i]).attr("data-test")=="points-amount"){amount=totalDetails[i].textContent;}
if(amount){total=(total==DOUBLE_DASH)?amount:[total,amount].join("|");}}}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return total;}
function triggerPixels(pnr){let requirementName="Trigger pixels";let methodName="triggerPixels";try{if(utag_data&&utag_data.point_of_sale&&utag_data.point_of_sale.toLowerCase()=="us"||Bootstrapper.getPOSFromURL().toLowerCase()=="gb"||Bootstrapper.getPOSFromURL().toLowerCase()=="au"){if(typeof Bootstrapper.prepareDataForFB==="function"){let fbData=Bootstrapper.prepareDataForFB("purchase");if(fbData){let fbPixelURL=prepareFBPixelURL(fbData,"purchase");Bootstrapper.imageRequest(fbPixelURL);}}
if(typeof Bootstrapper.prepareFLSPixelURL==="function"){let pixelURL=Bootstrapper.prepareFLSPixelURL(CONST_DATA_CSS,FLS_PIXEL_URL,false);let amountStr=getAmount();let amount=(amountStr&&amountStr!==0)?amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^A-Z]/g,'',"").trim():amountStr;pixelURL+=";u17="+amount;pixelURL+=";cost="+amount;pixelURL+=";qty="+getPAXCountDOM();let currency=(amountStr&&amountStr!==0&&amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^0-9.]/g,'',"").trim().length===3)?amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^0-9.]/g,'',"").trim():"USD";pixelURL+=";currency="+currency;pixelURL+=";ord="+Bootstrapper.base64Encode(pnr);Bootstrapper.imageRequest(pixelURL);}}
triggerLinkedInPixelUpgradeFlow();}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function getPAXCountDOM(){let requirementName="Get PAX Count from DOM";let methodName="getPAXCountDOM";let paxCount;try{let ele=$(".app-components-UpgradeMall-FormSteps-FormSteps__travelersCopy--zq8M5");if(ele&&ele.text()){paxCount=ele.text().split(",").length;}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return paxCount;}
function getAmount(){let requirementName="Get amount from DOM";let methodName="getAmount";let CONST_CSS_TOTAL_AMOUNT=".app-components-UpgradeMall-TotalAmount-TotalAmountStyles__total--uHAHV";let amount=0;try{let ele=$(CONST_CSS_TOTAL_AMOUNT);for(let i=0;i<ele.length;i++){if($(ele[i]).attr("data-test")){if($(ele[i]).attr("data-test")=="price-amount"){amount=ele[i].textContent;}}}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return amount;}
function prepareFBPixelURL(fbData,eventName){let requirementName="Prepare data for FB on upgrade flow";let methodName="prepareFBPixelURL";let pixelURL;try{if(fbData){let amountStr=getAmount();let amount=(amountStr!==0)?amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^A-Z]/g,'',"").trim():amountStr;pixelURL="//www.facebook.com/tr?id=250925910724073&ev="+eventName;let currency=(amountStr&&amountStr!==0)&&amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^0-9.]/g,'',"").trim().length===3?amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^0-9.]/g,'',"").trim():"USD";pixelURL+="&cd[currency]="+currency;pixelURL+="&cd[purchase_price]="+amount;pixelURL+="&cd[value]="+amount;pixelURL+="&cd[travel_class]="+fbData.travel_class;pixelURL+="&cd[pos]="+fbData.point_of_sale;cabin=fbData.travel_class;pos=fbData.point_of_sale;}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return pixelURL;}
function triggerLinkedInPixelUpgradeFlow(){let requirementName="Trigger linkedin pixel";let methodName="triggerLinkedInPixelUpgradeFlow";try{let pixelURL="https://px.ads.linkedin.com/collect/?pid=5171290&fmt=gif";let amountStr=getAmount();let amount=(amountStr!==0)?amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^A-Z]/g,'',"").trim():amountStr;let currency=(amountStr&&amountStr!==0)&&amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^0-9.]/g,'',"").trim().length===3?amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^0-9.]/g,'',"").trim():"USD";let travel_class=cabin||"--";let posParam=pos||"--";pixelURL+="&currency="+currency+"&value="+amount+"&travel_class="+travel_class+"&pos="+posParam;Bootstrapper.imageRequest(pixelURL);}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var CONST_EXTN_NAME="Refund Form";var DOUBLE_DASH="--";var CONST_EC_REFUNDS="Refunds";Bootstrapper.handleRefundsFormSubmit=function(type,dataObject){var methodName="handleRefundsFormSubmit";var requirementName="Handle Refund form submit tracking";var analyticsDataArray=[];try{var data={};if(type=="unitedapp/ContinuousImprovement/REFUNDSSUBMIT/FORM_SUBMIT_SUCCESS_REFUNDS"&&dataObject.formName=="Request Refund Form"){data.eventCategory=CONST_EC_REFUNDS;data.eventAction="Clicked: Submit";data.tealiumEvent=data.eventAction;data.eventLabel=DOUBLE_DASH;if(dataObject.items){data.eventLabel=JSON.stringify(dataObject.items);}
analyticsDataArray.push(data);}else if(type=="unitedapp/ContinuousImprovement/REFUNDSTATUS/FORM_SUBMIT_SUCCESS_REFUNDS_STATUS"&&dataObject.formName=="Refund Status Form"){data.eventCategory=CONST_EC_REFUNDS;data.eventAction="Clicked: Check status";data.tealiumEvent=data.eventAction;data.eventLabel=dataObject.formName;if(dataObject.requestIdOrETicketNumber){data.eventLabel=[data.eventLabel,dataObject.requestIdOrETicketNumber].join('|');}
analyticsDataArray.push(data);}}catch(error){var ds="type or formName value from Middleware";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataArray;};}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[78]=='undefined'){utag.runonce.ext[78]=1;if(1){var CONST_EXTN_NAME="Timatic Form";var DOUBLE_DASH="--";var CONST_EC_TIMATIC="Timatic";Bootstrapper.handleTimaticFormSubmit=function(type,dataObject){var methodName="handleTimaticFormSubmit";var requirementName="Handle Timatic form submit tracking";var analyticsDataArray=[];try{var data={};if(type=="unitedapp/ContinuousImprovement/TIMATICSUBMIT/FORM_SUBMIT_SUCCESS_TIMATIC"&&dataObject.formName=="timatic"){data.eventCategory=CONST_EC_TIMATIC;data.eventAction="Clicked: Check requirements";data.tealiumEvent=data.eventAction;data.eventLabel=DOUBLE_DASH;if(dataObject.formData){data.eventLabel=JSON.stringify(dataObject.formData);}
analyticsDataArray.push(data);}}catch(error){var ds="type or formName value from Middleware";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataArray;}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var CONST_EXTN_NAME="Digital 3.0 - Seat Map";var DOUBLE_DASH=Bootstrapper.dataObject.global.constant.doubleDash;Bootstrapper.prepareLabelForSeatMap=function(data,analyticsData){var methodName="prepareLabelForSeatMap";var requirementName="Prepare label for seat map tracking";var analyticsDataAry=[];try{var gaData=analyticsData;if(data.action=='Clicked: Continue to payment'||data.action=='Clicked: Next flight'){gaData=handleSeatMap(data,gaData);}else if(data.action=="Error Shown"){let action=checkForInfo();gaData.eventAction=action;analyticsDataAry=handleError(data,gaData);return analyticsDataAry;}
analyticsDataAry.push(gaData);}catch(error){var ds="data object from callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,JSON.stringify(data),methodName);}
return analyticsDataAry;}
function handleSeatMap(data,gaData){var methodName="handleSeatMap";var requirementName="Handle seat map interactions";try{var params=data.params;if(params){var eventLabel=prepareInitialEL(params);var info=params.info;if(info){var pnr=info.pnr?info.pnr:DOUBLE_DASH;let isUpsell=info.isUpsell?'Upsell:Y':'Upsell:N';let flightOperatorDescription=Bootstrapper.getSelectedFlightOperator();if(data.action=='Clicked: Continue to payment'){if(!info.originPod&&!info.purchasePod&&!info.marketType){gaData={};return gaData;}
let es=getExtraSeatDetails(info,true);eventLabel=[eventLabel,pnr,Bootstrapper.prepareLegInfo(info),prepareSeatPurchaseInfo(info),flightOperatorDescription,isUpsell].join("|");eventLabel=(es)?[eventLabel,es].join("|"):eventLabel;}
else if(data.action=='Clicked: Next flight'){var origin=info.origin?info.origin:DOUBLE_DASH;var destination=info.destination?info.destination:DOUBLE_DASH;eventLabel=[eventLabel,pnr,origin,destination,Bootstrapper.prepareCabinInfo(info.travelers),prepareSeatPurchaseInfo(info)].join("|");let es=getExtraSeatDetails(info,false);eventLabel=es?[eventLabel,es].join("|"):eventLabel;}}
gaData.eventLabel=eventLabel;}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return gaData;}
function prepareInitialEL(params){var methodName="prepareInitialEL";var requirementName="Prepared Initial Evenet label on Seat Map ";var eventLabel;try{if(params){var feature=params.feature?params.feature:DOUBLE_DASH;var pageName=params.pageName?params.pageName:DOUBLE_DASH;eventLabel=[feature,pageName].join("|");}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eventLabel;}
function prepareSeatPurchaseInfo(info){var methodName="prepareSeatPurchaseInfo";var requirementName="Prepare Event label of seat purchase actions";var el=DOUBLE_DASH;try{if(info){var originPod=info.originPod?info.originPod:DOUBLE_DASH;var purchasePod=info.purchasePod?info.purchasePod:DOUBLE_DASH;var marketType=info.marketType?info.marketType:DOUBLE_DASH;var isBE=info.isBasicEconomy?'BE:Y':'BE:N';el=[isBE,marketType,originPod,purchasePod].join("|");}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return el;}
function handleError(data,gaData){var methodName="handleError";var requirementName="Handle error shown tarcking";var errorObj=[];try{var params=data.params;if(params){var el=prepareInitialEL(params);var info=params.info;if(info){var pnr=info.pnr?info.pnr:DOUBLE_DASH;var marketType=info.marketType?info.marketType:DOUBLE_DASH;var isBE=info.isBasicEconomy?'BE:Y':'BE:N';if(info.errorDetails){var errors=info.errorDetails;for(var i=0;i<errors.length;i++){var errorData={}
errorData.tealiumEvent=gaData.tealiumEvent;errorData.eventCategory=gaData.eventCategory;errorData.eventAction=gaData.eventAction;var message=errors[i].errorMessage?errors[i].errorMessage:DOUBLE_DASH;errorData.eventLabel=[el,message,pnr,isBE,marketType].join('|');errorObj.push(errorData);}}else if(info.legs&&Array.isArray(info.legs)){for(var j=0;j<info.legs.length;j++){errorObj=prepareLabelForError(el,gaData,info,info.legs[j]);}}else{errorData.tealiumEvent=gaData.tealiumEvent;errorData.eventCategory=gaData.eventCategory;errorData.eventAction=gaData.eventAction;errorData.eventLabel=el;errorObj.push(errorData);}}}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return errorObj;}
function prepareLabelForError(el,gaData,info,leg){var requirementName="Prepare label for E+ error cases";var methodName="prepareLabelForError";var errorObjects=[];try{var originPod=info.originPod||DOUBLE_DASH;var purchasePod=info.purchasePod||DOUBLE_DASH;var marketType=info.marketType||DOUBLE_DASH;var pnr=info.pnr||DOUBLE_DASH;var origin=leg.origin||DOUBLE_DASH;var destination=leg.destination||DOUBLE_DASH;let isUpsell=info.isUpsell?'Upsell:Y':'Upsell:N';if(leg.errorData&&Array.isArray(leg.errorData)){for(var i=0;i<leg.errorData.length;i++){var errorData={};var message=leg.errorData[i];errorData.tealiumEvent=gaData.tealiumEvent;errorData.eventCategory=gaData.eventCategory;errorData.eventAction=gaData.eventAction;errorData.eventLabel=[el,originPod,purchasePod,marketType,pnr,isUpsell,origin,destination,message].join("|");errorObjects.push(errorData);}}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return errorObjects;}
function getExtraSeatDetails(info,isContinue){let requirementName="Get extra seat info";let methodName="getExtraSeatDetails";let extraSeatInfo;try{if(info){if(isContinue){extraSeatInfo="";if(info.leg&&info.leg.length>0){let legs=info.leg;for(let i=0;i<legs.length;i++){extraSeatInfo+="[leg ";let details=parseTravelers(legs[i].travelers);extraSeatInfo+=details?[i+1,details].join("|"):[i+1,"--"].join("|");extraSeatInfo+="]";}}}else{extraSeatInfo=parseTravelers(info.travelers);}}}catch(error){let ds="data objects from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return extraSeatInfo;}
function parseTravelers(travelers){let requirementName="parse traveler array for ES";let methodName="parseTravelers";let extraSeatInfo;try{if(travelers&&travelers.length>0){let count=0;let es="ES: N";for(let i=0;i<travelers.length;i++){let isExtraSeat=travelers[i].isExtraSeat;if(isExtraSeat){es="ES: Y";let cabinType=travelers[i].seatType||"--";let price=travelers[i].seatPrice||0;count++;extraSeatInfo=extraSeatInfo?[extraSeatInfo,cabinType,price].join("|"):[es,cabinType,price].join("|");}else{es="ES: N";}}
extraSeatInfo=extraSeatInfo?[count,extraSeatInfo].join("|"):[count,es].join("|");}}catch(error){let ds="data objects from callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return extraSeatInfo;}
function checkForInfo(){let requirementName="Check DOM to get action based on information shown on page";let methodName="checkForInfo";let action="Error Shown";try{let CSS_INFO="atm-c-alert atm-c-alert--warning";let infoEle=document.getElementsByClassName(CSS_INFO);if(!(infoEle&&infoEle.length>0)){action="Information Shown";}else{action="Error Shown";}}catch(error){let ds="DOM";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return action;}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[80]=='undefined'){utag.runonce.ext[80]=1;if(1){var CONST_EXTN_NAME="Digital 3.0 - Ancillary Purchases";var DOUBLE_DASH="--";let CONST_DATA_CSS=".app-components-ManageResSeatMap-PurchaseSummary-styles__travelSection--Fv7EE";let FLS_PIXEL_URL="https://ad.doubleclick.net/ddm/activity/src=3463749;type=upgra00;cat=upgpurch;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};";let cabin,pos;Bootstrapper.prepareLabelForAncillaryPurchases=function(data,analyticsData){var methodName="prepareLabelForSeatMap";var requirementName="Prepare label for seat map tracking";var analyticsDataAry=[];try{var gaData=analyticsData,action=data.action,params=data.params;if(data.action=='Paid Seat purchase success'||data.action=='Paid Seat purchase failure'){gaData=handlePaidSeatPurchase(data,gaData);}else if(data.action=='Clicked: Buy Now'||data.action=="Clicked: Buy now"||action=="Clicked: BuyNow"||data.action=="Pet in Cabin success"){gaData=handlePreorderMealsPurchase(data,gaData);}else if(action=="Clicked: Have a promo code?"||action=="Clicked: Apply"){gaData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),fetchOriginPOD(data)].join('|');}else if(action=="Coupon applied Successfully"||action=="Clicked: Remove"){gaData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),fetchOriginPOD(data),fetchPromoName(data)].join('|');}else if(action=="Error Shown"){gaData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),fetchOriginPOD(data),(params&&Bootstrapper.prepareErrorMessage(params.info))||DOUBLE_DASH].join('|');}else if(action=="Purchase Successful"){gaData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),prepareLabelForSuccess(data)].join("|");}
analyticsDataAry.push(gaData);}catch(error){var ds="data object from callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,JSON.stringify(data),methodName);}
return analyticsDataAry;};function handlePaidSeatPurchase(data,gaData){var methodName="handlePaidSeatPurchase";var requirementName="Handle paid seat purchasse";try{var params=data.params;if(params){var feature=params.feature?params.feature:DOUBLE_DASH;var pageName=params.pageName?params.pageName:DOUBLE_DASH;var eventLabel=[feature,pageName].join("|");var info=params.info;if(info){var pnr=info.pnr?info.pnr:DOUBLE_DASH;eventLabel=[eventLabel,pnr,Bootstrapper.prepareLegInfo(info)].join("|");}
gaData.eventLabel=eventLabel;}
setTimeout(function(){if(data.action=="Paid Seat purchase success"&&utag_data&&utag_data.point_of_sale&&utag_data.point_of_sale.toLowerCase()=="us"||Bootstrapper.getPOSFromURL().toLowerCase()=="gb"||Bootstrapper.getPOSFromURL().toLowerCase()=="au"){triggerPixels(params);}},1500);}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return gaData;}
function handlePreorderMealsPurchase(data,gaData){var methodName="handlePreorderMealsPurchase";var requirementName="Handle Preorder Meals purchase";try{var params=data.params;if(params){var feature=params.feature||params.featureName||DOUBLE_DASH;var pageName=params.pageName?params.pageName:DOUBLE_DASH;var eventLabel=[feature,pageName].join("|");var info=params.info;if(info){let legCount,legInfo,legsDetail,odPair;let origin,destination;var pnr=info.pnr?info.pnr:DOUBLE_DASH;var currency=info.currency?info.currency:DOUBLE_DASH;var totalAmount=info.totalAmount?info.totalAmount:DOUBLE_DASH;let petCount=info.petCount?info.petCount:DOUBLE_DASH;let travelersInfo="--";let travelerAry=[];let legsArray=[];for(let i=0;i<info.legs.length;i++){travelersInfo=fetchPOMTravelersData(info.legs[i],feature);travelerAry.push(travelersInfo);origin=info.legs[i].origin?info.legs[i].origin:DOUBLE_DASH;destination=info.legs[i].destination?info.legs[i].destination:DOUBLE_DASH;odPair=[origin,destination].join("|");legCount=i+1;legInfo=[("leg"+legCount),odPair].join("|");legsArray.push(legInfo);}
legsDetail="["+legsArray.join(",")+"]";if(feature=="Prepaid bags"){let miles=info.totalMiles||0;eventLabel=[eventLabel,origin,destination,pnr,currency,totalAmount,miles,'['+travelerAry.join(',')+']'].join("|");}if(petCount!=DOUBLE_DASH){eventLabel=[eventLabel,legsDetail,pnr,currency,totalAmount,travelersInfo,petCount].join("|");}else{eventLabel=[eventLabel,origin,destination,pnr,currency,totalAmount,travelersInfo].join("|");}}
gaData.eventLabel=eventLabel;}}catch(error){var ds="data objects from callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,JSON.stringify(data),methodName);}
return gaData;}
function fetchPOMTravelersData(info,feature){let methodName="fetchPOMTravelersData";let requirementName="Handle Preorder Meals purchase";let travelesLabel=DOUBLE_DASH;try{if(info.travelers){var travelers=info.travelers;var travelerArray=[];let bagCount=0;for(var i=0;i<travelers.length;i++){var traveler=travelers[i];var pax=traveler.pax?traveler.pax:DOUBLE_DASH;var products=traveler.products;let isUpsell=traveler.isUpsell?'Upsell:Y':'Upsell:N';var productArray=[];if(products&&products.length>0){for(var j=0;j<products.length;j++){var product=products[j];var eddCode=product.eddCode?product.eddCode:DOUBLE_DASH;var productName=product.productName?product.productName:DOUBLE_DASH;var productType=product.productType?product.productType:DOUBLE_DASH;var quantity=product.quantity?product.quantity:DOUBLE_DASH;var productData=[eddCode,productName,productType,quantity].join('|');productArray.push(productData);}}
var productLabel=productArray&&productArray.length>0?'['+productArray.join(',')+']':DOUBLE_DASH;let origin=info.origin?info.origin:DOUBLE_DASH;let destination=info.destination?info.destination:DOUBLE_DASH;var travelerData;if(feature=="Prepaid bags"){bagCount+=(traveler.bagCount)?traveler.bagCount:0;travelerData=[origin,destination,travelers.length,bagCount].join('|');}else{travelerData=[origin,destination,pax,isUpsell,productLabel].join('|');}
travelerArray.push(travelerData);}
travelesLabel='['+travelerArray.join(',')+']';}}catch(error){var ds="data objects from callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,JSON.stringify(info),methodName);}
return travelesLabel;}
function fetchOriginPOD(data){try{var params=data.params;return params&&params.info&&params.info.originPod||DOUBLE_DASH;}catch(error){var methodName="fetchOriginPOD",requirementName="Fetch Origin POD",ds="Utag_data object",inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function fetchPromoName(data){try{var params=data.params;return params&&params.info&&params.info.promoName||DOUBLE_DASH;}catch(error){var methodName="fetchPromoName",requirementName="Fetch PromoName",ds="Utag_data object",inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function triggerPixels(params){let requirementName="Trigger pixels";let methodName="triggerPixels";try{if(params&&params.info){let info=params.info;let pnr=info.pnr||DOUBLE_DASH;if(typeof Bootstrapper.prepareDataForFB==="function"){let fbData=Bootstrapper.prepareDataForFB("purchase");if(fbData){let fbPixelURL=prepareFBPixelURL(fbData,"purchase");Bootstrapper.imageRequest(fbPixelURL);}}
if(typeof Bootstrapper.prepareFLSPixelURL==="function"){let pixelURL=Bootstrapper.prepareFLSPixelURL(CONST_DATA_CSS,FLS_PIXEL_URL,false);let amountStr=getAmount();let amount=Math.abs(amountStr);amount=isNaN(amount)?0:parseFloat(amount);pixelURL+=";qty="+getPAXCountDOM();let currency=getCurrencyFromDOM();if(currency=="miles"){amount=0;currency="USD";}
pixelURL+=";u17="+amount;pixelURL+=";cost="+amount;pixelURL+=";currency="+currency;pixelURL+=";ord="+Bootstrapper.base64Encode(pnr);Bootstrapper.imageRequest(pixelURL);}
triggerLinkedInPixel();}}catch(error){let ds="callback";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function prepareFBPixelURL(fbData,eventName){let requirementName="Prepare data for FB on upgrade flow";let methodName="prepareFBPixelURL";let pixelURL;try{if(fbData){let amountStr=getAmount();let amount=Math.abs(amountStr);amount=isNaN(amount)?0:parseFloat(amount);pixelURL="//www.facebook.com/tr?id=250925910724073&ev="+eventName;let currency=getCurrencyFromDOM();if(currency=="miles"){amount=0;currency="USD";}
pixelURL+="&cd[currency]="+currency;pixelURL+="&cd[purchase_price]="+amount;pixelURL+="&cd[value]="+amount;pixelURL+="&cd[travel_class]="+fbData.travel_class;pixelURL+="&cd[pos]="+fbData.point_of_sale;cabin=fbData.travel_class;pos=fbData.point_of_sale;}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return pixelURL;}
function getAmount(){let requirementName="Get amount from DOM";let methodName="getAmount";let CONST_CSS_TOTAL_AMOUNT=".app-components-VerticalShoppingCart-styles__fullWidth--L3EaZ.app-components-VerticalShoppingCart-styles__alignRight--jsF2L.app-components-VerticalShoppingCart-styles__fullWidth--L3EaZ";let amount=0;try{let ele=$(CONST_CSS_TOTAL_AMOUNT);for(let i=0;i<ele.length;i++){amount=ele[i].textContent;if(amount&&amount!==0){amount=amount.replace(/[^0-9.]/g,'',"");}}
let etcEle=$(".app-components-CommonPayment-PurchaseSummary-PaymentMethod-styles__paymentMethod--1T3u9");if(etcEle&&$(etcEle).text()&&$(etcEle).text().toLowerCase()==="electronic travel certificate"){let etcAmount=($(".app-components-VerticalShoppingCart-styles__divRight--G9dbq")&&$(".app-components-VerticalShoppingCart-styles__divRight--G9dbq").text())?$(".app-components-VerticalShoppingCart-styles__divRight--G9dbq").text():0;if(etcAmount&&etcAmount!==0){etcAmount=etcAmount.replace(/[^0-9.]/g,'',"");}
amount=parseFloat(amount)+parseFloat(etcAmount);}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return amount;}
function getPAXCountDOM(){let requirementName="Get PAX Count from DOM";let methodName="getPAXCountDOM";let paxCount;try{let ele=$(".app-components-ManageResSeatMap-PurchaseSummary-SeatAssigment-styles__travelersCount--oQhpX");if(ele&&ele.text()){let count=ele.text().split(" ")[0];if(count){paxCount=count.replace(/[&\/\\#,+()$~%'":*?<>{}^A-Z]/g,'',"");}}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return paxCount;}
function getCurrencyFromDOM(){let requirementName="Get currency from DOM";let methodName="getCurrencyFromDOM";let CONST_CSS_TOTAL_AMOUNT=".app-components-VerticalShoppingCart-styles__fullWidth--L3EaZ.app-components-VerticalShoppingCart-styles__alignRight--jsF2L.app-components-VerticalShoppingCart-styles__fullWidth--L3EaZ";let currency="USD";try{let amountStr;let ele=$(CONST_CSS_TOTAL_AMOUNT);for(let i=0;i<ele.length;i++){amountStr=ele[i].textContent;}
if(amountStr&&amountStr!==0&&amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^0-9.]/g,'',"").trim().length===3){currency=amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^0-9.]/g,'',"").trim();}else if(amountStr&&amountStr!==0&&amountStr.replace(/[&\/\\#,+()$~%'":*?<>{}^0-9.]/g,'',"").trim().indexOf("miles")>-1){currency="miles";}else{currency="USD";}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return currency;}
function triggerLinkedInPixel(){let requirementName="Trigger linkedin pixel";let methodName="triggerLinkedInPixel";try{let pixelURL="https://px.ads.linkedin.com/collect/?pid=5171290&fmt=gif";let amountStr=getAmount();let amount=Math.abs(amountStr);amount=isNaN(amount)?0:parseFloat(amount);let currency=getCurrencyFromDOM();if(currency=="miles"){amount=0;currency="USD";}
let travel_class=cabin||"--";let posParam=pos||"--";pixelURL+="&currency="+currency+"&value="+amount+"&travel_class="+travel_class+"&pos="+posParam;Bootstrapper.imageRequest(pixelURL);}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function prepareLabelForSuccess(data){let requirementName="Prepare label for success";let methodName="prepareLabelForSuccess";let eventLabel;try{if(data.params&&data.params.info){let info=data.params.info;let originPOD=info.originPod||DOUBLE_DASH;let purchasePOD=info.purchasePod||DOUBLE_DASH;let marketType=info.marketType||DOUBLE_DASH;let pnr=info.pnr||DOUBLE_DASH;let legDetails=processLegDetails(info.legs);let amount=info.totalAmount||0;let miles=info.totalMiles||0;let currency=info.currency||"USD";eventLabel=[originPOD,purchasePOD,marketType,pnr,legDetails,amount,miles,currency].join("|");}}catch(error){let ds="Callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return eventLabel;}
function processLegDetails(legs){let requirementName="Process leg details";let methodName="processLegDetails";let legDetails;try{if(legs&&legs.length>0){let legCount=0;let legInfo;let legsArray=[];for(const leg of legs){legCount++;let origin=leg.origin||DOUBLE_DASH;let destination=leg.destination||DOUBLE_DASH;let odPair=[origin,destination].join("-");let cabin=leg.cabin||DOUBLE_DASH;let travelerDetails=processTravelerInfo(leg.travelers);legInfo=[("leg"+legCount),odPair,cabin,travelerDetails].join("|");legsArray.push(legInfo);}
legDetails="["+legsArray.join(",")+"]";}}catch(error){let ds="Callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return legDetails;}
function processTravelerInfo(travelers){let requirementName="Process traveler info";let methodName="processTravelerInfo";let travelerDetails;try{let travelerArray=[];let pax=travelers.length||0;let bagCount=0;for(const traveler of travelers){let products=traveler.product||DOUBLE_DASH;let productType=traveler.productType||DOUBLE_DASH;let travelerData;bagCount+=(traveler.bagCount)?traveler.bagCount:0;travelerData=[products,productType].join('|');travelerArray.push(travelerData);}
let productInfo=travelerArray.join(',');let info=[pax,bagCount,productInfo].join("|");travelerDetails='['+info+']';}catch(error){let ds="Callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return travelerDetails;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[81]=='undefined'){utag.runonce.ext[81]=1;if(/(^(.*\/upgrade-awards\/?)$)/ig.test(b['dom.pathname'])){var CONST_EXTN_NAME="MileagePlus Programs Awdard Chart";var CONST_ALL_REGIONS="All regions";var CONST_FARE_CLASS_ALL="All classes";var CONST_DOUBLE_DASH="--";var CONST_ACTION_ORIGION_REGION="Selected Upgrade Awards by originRegion";var CONST_ACTION_DESTINATION_REGION="Selected Upgrade Awards by destinationRegion";var CONST_STAR_ALLIANCE="star alliance operated";Bootstrapper.mpProgramsAwdChart=function(data,parseData){var methodName="mpProgramsAwdChart";var CONST_REQ_NAME="MileagePlus Programs Awdard Chart Form Interaction";var parseDataObject=parseData;var params=data.params;var eventLabel;try{if(params.info&&parseData.eventAction){var mpOigin=params.info.origin?params.info.origin:(params.info.origin==="")?CONST_ALL_REGIONS:CONST_DOUBLE_DASH;var mpDestination=params.info.destination?params.info.destination:(params.info.destination==="")?CONST_ALL_REGIONS:CONST_DOUBLE_DASH;var fareClass=params.info.fareClass?params.info.fareClass:(params.info.fareClass==="")?CONST_FARE_CLASS_ALL:CONST_DOUBLE_DASH;var operatedBy=params.info.operatedBy?params.info.operatedBy:CONST_DOUBLE_DASH;if(parseData.eventAction==CONST_ACTION_ORIGION_REGION|parseData.eventAction==CONST_ACTION_DESTINATION_REGION|operatedBy==CONST_STAR_ALLIANCE){fareClass=CONST_FARE_CLASS_ALL;}
eventLabel=[mpOigin,mpDestination,fareClass,operatedBy].join('|');}
parseDataObject.eventLabel=eventLabel;}catch(e){var ds="Data object for Mp Award chart";var inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,JSON.stringify(e.message),e,ds,inputValue,methodName);}
return parseDataObject;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[83]=='undefined'){utag.runonce.ext[83]=1;if(1){var CONST_EXT_NAME="Digital 3.0 - CheckIn Tracking";var CONST_EC_CHECKIN="Checkin";var DOUBLE_DASH=Bootstrapper.dataObject.global.constant.doubleDash;let isEnrollmentSuccessful=false;Bootstrapper.processCheckInEvents=function(data,parseData){var methodName="processCheckInEvents";var requirementName="handle Checkin events through callbacks";var analyticsDataObjects=[];try{var parseDataObj=parseData;var params=data.params,action=data.action;if(data.action=="Clicked link: Choose seat"||data.action=="Clicked link: Seat link"){parseDataObj.eventLabel=getELForSeatLink(params);}else if(data.action=="Tile Shown"&&params.feature&&params.feature=="Ancillary Products"){parseDataObj.eventAction=[parseDataObj.eventAction,data.params.feature].join(": ");analyticsDataObjects=handleTileImpression(params,parseDataObj);return analyticsDataObjects;}else if(data.action=="Tile Clicked"&&params.feature&&params.feature=="Ancillary Products"){parseDataObj.eventAction=[parseDataObj.eventAction,data.params.feature].join(": ");if(params.info){parseDataObj.eventLabel=prepareELForAncillary(params.info);}}else if(data.action=="Impression: Chat with us"){parseDataObj={};Bootstrapper.pageInitTime=new Date().getTime();chatbotImpressionHandler(data);}else if(data.action=="Error Shown"){analyticsDataObjects=handleError(params,parseDataObj);return analyticsDataObjects;}else if(action=="Clicked: Get Coupon"||action=="Tile Shown"||action=="Clicked: App download"||action=="Impression: Join MP"||action=="Clicked Link: Sign in"||action=="Clicked: Sign in"){parseDataObj.eventLabel=getTitle(params);let pnr=getPNR(params);if(pnr&&pnr!="--"){parseDataObj.eventLabel=[parseDataObj.eventLabel,pnr].join("|");}}else if(action=="Clicked: Send to email"||action=="Clicked: Copy code"||action=="Clicked: Closed special offer"||action=="Clicked: Send"||action=="Clicked Link: Sign up"){parseDataObj.eventLabel=[getTitle(params),getCouponCode(params),getPNR(params)].join("|");}else if(action=="Impression: Special Offer Shown"){parseDataObj.eventLabel=[getTitle(params),getPNR(params),getMarketType(params)].join("|");}else if(action=="Clicked: Create account"||action=="Clicked: Agree and create account"){let label=[getTitle(params),getOptedForMailers(params),getPaxCount(params),getIsOneClickEnrollment(params),getPNR(params)].join("|");parseDataObj.eventLabel=action=="Clicked: Create account"?label:[label,getMarketType(params)].join("|");}else if(action=="Clicked: Cancel"){parseDataObj.eventLabel=[getTitle(params),getFormName(params)].join("|");}else if(action=="Enrollment Failed"){parseDataObj.eventLabel=[getErrorMessage(params),getErrorCode(params),getMarketType(params),getIsOneClickEnrollment(params)].join("|");let pnr=getPNR(params);if(pnr&&pnr!="--"){parseDataObj.eventLabel=[parseDataObj.eventLabel,pnr].join("|");}}else if(action=="Enrollment Successful"&&!isEnrollmentSuccessful){parseDataObj.eventLabel=[getMarketType(params),getIsOneClickEnrollment(params)].join("|");let pnr=getPNR(params);if(pnr&&pnr!="--"){parseDataObj.eventLabel=[parseDataObj.eventLabel,pnr].join("|");}
isEnrollmentSuccessful=true;}else if(action=="Enrollment Successful"&&isEnrollmentSuccessful){parseDataObj={};}else if(action=="Clicked: Join now"){parseDataObj.eventLabel=[getTitle(params),getIsOneClickEnrollment(params)].join("|");let pnr=getPNR(params);if(pnr&&pnr!="--"){parseDataObj.eventLabel=[parseDataObj.eventLabel,pnr].join("|");}}else if(action=="Clicked Link: Forgot your password"){parseDataObj.eventLabel=[getTitle(params),getCouponCode(params)].join("|");let pnr=getPNR(params);if(pnr&&pnr!="--"){parseDataObj.eventLabel=[parseDataObj.eventLabel,pnr].join("|");}}else{parseDataObj.eventLabel=prepareEL(params);}
analyticsDataObjects.push(parseDataObj);}catch(error){var ds="Data object",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObjects;}
function prepareEL(params){var methodName="prepareEL";var requirementName="Prepare event label";var eventLabel="";try{eventLabel=params.feature?params.feature:"--";eventLabel=getDetailsFromInfo(eventLabel,params);}catch(error){var ds="Data object",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return eventLabel;}
Bootstrapper.handleCheckInFormSubmit=function(type,dataObject){var methodName="handleCheckInFormSubmit";var requirementName="Handle form submit of Checkin flow";var analyticsDataObjects=[];try{var analyticsData={};analyticsData.eventCategory=CONST_EC_CHECKIN;if(dataObject.formName=="baggageClaim"||dataObject.formName=="travelerForm"||dataObject.formName=="TSAConfirmation"||dataObject.formName=='AddInfant'||dataObject.formName=='RemoveInfant'||(dataObject.formName=='mpSignIn'&&Bootstrapper.dataObject.isMpSignInButtonClicked)||dataObject.formName=="documentVerification")
{analyticsData.eventAction="Clicked: "+dataObject.buttonName;analyticsData.eventLabel=dataObject.formName;Bootstrapper.dataObject.isMpSignInButtonClicked=false;}else if(dataObject.formName=="confirmationNumberForm"){var formDataNumber=dataObject.formData&&dataObject.formData.number?dataObject.formData.number:"--";analyticsData.eventAction='Clicked: Continue';analyticsData.eventLabel=dataObject.formName+"|"+formDataNumber;}
analyticsData.tealiumEvent=analyticsData.eventAction;analyticsDataObjects.push(analyticsData);}catch(error){var ds="Data object",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObjects;}
function getDetailsFromInfo(eventLabel,params){var methodName="getDetailsFromInfo";var requirementName="Get details from info object";try{if(params.info){var pnr=params.info.pnr;if(pnr){eventLabel=[eventLabel,pnr].join("|");}
if(params.feature=="SDC"){var origin=params.info.origin?params.info.origin:"--";var destination=params.info.destination?params.info.destination:"--";eventLabel=[eventLabel,origin,destination].join("|");}}}catch(error){var ds="Data object",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return eventLabel;}
function getELForSeatLink(params){var methodName="getELForSeatLink";var requirementName="Get event label for seatLink and choose seat";var eventLabel=DOUBLE_DASH;try{if(params.info){var info=params.info;var origin=info.origin?info.origin:DOUBLE_DASH;var destination=info.destination?info.destination:DOUBLE_DASH;var marketType=info.marketType?info.marketType:DOUBLE_DASH;var fareClass=info.fareClass?info.fareClass:DOUBLE_DASH;var isBE=info.isBasicEconomy?'BE:Y':'BE:N';eventLabel=[origin,destination,isBE,marketType,fareClass].join("|");}}catch(error){var ds="Data object"
var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return eventLabel;}
function handleTileImpression(params,parseData){var methodName="handleTileImpression";var CONST_REQ_NAME="Handle Impression of Tiles on Your Reservation Page";var productDetailObj=[];try{if(params.info&&params.info.products){var products=params.info.products;for(var i=0;i<products.length;i++){var productDetails={}
productDetails.tealiumEvent=parseData.tealiumEvent;productDetails.eventCategory=parseData.eventCategory;productDetails.eventAction=parseData.eventAction;productDetails.eventLabel=prepareELForAncillary(products[i]);productDetailObj.push(productDetails);}}}catch(e){var ds="Data object from callback";var inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXT_NAME,e.message,e,ds,inputValue,methodName);}
return productDetailObj;}
function prepareELForAncillary(product){var methodName="prepareELForAncillary";var CONST_REQ_NAME="Event Label for Ancillary Products";try{var productName=product.productName?product.productName:DOUBLE_DASH;var amount=product.amount||product.amount==0?product.amount:DOUBLE_DASH;var currencyCode=product.currencyCode?product.currencyCode:DOUBLE_DASH;var productInfo=[productName,currencyCode,amount].join("|");}catch(e){var ds="Data object from callback";var inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXT_NAME,e.message,e,ds,inputValue,methodName);}
return productInfo;}
function handleError(params,parseData){var methodName="handleError";var requirementName="Handle error shown tarcking on Your Reservation page";var errorObj=[];try{if(params){var feature=params.feature?params.feature:DOUBLE_DASH;var pageName=params.pageName?params.pageName:DOUBLE_DASH
var info=params.info;if(info){var pnr=info.pnr?info.pnr:DOUBLE_DASH;var marketType=info.marketType?info.marketType:DOUBLE_DASH;var isBE=info.isBasicEconomy?'BE:Y':'BE:N';if(info.errorDetails){var errors=info.errorDetails;for(var i=0;i<errors.length;i++){var errorData={}
errorData.tealiumEvent=parseData.tealiumEvent;errorData.eventCategory=parseData.eventCategory;errorData.eventAction=parseData.eventAction;var message=errors[i].errorMessage;errorData.eventLabel=[feature,pageName,message,pnr,isBE,marketType].join('|');errorObj.push(errorData);}}}}}catch(error){var ds="data objects from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return errorObj;}
var loop=0;function chatbotImpressionHandler(data){var methodName="chatbotImpressionHandler";var requirementName="Chat bot button impression handler";try{setTimeout(function(){if(loop<5&&typeof Bootstrapper.trackChatButtonImpression==="function"&&$('#unitedChatBtn').length>0){loop=0;var label=''
if(data.params&&data.params.info&&data.params.info.errorDetail){var detail=data.params.info.errorDetail;var errorCode=detail.errorCode?detail.errorCode:DOUBLE_DASH;var errorDesc=detail.errorDesc?detail.errorDesc:DOUBLE_DASH;label=[errorCode,errorDesc].join('|');}
Bootstrapper.trackChatButtonImpression(label);}else{loop=loop+1;chatbotImpressionHandler(data);}},200);}catch(e){var ds="Data object from callback";var inputValue=e.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,e.message,e,ds,inputValue,methodName);}}
function getTitle(params){try{if(params&&params.info&&params.info.title){return params.info.title;}}catch(e){var methodName="getTitle",requirementName="Get title",ds="params object from callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,e.message,e,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function getCouponCode(params){try{if(params&&params.info&&params.info.couponCode){return params.info.couponCode;}}catch(e){var methodName="getCouponCode",requirementName="Get couponCode",ds="params object from callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,e.message,e,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function getPNR(params){try{if(params&&params.info&&params.info.pnr){return params.info.pnr;}}catch(error){var methodName="getPNR",requirementName="Get PNR",ds="params object from callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function getMarketType(params){try{if(params&&params.info&&params.info.marketType){return params.info.marketType;}}catch(error){var methodName="getMarketType",requirementName="Get marketType",ds="params object from callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function getIsOneClickEnrollment(params){let methodName="getIsOneClickEnrollment";let requirementName="Get is one click enrollment";try{if(params&&params.info){return params.info.isOneClickEnrollment?'One Click Enrollment: Y':'Lite Enrollment: Y';}
return DOUBLE_DASH;}
catch(error){let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}}
function getOptedForMailers(params){let methodName="getOptedForMailers";let requirementName="Get opted for mailers";try{if(params&&params.info){return params.info.optedForMailers?"optedForMailers: Y":"optedForMailers: N";}
return DOUBLE_DASH;}
catch(error){let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}}
function getPaxCount(params){let methodName="getPaxCount";let requirementName="Get pax count";try{if(params&&params.info&&params.info.paxCount){return params.info.paxCount;}
return DOUBLE_DASH;}
catch(error){let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}}
function getFormName(params){let methodName="getFormName";let requirementName="Get form name";try{if(params&&params.info&&params.info.formName){return params.info.formName;}
return DOUBLE_DASH;}
catch(error){let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}}
function getErrorMessage(params){let methodName="getErrorMessage";let requirementName="Get error message";try{if(params&&params.info&&params.info.errorMessage){return params.info.errorMessage;}
return DOUBLE_DASH;}
catch(error){let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}}
function getErrorCode(params){let methodName="getErrorCode";let requirementName="Get error code";try{if(params&&params.info&&params.info.errorCode){return params.info.errorCode;}
return DOUBLE_DASH;}
catch(error){let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}}
function getMpNumber(params){let methodName="getMpNumber";let requirementName="Get mp number";try{if(params&&params.info&&params.info.mpNumber){return params.info.mpNumber;}
return DOUBLE_DASH;}
catch(error){let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase().indexOf('checkin'.toLowerCase())>-1)){var CONST_EXT_NAME="Digital 3.0 - Checkin DOM  Listner";Bootstrapper.dataObject.isMpSignInButtonClicked=false;function checkMpSignButtonClick(){var methodName="checkMpSignButtonClick";var requirementName="Listen SignIn button click";try{document.body.addEventListener("click",function(event){if(event.target&&event.target.className&&((typeof event.target.className.indexOf)==='function')&&event.target.className.indexOf('app-containers-LoginFormContainer-styles__signInButton')>-1){Bootstrapper.dataObject.isMpSignInButtonClicked=true;}});}catch(error){var ds="Data object",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return isMpSignInButtonClicked;}
checkMpSignButtonClick();}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[91]=='undefined'){utag.runonce.ext[91]=1;if(1){var CONST_EXT_NAME="Digital 3.0 - Advanced Search Page";var CONST_EC_SHOPPING_ADVANCED_SEARCH="Shopping Advanced Search";var DOUBLE_DASH="--";Bootstrapper.parseAdvancedSearchData=function(data){var advancedSearchDataObjects=[];try{var advancedSearchData={};advancedSearchData.eventCategory=CONST_EC_SHOPPING_ADVANCED_SEARCH;if(data.action){advancedSearchData.tealiumEvent=data.action;advancedSearchData.eventAction=data.action;if(data.action=='Clicked link: My Trips'){advancedSearchData=trackMyTripsLinkClick(data,advancedSearchData);}else if(data.action=='Clicked: Find Flights'){advancedSearchData=trackFindFlightsButtonClick(data,advancedSearchData);}else if(data.action=='Clicked: Find Trips'){advancedSearchData=trackFindTrips(data,advancedSearchData);}}
advancedSearchDataObjects.push(advancedSearchData);}catch(e){var inputSource={"data_source":"Data object for Advanced Search Page","input_value":e.message};var methodName="parseAdvancedSearchData";var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_EC_SHOPPING_ADVANCED_SEARCH,CONST_EXT_NAME,JSON.stringify(e.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}
return advancedSearchDataObjects;};function trackMyTripsLinkClick(data,advancedSearchData){var methodName='trackMyTripsLinkClick';var requirementName='Track My trips link click';try{var eventLabel="";if(data.detail){if(data.detail.pageName){eventLabel+=data.detail.pageName;}
if(data.detail.feature){if(eventLabel.length>0){eventLabel+="|";}
eventLabel+=data.detail.feature;}}
advancedSearchData.eventLabel=eventLabel;}catch(error){var ds="Callabck";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return advancedSearchData;}
function trackFindFlightsButtonClick(data,advancedSearchData){var methodName="trackFindFlightsButtonClick";var requirementName="Track find flights button click";try{advancedSearchData.eventLabel=prepareLabelForFindFlightsButtonClick(data);}catch(error){var ds="Callabck";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return advancedSearchData;}
function prepareLabelForFindFlightsButtonClick(data){var methodName="prepareLabelForFindFlightsButtonClick";var requirementName="prepare label for find flights button click";var label=DOUBLE_DASH;try{if(data.detail){var detail=data.detail;var isOfferCodeApplied=detail.offerCode&&detail.offerCode!==null?"offerCode:Y":"offerCode:N";var legsDetail=DOUBLE_DASH;if(detail.legs&&detail.legs.length>0){var legs=detail.legs;var origin,destination,odPair,legInfo,legCount;var legsArray=[];for(var i=0;i<legs.length;i++){origin=legs[i].origin?legs[i].origin:legs[i].Origin?legs[i].Origin:"--";destination=destination=legs[i].destination?legs[i].destination:legs[i].Destination?legs[i].Destination:"--";odPair=[origin,destination].join("-");legCount=i+1;legInfo=[("leg"+legCount),odPair].join(":");legsArray.push(legInfo);}
legsDetail="["+legsArray.join(",")+"]";}
var petCabin=!isNaN(detail.petCabin)?detail.petCabin:DOUBLE_DASH;label=[isOfferCodeApplied,legsDetail,petCabin,checkPOC()].join("|");try{var bookingType=(detail.bookingType&&detail.bookingType!==null)?detail.bookingType:"--";var cabinType=detail.cabinType&&detail.cabinType!==null?detail.cabinType:"--";var tripType=detail.tripType&&detail.tripType!==null?detail.tripType:"--";var fareType=detail.fareType&&detail.fareType!==null?detail.fareType:"--";var showFlightsFrom=detail.showFlightsFrom&&detail.showFlightsFrom!==null?detail.showFlightsFrom:"--";var fareClass=detail.fareClass&&detail.fareClass!==null?detail.fareClass:"--";var sortFlightsBy=detail.sortFlightsBy&&detail.sortFlightsBy!==null?detail.sortFlightsBy:"--";var upgradeType=detail.upgradeType&&detail.upgradeType!==null?detail.upgradeType:"--";label=[label,bookingType,cabinType,tripType,fareType,showFlightsFrom,fareClass,sortFlightsBy,upgradeType].join("|");}catch(e){}}}catch(error){var ds="Callabck";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function trackFindTrips(data,advancedSearchData){var methodName="trackFindTrips";var requirementName="Track find trips click";try{advancedSearchData.eventLabel=prepareLabelForFindTrips(data);}catch(error){var ds="Callabck";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return advancedSearchData;}
function prepareLabelForFindTrips(data){var methodName="prepareLabelForFindTrips";var requirementName="prepare label for find trips button click";var ds="Callabck";var label=DOUBLE_DASH;try{if(data.detail&&data.detail.tripSelection){var detail=data.detail;var tripSelection=detail.tripSelection;var origin=detail.origin?detail.origin:"--";var destination=detail.destination?detail.destination:"--";var departureDate=detail.departureDate?detail.departureDate:"--";var returnDate=detail.returnDate?detail.returnDate:"--";var cabinType=detail.cabinType?detail.cabinType:"--";label=[tripSelection,origin,destination,departureDate,returnDate,cabinType].join("|");if(tripSelection=="Flight + hotel"||tripSelection=="Flight + hotel + car"){var totalRooms=detail.totalRooms?detail.totalRooms:"--";label=[label,totalRooms].join("|");}}else{var errorMessage="tripSelection is not defined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,errorMessage,null,ds,JSON.stringify(data),methodName);}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function checkPOC(){var pocChecked=DOUBLE_DASH;try{var poc=$("[id*=portableOxygen] [type=radio]"),no=poc[0]&&poc[0].checked&&"N",yes=poc[1]&&poc[1].checked&&"Y";pocChecked=no||yes||DOUBLE_DASH;}catch(error){var methodName="checkPOC",requirementName="Validate selection of POC radio buttons",ds="DOM",input_value="[id*=portableOxygen] [type=radio]";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,input_value,methodName);}
return pocChecked;}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var CONST_TAG_NAME="SSO Login Page";Bootstrapper.processSSOLoginEvents=function(data,parseData){var methodName="processSSOLoginEvents";var requirementName="Process SSO Login Page Events";var loginDetailsObj=[];try{if(data.action&&data.action=="Sign-in success"){if(data.params&&data.params.info){var info=data.params.info;var isRememberMe=info.isRememberMe?'RememberMe:Y':'RememberMe:N';}
parseData.eventLabel=isRememberMe;loginDetailsObj.push(parseData);}}catch(error){var ds="SSO Login Page Callabck";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return loginDetailsObj;}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[105]=='undefined'){utag.runonce.ext[105]=1;if(1){var CONST_EXTN_NAME="Shopping Search Page";var isListenerAppliedOnOptOutButton=false;var CONST_BASIC_ECONOMY="Basic Economy";var CONST_ECONOMY_PLUS="Economy Plus";var CONST_UNITED_PREMIER_PLUS="UPP";var BE_FARE_FAMILY=["ECO-BASIC"];var EPLUS_FARE_FAMILY=["ECONOMY-MERCH-EPLUS"];var UPP_FARE_FAMILY=["ECO-PREMIUM","ECO-PREMIUM-DISP","ECO-PREMIUM-FLEXIBLE","ECO-PREMIUM-UNRESTRICTED","ECO-PREMIUM-PROMOTION"];var DOUBLE_DASH="--";Bootstrapper.processShoppingSearchEvents=function(data,parseData){var methodName="processShoppingSearchEvents";var requirementName="Process Shopping Search Page Events";var ds="Shopping Search Page Callabck";var analyticsDataObj=[];try{var action=data.action;var params=data.params;if(data.action=="Result Load"){Bootstrapper.reloadQualtrics();addClickListenerOnOptOutButton();addListenerOnProductToFetchCabin();analyticsDataObj=prepareEventsOnResultLoad(data,parseData);sendCallForPixels();}
else if(data.action=="Page Load"){analyticsDataObj.push({});}else if(data.action=="Impression: Farewheel"||data.action=="Clicked: Farewheel"){analyticsDataObj.push(prepareDataForFarewheelTracking(data,parseData));}else if(data.params&&data.params.feature=="Buy-up Modal"&&action!="Service timeout"){analyticsDataObj.push(prepareDataForBuyUpModel(data,parseData));}else if(data.action=="No flights found"){analyticsDataObj.push(prepareLabelForNoFlightsFound(data,parseData));}else if(data.action=="Impression: Search nearby airports"||data.action=="Impression: Flexible dates"||data.action=="Impression: Search by map"){parseData.eventLabel=getTripDetailsFromPageURL();analyticsDataObj.push(parseData);}else if(data.action=="Clicked: Search"){analyticsDataObj.push(prepareELForClicksOnTilesWhenNoFlightsFound(data,parseData));}else if(data.action=="Clicked: Fare Column Header"){analyticsDataObj.push(prepareELForFareColumnHeaderClick(data,parseData));}else if(data.action=="Column API failed"){analyticsDataObj.push(prepareELForColumnAPIFailed(data,parseData));}else if(action=="Impression: UMNR"||action=="Clicked: Show calendar"||action=="Impression:  3-day Matrix"){parseData.eventLabel=Bootstrapper.fetchFeatureAndPageName(params);analyticsDataObj.push(parseData);}else if(action=="Impression: Miles + Money"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),isMMStickerVisible()].join("|");analyticsDataObj.push(parseData);addClickListenerToMM();}else if(action=="Clicked: Continue"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),isOptOutUMService(params)].join('|');analyticsDataObj.push(parseData);}else if(action=="Impression: Travel Tip"&&params){analyticsDataObj=prepareLabelForTravelTipImpression(params,parseData);}else if(action=="Error Shown"||action=="Error shown"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),Bootstrapper.prepareLabelForErrorShown(params)].join('|');analyticsDataObj.push(parseData);}else if(data.action=="Clicked: Yes, waitlist for both"||data.action=="Clicked: No, thanks"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),prepareLabelForUpgrades(params)].join('|');analyticsDataObj.push(parseData);}else if(data.action=="Clicked: Update"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),prepareLabelForUpdateClick(params)].join('|');analyticsDataObj.push(parseData);}else if(action=="Service timeout"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),getServiceTimeoutInfo(params)].join('|');analyticsDataObj.push(parseData);}else if(action=="Clicked: Compare fare types"){analyticsDataObj.push(prepareELForCompareFareTypes(data,parseData));}else if(action=="Impression: 7-day Calendar"||action=="Clicked: 7-day Calendar"){analyticsDataObj.push(prepareDataFor7DayCalendar(data,parseData));}else if(action=="Impression: carbon emission"){parseData.eventLabel=getCarbonEmissionLabel(data);analyticsDataObj.push(parseData);}else if(action=="Clicked Tooltip: Carbon Emission"){parseData.eventLabel=Bootstrapper.fetchFeatureAndPageName(params);analyticsDataObj.push(parseData);}else if(action=="Clicked: Sorted by"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),handleColumnHeaderClicks(data)].join("|");analyticsDataObj.push(parseData);}else if(action=="Impression: Trip Recap"||action=="Clicked: Change flight"){parseData.eventLabel=trackTripRecapInteractions();analyticsDataObj.push(parseData);}else if(action=="Clicked: Flexible dates"){parseData.eventLabel=trackFlexibleDatesInteractions(params);analyticsDataObj.push(parseData);}else if(data.action=="Impression: RAS Failure"||data.action=="Clicked: Modify Search"||data.action=="Clicked: Start over"||data.action=="Clicked: Close"){analyticsDataObj.push(Bootstrapper.prepareDataForRASFailure(data,parseData));}else if(action=="Selected: 30-day calendar"||action=="Clicked: Update calendar"||action=="Selected: 3-day matrix"){analyticsDataObj.push(prepareDataFor30DayCalendar(data,parseData));}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObj;};function prepareEventsOnResultLoad(data,parseData){var requirementName="Prepare events on result load";var methodName="prepareEventsOnResultLoad";var ds="Shopping Search Page Callabck";var analyticsDataObj=[];try{analyticsDataObj.push(prepareDataForFlightSearches(data,parseData));analyticsDataObj.push(prepareDataForRecentSearches(data,parseData));analyticsDataObj.push(prepareDataForColumnShown(CONST_BASIC_ECONOMY,BE_FARE_FAMILY));analyticsDataObj.push(prepareDataForColumnShown(CONST_ECONOMY_PLUS,EPLUS_FARE_FAMILY));analyticsDataObj.push(prepareDataForColumnShown(CONST_UNITED_PREMIER_PLUS,UPP_FARE_FAMILY));var eeImpressionArray=Bootstrapper.trackEEResultsImpressions();Array.prototype.push.apply(analyticsDataObj,eeImpressionArray);analyticsDataObj.push(trackNoFlightResultsFoundEvent(data));}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObj;}
function sendCallForPixels(){var requirementName="Send pixel calls";var methodName="sendCallForPixels";var ds="Shopping Search Page Callabck";try{Bootstrapper.clicktripzPixel();Bootstrapper.flashTalkingPixel();if(typeof Bootstrapper.pinterestPixel==="function"){Bootstrapper.pinterestPixel();}
if(typeof Bootstrapper.sendBrowserAbandonEvent==="function"&&Bootstrapper.isEnUS()&&Bootstrapper.fetchFlightSegmentIndex()==1){Bootstrapper.sendBrowserAbandonEvent();}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function prepareDataForFlightSearches(data,parseData){let methodName="prepareDataForFlightSearches";let requirementName="Prepare data for Flight Searches event";try{var parseDataObj=parseData;parseDataObj.eventCategory="Flight Searches";parseDataObj.eventAction=Bootstrapper.getSearchTravelType()!='--'?Bootstrapper.getSearchTravelType():"Revenue";let flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();let flightSegment="FSR"+flightSegmentIndex;let operator=getFlightOperatorForFlightSearches();if(operator){parseDataObj.eventLabel=[Bootstrapper.getSearchCabinType(),flightSegment,getMarketType(),getCountryCodes(),operator].join('|');}else{parseDataObj.eventLabel=[Bootstrapper.getSearchCabinType(),flightSegment,getMarketType(),getCountryCodes()].join('|');}
parseDataObj.noninteraction=1;parseDataObj.customDimensions={};let dimensionObj=Bootstrapper.UTAG_CONST;let origin=Bootstrapper.getFlightSearchOrigin(flightSegmentIndex);let destination=Bootstrapper.getFlightSearchDestination(flightSegmentIndex);let odpair=[origin,destination].join("-");let departureDate=Bootstrapper.getFlightSearchDepartureDate(flightSegmentIndex);let stayLength=Bootstrapper.getStayLength();let tripType=Bootstrapper.getTripTypeValue();let paxCount=Bootstrapper.getPaxCount();let today=Bootstrapper._dateFormat(new Date(),"MM-d-yyyy");let searchCabinType=Bootstrapper.getSearchCabinType();let numDaysTilTravel=Bootstrapper.getNumDaysTilTravel(flightSegmentIndex);let searchCriteria=[origin,destination,departureDate,stayLength,tripType,paxCount,today,searchCabinType,numDaysTilTravel,getResultCount()];let searchType=getSearchType(Bootstrapper.getSearchTravelType()!='--'?Bootstrapper.getSearchTravelType().toLowerCase():"revenue");let cabinType="--";parseDataObj.customDimensions[dimensionObj.cabin_type]=searchCabinType;parseDataObj.customDimensions[dimensionObj.ticket_type]=Bootstrapper.getSearchTravelType()!='--'?Bootstrapper.getSearchTravelType():"Revenue";parseDataObj.customDimensions[dimensionObj.od_pair]=odpair;parseDataObj.customDimensions[dimensionObj.departure_date]=departureDate;parseDataObj.customDimensions[dimensionObj.searched_itinerary]=searchCriteria.join('|');parseDataObj.customDimensions[dimensionObj.tripType]=tripType;parseDataObj.customDimensions[dimensionObj.last_searched_itinerary]=searchCriteria.join('|');parseDataObj.customDimensions[dimensionObj.search_remarketing]=[odpair,departureDate,cabinType,searchType].join('|');parseDataObj.customDimensions[dimensionObj.searched_origin]=origin;parseDataObj.customDimensions[dimensionObj.searched_destination]=destination;parseDataObj.customDimensions[dimensionObj.upgrade_type]=Bootstrapper.getUpgradeType();let offerName=Bootstrapper.getOfferNameFSR();if(offerName){if(Bootstrapper.isEnvironmentProd()){parseDataObj.customDimensions[dimensionObj.shoppingOfferProd]=offerName;}else{parseDataObj.customDimensions[dimensionObj.shoppingOfferQA]=offerName;}}
tripType=Bootstrapper.getTripType();if(tripType!="--"&&tripType!="OW"){parseDataObj.customDimensions[dimensionObj.search_return_date]=Bootstrapper.getFlightSearchDepartureDate(2);}
utag.data.trigger_point="Result Load";}catch(error){let ds="Data object recieved from callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function prepareDataForRecentSearches(data,parseData){var methodName="prepareDataForRecentSearches";var requirementName="Prepare data for Recent Searches and Bookings event";try{var parseDataObj={};parseDataObj.eventCategory="Recent Searches and Bookings";parseDataObj.eventAction="Recent Searches";parseDataObj.tealiumEvent="Recent Searches";var flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();var eventLabel={o:Bootstrapper.getFlightSearchOrigin(flightSegmentIndex),fd:false,d:Bootstrapper.getFlightSearchDestination(flightSegmentIndex),dd:Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(flightSegmentIndex),"yyyy-MM-d"),b:false,s:Bootstrapper._dateFormat(new Date(),"yyyy-MM-d"),tt:Bootstrapper.getSearchTravelType()!='--'?Bootstrapper.getSearchTravelType():"Revenue",tm:"--",rd:Bootstrapper.getFlightSearchDepartureDate(2)!="--"?Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(2),"yyyy-MM-d"):"--",lp:Bootstrapper.lowestFarePrice(),trip:Bootstrapper.getTripType()};parseDataObj.eventLabel=JSON.stringify(eventLabel);}catch(error){var ds="Data object recieved from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function getSearchType(type){var methodName="getSearchType";var requirementName="Get search type for CD80";var typeVal="--";try{switch(type){case"revenue":typeVal="Rev";break;case"award":typeVal="Awd";break;case"ppr":typeVal="PPR";break;default:break;}}catch(error){var ds="Function argument";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return typeVal;}
function getSearchCabinType(type,searchCabinType){var methodName="getSearchCabinType";var requirementName="Fetch cabin type";try{if(type==="Awd"){var cType=searchCabinType;if(cType==="Economy"){searchCabinType="E";}else if(cType==="Business/BusinessFirst"){searchCabinType="B";}else if(cType==="First/Global First"){searchCabinType="F";}}}catch(error){var ds="UDO data Object";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return searchCabinType;}
Bootstrapper.lowestFarePrice=function(){var methodName="lowestFarePrice";var requirementName="Fetch lowest fare price";try{if(utag_data.searchTrips&&utag_data.searchTrips.length>0){var fareList=utag_data.searchTrips[0].flights;var values=[];fareList.forEach(function(item){item.products.forEach(function(nestedItem){if(Number.isInteger(nestedItem.amount)){values.push(nestedItem.amount);}});});return Math.min.apply(Math,values);}}catch(error){var ds="Data object from UDO";var inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return"--";};function prepareDataForColumnShown(columnName,searchFareColumnArray){var methodName="prepareDataForColumnShown";var requirementName="prepare GA event for column shown event";try{var parseDataObj={};var isColumnShown=iterateFareColumns(searchFareColumnArray);if(isColumnShown){parseDataObj.eventCategory='Shopping Search';parseDataObj.eventAction="Column-Shown:"+columnName;parseDataObj.eventLabel=prepareLabelForColumnShown();}}catch(error){var ds="Callback";var inputValue="Data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function getSearchTripFareColumns(){var methodName="getSearchTripFareColumns";var requirementName="Fetch fare column from search trips";var fareColumns;try{if(utag_data.searchTrips&&utag_data.searchTrips.length>0&&utag_data.searchTrips[0]&&utag_data.searchTrips[0].fareColumns){fareColumns=utag_data.searchTrips[0].fareColumns;}}catch(error){var ds="Data object from UDO";var inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return fareColumns;}
function iterateFareColumns(searchFareColumnArray){var methodName="iterateFareColumns";var requirementName="Iterate fare columns array to find specific fare column";var isColumn=false;try{var fareColumns=getSearchTripFareColumns();if(fareColumns){for(var i=0;i<fareColumns.length;i++){for(var j=0;j<searchFareColumnArray.length;j++){if(fareColumns[i].fareFamily==searchFareColumnArray[j]){return true;}}}}}catch(error){var ds="Data object from UDO";var inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return isColumn;}
function prepareLabelForColumnShown(){var methodName="prepareLabelForColumnShown";var requirementName="Event label for is basic economy column shown";try{var marketType=getMarketType();var flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();var origin=Bootstrapper.getFlightSearchOrigin(flightSegmentIndex);var destination=Bootstrapper.getFlightSearchDestination(flightSegmentIndex);var departureDate=Bootstrapper.getFlightSearchDepartureDate(flightSegmentIndex);var label=[marketType,origin,destination,departureDate,getCountryCodes()].join("|");}catch(error){var ds="Data object from UDO";var inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function getMarketType(){var methodName="getMarketType";var requirementName="get market type from origin and destination country code";var marketType=DOUBLE_DASH;try{var originCountryCode="--"
var destinationCountryCode="--";if(utag_data.searchTrips&&utag_data.searchTrips.length>0&&utag_data.searchTrips[0]){if(utag_data.searchTrips[0].originCountryCode){originCountryCode=utag_data.searchTrips[0].originCountryCode;}
if(utag_data.searchTrips[0].destinationCountryCode){destinationCountryCode=utag_data.searchTrips[0].destinationCountryCode;}}
marketType=Bootstrapper.getMarketType(originCountryCode,destinationCountryCode);}catch(error){var ds="Data object from UDO";var inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return marketType;}
function addClickListenerOnOptOutButton(){if(isListenerAppliedOnOptOutButton){return;}
var methodName="addClickListenerOnOptOutButton";var requirementName="Add click listner on opt out button";var CONST_CSS_SELECTOR="atm-c-btn app-components-Shopping-SkipBeta-styles__skipBetaURLButton--1sky9 atm-c-btn--link";try{isListenerAppliedOnOptOutButton=true;var optOutButton=document.getElementsByClassName(CONST_CSS_SELECTOR);if(optOutButton.length>0){optOutButton[0].onclick=function(e){var analyticUtagData={};var eventAction="Clicked: Go back to original page";analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory='Shopping Search';analyticUtagData.eventAction=eventAction;var flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();var eventLabel={o:Bootstrapper.getFlightSearchOrigin(flightSegmentIndex),d:Bootstrapper.getFlightSearchDestination(flightSegmentIndex),tt:Bootstrapper.getSearchTravelType()!='--'?Bootstrapper.getSearchTravelType():"Revenue",tm:"--",trip:Bootstrapper.getTripType()};analyticUtagData.eventLabel=JSON.stringify(eventLabel)
Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}}}catch(error){var ds="DOM";var inputValue=CONST_CSS_SELECTOR;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function addListenerOnProductToFetchCabin(){var methodName="addListenerOnProductToFetchCabin";var requirementName="Add click listner on product button to fetch cabinType of selected product";var CONST_BUTTON_CLASS=".app-components-Shopping-PriceCard-styles__priceItems--2je1c.app-components-Shopping-PriceCard-styles__left--3GoVL.app-components-Shopping-PriceCard-styles__nonVisibleButton--bk5_U";var CONST_CABIN_ATTRIBUTE='.app-components-Shopping-PriceCard-styles__priceCardWrapper--33QjK.app-components-Shopping-PriceCard-styles__fullWidth--2eOuQ';try{$('body').on('mouseup',CONST_BUTTON_CLASS,function(e){var cabinType=$(this).closest(CONST_CABIN_ATTRIBUTE).attr('aria-describedby');utag_data.selectedCabin=cabinType;getRecommendedFlight(e.target);});}catch(error){var ds="DOM";var inputValue=CONST_BUTTON_CLASS;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getRecommendedFlight(target){var methodName="getRecommendedFlight";var requirementName="selected flight was recommended or not";var CONST_RESULT_ROW='.app-components-Shopping-ResultRow-styles__resultRow--1WfbI';var CONST_ROCEMMENDED_FLIGHT='app-components-Shopping-FlightBaseCard-styles__recommendedLabel--2xKa8';try{var resultRow=target.closest(CONST_RESULT_ROW);var recommendedFlightClass=resultRow.firstElementChild.getElementsByClassName(CONST_ROCEMMENDED_FLIGHT);if(recommendedFlightClass.length>0){var isRecommended=true;}
utag_data.isRecommended=isRecommended;}catch(error){var ds="DOM";var inputValue=CONST_ROCEMMENDED_FLIGHT;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
Bootstrapper.processProductClickEvent=function(data,parseData){var methodName="processProductClickEvent";var requirementName="Flight Selection Call";var analyticsData=[];try{if(data.action=="Clicked on button: Flight price option"){analyticsData.push(prepareFlightSelectionData(data));analyticsData.push(Bootstrapper.trackEEProductClick(data));if(typeof Bootstrapper.sendCartAbandonEvent==="function"&&Bootstrapper.isEnUS()){Bootstrapper.sendCartAbandonEvent(data);}
utag_data.isRecommended=false;}else if(data.action=="Clicked on button: Flight details"){analyticsData.push(Bootstrapper.trackEEProductViewDetails(data));setTimeout(function(){if(typeof Bootstrapper.sendTiktokPixelOnBookingPath==="function"){Bootstrapper.sendTiktokPixelOnBookingPath("ViewContent");}},1500);}}catch(error){var ds="Callback";var inputValue="Data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsData;};function prepareFlightSelectionData(data){var methodName="prepareFlightSelectionData";var requirementName="Prepare data for Flight Selection";var parseDataObj={};try{if(data.action=="Clicked on button: Flight price option"){parseDataObj.eventCategory="Flight Selection";parseDataObj.eventAction=Bootstrapper.getSearchTravelType();parseDataObj.tealiumEvent=parseDataObj.eventAction;parseDataObj.eventLabel=prepareLabelForFlightSelect(data.params);parseDataObj.customDimensions={};var searchedFilters=getSearchedFilters();if(Bootstrapper.isEnvironmentProd()){parseDataObj.customDimensions[Bootstrapper.UTAG_CONST.selected_flight_filters_prod]=searchedFilters;parseDataObj.customDimensions[Bootstrapper.UTAG_CONST.shoppingOfferProd]=Bootstrapper.getOfferName(data.params);}else{parseDataObj.customDimensions[Bootstrapper.UTAG_CONST.selected_flight_filters_qa]=searchedFilters;parseDataObj.customDimensions[Bootstrapper.UTAG_CONST.shoppingOfferQA]=Bootstrapper.getOfferName(data.params);}
parseDataObj.customDimensions[Bootstrapper.UTAG_CONST.upgrade_type]=Bootstrapper.getUpgradeType();}}catch(error){var ds="Callback";var inputValue="Data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function prepareLabelForFlightSelect(params){var methodName="prepareLabelForFlightSelect";var requirementName="prepare label for flight select";var label;try{var cabinType=utag_data.selectedCabin||DOUBLE_DASH;var isBE="BE:N";var marketType=getMarketType();var isRecommended=utag_data.isRecommended?'Recommended:Y':'Recommended:N';let tqp=params&&params.info&&params.info.tqp?params.info.tqp:"--";if(cabinType=="ECO-BASIC"){isBE="BE:Y";}
var refundableFareShown=utag_data.refundableFareShown?'RefundableFareShown:Y':'RefundableFareShown:N';var countryCodes=getCountryCodes();let offerName=Bootstrapper.getOfferNameForFlightSelection(params);let flightOperatorDescription=getFlightOperatorDescription(params);label=offerName?[cabinType,isRecommended,isBE,marketType,refundableFareShown,countryCodes,offerName].join("|"):[cabinType,isRecommended,isBE,marketType,refundableFareShown,countryCodes].join("|");let ceInfo=getCarbonEmissionInfo(params);if(ceInfo){label=[label,flightOperatorDescription,ceInfo].join("|");}else{label=[label,flightOperatorDescription].join("|");}
let isBestMatch=isBestMatchSelected(params);label=[label,isBestMatch,tqp].join("|");}catch(error){var ds="DOM";var inputValue="utag_data.selectedCabin";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function getCarbonEmissionInfo(params){let requirementName="Get carbon emission info";let methodName="getCarbonEmissionInfo";let ceInfo;try{let flightHash;if(params.info&&params.info.flightHash){flightHash=params.info.flightHash;}
if(flightHash&&utag_data.carbon_emission_data){let ceDetails=utag_data.carbon_emission_data;for(let i=0;i<ceDetails.length;i++){let fHash=ceDetails[i].flightHash;if(fHash==flightHash){let isLeastCE=ceDetails[i].isLeastCE==true?"Y":"N";let value=ceDetails[i].ceInfo||"--";ceInfo=[isLeastCE,value].join("|");}}}}catch(error){var ds="Callback";var inputValue="flightHash";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return ceInfo;}
function getSearchedFilters(){var methodName="getSearchedFilters";var requirementName="get searched flight filters for cd";var filters='--';try{if(utag_data.searchedFilters){if(utag_data.searchedFilters.nonStop&&utag_data.searchedFilters.withStops){filters=["Non-Stop","With-Stop"].join("|");}else if(utag_data.searchedFilters.nonStop){filters="Non-Stop";}else if(utag_data.searchedFilters.withStops){filters="With-Stop";}}}catch(error){var ds="Data object from UDO";var inputValue="utag_data.flightFilters";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return filters;}
Bootstrapper.prepareDataForSortAndFilter=function(data,parseData){var methodName="prepareDataForSortAndFilter";var requirementName="prepare data for sort and filter feature";var analyticsData=[];try{if(data.action=="Click on apply: Sort & Filters"){Bootstrapper.updateSearchedFilters(data);parseData.eventLabel=prepareLabelForSortAndFilter(data);analyticsData.push(parseData);Bootstrapper.sendPageView();}}catch(error){var ds="Callback";var inputValue="data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsData;};function prepareLabelForSortAndFilter(data){let methodName="prepareLabelForSortAndFilter";let requirementName="prepare label for sort and filter feature";let label;try{let info=data.params&&data.params.info;if(info){var travelType=Bootstrapper.getSearchTravelType()!='--'?Bootstrapper.getSearchTravelType():"Revenue";var nonStop=info.nonStop?"nonStop:Y":"nonStop:N";var withStop=info.withStops?"withStops:Y":"withStops:N";var sortBy=info.sortBy?info.sortBy:"--";var aircraft="aircraftFilterChanged:N";var connectingAirports="connectingAirportsFilterChanged:N";if(info.selectedAircrafts&&utag_data.searchedFilters&&utag_data.searchedFilters.aircraftType&&utag_data.searchedFilters.aircraftType.length!=info.selectedAircrafts.length){aircraft="aircraftFilterChanged:Y";}
if(info.selectedConnections&&utag_data.searchedFilters&&utag_data.searchedFilters.selectedConnections&&utag_data.searchedFilters.selectedConnections.length!=info.selectedConnections.length){connectingAirports="connectingAirportsFilterChanged:Y";}
if(Bootstrapper.getSearchTravelType()=="Revenue"){let selectedFilter=info.selectedFilter?info.selectedFilter:"--";let duration=getDurationDetails(info);let fareType=getfareTypeDetails(info);let price=getPriceDetails(info);let refundable=info.refundable?info.refundable:"--";label=[travelType,nonStop,withStop,sortBy,aircraft,connectingAirports,selectedFilter,duration,fareType,price,refundable].join("|");}else{label=[travelType,nonStop,withStop,sortBy,aircraft,connectingAirports].join("|");}}}catch(error){let ds="Callback";let inputValue="data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function prepareDataForFarewheelTracking(data,parseData){var methodName="prepareDataForFarewheelTracking";var requirementName="prepare data for farewheel impression call";try{var parseDataObj=parseData;if(data.params&&data.params.info){var info=data.params.info;var label=prepareLabelForFarewheelTracking(info);let selectedMiles=info.selectedMiles?info.selectedMiles:"--";if(info.lowestFarePrice){var lowestFarePrice=info.lowestFarePrice?info.lowestFarePrice:"--";label=[label,lowestFarePrice].join("|");}else if(info.previousDate){var flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();var origin=Bootstrapper.getFlightSearchOrigin(flightSegmentIndex);var destination=Bootstrapper.getFlightSearchDestination(flightSegmentIndex);var odpair=[origin,destination].join("-");var previousDate=info.previousDate?info.previousDate:"--";label=[label,previousDate].join("|");parseDataObj.customDimensions={};parseDataObj.customDimensions[Bootstrapper.UTAG_CONST.od_pair]=odpair;}
if(selectedMiles!="--"){label=[label,selectedMiles].join("|");}
parseDataObj.eventLabel=label;}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function prepareLabelForFarewheelTracking(info){var methodName="prepareLabelForFarewheelTracking";var requirementName="prepare label for farewheel tracking";try{var label;var selectedDate=info.selectedDate?info.selectedDate:"--";var selectedPrice=info.selectedPrice?info.selectedPrice:info.selectedPrice==undefined?'NA':"--";var isLowestFareSelected=info.isLowestFareSelected==true?"Y":"N";label=[selectedDate,selectedPrice,isLowestFareSelected].join("|");}catch(error){var ds="Callback";var inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function prepareDataForBuyUpModel(data,parseData){var methodName="prepareDataForBuyUpModel";var requirementName="prepare data for Buy-up Model tracking";try{var parseDataObj=parseData;var flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();var origin=Bootstrapper.getFlightSearchOrigin(flightSegmentIndex);var destination=Bootstrapper.getFlightSearchDestination(flightSegmentIndex);var odpair=[origin,destination].join("-");var label=[Bootstrapper.fetchFeatureAndPageName(data.params),flightSegmentIndex].join("|");var info=data.params.info,offerDetails=DOUBLE_DASH;if(info){var name,amount,offer;if(Array.isArray(info.offers)){offer=info.offers,nameAmount=[];for(var i=0;i<offer.length;i++){name=(offer[i].name&&offer[i].name.split('<br />').join(' '))||DOUBLE_DASH;amount=offer[i].amount||DOUBLE_DASH;nameAmount.push([name,amount].join('|'));}
offerDetails='['+nameAmount.join()+']';}
else if(!Array.isArray(info.offer)&&typeof info.offer=="object"){offer=info.offer;name=(offer.name&&offer.name.split('<br />').join(' '))||DOUBLE_DASH;amount=offer.amount||DOUBLE_DASH;offerDetails=[name,amount].join('|');}}
label=data.action=="Clicked: Close"?label:[label,offerDetails].join("|");parseDataObj.customDimensions={};parseDataObj.customDimensions[Bootstrapper.UTAG_CONST.od_pair]=odpair;parseDataObj.eventLabel=label;}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function trackNoFlightResultsFoundEvent(data){var methodName="trackNoFlightResultsFoundEvent";var requirementName="Track no flight results found event";var parseDataObj={};try{if(utag_data&&utag_data.searchTrips&&utag_data.searchTrips.length>0&&utag_data.searchTrips[0].flights&&utag_data.searchTrips[0].flights.length==0){parseDataObj.eventCategory=data.category;parseDataObj.eventAction="No results found"
parseDataObj.tealiumEvent=parseDataObj.eventAction;parseDataObj.eventLabel=prepareLabelForNoFlightResultsFound();}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function prepareLabelForNoFlightResultsFound(){var methodName="prepareLabelForNoFlightResultsFound";var requirementName="Label for no flight results found event";try{if(utag_data&&utag_data.searchCriteria&&utag_data.searchCriteria.flights&&utag_data.searchCriteria.flights.length>0){var flights=utag_data.searchCriteria.flights;var details=[];for(var i=0;i<flights.length;i++){var origin=Bootstrapper.getFlightSearchOrigin(i+1);var destination=Bootstrapper.getFlightSearchDestination(i+1);var odPair=[origin,destination].join("-");var departureDate=Bootstrapper.getFlightSearchDepartureDate(i+1);var legInfo=[odPair,departureDate].join("|");details.push(legInfo);}
var flightInfo="["+details.join(",")+"]";var label=flightInfo;}}catch(error){var ds="Callback";var inputValue="utag_data.searchCriteria data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function prepareLabelForNoFlightsFound(data,parseData){var methodName="prepareLabelForNoFlightsFound";var requirementName="Label for no flights found event";try{if(data.params&&data.params.info){var info=data.params.info;var errorCode=info.errorCode?info.errorCode:"--";var errorMesssge=info.errorMesssge?info.errorMesssge:"--";var flightInfo=getTripDetailsFromPageURL();parseData.eventLabel=[errorMesssge,errorCode,flightInfo].join("|");}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function prepareELForClicksOnTilesWhenNoFlightsFound(data,parseData){var methodName="prepareELForClicksOnTilesWhenNoFlightsFound";var requirementName="Prepare label for clicks on tiles when no flights found";try{let label=getDataForCalenderAndSearchClick(data.params.info,data.action);parseData.eventLabel=[prepareLabelForNoFlightResultsFound(),label].join("|");}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function getTripDetailsFromPageURL(){var methodName="getTripDetailsFromPageURL";var requirementName="get trip details from page URL";var pageURL=document.URL;try{var params=Bootstrapper.getParamsFromURL(pageURL);var origin,destination,departureDate;var legDetails="--";if(params.f&&params.t&&params.d){var legInfo=Bootstrapper.prepareLegDetails(params.f,params.t,params.d);if(params.r){var returnLegInfo=Bootstrapper.prepareLegDetails(params.t,params.f,params.r)
legInfo=[legInfo,returnLegInfo].join(",")}
legDetails="["+legInfo+"]";}else if(params.itip){var encodedMCLegInfo=params.itip;var MCLegInfo=decodeURIComponent(encodedMCLegInfo);var legsArray=MCLegInfo.split("*");var MCdetails=[];for(var i=0;i<legsArray.length;i++){var segement=legsArray[i];var segementDetails=segement.split("_");origin=segementDetails[0]?segementDetails[0]:"--";destination=segementDetails[1]?segementDetails[1]:"--";departureDate=segementDetails[2]?segementDetails[2]:"--";var legs=Bootstrapper.prepareLegDetails(origin,destination,departureDate);MCdetails.push(legs);}
legDetails="["+MCdetails.join(",")+"]"}}catch(error){var ds="Data from argument";var inputValue="page URL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,inputValue,methodName);}
return legDetails;}
function prepareELForFareColumnHeaderClick(data,parseData){let methodName="prepareELForFareColumnHeaderClick";let requirementName="Prepare label for fare column header click";try{let feature=data.params.feature?data.params.feature:"--";let metaInfo="--";if(data.params.info){let info=data.params.info;let productType=info.productType?info.productType:"--";let cabin=info.cabin?info.cabin:"--";let sortOrder=info.sortOrder?info.sortOrder:"--";metaInfo=[productType,cabin.trim(),prepareLabelForColumnShown(),sortOrder].join("|");}
parseData.eventLabel=[feature,metaInfo].join("|");}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function prepareELForColumnAPIFailed(data,parseData){var methodName="prepareELForColumnAPIFailed";var requirementName="Prepare event label for column API failed";try{var feature=data.params.feature?data.params.feature:"--";parseData.eventLabel=feature;if(data.params.info){var info=data.params.info;var requestUrl=info.requestUrl?info.requestUrl:"--";var errorMessage=info.errorMessage?info.errorMessage:"--";var errorID=info.errorID?info.errorID:"--";parseData.eventLabel=[feature,requestUrl,errorMessage,errorID].join("|");}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function prepareLabelForTravelTipImpression(params,parseData){var dataArray=[];try{var info=params.info,CONST_EC_CATEORY=parseData.eventCategory,CONST_EC_ACTION=parseData.eventAction;if(info&&Array.isArray(info.travelTips)&&info.travelTips.length){var travelTips=info.travelTips;for(var index=0;index<travelTips.length;index++){var dataObj={};dataObj.eventCategory=CONST_EC_CATEORY;dataObj.eventAction=CONST_EC_ACTION;dataObj.tealiumEvent=CONST_EC_ACTION;dataObj.eventLabel=travelTips[index]&&typeof travelTips[index]=="string"?travelTips[index]:DOUBLE_DASH;dataArray.push(dataObj);}}else{parseData={};dataArray.push(parseData);}}catch(error){var methodName="prepareLabelForTravelTipImpression";var requirementName="Prepare label for Travel Tip Impression";var ds="params object from callback";var inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataArray;}
function isOptOutUMService(params){try{if(params&&params.info&&typeof params.info.optOutUMService=="boolean"){return params.info.optOutUMService;}}catch(error){var methodName="isOptOutUMService";var requirementName="Check for Opt Out UM Service";var ds="params object from callback";var inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function getCountryCodes(){var requirementName="Get country codes";var methodName="getCountryCodes";var countryCodeInfo="--";try{countryCodeInfo=[Bootstrapper.getSearchedCountryCode("originCountryCode"),Bootstrapper.getSearchedCountryCode("destinationCountryCode")].join("-");}catch(error){var ds="utag.data.searchTrips";var inputValue="originCountryCode and destinationCountryCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return countryCodeInfo;}
function prepareLabelForUpgrades(params){var requirementName="Parse and prepare labels for Upgrade feature";var methodName="prepareLabelForUpgrades";var label;var productDetail=[];try{if(params&&params.info){var products=params.info.products;if(products){for(var i=0;i<products.length;i++){var cabins=products[i].cabins||DOUBLE_DASH;var flightNumber=products[i].flightNumber||DOUBLE_DASH;var duration=products[i].duration||DOUBLE_DASH;productDetail.push([cabins,flightNumber,duration].join("|"));}
label="["+productDetail.join(",")+"]";}}}catch(error){var ds="Callbacks";var inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function prepareLabelForUpdateClick(params){var requirementName="Parse and prepare labels for Upgrade feature";var methodName="prepareLabelForUpdateClick";var label;try{if(params&&params.info){var info=params.info;var upgradeTo=info.upgradeTo||DOUBLE_DASH;var upgradeFrom=info.upgradeFrom||DOUBLE_DASH;label=[upgradeTo,upgradeFrom],join("|");}}catch(error){var ds="Callbacks";var inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function getServiceTimeoutInfo(params){try{var info=params&&params.info;if(info){var timeout=info.timeout||DOUBLE_DASH,cartId=info.cartId||DOUBLE_DASH,cellId=info.cellId||DOUBLE_DASH,tripNumber=info.tripNumber||DOUBLE_DASH;return[timeout,cartId,cellId,tripNumber].join('|');}}catch(error){var methodName="getServiceTimeoutInfo",requirementName="Get Service Timeout Info",ds="params object from callback",inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function getFlightOperatorDescription(params){let methodName="getFlightOperatorDescription";let requirementName="Get flight operator description";try{let flightHash=DOUBLE_DASH;if(params.info&&params.info.flightHash){flightHash=params.info.flightHash;}
if(flightHash){let flightOperatorDescription=Bootstrapper.getFlightFromHashValue(flightHash);if(flightOperatorDescription&&flightOperatorDescription.flightOperator){flightOperatorDescription=flightOperatorDescription.flightOperator;}
else{flightOperatorDescription=DOUBLE_DASH;}
return flightOperatorDescription;}}
catch(error){let ds="params object from callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return DOUBLE_DASH;}
function getFlightOperatorForFlightSearches(){let methodName="getFlightOperatorForFlightSearches";let requirementName="Get flight operator for flight searches";try{let flightOperator;if(utag_data.searchTrips&&utag_data.searchTrips[0].flights&&utag_data.searchTrips[0].flights.length>0){for(const element of utag_data.searchTrips[0].flights){if((element.flightOperatorCode&&element.flightOperatorCode=="XE")||(element.flightOperator&&element.flightOperator=="SKYWEST DBA UNITED EXPRESS")){flightOperator=element.flightOperator;break;}}}
return flightOperator;}
catch(error){let ds="utag.data.searchTrips";let inputValue="flight operator for flight searches";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function prepareELForCompareFareTypes(data,parseData){let methodName="prepareELForCompareFareTypes";let requirementName="Prepare label for click on compare fare types";try{let products="";for(const element of data.params.info.products){let fareDetails="["+[element.cabin,element.productType].join("|")+"]";products=(products)?[products,fareDetails].join("|"):fareDetails;}
products=products?products:"--";parseData.eventLabel=products;}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function prepareDataFor7DayCalendar(data,parseData){let methodName="prepareDataFor7DayCalendar";let requirementName="Prepare label for 7 day calendar";try{let info=data.params.info;let label=getDataForCalenderAndSearchClick(info,data.action);parseData.eventLabel=label;}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function getfareTypeDetails(info){let methodName="getfareTypeDetails";let requirementName="Get fare type details";let fareType;try{if(info&&info.fareType){for(const element of info.fareType){fareType=fareType?[fareType,element].join("|"):element;}
fareType="["+fareType+"]";}else{fareType=DOUBLE_DASH;}}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return fareType;}
function getDataForCalenderAndSearchClick(info,action){let methodName="getDataForCalenderAndSearchClick";let requirementName="Get data for calender and search click";try{let selectedDate=info.selectedDate?info.selectedDate:"--";let previousDate=info.previousDate?info.previousDate:"--";let selectedPrice=info.selectedPrice?info.selectedPrice:"--";let isLowestFareSelected=info.isLowestFareSelected?"Y":"N";let miles=info.miles?info.miles:"--";let label;if(action=="Impression: 7-day Calendar"){label=[selectedDate,selectedPrice,isLowestFareSelected].join("|");}else{label=[selectedDate,previousDate,selectedPrice,isLowestFareSelected].join("|");}
if(miles!="--"){label=[label,miles].join("|");}
return label;}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getDurationDetails(info){let methodName="getDurationDetails";let requirementName="Get duration details";try{let label="[Duration-";let max="--";if(info&&info.duration&&info.duration.max){max=info.duration.max;}
label+="max:"+max+"|";let min="--";if(info&&info.duration&&info.duration.min){min=info.duration.min;}
label+="min:"+min+"|";let selected="--";if(info&&info.duration&&info.duration.selected){selected=info.duration.selected;}
label+="selected:"+selected+"]";return label;}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getPriceDetails(info){let methodName="getPriceDetails";let requirementName="Get price details";try{let label="[Price-";let max="--";if(info&&info.price&&info.price.max){max=info.price.max;}
label+="max:"+max+"|";let min="--";if(info&&info.price&&info.price.min){min=info.price.min;}
label+="min:"+min+"|";let selected="--";if(info&&info.price&&info.price.selected){selected=info.price.selected;}
label+="selected:"+selected+"]";return label;}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getCarbonEmissionLabel(data){let requirementName="Get carbon emission";let methodName="getCarbonEmissionLabel";let label;try{if(data.params&&data.params.info&&data.params.info.carbonEmissionData){let carbonEmissionData=data.params.info.carbonEmissionData;for(const element of carbonEmissionData){let isLeast=element.isLeastCE==true?"Y":"N";let value=element.ceInfo||"--";let flightHash=element.flightHash||"--";label=[isLeast,value,flightHash].join("|");if(isLeast=="Y"){break;}}}}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function handleColumnHeaderClicks(data){let requirementName="Handle column header clicks";let methodName="handleColumnHeaderClicks";let label;try{if(data.params&&data.params.info){let info=data.params.info;let sortBy=info.sortBy||"--";let sortOrder=info.sortByValue||"--";label=[sortBy,sortOrder].join("|");}}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function isBestMatchSelected(params){let requirementName="Check if selected flight is from Best match";let methodName="isBestMatchSelected";let bestMatch="BM: N";try{bestMatch=(params&&params.info&&params.info.isBestMatch===true)?"BM: Y":"BM: N";}catch(error){let ds="Callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return bestMatch;}
function trackTripRecapInteractions(){let requirementName="Track trip recap interactions";let methodName="trackTripRecapInteractions";let label;try{if(utag_data.searchTrips&&utag_data.searchTrips.length>0){let origin=utag_data.searchTrips[0].origin?utag_data.searchTrips[0].origin:"--";let destination=utag_data.searchTrips[0].destination?utag_data.searchTrips[0].destination:"--";label=[origin,destination].join("-");}
if(utag_data.searchCriteria){let marketType=(utag_data.searchCriteria.marketType)?utag_data.searchCriteria.marketType:"--";let cabinType=(utag_data.searchCriteria.cabinType)?utag_data.searchCriteria.cabinType:"--";label=label?[label,marketType,cabinType].join("|"):"";}}catch(error){let ds="Callback";let inputValue="utag_data.searchCriteria";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function trackFlexibleDatesInteractions(params){let requirementName="Track Flexible Dates Interactions";let methodName="trackFlexibleDatesInteractions";let label;try{let info=params.info;label=Bootstrapper.fetchFeatureAndPageName(params);if(info){let selectedStartDate=info.selectedStartDate||"--";let selectedEndDate=info.selectedEndDate||"--";let isLowestFareSelected=info.isLowestFareSelected?"Lowest Fare: Y":"Lowest Fare: N";label=[label,selectedStartDate,selectedEndDate,isLowestFareSelected].join("|");}}catch(error){let ds="Callback";let inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function getResultCount(){let requirementName="Get result count";let methodName="getResultCount";let flightCounts=0;try{if(utag_data&&utag_data.searchTrips&&utag_data.searchTrips.length>0&&utag_data.searchTrips[0].flights&&utag_data.searchTrips[0].flights.length>0){flightCounts=utag_data.searchTrips[0].flights.length;}}catch(error){let ds="DL";let inputValue="utag_data.searchTrips[0].flights.length";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return flightCounts;}
function prepareDataFor30DayCalendar(data,parseData){let methodName="prepareDataFor30DayCalendar";let requirementName="Prepare label for 30 day calendar";try{let params=data.params;let label=Bootstrapper.fetchFeatureAndPageName(params);let info=params.info;let startDate=info.startDate?info.startDate:DOUBLE_DASH;let nonStop=info.nonStop?"Y":"N";let isNonStop=info.isNonStop?"Y":"N";let durationDays=info.durationDays?info.durationDays:DOUBLE_DASH;let selectedDate=info.selectedDate?info.selectedDate:DOUBLE_DASH;let selectedPrice=info.selectedPrice?info.selectedPrice:DOUBLE_DASH;let isLowestFare=info.isLowestFare?"Y":"N";let cabinType=info.cabinType?info.cabinType:DOUBLE_DASH;let cabin=info.cabin?info.cabin:DOUBLE_DASH;let tripLength=info.tripLength?info.tripLength:DOUBLE_DASH;let previousDate=info.previousDate?info.previousDate:DOUBLE_DASH;if(data.action=="Selected: 3-day matrix"){label=[label,selectedDate,cabin,selectedPrice,isLowestFare,previousDate].join("|");}else if(data.action=="Clicked: Update calendar"){label=[label,startDate,cabin,tripLength,nonStop].join("|");}else if(data.action=="Clicked: 3-day matrix"){label=[label,cabin,isNonStop].join("|");}else{label=[label,startDate,nonStop,durationDays,selectedDate,selectedPrice,isLowestFare,cabinType].join("|");}
parseData.eventLabel=label;}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function isMMStickerVisible(){let requirementName="Check if sticker is visible";let methodName="isMMStickerVisible";let isMMSticker="MM:N";try{let ele=document.querySelectorAll("[data-test-id=moneyMilesBadge");if(ele&&ele.length>0){isMMSticker="MM:Y";}else{isMMSticker="MM:N";}}catch(error){let ds="DOM";let inputValue="data-test-id=moneyMilesBadge";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return isMMSticker;}
function addClickListenerToMM(){let requirementName="Add click listener";let methodName="addClickListenerToMM";try{let ele=$(".atm-c-tabs__item");if(ele&&ele.length>0){for(let i=0;i<ele.length;i++){if(ele[i].textContent&&(ele[i].textContent=="Money + Miles")||ele[i].textContent=="Money"){$(ele[i]).on("click",function(e){trackMMClick(ele[i].textContent);});}}}}catch(error){let ds="DOM";let inputValue="atm-c-tabs__item atm-is-active";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function trackMMClick(tabName){let requirementName="Track click of miles/money tab";let methodName="trackMMClick";try{let dataObject={};dataObject.eventCategory="Shopping Search";dataObject.eventAction="Clicked: "+tabName;dataObject.eventLabel=isMMStickerVisible();Bootstrapper.setUtagLinkForDOMEvent(dataObject);}catch(error){let ds="DOM";let inputValue="atm-c-tabs__item atm-is-active";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[241]=='undefined'){utag.runonce.ext[241]=1;if(1){let CONST_EXTN_NAME="GA4 Ecommerce Tracking - FSR Page";let DOUBLE_DASH="--";Bootstrapper.handleEcommerce=function(data){let methodName="handleEcommerce";let requirementName="Handle ecommerce tracking for GA4";let parseMultipleData=[];try{if(data.category=="Shopping Search"||data.category=="ECommerce"){parseMultipleData=processGA4EcommerceCalls(data);}}catch(error){let ds="Data object from UDO";let inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseMultipleData;};Bootstrapper.trackEEImpressionsFSR=function(){let methodName="trackEEImpressionsFSR";let requirementName="Track Enhance E-commerce result Impression tracking";let eeImpressionArray=[];try{let ecommerceProducts={};if(utag_data.searchTrips&&utag_data.searchTrips.length>0){let tripType=Bootstrapper.getSearchTravelType()!=DOUBLE_DASH?Bootstrapper.getSearchTravelType():"Revenue";let flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();let flights=utag_data.searchTrips[0].flights;let origin=Bootstrapper.getFlightSearchOrigin(flightSegmentIndex);let destination=Bootstrapper.getFlightSearchDestination(flightSegmentIndex);let odpair=[origin,destination].join("-");ecommerceProducts=resetEEProductArray(ecommerceProducts);let isEmptyProducts=true;for(let i=0;i<flights.length;i++){let products=flights[i].products;for(const element of products){isEmptyProducts=false;let product=element;let departureDate=flights[i].departureDate?Bootstrapper.getDate(flights[i].departureDate,""):DOUBLE_DASH;let departureTime=DOUBLE_DASH;let arrivaleTime=DOUBLE_DASH;let noOfStops=flights[i].noOfStops||flights[i].noOfStops===0?flights[i].noOfStops:DOUBLE_DASH;let id=[origin+destination,departureDate,departureTime,arrivaleTime,noOfStops].join('|');ecommerceProducts.productId.push(id);ecommerceProducts.productName.push(odpair);ecommerceProducts.productList.push("Flight Search Results | United Airlines");ecommerceProducts.productCategory.push(tripType);ecommerceProducts.productBrand.push(product.productType?product.productType:DOUBLE_DASH);ecommerceProducts.productVariant.push(product.cabin?product.cabin:DOUBLE_DASH);let flightIndex=i+1;let productIndex=product.index+1;ecommerceProducts.productPosition.push(flightIndex+""+productIndex);ecommerceProducts.productFlightNumber.push(flights[i].flightNumber?flights[i].flightNumber:DOUBLE_DASH);let taxAmount=(product.taxAndFees&&typeof product.taxAndFees.amount=="number")?product.taxAndFees.amount:DOUBLE_DASH;let productAmount=typeof product.amount=="number"?product.amount:0;let productMiles=typeof product.miles=="number"?product.miles:0;let productPoints=typeof product.points=="number"?product.points:0;ecommerceProducts.productPrice.push(tripType=="Award"?taxAmount:productAmount);ecommerceProducts.productAwardMiles.push(productMiles);ecommerceProducts.productPoints.push(productPoints);}
if(i%7==6){eeImpressionArray.push(Bootstrapper.prepareEEEventFSR(ecommerceProducts,"view_item_list",1));ecommerceProducts=resetEEProductArray({});isEmptyProducts=true;}}
if(!isEmptyProducts){eeImpressionArray.push(Bootstrapper.prepareEEEventFSR(ecommerceProducts,"view_item_list",1));}}}catch(error){let ds="Data object from UDO";let inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eeImpressionArray;};function resetEEProductArray(ecommerceProducts){let methodName="resetEEProductArray";let requirementName="Reset Enhance ecommerce product items array";let products;try{if(ecommerceProducts){products=ecommerceProducts;products.productId=[];products.productName=[];products.productList=[];products.productCategory=[];products.productletiant=[];products.productVariant=[];products.productBrand=[];products.productPosition=[];products.productPrice=[];products=Bootstrapper.resetEEProductArray(products);}}catch(error){let ds="Data from argument";let inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return products;}
Bootstrapper.trackEEProductClickFSR=function(data){let methodName="trackEEProductClickFSR";let requirementName="track enhanced ecommerce product list click";let eeClickObject={};try{let selectedHash=Bootstrapper.getSelectedFlightHash(data);if(selectedHash){let flight=Bootstrapper.getFlightFromHashValue(selectedHash);let product=Bootstrapper.fetchProductDetails(flight);if(product){let ecommerceProducts=resetEEProductArray({});ecommerceProducts=prepareEcommerceProduct(flight,product,ecommerceProducts);eeClickObject=Bootstrapper.prepareEEEventFSR(ecommerceProducts,"select_item",0);}}}catch(error){let ds="Data object from callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eeClickObject;};Bootstrapper.trackEEProductViewDetailsFSR=function(data){let methodName="trackEEProductViewDetailsFSR";let requirementName="Track Enhance E-commerce Product view detail tracking";let parseDataObj={};try{let selectedHash=Bootstrapper.getSelectedFlightHash(data);if(selectedHash){let flight=Bootstrapper.getFlightFromHashValue(selectedHash);if(flight&&flight.products&&flight.products.length>0){let ecommerceProducts=resetEEProductArray({});let products=flight.products;for(let prod in products){let product=products[prod];ecommerceProducts=prepareEcommerceProduct(flight,product,ecommerceProducts);}
parseDataObj=Bootstrapper.prepareEEEventFSR(ecommerceProducts,"view_item",0);}}}catch(error){let ds="Data object from UDO";let inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;};function prepareEcommerceProduct(flight,product,ecommerceProducts){let methodName="prepareEcommerceProduct";let requirementName="Prepared e-commerce product detail";try{if(product){let departureDate=flight.departureDate?Bootstrapper.getDate(flight.departureDate,""):DOUBLE_DASH;let departureTime=DOUBLE_DASH;let arrivaleTime=DOUBLE_DASH;let noOfStops=flight.noOfStops||flight.noOfStops===0?flight.noOfStops:DOUBLE_DASH;let flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();let origin=Bootstrapper.getFlightSearchOrigin(flightSegmentIndex);let destination=Bootstrapper.getFlightSearchDestination(flightSegmentIndex);let odpair=[origin,destination].join("-");let id=[origin+destination,departureDate,departureTime,arrivaleTime,noOfStops].join('|');let tripType=Bootstrapper.getSearchTravelType()!=DOUBLE_DASH?Bootstrapper.getSearchTravelType():"Revenue";let flightIndex=flight.flightIndex+1;let productIndex=product.index+1;let taxAmount=(product.taxAndFees&&typeof product.taxAndFees.amount=="number")?product.taxAndFees.amount:DOUBLE_DASH;let productAmount=typeof product.amount=="number"?product.amount:0;let productMiles=typeof product.miles=="number"?product.miles:0;let productPoints=typeof product.points=="number"?product.points:0;ecommerceProducts.productId.push(id);ecommerceProducts.productName.push(odpair);ecommerceProducts.productBrand.push(product.productType?product.productType:DOUBLE_DASH);ecommerceProducts.productCategory.push(tripType);ecommerceProducts.productVariant.push(product.cabin?product.cabin:DOUBLE_DASH);ecommerceProducts.productPrice.push(tripType=="Award"?taxAmount:productAmount);ecommerceProducts.productPosition.push(flightIndex+""+productIndex);ecommerceProducts.productFlightNumber.push(Bootstrapper.getFlightNumber(flight));ecommerceProducts.productAwardMiles.push(productMiles);ecommerceProducts.productPoints.push(productPoints);}}catch(error){let ds="Data object from argument";let inputValue="flight products";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return ecommerceProducts;}
Bootstrapper.prepareEEEventFSR=function(ecommerceProducts,action,nonInteraction){let methodName="prepareEEEventFSR";let requirementName="Prepare event structure for Enhance ecommerce impression tracking";let parseDataObj={};try{let tripType=Bootstrapper.getSearchTravelType()!='--'?Bootstrapper.getSearchTravelType():"Revenue";parseDataObj.customDimensions={};parseDataObj.tealiumEvent=action;parseDataObj.eventCategory=parseDataObj.tealiumEvent;parseDataObj.eventName=parseDataObj.tealiumEvent;parseDataObj.eventAction=action;parseDataObj.eventLabel=tripType;parseDataObj.noninteraction=nonInteraction;parseDataObj.ecommerceProducts=ecommerceProducts;parseDataObj.currency=Bootstrapper.getSearchTripCurrencyValue();parseDataObj.customDimensions[Bootstrapper.UTAG_CONST.upgrade_type]=Bootstrapper.getUpgradeType();}catch(error){let ds="Function argument";let inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;};function processGA4EcommerceCalls(data){let requirementName="track ee calls on GA4";let methodName="processGA4EcommerceCalls";let parseMultipleData=[];try{if(data.action=="Result Load"){let eeImpressionArrayGA4=Bootstrapper.trackEEImpressionsFSR();Array.prototype.push.apply(parseMultipleData,eeImpressionArrayGA4);}else if(data.action=="Clicked on button: Flight price option"){parseMultipleData.push(Bootstrapper.trackEEProductClickFSR(data));}else if(data.action=="Clicked on button: Flight details"){parseMultipleData.push(Bootstrapper.trackEEProductViewDetailsFSR(data));}}catch(error){let ds="Data object";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseMultipleData;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[110]=='undefined'){utag.runonce.ext[110]=1;if(1){var CONST_EXTN_NAME="Digital 3.0 FSR Enhanced Ecommerce";var DOUBLE_DASH="--";Bootstrapper.trackEEResultsImpressions=function(){var methodName="trackEEResultsImpressions";var requirementName="Track Enhance E-commerce result Impression tracking";var eeImpressionArray=[];try{var tripType=Bootstrapper.getSearchTravelType()!=DOUBLE_DASH?Bootstrapper.getSearchTravelType():"Revenue";var ecommerceProducts={};var flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();if(utag_data.searchTrips&&utag_data.searchTrips.length>0){var flights=utag_data.searchTrips[0].flights;var origin=Bootstrapper.getFlightSearchOrigin(flightSegmentIndex);var destination=Bootstrapper.getFlightSearchDestination(flightSegmentIndex);var odpair=[origin,destination].join("-");ecommerceProducts=resetEEProductArray(ecommerceProducts);var isEmptyProducts=true;for(var i=0;i<flights.length;i++){var products=flights[i].products;for(var j=0;j<products.length;j++){isEmptyProducts=false;var product=products[j];var departureDate=flights[i].departureDate?Bootstrapper.getDate(flights[i].departureDate,""):DOUBLE_DASH;var departureTime=DOUBLE_DASH;var arrivaleTime=DOUBLE_DASH;var noOfStops=flights[i].noOfStops||flights[i].noOfStops===0?flights[i].noOfStops:DOUBLE_DASH;var id=[origin+destination,departureDate,departureTime,arrivaleTime,noOfStops].join('|');ecommerceProducts.productImpressionId.push(id);ecommerceProducts.productImpressionName.push(odpair);ecommerceProducts.productImpressionList.push("Flight Search Results | United Airlines");ecommerceProducts.productImpressionCategory.push(tripType);ecommerceProducts.productImpressionVariant.push(product.cabin?product.cabin:DOUBLE_DASH);ecommerceProducts.productImpressionBrand.push(product.productType?product.productType:DOUBLE_DASH);var flightIndex=i+1;var productIndex=product.index+1;ecommerceProducts.productImpressionPosition.push(flightIndex+""+productIndex);ecommerceProducts.productFlightNumber.push(flights[i].flightNumber?flights[i].flightNumber:DOUBLE_DASH);var taxAmount=(product.taxAndFees&&typeof product.taxAndFees.amount=="number")?product.taxAndFees.amount:DOUBLE_DASH;var productAmount=typeof product.amount=="number"?product.amount:0;let productMiles=typeof product.miles=="number"?product.miles:0;let productPoints=typeof product.points=="number"?product.points:0;ecommerceProducts.productImpressionPrice.push(tripType=="Award"?taxAmount:productAmount);ecommerceProducts.productAwardMiles.push(productMiles);ecommerceProducts.productPoints.push(productPoints);}
if(i%7==6){eeImpressionArray.push(Bootstrapper.prepareEEEvent(ecommerceProducts,"impression",1));ecommerceProducts=resetEEProductArray({});isEmptyProducts=true;}}
if(!isEmptyProducts){eeImpressionArray.push(Bootstrapper.prepareEEEvent(ecommerceProducts,"impression",1));}}}catch(error){var ds="Data object from UDO";var inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eeImpressionArray;};Bootstrapper.getSearchTripCurrencyValue=function(){let methodName="getSearchTripCurrencyValue";let requirementName="Fetch currency value for search trips";let currency="USD";try{if(utag_data.searchTrips&&utag_data.searchTrips.length>0&&utag_data.searchTrips[0].flights){let flights=utag_data.searchTrips[0].flights;if(flights.length>0&&flights[0].products&&flights[0].products.length>0&&flights[0].products[0]){if(Bootstrapper.getSearchTravelType()=="Award"&&flights[0].products[0].taxAndFees){currency=flights[0].products[0].taxAndFees.currency;}else{currency=flights[0].products[0].currency;}}}}catch(error){let ds="Data object from UDO";let inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return currency;};function resetEEProductArray(ecommerceProducts){var methodName="resetEEProductArray";var requirementName="Reset Enhnace ecommerce product items array";try{if(ecommerceProducts){var products=ecommerceProducts;products.productImpressionId=[];products.productImpressionName=[];products.productImpressionList=[];products.productImpressionCategory=[];products.productImpressionVariant=[];products.productImpressionBrand=[];products.productImpressionPosition=[];products.productImpressionPrice=[];products=Bootstrapper.resetEEProductArray(products);}}catch(error){var ds="Data from argument";var inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return products;}
Bootstrapper.trackEEProductClick=function(data){var methodName="trackEEProductClick";var requirementName="track enhanced ecommerce product list click";var eeClickObject={};try{var selectedHash=Bootstrapper.getSelectedFlightHash(data);if(selectedHash){var flight=Bootstrapper.getFlightFromHashValue(selectedHash);var product=Bootstrapper.fetchProductDetails(flight);if(product){var ecommerceProducts=resetEEProductArray({});ecommerceProducts=preparedEcommerceProduct(flight,product,ecommerceProducts)
eeClickObject=Bootstrapper.prepareEEEvent(ecommerceProducts,"product list click",0);}}}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eeClickObject;}
Bootstrapper.trackEEProductViewDetails=function(data){var methodName="trackEEProductViewDetails";var requirementName="Track Enhance E-commerce Product view detail tracking";var parseDataObj={};try{var selectedHash=Bootstrapper.getSelectedFlightHash(data);if(selectedHash){var flight=Bootstrapper.getFlightFromHashValue(selectedHash);if(flight&&flight.products&&flight.products.length>0){var ecommerceProducts=resetEEProductArray({});var products=flight.products;for(var prod in products){var product=products[prod];ecommerceProducts=preparedEcommerceProduct(flight,product,ecommerceProducts)}
parseDataObj=Bootstrapper.prepareEEEvent(ecommerceProducts,"product detail",0);}}}catch(error){var ds="Data object from UDO";var inputValue="utag_data.searchTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function preparedEcommerceProduct(flight,product,ecommerceProducts){var methodName="preparedEcommerceProduct";var requirementName="Prepared e-commerce product detail";try{if(product){var departureDate=flight.departureDate?Bootstrapper.getDate(flight.departureDate,""):DOUBLE_DASH;var departureTime=DOUBLE_DASH;var arrivaleTime=DOUBLE_DASH;var noOfStops=flight.noOfStops||flight.noOfStops===0?flight.noOfStops:DOUBLE_DASH;var flightSegmentIndex=Bootstrapper.fetchFlightSegmentIndex();var origin=Bootstrapper.getFlightSearchOrigin(flightSegmentIndex);var destination=Bootstrapper.getFlightSearchDestination(flightSegmentIndex);var odpair=[origin,destination].join("-");var id=[origin+destination,departureDate,departureTime,arrivaleTime,noOfStops].join('|');var tripType=Bootstrapper.getSearchTravelType()!=DOUBLE_DASH?Bootstrapper.getSearchTravelType():"Revenue";var flightIndex=flight.flightIndex+1;var productIndex=product.index+1;var taxAmount=(product.taxAndFees&&typeof product.taxAndFees.amount=="number")?product.taxAndFees.amount:DOUBLE_DASH;var productAmount=typeof product.amount=="number"?product.amount:0;let productMiles=typeof product.miles=="number"?product.miles:0;let productPoints=typeof product.points=="number"?product.points:0;ecommerceProducts.productId.push(id);ecommerceProducts.productName.push(odpair);ecommerceProducts.productBrand.push(product.productType?product.productType:DOUBLE_DASH);ecommerceProducts.productCategory.push(tripType);ecommerceProducts.productVariant.push(product.cabin?product.cabin:DOUBLE_DASH);ecommerceProducts.productPrice.push(tripType=="Award"?taxAmount:productAmount);ecommerceProducts.productPosition.push(flightIndex+""+productIndex);ecommerceProducts.productFlightNumber.push(Bootstrapper.getFlightNumber(flight));ecommerceProducts.productAwardMiles.push(productMiles);ecommerceProducts.productPoints.push(productPoints);}}catch(error){var ds="Data object from argument";var inputValue="flight products";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return ecommerceProducts;}
Bootstrapper.getFlightFromHashValue=function(selectedHash){var methodName="getFlightFromHashValue";var requirementName="Fetch flight detail from hash";try{if(utag_data.searchTrips&&utag_data.searchTrips.length>0&&utag_data.searchTrips[0].flights){var flights=utag_data.searchTrips[0].flights;for(var i=0;i<flights.length;i++){if(flights[i].flightHash&&flights[i].flightHash==selectedHash){return flights[i];}}}}catch(error){var ds="Callabck";var inputValue="selectedHash";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return"";}
Bootstrapper.fetchProductDetails=function(flight){var methodName="fetchProductDetails";var requirementName="get selected product details.";try{if(flight&&flight.products&&flight.products.length>0){var productsList=flight.products;var selectedCabin=utag_data.selectedCabin;if(selectedCabin){for(var i=0;i<productsList.length;i++){if(productsList[i].cabinType==selectedCabin){return productsList[i];}}}}}catch(error){var ds="Function argument";var inputValue="flight";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return"";};Bootstrapper.getFlightNumber=function(flight){var methodName="getFlightNumber";var requirementName="prepare flight number";try{var flightNumber=flight.flightNumber?flight.flightNumber:DOUBLE_DASH;if(flight.connections&&flight.connections.length>0){for(var i=0;i<flight.connections.length;i++){var tempFlightNumber=flight.connections[i].flightNumber;flightNumber=[flightNumber,tempFlightNumber].join("|");}}}catch(error){var ds="Function argument";var inputValue="flight number";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return flightNumber;};Bootstrapper.prepareEEEvent=function(ecommerceProducts,action,nonInteraction){var methodName="prepareEEEvent";var requirementName="Prepare event structure for Enhance ecommerce impression tracking";try{var parseDataObj={};var tripType=Bootstrapper.getSearchTravelType()!='--'?Bootstrapper.getSearchTravelType():"Revenue";parseDataObj.eventCategory="ecommerce";parseDataObj.eventAction=action;parseDataObj.tealiumEvent=action;parseDataObj.eventLabel=tripType;parseDataObj.noninteraction=nonInteraction;parseDataObj.ecommerceProducts=ecommerceProducts;parseDataObj.currency=Bootstrapper.getSearchTripCurrencyValue();}catch(error){var ds="Function argument";var inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[116]=='undefined'){utag.runonce.ext[116]=1;if(1){var CONST_EXTN_NAME="Clicktripz pixel - FSR Page";Bootstrapper.clicktripzPixel=function(){var methodName="clicktripzPixel";var requirementName="Prepare data and trigger clicktripz pixel";try{var pos=utag_data.point_of_sale,posList={US:!0,GB:!0,MX:!0,IN:!0,};if(posList[pos]&&Bootstrapper.fetchFlightSegmentIndex()==1){var origin_airport=Bootstrapper.getFlightSearchOrigin(1);var destination_airport=Bootstrapper.getFlightSearchDestination(1);var departing_departure_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(1),"yyyy-MM-dd");var returning_departure_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(2),"yyyy-MM-dd");var num_travelers=Bootstrapper.getPaxCount();var userLoggedIn=utag_data.customer_id?true:false
var tripType=Bootstrapper.getTripTypeValue();var src="https://a.clicktripz.com/api/advertisers/v1/prof?advertiserID=454&format=image"+
"&n5="+num_travelers+
"&s4="+departing_departure_date+
"&s5="+returning_departure_date+
"&s6="+tripType+
"&s7="+userLoggedIn+
"&s8="+origin_airport+
"&s9="+destination_airport+
"&s10="+"search";Bootstrapper.imageRequest(src);}}catch(error){var ds="utag object"
var inputValue="utag_data.searchCriteria";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event']=='Result Load'&&b['flight_segment_index']=='1'&&/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname']))){var CONST_EXTN_NAME="Twitter pixel - FSR Page";var requirementName="Twitter universal pixel";function loadTwitterBaseScript(){try{!function(){var t={6173:function(t,e,n){var r;t.exports=(r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(t){}
var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}
if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}
throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}
return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},c=a.lib={},u=c.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=c.WordArray=u.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)
for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else
for(var c=0;c<i;c+=4)e[r+c>>>2]=n[c>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new s.init(e,t)}}),l=a.enc={},f=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}
return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},d=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}
return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},h=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},p=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,c=o/(4*a),u=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*a,l=t.min(4*u,o);if(u){for(var f=0;f<u;f+=a)this._doProcessBlock(i,f);n=i.splice(0,u),r.sigBytes-=l}
return new s.init(n,l)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),v=(c.Hasher=p.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new v.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math),r)},7219:function(t,e,n){var r;t.exports=(r=n(6173),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.algo,c=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)
if(!(e%r))return!1;return!0}
function n(t){return 4294967296*(t-(0|t))|0}
for(var r=2,i=0;i<64;)e(r)&&(i<8&&(c[i]=n(t.pow(r,.5))),u[i]=n(t.pow(r,1/3)),i++),r++}();var s=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(c.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],c=n[4],l=n[5],f=n[6],d=n[7],h=0;h<64;h++){if(h<16)s[h]=0|t[e+h];else{var p=s[h-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,y=s[h-2],_=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;s[h]=v+s[h-7]+_+s[h-16]}
var m=r&i^r&o^i&o,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),g=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&f)+u[h]+s[h];d=f,f=l,l=c,c=a+g|0,a=o,o=i,i=r,r=g+(w+m)|0}
n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(l),e.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},2244:function(t,e,n){"use strict";n.r(e);var r=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))};var i=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--i&&e(r)}))}
r[t]={status:"fulfilled",value:n},0==--i&&e(r)}
for(var a=0;a<r.length;a++)o(a,r[a])}))},o=setTimeout;function a(t){return Boolean(t&&void 0!==t.length)}
function c(){}
function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}
function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void f(e.promise,t)}
l(e.promise,r)}else(1===t._state?l:f)(e.promise,t._value)}))):t._deferreds.push(e)}
function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof u)return t._state=3,t._value=e,void d(t);if("function"==typeof n)return void p((r=n,i=e,function(){r.apply(i,arguments)}),t)}
t._state=1,t._value=e,d(t)}catch(e){f(t,e)}
var r,i}
function f(t,e){t._state=2,t._value=e,d(t)}
function d(t){2===t._state&&0===t._deferreds.length&&u._immediateFn((function(){t._handled||u._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}
function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}
function p(t,e){var n=!1;try{t((function(t){n||(n=!0,l(e,t))}),(function(t){n||(n=!0,f(e,t))}))}catch(t){if(n)return;n=!0,f(e,t)}}
u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){var n=new this.constructor(c);return s(this,new h(t,e,n)),n},u.prototype.finally=r,u.all=function(t){return new u((function(e,n){if(!a(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,(function(e){o(t,e)}),n)}
r[t]=a,0==--i&&e(r)}catch(t){n(t)}}
for(var c=0;c<r.length;c++)o(c,r[c])}))},u.allSettled=i,u.resolve=function(t){return t&&"object"==typeof t&&t.constructor===u?t:new u((function(e){e(t)}))},u.reject=function(t){return new u((function(e,n){n(t)}))},u.race=function(t){return new u((function(e,n){if(!a(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)u.resolve(t[r]).then(e,n)}))},u._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){o(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console};var v=u,y=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();"function"!=typeof y.Promise?y.Promise=v:(y.Promise.prototype.finally||(y.Promise.prototype.finally=r),y.Promise.allSettled||(y.Promise.allSettled=i))},7658:function(t){var e=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}
try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}
function u(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}
for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=g(a,n);if(c){if(c===l)continue;return c}}
if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}
"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}
function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}
t.wrap=u;var l={};function f(){}
function d(){}
function h(){}
var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(O([])));y&&y!==e&&n.call(y,i)&&(p=y);var _=h.prototype=f.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}
function w(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,c){var u=s(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}
c(u.arg)}(i,o,r,a)}))}
return r=r?r.then(a,a):a()}}
function g(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,g(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}
return l}
var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}
function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}
function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}
function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}
function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)
if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}
return{next:C}}
function C(){return{value:void 0,done:!0}}
return d.prototype=h,c(_,"constructor",h),c(h,"constructor",d),d.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},m(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(_),c(_,a,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}
return n.done=!0,n}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)
for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}
for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}
o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}
return i}}
throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},5494:function(t,e,n){"use strict";var r;n.r(e),n.d(e,{NIL:function(){return j},parse:function(){return y},stringify:function(){return d},v1:function(){return v},v3:function(){return C},v4:function(){return A},v5:function(){return x},validate:function(){return c},version:function(){return L}});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}
var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(t){return"string"==typeof t&&a.test(t)},u=[],s=0;s<256;++s)u.push((s+256).toString(16).substr(1));var l,f,d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n},h=0,p=0;var v=function(t,e,n){var r=e&&n||0,i=e||new Array(16),a=(t=t||{}).node||l,c=void 0!==t.clockseq?t.clockseq:f;if(null==a||null==c){var u=t.random||(t.rng||o)();null==a&&(a=l=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==c&&(c=f=16383&(u[6]<<8|u[7]))}
var s=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:p+1,y=s-h+(v-p)/1e4;if(y<0&&void 0===t.clockseq&&(c=c+1&16383),(y<0||s>h)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=s,p=v,f=c;var _=(1e4*(268435455&(s+=122192928e5))+v)%4294967296;i[r++]=_>>>24&255,i[r++]=_>>>16&255,i[r++]=_>>>8&255,i[r++]=255&_;var m=s/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=255&m,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=c>>>8|128,i[r++]=255&c;for(var w=0;w<6;++w)i[r+w]=a[w];return e||d(i)};var y=function(t){if(!c(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n};function _(t,e,n){function r(t,r,i,o){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=y(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+t.length);if(a.set(r),a.set(t,r.length),(a=n(a))[6]=15&a[6]|e,a[8]=63&a[8]|128,i){o=o||0;for(var c=0;c<16;++c)i[o+c]=a[c];return i}
return d(a)}
try{r.name=t}catch(t){}
return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}
function m(t){return 14+(t+64>>>9<<4)+1}
function w(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}
function g(t,e,n,r,i,o){return w((a=w(w(e,t),w(r,o)))<<(c=i)|a>>>32-c,n);var a,c}
function b(t,e,n,r,i,o,a){return g(e&n|~e&r,t,e,i,o,a)}
function P(t,e,n,r,i,o,a){return g(e&r|n&~r,t,e,i,o,a)}
function E(t,e,n,r,i,o,a){return g(e^n^r,t,e,i,o,a)}
function O(t,e,n,r,i,o,a){return g(n^(e|~r),t,e,i,o,a)}
var C=_("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}
return function(t){for(var e=[],n=32*t.length,r=0;r<n;r+=8){var i=t[r>>5]>>>r%32&255,o=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);e.push(o)}
return e}(function(t,e){t[e>>5]|=128<<e%32,t[m(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var c=n,u=r,s=i,l=o;n=b(n,r,i,o,t[a],7,-680876936),o=b(o,n,r,i,t[a+1],12,-389564586),i=b(i,o,n,r,t[a+2],17,606105819),r=b(r,i,o,n,t[a+3],22,-1044525330),n=b(n,r,i,o,t[a+4],7,-176418897),o=b(o,n,r,i,t[a+5],12,1200080426),i=b(i,o,n,r,t[a+6],17,-1473231341),r=b(r,i,o,n,t[a+7],22,-45705983),n=b(n,r,i,o,t[a+8],7,1770035416),o=b(o,n,r,i,t[a+9],12,-1958414417),i=b(i,o,n,r,t[a+10],17,-42063),r=b(r,i,o,n,t[a+11],22,-1990404162),n=b(n,r,i,o,t[a+12],7,1804603682),o=b(o,n,r,i,t[a+13],12,-40341101),i=b(i,o,n,r,t[a+14],17,-1502002290),r=b(r,i,o,n,t[a+15],22,1236535329),n=P(n,r,i,o,t[a+1],5,-165796510),o=P(o,n,r,i,t[a+6],9,-1069501632),i=P(i,o,n,r,t[a+11],14,643717713),r=P(r,i,o,n,t[a],20,-373897302),n=P(n,r,i,o,t[a+5],5,-701558691),o=P(o,n,r,i,t[a+10],9,38016083),i=P(i,o,n,r,t[a+15],14,-660478335),r=P(r,i,o,n,t[a+4],20,-405537848),n=P(n,r,i,o,t[a+9],5,568446438),o=P(o,n,r,i,t[a+14],9,-1019803690),i=P(i,o,n,r,t[a+3],14,-187363961),r=P(r,i,o,n,t[a+8],20,1163531501),n=P(n,r,i,o,t[a+13],5,-1444681467),o=P(o,n,r,i,t[a+2],9,-51403784),i=P(i,o,n,r,t[a+7],14,1735328473),r=P(r,i,o,n,t[a+12],20,-1926607734),n=E(n,r,i,o,t[a+5],4,-378558),o=E(o,n,r,i,t[a+8],11,-2022574463),i=E(i,o,n,r,t[a+11],16,1839030562),r=E(r,i,o,n,t[a+14],23,-35309556),n=E(n,r,i,o,t[a+1],4,-1530992060),o=E(o,n,r,i,t[a+4],11,1272893353),i=E(i,o,n,r,t[a+7],16,-155497632),r=E(r,i,o,n,t[a+10],23,-1094730640),n=E(n,r,i,o,t[a+13],4,681279174),o=E(o,n,r,i,t[a],11,-358537222),i=E(i,o,n,r,t[a+3],16,-722521979),r=E(r,i,o,n,t[a+6],23,76029189),n=E(n,r,i,o,t[a+9],4,-640364487),o=E(o,n,r,i,t[a+12],11,-421815835),i=E(i,o,n,r,t[a+15],16,530742520),r=E(r,i,o,n,t[a+2],23,-995338651),n=O(n,r,i,o,t[a],6,-198630844),o=O(o,n,r,i,t[a+7],10,1126891415),i=O(i,o,n,r,t[a+14],15,-1416354905),r=O(r,i,o,n,t[a+5],21,-57434055),n=O(n,r,i,o,t[a+12],6,1700485571),o=O(o,n,r,i,t[a+3],10,-1894986606),i=O(i,o,n,r,t[a+10],15,-1051523),r=O(r,i,o,n,t[a+1],21,-2054922799),n=O(n,r,i,o,t[a+8],6,1873313359),o=O(o,n,r,i,t[a+15],10,-30611744),i=O(i,o,n,r,t[a+6],15,-1560198380),r=O(r,i,o,n,t[a+13],21,1309151649),n=O(n,r,i,o,t[a+4],6,-145523070),o=O(o,n,r,i,t[a+11],10,-1120210379),i=O(i,o,n,r,t[a+2],15,718787259),r=O(r,i,o,n,t[a+9],21,-343485551),n=w(n,c),r=w(r,u),i=w(i,s),o=w(o,l)}
return[n,r,i,o]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(m(e)),r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))}));var A=function(t,e,n){var r=(t=t||{}).random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}
return d(r)};function T(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}
function I(t,e){return t<<e|t>>>32-e}
var x=_("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,a=Math.ceil(o/16),c=new Array(a),u=0;u<a;++u){for(var s=new Uint32Array(16),l=0;l<16;++l)s[l]=t[64*u+4*l]<<24|t[64*u+4*l+1]<<16|t[64*u+4*l+2]<<8|t[64*u+4*l+3];c[u]=s}
c[a-1][14]=8*(t.length-1)/Math.pow(2,32),c[a-1][14]=Math.floor(c[a-1][14]),c[a-1][15]=8*(t.length-1)&4294967295;for(var f=0;f<a;++f){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=c[f][h];for(var p=16;p<80;++p)d[p]=I(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var v=n[0],y=n[1],_=n[2],m=n[3],w=n[4],g=0;g<80;++g){var b=Math.floor(g/20),P=I(v,5)+T(b,y,_,m)+w+e[b]+d[g]>>>0;w=m,m=_,_=I(y,30)>>>0,y=v,v=P}
n[0]=n[0]+v>>>0,n[1]=n[1]+y>>>0,n[2]=n[2]+_>>>0,n[3]=n[3]+m>>>0,n[4]=n[4]+w>>>0}
return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),j="00000000-0000-0000-0000-000000000000";var L=function(t){if(!c(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},6527:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)
for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.UWT=e.SET=e.OneTag=void 0;var a=o(n(6057)),c=o(n(510));e.OneTag=c;var u=o(n(3324));e.SET=u;var s=o(n(1454));e.UWT=s;var l={track:a.track_DEPRECATED,trackPid:u.trackPid,buildPixel:a.buildPixel_DEPRECATED,buildScript:a.buildScript_DEPRECATED,buildIframe:a.buildIframe_DEPRECATED};e.default=l},6057:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)
for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)
for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.track_DEPRECATED=e.buildScript_DEPRECATED=e.buildPixel_DEPRECATED=e.buildIframe_DEPRECATED=void 0;var c=a(n(1952)),u=a(n(8352)),s=a(n(3257)),l=n(4654);e.track_DEPRECATED=function(t,e,n){if(!t)throw new Error(l.utilities.LogPrefix+": Cannot track event without pixel ID");if(!e)throw new Error(l.utilities.LogPrefix+": Cannot track event without event name");var i=new c.AccountParams({merch_id:t}),o=new c.EventParams(r({merch_id:t,events:e,eci:l.utilities.EventCodeImpl.DEPRECATED_TRACK},n?{value:n.toString()}:{}));s.track({accountParams:i,eventParams:o,adsApiVersion:l.utilities.AdsApiVersion.v0})};e.buildPixel_DEPRECATED=function(t){u.buildImagePixel(l.utilities.addQueries(t,{bci:c.globalParams.get().bci,eci:l.utilities.EventCodeImpl.DEPRECATED_BUILD_PIXEL}))};e.buildScript_DEPRECATED=function(t){u.buildScriptPixel(l.utilities.addQueries(t,{bci:c.globalParams.get().bci,eci:l.utilities.EventCodeImpl.DEPRECATED_BUILD_SCRIPT}))};e.buildIframe_DEPRECATED=function(t){u.buildIFramePixel(l.utilities.addQueries(t,{bci:c.globalParams.get().bci,eci:l.utilities.EventCodeImpl.DEPRECATED_BUILD_IFRAME}))}},510:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)
for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)
for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.set=e.event=e.config=void 0;var c=a(n(1952)),u=a(n(3257)),s=n(4654),l=a(n(1454)),f={};e.set=function(t){void 0===t&&(t={}),c.globalParams.set(t||{})};e.config=function(t,e){if(void 0===e&&(e={}),!t||"string"!=typeof t)throw new Error(s.utilities.LogPrefix+": Config is missing required Advertiser Id");e=e&&s.utilities.isObject(e)?e:{};var n=f[t]=new c.AccountParams(r(r({},e),{txn_id:t}));u.init(n),c.globalParams.calledConfig();var i=s.utilities.splitObjectByPropNames(e,c.NonEventParameterKeys),o=i[0],a=i[1],d=new c.EventParams(r(r({},o),{txn_id:t,event:JSON.stringify(a),eci:s.utilities.EventCodeImpl.ONETAG_CONFIG}));u.track({accountParams:n,eventParams:d,adsApiVersion:s.utilities.AdsApiVersion.v1}),l.setDefaultAccountParams(t)};e.event=function(t,e){if(void 0===e&&(e={}),!t)throw new Error(s.utilities.LogPrefix+": Event cannot send event without an Event Code Id");e=e&&s.utilities.isObject(e)?e:{};var n,i=s.utilities.parseEventCodeId(t),o=i[0];i[1];o&&(n=f[o]||new c.AccountParams({txn_id:o}),u.init(n));var a=s.utilities.splitObjectByPropNames(e,c.NonEventParameterKeys),l=a[0],d=a[1],h=new c.EventParams(r(r({},l),{txn_id:t,event:JSON.stringify(d),eci:s.utilities.EventCodeImpl.ONETAG_EVENT}));u.track({accountParams:n,eventParams:h,adsApiVersion:s.utilities.AdsApiVersion.v1})}},3324:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)
for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)
for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.trackPid=void 0;var c=a(n(1952)),u=a(n(3257)),s=n(4654);e.trackPid=function(t,e){if(void 0===e&&(e={}),!t)throw new Error(s.utilities.LogPrefix+": No Pixel ID Found");e=e||{};var n=new c.AccountParams({txn_id:t}),i=new c.EventParams(r(r(r({},s.utilities.getLegacyParams(e)),e),{txn_id:t,eci:s.utilities.EventCodeImpl.SET_TRACK_PID}));u.track({accountParams:n,eventParams:i,adsApiVersion:s.utilities.AdsApiVersion.v0})}},1454:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)
for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)
for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.track=e.setDefaultAccountParams=e.init=e.defaultAccountParams=void 0;var c,u=a(n(1952)),s=a(n(3257)),l=n(4654);e.defaultAccountParams=c;var f=function(t){e.defaultAccountParams=c=new u.AccountParams({txn_id:t}),s.init(c)};e.setDefaultAccountParams=f;e.init=function(t){if(!t||"string"!=typeof t)throw new Error(l.utilities.LogPrefix+": Init is missing required Pixel Id");f(t),u.globalParams.calledInit()};e.track=function(t,e){if(void 0===e&&(e={}),!t||"string"!=typeof t)throw new Error(l.utilities.LogPrefix+": Track is missing required event name");if(!c.getPixelId())throw new Error(l.utilities.LogPrefix+": No Pixel ID Found");e=e&&l.utilities.isObject(e)?e:{},t=t.toLowerCase().trim();var n=l.utilities.splitObjectByPropNames(e,u.NonEventParameterKeys),i=n[0],o=n[1],a=new u.EventParams(r(r(r({},i),l.utilities.getLegacyParams(e)),{txn_id:c.getPixelId(),events:JSON.stringify([[t,o]]),eci:l.utilities.EventCodeImpl.UWT_TRACK}));s.track({accountParams:c,eventParams:a,adsApiVersion:l.utilities.AdsApiVersion.v0})}},1952:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}
instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}
r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)
for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.setLocation=e.setIframe=e.Parameters=e.NonEventParameterKeys=e.merge=e.globalParams=e.GlobalParams=e.EventParams=e.AccountParams=void 0;var a=n(4654),c=["email_address","phone_number","external_id"],u=["page_location","hide_page_location"],s=u.concat(c).concat(["bci","eci","event_id","event","events","oct_p_id","p_id","p_user_id","pl_id","restricted_data_use","tw_acc_response","tw_clid_src","twclid","tw_document_href","tw_document_referrer","tw_iframe_status","tw_order_quantity","tw_sale_amount","tw_product_id","txn_id","type","version"]);e.NonEventParameterKeys=s;var l=function(){function t(t){this.paramKVs={},this.set(t)}
return t.prototype.set=function(t){var e=a.utilities.splitObjectByPropNames(t||{},c),n=e[0],r=e[1],i=Object.keys(n).reduce((function(t,e){return t[e.trim().toLowerCase()]=a.utilities.hashParameter(n[e]),t}),{});a.utilities.mergeObjects(this.paramKVs,i,r)},t.prototype.get=function(){return o({},this.paramKVs)},t.prototype.getPixelId=function(){var t,e,n=(null===(t=this.paramKVs)||void 0===t?void 0:t.txn_id)||(null===(e=this.paramKVs)||void 0===e?void 0:e.merch_id);if(!n)throw new Error(a.utilities.LogPrefix+": Pixel Id doesn't exist.");return n},t}();e.Parameters=l;var f=function(t){function e(){var e=t.call(this,{pl_id:a.utilities.generatePageLoadId(),type:"javascript",version:"2.3.26",p_id:"Twitter",p_user_id:"0"})||this;return e.bciLoader=window.twq?2:1,e.bciCmd=0,e}
return i(e,t),e.prototype.calledInit=function(){this.bciCmd|=1},e.prototype.calledConfig=function(){this.bciCmd|=2},e.prototype.get=function(){return o({bci:this.bciLoader+this.bciCmd},this.paramKVs)},e}(l);e.GlobalParams=f;var d=function(t){function e(e){return t.call(this,e)||this}
return i(e,t),e}(l);e.AccountParams=d;var h=function(t){function e(e){return t.call(this,o(o({eci:a.utilities.EventCodeImpl.UNKNOWN},e),{event_id:a.utilities.generateEventId()}))||this}
return i(e,t),e}(l);e.EventParams=h;var p=new f;function v(t){var e=a.environment.isInIFrame();t.tw_iframe_status=Number(e).toString(),e&&""!==document.referrer&&(t.tw_document_referrer=document.referrer)}
function y(t,e){e.tw_document_href=location.href;var n=t.hide_page_location?"":t.page_location;void 0!==n&&(e.tw_document_href=n,e.tw_document_referrer&&(e.tw_document_referrer=n))}
e.globalParams=p,e.setIframe=v,e.setLocation=y,e.merge=function(t){var e=t.accountParams,n=t.eventParams,r=a.utilities.mergeObjects({},p.get(),(null==e?void 0:e.get())||{},n.get()),i=a.utilities.splitObjectByPropNames(r,u),o=i[0],c=i[1];return v(c),y(o,c),c}},8352:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)
for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}
function c(t){try{u(r.throw(t))}catch(t){o(t)}}
function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}
u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}
if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}
if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}
if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}
i[2]&&a.ops.pop(),a.trys.pop();continue}
o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}
if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TWITTER_BASE=e.trackPid=e.TCO_BASE=e.buildScriptPixel=e.buildImagePixel=e.buildIFramePixel=void 0;var a=n(4654),c=function(t){return void 0===t&&(t=a.utilities.AdsApiVersion.v0),"https://t.co/"+t+"/adsct"};e.TCO_BASE=c;var u=function(t){return void 0===t&&(t=a.utilities.AdsApiVersion.v0),"https://analytics.twitter.com/"+t+"/adsct"};e.TWITTER_BASE=u;e.trackPid=function(t,e){return e=r({adsApiVersion:a.utilities.AdsApiVersion.v1,needResponse:!1},e),s(c(e.adsApiVersion),t),s(u(e.adsApiVersion),t,e)};var s=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={needResponse:!1}),i(void 0,void 0,void 0,(function(){var i,c,u;return o(this,(function(o){switch(o.label){case 0:return i=r({},e),c=Object.keys(i).sort().map((function(t){return t+"="+encodeURIComponent(i[t])})).join("&"),u=t+"?"+c,[4,a.environment.documentVisible()];case 1:return o.sent(),[2,n.needResponse?a.fetch(u):l(u)]}}))}))};e.buildScriptPixel=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=document.createElement("script")).src=t,e.setAttribute("type","text/javascript"),[4,a.environment.contentLoaded()];case 1:return n.sent(),document.body.appendChild(e),[2]}}))}))};e.buildIFramePixel=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=document.createElement("iframe")).src=t,e.hidden=!0,[4,a.environment.contentLoaded()];case 1:return n.sent(),document.body.appendChild(e),[2]}}))}))};var l=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=new Image).src=t,e.height=1,e.width=1,e.style.display="none",[4,a.environment.contentLoaded()];case 1:return n.sent(),document.body.appendChild(e),[2]}}))}))};e.buildImagePixel=l},3257:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)
for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}
function c(t){try{u(r.throw(t))}catch(t){o(t)}}
function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}
u((r=r.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}
if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}
if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}
if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}
i[2]&&a.ops.pop(),a.trys.pop();continue}
o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}
if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.track=e.init=void 0;var u=o(n(1952)),s=o(n(8352)),l=n(4654);e.init=function(t){l.twclid.requestAccIfNeeded(t.getPixelId())},e.track=function(t){var e=t.accountParams,n=t.eventParams,r=t.adsApiVersion;return a(this,void 0,void 0,(function(){var t,i,o,a;return c(this,(function(c){switch(c.label){case 0:return[4,Promise.resolve()];case 1:return c.sent(),t=!1,e?(l.twclid.requestAccIfNeeded(e.getPixelId()),[4,l.twclid.getTwclidParams(e.getPixelId())]):[3,3];case 2:i=c.sent(),t=1===i.tw_acc_response,n.set(i),c.label=3;case 3:return o=u.merge({accountParams:e,eventParams:n}),a=s.trackPid(o,{adsApiVersion:r,needResponse:t}),t&&l.twclid.cacheAccRequestAndSaveTwclid(null==e?void 0:e.getPixelId(),a),[2]}}))}))}},2345:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}
function c(t){try{u(r.throw(t))}catch(t){o(t)}}
function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}
u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}
if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}
if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}
if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}
i[2]&&a.ops.pop(),a.trys.pop();continue}
o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}
if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(6527),a=n(4654);!function(){if(window.twq){var t=window.twq;t.exe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,(function(){var e,n,r,c;return i(this,(function(i){switch(i.label){case 0:switch(e=t[0],n=t.slice(1),e){case"init":r=o.UWT.init;break;case"track":r=o.UWT.track;break;case"config":r=o.OneTag.config;break;case"event":r=o.OneTag.event;break;case"set":r=o.OneTag.set}
i.label=1;case 1:return i.trys.push([1,4,,5]),"function"!=typeof r?[3,3]:[4,r.apply(null,n)];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:return c=i.sent(),a.utilities.logError(c),[3,5];case 5:return[2]}}))}))};for(var e=0;e<t.queue.length;e++)t.exe.apply(null,t.queue[e])}}()},2735:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(6527));window.twttr=window.twttr||{},window.twttr.conversion||(window.twttr.conversion=i.default,n(2345))},6575:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cookies=void 0;var r=n(3532),i=function(){function t(){}
return t.setCookie=function(e,n,i){if(void 0===i&&(i={}),!e)throw new Error(r.LogPrefix+" Missing key for "+e+" cookie");if(!n)throw new Error(r.LogPrefix+" Missing value for "+e+" cookie");var o=e+"="+encodeURIComponent(n)+t.convertCookieOptionsToString(i);document.cookie=o},t.getCookie=function(t){if(!t)throw new Error(r.LogPrefix+": getCookie is missing cookieName");var e=document.cookie.split(";").reduce((function(t,e){var n=e.split("=").map((function(t){return t.trim()})),r=n[0],i=n[1];return t[r]=decodeURIComponent(i),t}),{});return r.hasOwnPropertyCi(e,t)?e[t]:void 0},t.convertCookieOptionsToString=function(t){if(!t)throw new Error(r.LogPrefix+": convertCookieOptionsToString is missing options");var e="";for(var n in t)r.hasOwnPropertyCi(t,n)&&("secure"===n&&t[n]?e+=";"+n:e+=";"+n+"="+t[n]);return r.hasOwnPropertyCi(t,"path")||(e+=";path=/"),e},t}();e.Cookies=i},618:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}
function c(t){try{u(r.throw(t))}catch(t){o(t)}}
function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}
u((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}
if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}
if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}
if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}
i[2]&&a.ops.pop(),a.trys.pop();continue}
o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}
if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.isInIFrame=e.documentVisible=e.contentLoaded=void 0;e.contentLoaded=function(){return n(void 0,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t,e){"undefined"==typeof document&&e(),"complete"!==document.readyState&&"interactive"!==document.readyState||t(),document.addEventListener("DOMContentLoaded",(function(){return t()}))}))]}))}))};e.documentVisible=function(){return n(void 0,void 0,void 0,(function(){return r(this,(function(t){return"hidden"!==document.visibilityState?[2,Promise.resolve()]:[2,new Promise((function(t){var e=function(){t(),document.removeEventListener("visibilitychange",e,!1)};document.addEventListener("visibilitychange",e,!1)}))]}))}))};e.isInIFrame=function(){return window.self!==window.top}},7344:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){var e=this;this.json=function(){return new Promise((function(t,n){try{t(JSON.parse(e.xhr.responseText))}catch(t){n(t)}}))},this.xhr=t,this.status=t.status,this.statusText=t.statusText,this.ok=t.status>=200&&t.status<300,this.redirected=t.status>=300&&t.status<400};e.default=function(t){var e=new XMLHttpRequest;e.withCredentials=!0,e.timeout=2e3;var r=new Promise((function(t,r){e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE){var i=new n(e);i.ok||i.redirected?t(i):r(i)}}}));return e.open("GET",t),e.send(),r}},4654:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)
for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.utilities=e.twclid=e.fetch=e.environment=e.Cookies=void 0;var c=n(6575);Object.defineProperty(e,"Cookies",{enumerable:!0,get:function(){return c.Cookies}});var u=o(n(618));e.environment=u;var s=a(n(7344));e.fetch=s.default;var l=o(n(8974));e.twclid=l;var f=o(n(3532));e.utilities=f},8974:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}
function c(t){try{u(r.throw(t))}catch(t){o(t)}}
function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}
u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}
if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}
if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}
if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}
i[2]&&a.ops.pop(),a.trys.pop();continue}
o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}
if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.saveTwclidIntoCookie=e.requestAccIfNeeded=e.isAccCached=e.getTwclidParams=e.getTwclid=e.getTwclidFromHref=e.getTwclidFromCookie=e.cacheAccRequestAndSaveTwclid=e.cacheAccRequest=e.AccRequestCache=e.TWCLID_QUERY_PARAM=e.ACC_BASE=e.TWCLID_COOKIE_TTL=e.TWCLID_COOKIE_NAME=e.TWCLIDSource=void 0;var a,c=n(6575),u=o(n(7344)),s=n(3532);!function(t){t[t.Href=1]="Href",t[t.Cookie=2]="Cookie"}(a=e.TWCLIDSource||(e.TWCLIDSource={})),e.TWCLID_COOKIE_NAME="_twclid",e.TWCLID_COOKIE_TTL=2592e3,e.ACC_BASE="https://ads-api.twitter.com/measurement/website_tag_settings?version=2.3.26",e.TWCLID_QUERY_PARAM="twclid",e.AccRequestCache={};e.cacheAccRequest=function(t,n){if(!e.isAccCached(t)){e.AccRequestCache[t]=function(t){return r(void 0,void 0,void 0,(function(){var e,n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,t];case 1:return[4,i.sent().json()];case 2:return e=i.sent(),[2,!0===(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.allow_1p_cookie)];case 3:return n=i.sent(),s.logError(n),[2,!1];case 4:return[2]}}))}))}(n)}};e.cacheAccRequestAndSaveTwclid=function(t,n){e.cacheAccRequest(t,n),e.saveTwclidIntoCookie(t)};e.getTwclidFromCookie=function(){try{return JSON.parse(decodeURIComponent(c.Cookies.getCookie(e.TWCLID_COOKIE_NAME)||"")).twclid}catch(t){return}};e.getTwclidFromHref=function(){var t=location.search.slice(1).split("&").map((function(t){return t.split("=")})).filter((function(t){var n=t[0];t[1];return n===e.TWCLID_QUERY_PARAM}))[0];return t&&t[1]};e.getTwclid=function(t){return r(void 0,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return(n=e.getTwclidFromHref())?[2,{twclid:n,source:a.Href}]:[4,e.AccRequestCache[t]];case 1:return r.sent()&&(n=e.getTwclidFromCookie())?[2,{twclid:n,source:a.Cookie}]:[2]}}))}))};e.getTwclidParams=function(t){return r(void 0,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return[4,e.getTwclid(t)];case 1:return(n=i.sent())?(r={twclid:n.twclid,tw_clid_src:n.source},e.isAccCached(t)||(r.tw_acc_response=1),[2,r]):[2,{}]}}))}))};e.isAccCached=function(t){return void 0!==e.AccRequestCache[t]};e.requestAccIfNeeded=function(t){if(!e.isAccCached(t)&&!e.getTwclidFromHref()&&e.getTwclidFromCookie()){var n=new URL(e.ACC_BASE);n.searchParams.set("txn_id",t);var r=u.default(n.toString());e.cacheAccRequestAndSaveTwclid(t,r)}};e.saveTwclidIntoCookie=function(t){return r(void 0,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return(n=e.getTwclidFromHref())?[4,e.AccRequestCache[t]]:[2];case 1:return i.sent()?(r=e.getTwclidFromCookie(),n===r||(o={pixelVersion:"2.3.26",timestamp:Date.now().toString(),twclid:n,source:a.Href},c.Cookies.setCookie(e.TWCLID_COOKIE_NAME,JSON.stringify(o),{domain:s.getWildcardDomain(),"max-age":e.TWCLID_COOKIE_TTL,secure:!0,samesite:"Strict"})),[2]):[2]}}))}))}},3532:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)
for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.splitObjectByPropNames=e.splitObjectBy=e.parseEventCodeId=e.mergeObjects=e.logError=e.isObject=e.hashParameter=e.hasOwnPropertyCi=e.generatePageLoadId=e.generateEventId=e.getWildcardDomain=e.getPropertyCi=e.getLegacyParams=e.addQueries=e.LogPrefix=e.EventCodeImpl=e.AdsApiVersion=void 0;var o=i(n(7219)),a=n(5494);!function(t){t.v0="i",t.v1="1/i"}(e.AdsApiVersion||(e.AdsApiVersion={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SET_TRACK_PID=1]="SET_TRACK_PID",t[t.UWT_TRACK=2]="UWT_TRACK",t[t.ONETAG_CONFIG=3]="ONETAG_CONFIG",t[t.ONETAG_EVENT=4]="ONETAG_EVENT",t[t.DEPRECATED_TRACK=5]="DEPRECATED_TRACK",t[t.DEPRECATED_BUILD_PIXEL=6]="DEPRECATED_BUILD_PIXEL",t[t.DEPRECATED_BUILD_SCRIPT=7]="DEPRECATED_BUILD_SCRIPT",t[t.DEPRECATED_BUILD_IFRAME=8]="DEPRECATED_BUILD_IFRAME"}(e.EventCodeImpl||(e.EventCodeImpl={})),e.LogPrefix="[Twitter Pixel Tag]",e.addQueries=function(t,e){var n=document.createElement("a");n.href=t;var i=n.origin,o=n.pathname,a=n.search,c=n.hash,u=a.slice(1).split("&").map((function(t){return t.split("=")})).reduce((function(t,e){var n,i=e[0],o=e[1];return r(((n={})[i]=o,n),t)}),r({},e));return""+i+o+"?"+Object.keys(u).sort().map((function(t){return t+"="+(t in e?encodeURIComponent(u[t]):u[t])})).join("&")+c};function c(t,e){var n=e.toLowerCase();for(var r in t)
if(r.toLowerCase()===n&&t.hasOwnProperty(r))return t[r]}
e.getLegacyParams=function(t){if(!s(t))return{};var e={tw_sale_amount:c(t,"tw_sale_amount")||0,tw_order_quantity:c(t,"tw_order_quantity")||0};return delete t.tw_sale_amount,delete t.tw_order_quantity,u(t,"value")&&(e.tw_sale_amount=c(t,"value")),u(t,"num_items")&&(e.tw_order_quantity=c(t,"num_items")),Array.isArray(c(t,"content_ids"))&&(e.tw_product_id=c(t,"content_ids")[0]),u(t,"partner_id")&&(e.oct_p_id=c(t,"partner_id")),e},e.getPropertyCi=c;e.getWildcardDomain=function(){var t=location.hostname.split(".").reverse();return"."+t[1]+"."+t[0]};e.generateEventId=function(){return a.v4()};function u(t,e){var n=e.toLowerCase();for(var r in t)
if(r.toLowerCase()===n&&t.hasOwnProperty(r))return!0;return!1}
function s(t){var e=typeof t;return"function"===e||"object"===e&&!!t}
function l(t,e){t=t||{};var n=[{},{}],r=n[0],i=n[1];for(var o in t)e(o,t[o])?r[o]=t[o]:i[o]=t[o];return[r,i]}
e.generatePageLoadId=function(){return a.v4()},e.hasOwnPropertyCi=u,e.hashParameter=function(t){return o.default(t).toString()},e.isObject=s,e.logError=function(t){},e.mergeObjects=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t.slice(1);return r.forEach((function(t){t=t||{},Object.keys(t).forEach((function(e){n[e]=t[e]}))})),n},e.parseEventCodeId=function(t){if("string"!=typeof t)return["",t];var e=t.toLowerCase().split("-");return 3!==e.length||"tw"!==e[0]||""===e[1]||""===e[2]?["",t]:[e[1],e[2]]},e.splitObjectBy=l,e.splitObjectByPropNames=function(t,e){return l(t,(function(t){return e.indexOf(t.trim().toLowerCase())>=0}))}},2480:function(){}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}
n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};!function(){"use strict";n(2244),n(7658),n(2735)}()}();}catch(error){var methodName="loadTwitterBaseScript",ds="utag object",inputValue="utag_data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
var supportedPOS={US:!0,GB:!0,JP:!0,AU:!0};function triggerTwitterPixel(){try{if(supportedPOS[utag_data.point_of_sale]){!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);},s.version='1.1',s.queue=[],loadTwitterBaseScript())}(window,document,'script');twq('init','nv408');twq('track','PageView');}}catch(error){var methodName="triggerTwitterPixel",ds="utag object",inputValue="utag_data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
triggerTwitterPixel();}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[117]=='undefined'){utag.runonce.ext[117]=1;if(1){var CONST_EXT_NAME="Digital 3.0 - United Offers Page Tracking";var DOUBLE_DASH=Bootstrapper.dataObject.global.constant.doubleDash;Bootstrapper.processOffersPageEvents=function(data,parseData){var methodName="processOffersPageEvents";var requirementName="Process United Offers Page Events";var dataObj=[];try{var action=data.action;if(data.params){var params=data.params;parseData.eventLabel=params.pageName?params.pageName:DOUBLE_DASH;if(data.action=='Impression: Premier level tag'&&params.info){var premierLevel=params.info.premierLevelTag?params.info.premierLevelTag:DOUBLE_DASH;parseData.eventLabel=[parseData.eventLabel,premierLevel].join("|");}else if(data.action=="Purchase Successful"||data.action=="Purchase Failed"){parseData.eventLabel=[parseData.eventLabel,prepareLabelForPurchaseSuccessOrFailure(params)].join("|");}else if(action=="Impression: Offer"||action=="Clicked: Copy"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),getOfferName(params.info)].join("|");if(params.featureName=="United Promotions"){let stepNumber=(params.info&&params.info.stepNumber)?params.info.stepNumber:DOUBLE_DASH;parseData.eventLabel=[parseData.eventLabel,stepNumber].join("|");parseData=setDimensions(parseData);}
if(params.feature=="ReferAFriend"){parseData.eventLabel=[parseData.eventLabel,referralLink(params.info)].join("|");}}else if(action=="Clicked: Book Now"||action=="Clicked: Enroll in MileagePlus"){parseData={};}else if(action=="Clicked: SignIn"||action=="Tab Selected: Refer friends"||action=="Tab Selected: Why fly United?"){parseData.eventLabel=Bootstrapper.fetchFeatureAndPageName(params);}else if(action=="Clicked: See my progress"||action=="Impression: Offer Details"||action=="Clicked: See all offers"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),getOfferName(params.info)].join("|");}else if(action=="Clicked: Past Offers"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),getAllMilePlayOffers(params.info)].join("|");}else if(action=="Impression: Welcome Page"||action=="Clicked: Start Mile Play"||action=="Clicked: Explore"){parseData.eventLabel=Bootstrapper.fetchFeatureAndPageName(params);}else if(action=="Impression: Offers Page"||action=="Clicked: Current Offers"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),processCurrentOffers(params.info)].join("|");}else if(action=="Impression: Thanks for your interest"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),getMessage(params.info)].join("|");}else if(action.indexOf("Clicked: ")!=-1){parseData={};}else if(action=="Error Shown"){var message=errorMessage(params.info);parseData.eventLabel=!message?[Bootstrapper.fetchFeatureAndPageName(params)].join("|"):[Bootstrapper.fetchFeatureAndPageName(params),message].join("|");}else if(action=="Registration Failed"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),processRegistrationFailure(params.info)].join("|");parseData=setDimensions(parseData);}else if(action=="Registration Successful"){parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),getOfferName(params.info)].join("|");parseData=setDimensions(parseData);}}
dataObj.push(parseData);}catch(error){var ds="Callabck";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return dataObj;};function getMessage(info){let methodName="getMessage";let requirementName="Get message";let message;try{message=(info&&info.message)?info.message:DOUBLE_DASH;}catch(error){let ds="Callabck";let inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return message;}
function getAllMilePlayOffers(info){let methodName="getAllMilePlayOffers";let requirementName="Get all offers";let offersInfo;try{if(info&&info.offers){for(let i=0;i<info.offers.length;i++){let offer=info.offers[i];offersInfo=offersInfo?[offersInfo,offer].join(","):offer;}
offersInfo="["+offersInfo+"]";}}catch(error){let ds="Callabck";let inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return offersInfo;}
function processCurrentOffers(info){let methodName="processCurrentOffers";let requirementName="Get all offers";let offersInfo;try{if(info&&info.offers&&Array.isArray(info.offers)){let offers=info.offers;for(let i=0;i<offers.length;i++){let state=offers[i].offerState||DOUBLE_DASH;let offerNames=offers[i].offerNames;offersInfo=[state,getAllOfferNames(offerNames)].join("|");}}}catch(error){let ds="Callabck";let inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return offersInfo;}
function getAllOfferNames(offerName){let methodName="getAllOfferNames";let requirementName="Get all current offers";let offerNames;try{if(offerName&&offerName.length>0){for(let i=0;i<offerName.length;i++){offerNames=offerNames?[offerNames,offerName[i]].join(","):offerName[i];}
offerNames="["+offerNames+"]";}}catch(error){let ds="Callabck";let inputValue=JSON.stringify(offerName);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return offerNames;}
function prepareLabelForPurchaseSuccessOrFailure(params){var methodName="prepareLabelForPurchaseSuccessOrFailure";var requirementName="Prepare Label for purchase successful or purchase fail event";var label;try{if(params.info){var purchaseMethod=params.info.purchaseMethod?params.info.purchaseMethod:DOUBLE_DASH;var purchaseAmount=params.info.purchaseAmount?params.info.purchaseAmount:DOUBLE_DASH;var cardType=params.info.cardType?params.info.cardType:DOUBLE_DASH;label=[purchaseMethod,purchaseAmount,cardType].join("|");}}catch(error){var ds="Callabck";var inputValue=JSON.stringify(params);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function getOfferName(info){let offerName=DOUBLE_DASH;try{if(info){if(info.offerName){offerName=info.offerName;}else if(info.name){offerName=info.name;}else{offerName=DOUBLE_DASH;}}}catch(error){let methodName="getOfferName";let requirementName="Fetch offerName";let ds="Callabck";let inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return offerName;}
function referralLink(info){var referralLink=DOUBLE_DASH;try{referralLink=(info&&info.referralLink)||DOUBLE_DASH;}catch(error){var methodName="referralLink";var requirementName="Fetch referralLink";var ds="Callabck";var inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return referralLink;}
function destinationaLink(info){var destinationaLink=DOUBLE_DASH;try{destinationaLink=(info&&info.destinationaLink)||DOUBLE_DASH;}catch(error){var methodName="destinationaLink";var requirementName="Fetch destinationaLink";var ds="Callabck";var inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return destinationaLink;}
function errorMessage(info){var message=DOUBLE_DASH;try{if(info&&info.errorMessage){message=info.errorMessage;message=typeof message=="string"?message:"";}}catch(error){var methodName="errorMessage";var requirementName="Fetch errorMessage";var ds="Callabck";var inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return message;}
function processRegistrationFailure(info){let requirementName="Get failure details";let methodName="processRegistrationFailure";let failureDetails;try{if(info){let msg=info.errorMessage||DOUBLE_DASH;let errorCode=info.errorCode||DOUBLE_DASH;failureDetails=[msg,errorCode].join("|");}}catch(error){let ds="Callabck";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return failureDetails;}
function setDimensions(parseData){let requirementName="Set dimensions";let methodName="setDimensions";try{let localeString=processCookies();if(localeString){let locales=localeString.split("&");let langs=locales[0].split("=");let lang=langs[langs.length-1];let posVal=locales[locales.length-1].split("=");let pos=posVal[posVal.length-1];parseData.customDimensions={};parseData.customDimensions[Bootstrapper.UTAG_CONST.lang_code]=lang;parseData.customDimensions[Bootstrapper.UTAG_CONST.point_of_sale]=pos;}}catch(error){let ds="Cookie";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function processCookies(){let requirementName="Process Cookie";let methodName="processCookies";let localeString;try{let cookies=document.cookie;let cookieAry=cookies.split(";");if(cookieAry){for(const element of cookieAry){if(element.indexOf("Locale")>-1){localeString=element;}}}}catch(error){let ds="Cookie";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return localeString;}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event'].toString().toLowerCase()=='Result Load'.toLowerCase()&&b['flight_segment_index']=='1'&&typeof b['fbEid']!='undefined')){var CONST_EXTN_NAME="Facebook pixel - FSR Page";var CONST_DOUBLE_DASH="--";function facebookPixelOnFSR(){var methodName="facebookPixelOnFSR";var requirementName="Prepare data and trigger facebook pixel";try{var pos=utag_data.point_of_sale,posList={US:!0,GB:!0,JP:!0,AU:!0,HK:!0,IE:!0,FR:!0,NL:!0,IT:!0,IL:!0,MX:!0,BR:!0,AR:!0,DE:!0,CR:!0,PR:!0};if(posList[pos]&&Bootstrapper.fetchFlightSegmentIndex()==1){var eventName="Search";var fbData=prepareFBDataForFSR(eventName);var pixelURL=Bootstrapper.prepareFBPixelURL(fbData,eventName);pixelURL+="&cd[flight_tier]="+"0";pixelURL+="&cd[purchase_price]="+fbData.product_price;pixelURL+="&cd[advanced_purchase]="+fbData.product_days_to_departure;Bootstrapper.imageRequest(pixelURL);Bootstrapper.sendDataToFBCAPI(fbData);if(typeof Bootstrapper.pixelAuditFSR==="function"){Bootstrapper.pixelAuditFSR("Facebook");}}}catch(error){var ds="utag object";var inputValue="utag_data.searchCriteria";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
setTimeout(function(){facebookPixelOnFSR();},1500);function prepareFBDataForFSR(eventName){var requirementName="Prepare data to send FB";var methodName="prepareFBDataForFSR";var fbData={};try{utag.data.tealium_collect_event="tealium_collect_fb_"+eventName.toLowerCase();var event_id=Bootstrapper.generateFBEventID(eventName,utag_data,utag_data.tealium_random,70);fbData["fb_event_id_"+eventName]=event_id;fbData.tealium_collect_event="tealium_collect_fb_"+eventName.toLowerCase();fbData.searched_origin=Bootstrapper.getFlightSearchOrigin(1);fbData.searched_destination=Bootstrapper.getFlightSearchDestination(1);fbData.departure_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(1),"yyyy-MM-dd");if(Bootstrapper.getTripTypeCodes()=="RT"){fbData.search_return_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(2),"yyyy-MM-dd");}
fbData.pax_count=Bootstrapper.getPaxCount();fbData.currency=Bootstrapper.getProductCurrencyCode();fbData._ccurrency=Bootstrapper.getProductCurrencyCode();fbData.MPAccStatusValue=Bootstrapper.getMPAccStatusValue();fbData.cabin_type=Bootstrapper.getSearchCabinType();fbData.travelType=Bootstrapper.getSearchTravelType();fbData.product_days_to_departure=Bootstrapper.getNumDaysTilTravel(1);fbData.point_of_sale=utag_data.point_of_sale;if(fbData.travelType.toLowerCase()=="award"){fbData.award_amount=Bootstrapper.lowestFarePrice();fbData.product_price=Bootstrapper.taxForLowestFarePrice();}else{fbData.award_amount=CONST_DOUBLE_DASH;fbData.product_price=Bootstrapper.lowestFarePrice();}
fbData.eid=event_id;fbData.mpbal=Bootstrapper.getMPBalance();fbData.MPAccStatus=Bootstrapper.getMPAccStatus()!="--"?Bootstrapper.getMPAccStatus():"none";fbData.mpidn=(Bootstrapper.getCurrentCustomerId()!="--")?Bootstrapper.getCurrentCustomerId():Bootstrapper.getGAClientID();fbData.userAgentInfo=Bootstrapper.getUserAgent();if(typeof Bootstrapper.getEncodedEmail==="function"&&Bootstrapper.getEncodedEmail()){fbData.encoded_email=Bootstrapper.getEncodedEmail();}
fbData.od_pair=fbData.searched_destination;}catch(error){var ds="utag object";var inputValue="utag_data.searchCriteria";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return fbData;}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[122]=='undefined'){utag.runonce.ext[122]=1;if(1){var CONST_EXTN_NAME="FlashTalking pixel - FSR Page";Bootstrapper.flashTalkingPixel=function(){var methodName="flashTalkingPixel";var requirementName="Prepare data and trigger flashtalking pixel";try{var pos=utag_data.point_of_sale,posList={US:!0,AU:!0,GB:!0,NZ:!0,CN:!0};if(posList[pos]&&Bootstrapper.fetchFlightSegmentIndex()==1){var origin=Bootstrapper.getFlightSearchOrigin(1);var destination=Bootstrapper.getFlightSearchDestination(1);var departing_departure_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(1),"yyyy-MM-dd");var returning_departure_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(2),"yyyy-MM-dd");var src="https://servedby.flashtalking.com/spot/8/8177;61088;6323/?spotName=United_Airlines_Search_RTG"+"&U1="+origin+"&U2="+destination+"&U3="+departing_departure_date+"&U4="+returning_departure_date+"&U6="+pos;Bootstrapper.imageRequest(src);}}catch(error){var ds="utag object"
var inputValue="utag_data.searchCriteria";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[127]=='undefined'){utag.runonce.ext[127]=1;if((b['dom.pathname'].toString().toLowerCase()=='/en-us/flights-to-washington'.toLowerCase()&&b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1)||(b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&/\/en-us\/flights-from-washington-to-myrtle-beach$/i.test(b['dom.pathname']))||(b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase()=='/en-us/flights-from-washington-to-milwaukee'.toLowerCase())||(b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase()=='/en-us/flights-from-milwaukee-to-washington'.toLowerCase())){var CONST_EXTN_NAME="Facebook Pixel - Inbound/Outbound Landing Page";function facebookPixelOnLandingPage(){var methodName="facebookPixelOnLandingPage";var requirementName="Trigger facebook pixel on Inbound/Outbound Landing Page ";try{var src="https://www.facebook.com/tr?id=269718004564210&ev=PageView&noscript=1";Bootstrapper.imageRequest(src);}catch(error){var ds="Facebook pixel URL"
var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,JSON.stringify(error.message),error,ds,inputValue,methodName);}}
facebookPixelOnLandingPage();Bootstrapper.facebookPixelOnSeachFlightsClick=function(){var methodName="facebookPixelOnSeachFlightsClick";var requirementName="Trigger facebook pixel on Search flights click action ";try{var src="https://www.facebook.com/tr?id=269718004564210&ev=Search&noscript=1";Bootstrapper.imageRequest(src);}catch(error){var ds="Facebook pixel URL"
var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,JSON.stringify(error.message),error,ds,inputValue,methodName);}};}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase()=='/en-us/flights-to-washington'.toLowerCase())||(b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase()=='/en-us/flights-from-washington-to-myrtle-beach'.toLowerCase())){var CONST_EXTN_NAME="Programmatic Pixel - Inbound/Outbound Landing Page";var isClicked=false
function programmaticPixelOnLandingPage(){var methodName="programmaticPixelOnLandingPage";var requirementName="Trigger programatic pixel on Inbound/Outbound Landing Page ";try{var pageUrl=location&&location.href?location.href:"",pageReference=document&&document.referrer?document.referrer:"",randomNumber=cachebust();var ca="";if(utag.data["dom.pathname"].toString().toLowerCase()=='/en-us/flights'.toLowerCase()){ca=isClicked?"20831573":"20831571";}
else if(utag.data["dom.pathname"].toString().toLowerCase()=='/en-us/flights-to-washington'.toLowerCase()){ca=isClicked?"20831576":"20831572";}
else if(utag.data["dom.pathname"].toString().toLowerCase()=='/en-us/flights-from-washington-to-myrtle-beach'.toLowerCase()){ca=isClicked?"20832869":"20832866";}
var src="http://"+ca+"p.rfihub.com/ca.html?ver=9&rb=43805&ca="+ca+"&_o=43805&_t="+ca+"&ra="+randomNumber+"&pe="+pageUrl+"&pf="+pageReference;Bootstrapper.imageRequest(src);}catch(error){var ds="Programmatic pixel URL"
var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,JSON.stringify(error.message),error,ds,inputValue,methodName);}}
programmaticPixelOnLandingPage();function cachebust(){return(Math.random()+"").substr(2);}
Bootstrapper.programmaticPixelOnSearchClick=function(){var methodName="programmaticPixelOnLandingPage";var requirementName="Trigger programatic pixel on Inbound/Outbound Landing Page";try{isClicked=true;programmaticPixelOnLandingPage();}catch(error){var ds="Programmatic pixel URL"
var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,JSON.stringify(error.message),error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase()=='/en-us/flights-to-washington'.toLowerCase())||(b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase()=='/en-us/flights-from-washington-to-milwaukee'.toLowerCase())||(b['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&b['dom.pathname'].toString().toLowerCase()=='/en-us/flights-from-milwaukee-to-washington'.toLowerCase())){let CONST_EXTN_NAME="United Airlines Inbound/outbound Landing Page";function searchFlightClickListner(){let methodName="searchFlightClickListner";let requirementName="Added click listner on Search flights button on Inbound/Outbound Landing Page";let CSS_SEARCH_FLIGHTS=".block.cursor-pointer.flex.w-full.flex-nowrap.justify-center.items-center";try{if($(CSS_SEARCH_FLIGHTS)&&$(CSS_SEARCH_FLIGHTS).attr("data-att")=="search"){$(CSS_SEARCH_FLIGHTS).on("click",function(){setTimeout(function(){if(typeof Bootstrapper.programmaticPixelOnSearchClick==="function"){Bootstrapper.programmaticPixelOnSearchClick();}
Bootstrapper.facebookPixelOnSeachFlightsClick();gtag_report_conversion();},100);});}}catch(error){let ds="DOM element";let inputValue=CSS_SEARCH_FLIGHTS;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
setTimeout(function(){searchFlightClickListner()},3000);function gtag_report_conversion(url){var callback=function(){if(typeof(url)!='undefined'){window.location=url;}};var conversionId;if(utag.data["dom.pathname"].toString().toLowerCase()=='/en-us/flights-from-washington-to-milwaukee'.toLowerCase()){conversionId='AW-870424432/x9q1CJPXvfkBEPC-hp8D';}
else if(utag.data["dom.pathname"].toString().toLowerCase()=='/en-us/flights-to-washington'.toLowerCase()||utag.data["dom.pathname"].toString().toLowerCase()=='/en-us/flights-from-milwaukee-to-washington'.toLowerCase()){conversionId='AW-870424432/gCULCMC21PkBEPC-hp8D';}
gtag('event','conversion',{'send_to':conversionId,'event_callback':callback});return false;}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event']=='Result Load'&&b['travelType']=='Revenue'&&/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1')){var CONST_EXTN_NAME='LinkedIn Pixel - FSR Page';function linkedInPixel(){var methodName="linkedInPixel";var requirementName="trigger LinkedIn pixel";try{var pos=utag_data.point_of_sale,posList={US:!0};if(posList[pos]){if(window.lintrk){window.lintrk("track");}else{_linkedin_partner_id="1172420";window._linkedin_data_partner_ids=window._linkedin_data_partner_ids||[];window._linkedin_data_partner_ids.push(_linkedin_partner_id);(function(){var s=document.getElementsByTagName("script")[0];var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src="https://snap.licdn.com/li.lms-analytics/insight.min.js";s.parentNode.insertBefore(b,s);})();}}}catch(error){var ds="LinkedIn Object"
var inputValue="lintrk";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
linkedInPixel();}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[136]=='undefined'){utag.runonce.ext[136]=1;if(1){var CONST_EXTN_NAME="Digital 3.0 - Shopping Seat Map";var DOUBLE_DASH="--";Bootstrapper.processShoppingSeatEvents=function(data,parseData){var methodName="processShoppingSeatEvents";var requirementName="Process Shopping Seat Map Page Events";var ds="Shopping Seat Map Page Callabck";var analyticsDataObj=[];try{if(data.action=="Page Load"){analyticsDataObj.push(trackEESeatMapCheckout(data));analyticsDataObj.push(Bootstrapper.handleCustomizeTravelBundleSelection());if(typeof Bootstrapper.sendCartAbandonEvent_BookingFlow==="function"){Bootstrapper.sendCartAbandonEvent_BookingFlow(data.category);}
if(data.params&&data.params.info&&data.params.info.hasExtraSeat){analyticsDataObj.push(trackExtraSeatImpression(data));}
if(typeof Bootstrapper.triggerFBPageView==="function"){Bootstrapper.triggerFBPageView("1245757155444013");}
if(typeof Bootstrapper.triggerFloodlightPixelOnSeatmapPage==="function"){Bootstrapper.triggerFloodlightPixelOnSeatmapPage();}}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObj;};function trackEESeatMapCheckout(data){var methodName="trackEESeatMapCheckout";var requirementName="Track enhanced ecommerce seat Map checkout";var eeSeatCheckOut={};try{var ecommerceProducts=Bootstrapper.resetEEProductArray({});if(utag_data.selectedTrips&&utag_data.selectedTrips.length>0){var trips=utag_data.selectedTrips;var legs=trips.length;for(var i=0;i<legs;i++){var trip=trips[i];ecommerceProducts=Bootstrapper.prepareEcommerceProducts(trip,i+1,ecommerceProducts);}
eeSeatCheckOut=prepareEEEvent(ecommerceProducts,"checkout seat selection");}}catch(error){var ds="Data object from callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eeSeatCheckOut;}
function prepareEEEvent(ecommerceProducts,action,nonInteraction){var methodName="prepareEEEvent";var requirementName="Prepare event structure for Enhance ecommerce tracking";var parseDataObj={};try{parseDataObj.eventCategory="ecommerce";parseDataObj.eventAction=action;parseDataObj.tealiumEvent=action;parseDataObj.ecommerceProducts=ecommerceProducts;parseDataObj.currency=Bootstrapper.getProductCurrencyCode();}catch(error){var ds="Function argument";var inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function trackExtraSeatImpression(data){let methodName="trackExtraSeatImpression";let requirementName="Prepare event structure for Extra seat impression";let parseDataObj={};try{parseDataObj.eventCategory=data.category;let action="Impression: Extra Seat";parseDataObj.eventAction=action;parseDataObj.tealiumEvent=action;parseDataObj.eventLabel=getLabelForES();}catch(error){var ds="Function argument";var inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function getLabelForES(){let methodName="getLabelForES";let requirementName="Get label for extra seat impression";let label;try{let tripType=Bootstrapper.getTripTypeCodes();let travelType=Bootstrapper.getSearchTravelType();let marketType=Bootstrapper.getMarketTypeFromDL();let origin=Bootstrapper.getSelectedTripOrigin(1);let destination=Bootstrapper.getSelectedTripDestination(1);let odPair=[origin,destination].join("-");label=[tripType,travelType,marketType,odPair].join("|");}catch(error){let ds="DL";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[137]=='undefined'){utag.runonce.ext[137]=1;if(1){var CONST_EXTN_NAME="Digital 3.0 - Shopping Cart";var DOUBLE_DASH="--";Bootstrapper.processShoppingCartEvents=function(data,parsedData){var methodName="processShoppingCartEvents";var requirementName="Process Shopping Cart Events";var ds="Shopping Cart Callback";var analyticsDataObj=[];try{if(data.action=="Clicked: Remove"){parsedData.eventLabel=prepareEventLabelForShoppingCartRemoveAction(data,parsedData);}else if(data.action=="Clicked: Continue to payment"){parsedData.eventLabel=prepareEventLabelForShoppingCartContinueToPaymentAction(data,parsedData);}else if(data.action=="Clicked: Continue to "){parsedData=[];}else if(data.action=="Clicked: Shopping Cart"||data.action=="Clicked link: Book this flight"){parsedData.eventLabel=prepareShoppingCartImpressionData(data);}else if(data.action=="Clicked: Start New Search"){parsedData.eventLabel=handleStartSearchClick(data);}else if(data.action=="Information Shown"||data.action=="Error Shown"){parsedData.eventLabel=handleCartInformationShown(data);}
analyticsDataObj.push(parsedData);}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObj;}
function prepareEventLabelForShoppingCartRemoveAction(data,parsedData){var eventLabel;var methodName="prepareDataForShoppingCartRemoveAction";var requirementName="Prepare data for Shopping Cart remove action";try{var productDesc=DOUBLE_DASH;var productType=DOUBLE_DASH;var odPair=DOUBLE_DASH;var productIds=DOUBLE_DASH;if(data&&data.params&&data.params.info){if(data.params.info.description&&data.params.info.description.length>0&&data.params.info.description[0]!==null){productDesc=JSON.stringify(data.params.info.description);}
if(data.params.info.productType){productType=data.params.info.productType;}
if(data.params.info.odPair&&data.params.info.odPair!='undefined-undefined'){odPair=data.params.info.odPair;}
if(data.params.info.productIds&&data.params.info.productIds.length>0){productIds=JSON.stringify(data.params.info.productIds);}}
if(productType&&productType=="sfc"){eventLabel=[productType,productIds].join('|');}else{eventLabel=[productDesc,productType,odPair,productIds].join('|');}}catch(error){var ds="Data object recieved from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eventLabel;}
function prepareEventLabelForShoppingCartContinueToPaymentAction(data,parsedData){var eventLabel;var methodName="prepareEventLabelForShoppingCartContinueToPaymentAction";var requirementName="Prepare data for Shopping Cart continue to payment action";try{var travelType=Bootstrapper.getSearchTravelType();var tripType=Bootstrapper.getTripType();var currency=Bootstrapper.getShoppingCartCurrencyCode();var totalAmount=Bootstrapper.getShoppingCartTotalAmount();eventLabel=[travelType,tripType,currency,totalAmount].join('|');}catch(error){var ds="Data object recieved from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eventLabel;}
function prepareShoppingCartImpressionData(data){var requirementName="Prepare event label for Impression of Shopping cart items";var methodName="prepareShoppingCartImpressionData";var eventLabel;try{if(data.params&&data.params.info){var info=data.params.info;if(info){var flights=info.flights?info.flights:"";if(flights&&flights.length>0){eventLabel=parseFlightsInfo(flights,data.action);}}}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eventLabel}
function parseFlightsInfo(flights,action){var requirementName="Parse flights details";var methodName="parseFlightsInfo";var flightInfo="";try{for(var flight of flights){flightInfo=prepareFlightInfo(flight,flightInfo,action);}
flightInfo="["+flightInfo+"]";}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return flightInfo;}
function prepareFlightInfo(flight,flightInfo,action){var requirementName="Prepare flight info data";var methodName="prepareFlightInfo";try{var index=(flight.index||flight.index>-1)?flight.index:DOUBLE_DASH;var deepLinkedPage=flight.deepLinkedPage?flight.deepLinkedPage:DOUBLE_DASH;var currency=flight.currency?flight.currency:DOUBLE_DASH;var amount=flight.amount?flight.amount:DOUBLE_DASH;var trips=flight.trips;var tripDetails;if(trips){var tripInfo=parseShoppingCartTrips(trips);tripDetails=tripDetails?"["+[tripDetails,tripInfo].join(",")+"]":"["+tripInfo+"]";}
var cartId=getShoppingCartId(action,flight);var flightDetails="";if(cartId&&cartId!=DOUBLE_DASH){flightDetails=[index,deepLinkedPage,tripDetails,currency,amount,cartId].join("|");}else{flightDetails=[index,deepLinkedPage,tripDetails,currency,amount].join("|");}
if(index==0&&flightInfo==""){flightInfo=flightDetails;}else{flightInfo=[flightInfo,flightDetails].join(",");}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return flightInfo;}
function getShoppingCartId(action,flight){var requirementName="Fetch cart id";var methodName="getShoppingCartId";var cartId="";try{if(action=="Clicked link: Book this flight"){cartId=flight.cartId?flight.cartId:DOUBLE_DASH;}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return cartId;}
function parseShoppingCartTrips(trips){var requirementName="Parse shopping cart trip data";var methodName="parseShoppingCartTrips";var tripDetails="";try{for(var i=0;i<trips.length;i++){var trip=trips[i];var origin=trip.origin?trip.origin:DOUBLE_DASH;var destination=trip.destination?trip.destination:DOUBLE_DASH;var departureDate=trip.departureDate?Bootstrapper.getDate(trip.departureDate,"-"):DOUBLE_DASH;var tripInfo=[i,origin,destination,departureDate].join("|");if(i>0){tripDetails=[tripDetails,tripInfo].join(",");}else{tripDetails=tripInfo;}}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return tripDetails;}
function handleStartSearchClick(data){var requirementName="Handle click event of Start search";var methodName="handleStartSearchClick";var eventLabel;try{if(data.params&&data.params.info){var info=data.params.info;eventLabel=(info&&info.position)?info.position:DOUBLE_DASH;}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eventLabel;}
function handleCartInformationShown(data){var requirementName="Prepare event label for Information shown event";var methodName="handleCartInformationShown";var eventLabel;try{if(data.params&&data.params.info){var info=data.params.info;var message=info.message?info.message:DOUBLE_DASH;if(message.indexOf("<strong>")>-1){eventLabel=processShoppingCartMessages(info);}else{eventLabel=message;}}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eventLabel;}
function processShoppingCartMessages(info){var requirementName="Process messages of shopping cart";var methodName="processShoppingCartMessages";var message="";try{var messageParams=info.messageParams;if(messageParams){var msgParams=info.messageParams;var cartId=msgParams.CARTID?msgParams.CARTID:DOUBLE_DASH;var priceDirection=msgParams.PRICEDIRECTION?msgParams.PRICEDIRECTION:DOUBLE_DASH;var origin=msgParams.ORIGINCITY?msgParams.ORIGINCITY:DOUBLE_DASH;var destination=msgParams.DESTCITY?msgParams.DESTCITY:DOUBLE_DASH;var orignalPrice=msgParams.ORIGPRICE_MONEY?msgParams.ORIGPRICE_MONEY:DOUBLE_DASH;var newPrice=msgParams.NEWPRICE_MONEY?msgParams.NEWPRICE_MONEY:DOUBLE_DASH;message=[priceDirection,origin,destination,orignalPrice,newPrice,cartId].join("|");}}catch(error){var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return message;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[140]=='undefined'){utag.runonce.ext[140]=1;if(1){var CONST_EXTN_NAME="Digital 3.0 - Shopping Purchase";var DOUBLE_DASH="--";Bootstrapper.processShoppingPurchaseEvents=function(data,parseData){var methodName="processShoppingPurchaseEvents";var requirementName="Process Shopping Purchase Page Events";var analyticsDataObj=[];try{if(data.action=="Page Load"){analyticsDataObj.push(prepareEEEvent(prepareDataForEEPaymentEvents(),"checkout trip protection"));if(typeof Bootstrapper.sendCartAbandonEvent_BookingFlow==="function"){Bootstrapper.sendCartAbandonEvent_BookingFlow(data.category);}
setTimeout(function(){if(typeof Bootstrapper.sendFBPixelAndCAPI==="function"){Bootstrapper.sendFBPixelAndCAPI("AddPaymentInfo");}},1500);setTimeout(function(){if(typeof Bootstrapper.sendTiktokPixelOnBookingPath==="function"){Bootstrapper.sendTiktokPixelOnBookingPath("InitiateCheckout");}},1500);}else if(data.action=="Clicked: Next"){analyticsDataObj.push(prepareEEEvent(prepareDataForEEPaymentEvents(),"checkout payment"));}else if(data.action=='purchase'){if(Bootstrapper.triggerUpliftPixel){Bootstrapper.triggerUpliftPixel();}
analyticsDataObj.push(prepareBuyNowButtonClickEvent(data,parseData));analyticsDataObj.push(prepareEEEvent(prepareDataForEEPaymentEvents(),"checkout purchase",0,prepareLabelForEECheckoutPurchase()));analyticsDataObj.push(prepareSelectedTravelOptions(data));}else if(data.action=='Impression: Travel Guard'){analyticsDataObj.push(prepareTravelGaurdImpressionEL(data,parseData));}else if(data.params&&data.params.feature&&data.params.feature=="ATM"){analyticsDataObj.push(Bootstrapper.processATMEvents(data,parseData));}else if(data.action=="Clicked Link: View MileagePlus earnings for this trip"){parseData.eventLabel=(data.params&&data.params.info&&data.params.info.path)?data.params.info.path:"--";analyticsDataObj.push(parseData);}else if(data.action=="Impression: MileagePlus earnings"){analyticsDataObj.push(preparePQPandPQFEL(data,parseData));}}catch(error){var ds="Shopping payment page load callabck";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObj;};function prepareDataForEEPaymentEvents(){var methodName="prepareDataForEEPaymentEvents";var requirementName="prepare data for enhanced ecommerce payment event";try{var ecommerceProducts=Bootstrapper.resetEEProductArray({});if(utag_data.selectedTrips&&utag_data.selectedTrips.length>0){var trips=utag_data.selectedTrips;var legs=trips.length;for(var i=0;i<legs;i++){var trip=trips[i];ecommerceProducts=Bootstrapper.prepareEcommerceProducts(trip,i+1,ecommerceProducts);}}}catch(error){var ds="Data object from utag_data";var inputValue="utag_data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return ecommerceProducts;}
function prepareEEEvent(ecommerceProducts,action,nonInteraction,label){var methodName="prepareEEEvent";var requirementName="Prepare event structure for Enhance ecommerce tracking";var parseDataObj={};try{parseDataObj.eventCategory="ecommerce";parseDataObj.eventAction=action;parseDataObj.tealiumEvent=action;parseDataObj.eventLabel=label;parseDataObj.ecommerceProducts=ecommerceProducts;parseDataObj.currency=Bootstrapper.getProductCurrencyCode();parseDataObj.eventName=getEventName(action);parseDataObj.customDimensions={};parseDataObj.customDimensions[Bootstrapper.UTAG_CONST.upgrade_type]=Bootstrapper.getUpgradeType();}catch(error){var ds="Function argument";var inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}
function getEventName(action){let requirementName="Get event name";let methodName="getEventName";let name;try{if(action=="checkout payment"){name="add_payment_info";}else if(action=="checkout trip protection"){name="begin_checkout";}}catch(error){let ds="Function argument";let inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return name;}
function prepareBuyNowButtonClickEvent(data,parseData){var methodName="prepareBuyNowButtonClickEvent";var requirementName="Prepare purchase click event";var dataObject=parseData;try{dataObject.eventAction="Clicked: Buy now";dataObject.tealiumEvent=dataObject.eventAction;dataObject.eventLabel=prepareLabelForClickedPurchaseEvent(data,parseData);dataObject.customDimensions={};if(Bootstrapper.isEnvironmentProd()){dataObject.customDimensions[Bootstrapper.UTAG_CONST.shoppingOfferProd]=Bootstrapper.getOfferName(data.params);}else{dataObject.customDimensions[Bootstrapper.UTAG_CONST.shoppingOfferQA]=Bootstrapper.getOfferName(data.params);}
dataObject.customDimensions[Bootstrapper.UTAG_CONST.upgrade_type]=Bootstrapper.getUpgradeType();}catch(error){var ds="Function argument";var inputValue="utag_data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataObject;}
function prepareLabelForClickedPurchaseEvent(data,parseDataObj){var methodName="prepareLabelForClickedPurchaseEvent";var requirementName="Prepare label for clicked purchase event";var label=DOUBLE_DASH;try{if(data.params.info){var info=data.params.info;var isFareLock=info.isFareLock?"Y":"N";var isAutoTicket=info.isAutoTicket?"Y":"N";var travelType=Bootstrapper.getSearchTravelType();var currencyAmount=DOUBLE_DASH;currencyAmount=getCurrencyAmountFromCart(travelType);var marketType=Bootstrapper.getMarketTypeFromDL();var paymentTypes=DOUBLE_DASH;let flightOperatorDescription=Bootstrapper.getSelectedFlightOperator();if(info.paymentTypes&&Array.isArray(info.paymentTypes)&&info.paymentTypes.length){paymentTypes='['+info.paymentTypes.join(",")+']';}
label=[isFareLock,isAutoTicket,currencyAmount,marketType,travelType,paymentTypes,getCountryCodes(),flightOperatorDescription].join("|");let offerInfo=Bootstrapper.getOfferNameForFlightSelection(data.params);if(offerInfo){parseDataObj.customDimensions={};label=[label,offerInfo].join("|");}}}catch(error){var ds="Function argument";var inputValue="utag_data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function getCurrencyAmountFromCart(travelType){var requirementName="Get currency amount from cart";var methodName="getCurrencyAmountFromCart";var currencyAmount=DOUBLE_DASH;try{if(utag_data.cart&&utag_data.cart.totals&&utag_data.cart.totals.length>0){var amount=utag_data.cart.totals[0].amount?utag_data.cart.totals[0].amount:0;var currencyCode=utag_data.cart.totals[0].currencyCode?utag_data.cart.totals[0].currencyCode:DOUBLE_DASH;currencyAmount=[currencyCode,amount].join("");if(travelType=='Award'){var taxAmount=utag_data.cart.totals[1]&&utag_data.cart.totals[1].amount?utag_data.cart.totals[1].amount:0;var taxAmountCurrency=utag_data.cart.totals[1]&&utag_data.cart.totals[1].currencyCode?utag_data.cart.totals[1].currencyCode:DOUBLE_DASH;currencyAmount="["+[currencyAmount,[taxAmountCurrency,taxAmount].join("")].join(",")+"]";}}}catch(error){var ds="Function argument";var inputValue="utag_data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return currencyAmount;}
function prepareLabelForEECheckoutPurchase(){var methodName="prepareLabelForEECheckoutPurchase";var requirementName="Prepare label for EE checkout purchase for";var label="";try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>0){for(var i=0;i<trips.length;i++){label=Bootstrapper.prepareLOFData(trips[i],i,label);}}}catch(error){var ds="Utag_data object";var inputValue="utag_data.selectedTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function prepareSelectedTravelOptions(data){var methodName="prepareSelectedTravelOptions";var requirementName="Prepare event to send data for selected travel options";var dataObject={};try{var travelOptions=utag_data.travelOptions;if(travelOptions&&travelOptions.length>0){var label='['+processTravelOptions(travelOptions)+']';dataObject.eventCategory=data.category
dataObject.eventAction='Selected: Ancillary Products';dataObject.tealiumEvent=dataObject.eventAction;dataObject.eventLabel=label;dataObject.eventValue=Bootstrapper.getTravelOptionsTotalAmount();}}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataObject;}
function processTravelOptions(travelOptions){var requirementName="Process travel options";var methodName="processTravelOptions";var label;try{for(var i=0;i<travelOptions.length;i++){var travelOpt=travelOptions[i];var travelData='';if(travelOpt.productCode.toLowerCase()=='bundle'){travelData=getBundleInformation(travelOpt);}else if(travelOpt.productCode.toLowerCase()=='tpi'){travelData=getTripInsuranceDetail(travelOpt);}else if(travelOpt.productCode.toLowerCase()=='aac'||travelOpt.productCode.toLowerCase()=='pac'){travelData=getPremierAwardAcceleratorDetail(travelOpt);}else if(travelOpt.productCode.toLowerCase()=="pbs"||travelOpt.productCode.toLowerCase()=="pas"){travelData=getPBAndPADetail(travelOpt);}else if(travelOpt.productCode.toLowerCase()=="pet"){travelData=getPetinCabinDetail(travelOpt);}else{var travelOptionData=fetchCommonTravelOptionData(travelOpt);travelData=[travelOptionData.productNames,travelOptionData.key,travelOptionData.amount,travelOptionData.currency].join('|');}
label=i==0?travelData:[label,travelData].join(', ');}}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function fetchCommonTravelOptionData(travelOpt){var methodName="fetchCommonTravelOptionData";var requirementName="Fetch common travel option data";try{var key=travelOpt.key?travelOpt.key:DOUBLE_DASH;var productNames=travelOpt.productNames?JSON.stringify(travelOpt.productNames):DOUBLE_DASH;var currency=travelOpt.price&&travelOpt.price.currencyCode?travelOpt.price.currencyCode:"USD";var amount=travelOpt.price&&travelOpt.price.amount?travelOpt.price.amount:DOUBLE_DASH;var travelData={"productNames":productNames,"key":key,"amount":amount,"currency":currency};}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return travelData;}
function getTravelOptionODPair(travelOpt){var methodName="getTravelOptionODPair";var requirementName="Fetch OD Pair of travel option";try{var origin=travelOpt.origin?travelOpt.origin:DOUBLE_DASH;var destination=travelOpt.destination?travelOpt.destination:DOUBLE_DASH;var odPair=[origin,destination].join('-');}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return odPair;}
function getBundleInformation(bundle){var methodName="getBundleInformation";var requirementName="Fetch selected bundle information";try{var tripIndex=parseInt(bundle.tripIndex);var odPair=getTravelOptionODPair(bundle);var departureDate=Bootstrapper.getDate(utag_data.selectedTrips[tripIndex-1].departureDateTime,"-");var subProducts=bundle.subProducts?JSON.stringify(bundle.subProducts):DOUBLE_DASH;var productIds=fetchBundleProductIds(bundle);var travelData=fetchCommonTravelOptionData(bundle);var bundleData=[odPair,departureDate,travelData.productNames,subProducts,travelData.key,productIds,travelData.amount,travelData.currency].join('|');}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return bundleData;}
function fetchBundleProductIds(bundle){var methodName="fetchBundleProductIds";var requirementName="Fetch productIds from bundle";var productIds=DOUBLE_DASH;try{if(bundle.subItems){var subItems=bundle.subItems;for(var i=0;i<subItems.length;i++){productIds=i==0?subItems[i].productId:[productIds,subItems[i].productId].join(',');}
productIds='['+productIds+']';}}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return productIds;}
function getTripInsuranceDetail(travelOpt){var methodName="getTripInsuranceDetail";var requirementName="Fetch purchase trip insurance detail";try{var travelData=fetchCommonTravelOptionData(travelOpt);var travelGuardPageId=utag_data.travelGuardPageId?utag_data.travelGuardPageId:DOUBLE_DASH;var tpiData=[travelData.productNames,travelData.key,travelData.amount,travelData.currency,travelGuardPageId].join('|');}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return tpiData;}
function getPremierAwardAcceleratorDetail(travelOpt){var methodName="getPremierAwardAcceleratorDetail";var requirementName="Fetch Premier Award Accelerator detail";try{var travelData=fetchCommonTravelOptionData(travelOpt);var productIds=fetchBundleProductIds(travelOpt);var paaData=[travelData.productNames,travelData.key,productIds,travelData.amount,travelData.currency].join('|');}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return paaData;}
function getPBAndPADetail(travelOpt){var methodName="getPBAndPADetail";var requirementName="Fetch Priority Boarding and Premier Access detail";try{var odPair=getTravelOptionODPair(travelOpt);var travelData=fetchCommonTravelOptionData(travelOpt);var data=[odPair,travelData.productNames,travelData.key,travelData.amount,travelData.currency].join('|');}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return data;}
function getPetinCabinDetail(travelOpt){var methodName="getPetinCabinDetail";var requirementName="Fetch Pet in Cabin detail";try{var odPair=getTravelOptionODPair(travelOpt);var travelData=fetchCommonTravelOptionData(travelOpt);var productIds=fetchBundleProductIds(travelOpt);var petInCabinData=[odPair,travelData.key,productIds,travelData.amount,travelData.currency].join('|');}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return petInCabinData;}
function prepareTravelGaurdImpressionEL(data,parseData){var methodName="prepareTravelGaurdImpressionEL";var requirementName="Prepare event label for travel gaurd Impression";var dataObject=parseData;try{if(data.params&&data.params.info){var info=data.params.info;var pageId=info.pageId?info.pageId:DOUBLE_DASH;var totalPremium=info.totalPremium?info.totalPremium:DOUBLE_DASH;var currency=utag_data._ccurrency?utag_data._ccurrency:DOUBLE_DASH;dataObject.eventLabel=[pageId,totalPremium,currency].join('|');}}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataObject;}
function getCountryCodes(){var requirementName="Get country codes";var methodName="getCountryCodes";var countryCodeInfo="--";try{var originConutryInfo=Bootstrapper.decodedODData(utag_data.selectedTrips[0].originDescription);originConutryInfo=(originConutryInfo&&originConutryInfo.country)?originConutryInfo.country:DOUBLE_DASH;var destinationCountryInfo=Bootstrapper.getSelectedTripCountryCode(0,"destinationCountryCode");countryCodeInfo=[originConutryInfo,destinationCountryInfo].join("-");}catch(error){var ds="utag.data.selectedTrips";var inputValue="originCountryCode and destinationCountryCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return countryCodeInfo;}
function preparePQPandPQFEL(data,parseData){let methodName="preparePQPandPQFEL";let requirementName="Prepare event label for PQP and PQF";let dataObject=parseData;try{if(data.params&&data.params.info){let info=data.params.info;dataObject.eventLabel=info.path||"--";let error=info.error||"--";if(error&&error!="--"){dataObject.eventLabel=[dataObject.eventLabel,JSON.stringify(error)].join('|');}}}catch(error){var ds="Utag_data object";var inputValue="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataObject;}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event']=='Result Load'&&b['flight_segment_index']=='1'&&/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname']))){(function(){var method
var noop=function(){}
var methods=['assert','clear','count','debug','dir','dirxml','error','exception','group','groupCollapsed','groupEnd','info','log','markTimeline','profile','profileEnd','table','time','timeEnd','timeline','timelineEnd','timeStamp','trace','warn']
var length=methods.length
var console=(window.console=window.console||{})
while(length--){method=methods[length]
if(!console[method]){console[method]=noop}}}())
var Farenet=(function(){'use strict'
var LOCAL_VARIABLES={IS_AWARD:false,IS_LOGGED:false,DOMESTIC_COUNTRY:'US',DOMESTIC:'DOMESTIC',INTERNATIONAL:'INTERNATIONAL',DEFAULT_TRAVEL_CLASS:'ECONOMY',JOURNEY_TYPE:{ROUND_TRIP:'ROUND_TRIP',ONE_WAY:'ONE_WAY',MULTI_CITY:'MULTI_CITY'},ORIGIN:{airport:{code:undefined,name:undefined},country:{isoCode:undefined,name:undefined},city:{cityCode:undefined,name:undefined}},DESTINATION:{airport:{code:undefined,name:undefined},country:{isoCode:undefined,name:undefined},city:{cityCode:undefined,name:undefined}}}
var CURRENCY_CODE=null
var SEARCH_ID=uuidv4()
var NewModel={priceSpecification:{},journey:{fullRoute:null,priceSpecification:{},fareTensor:{journeyType:null,cells:[]},passengerDetails:[],passenger:{},outboundFlight:{},inboundFlight:{},departureDate:null,returnDate:null,journeyType:null,flightType:null,airline:{name:'United',iataCode:'UA'}},page:{},device:{category:null,screenResolution:null,operatingSystem:null},metadata:{app:{name:'Farenet',version:'uaNewIBE_v3.1',datasource:'IBE_FLIGHT_SELECTION'},emcid:null,searchId:SEARCH_ID,schemaVersion:'1.1.0'}}
function uuidv4(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0;var v=c==='x'?r:(r&0x3|0x8)
return v.toString(16)})}
var searchSent=false
var SearchModel={searchId:SEARCH_ID,airlineIataCode:'UA',originAirportIataCode:null,destinationAirportIataCode:null,fullRoute:null,departureDate:null,returnDate:null,journeyType:null,fareClass:undefined,fareClassSearched:undefined,passengerCount:undefined,passengerAdultCount:undefined,passengerChildCount:undefined,passengerInfantCount:undefined,emcid:undefined,emtid:undefined,isFareAvailable:null,siteEdition:undefined,url:decodeURIComponent(document.URL),deviceCategory:undefined}
var BRANDCLASSES_DATA={}
var USA_LANGUAGE_VERSIONS=['US','EE. UU.','EUA']
var MAX_WAITING_TIME=300
var INIT_TIME=Date.now()
var laPulpa='QXicVTykVWQFVMIFDNyY2M5lHcxFDaxQzQQVTWZBVUxgUM0MGN2kXewFXMoFDNiwiISNTNXBjUCRTVvEzLsF3Zv02bj5CemJHd5RXayV3YlNnLlRXaydXLlJ3bjFGdhR2LvozcwRHdoJyW'
var[url,auth]=window[atob('SlNPTg')][atob('cGFyc2U')](window[atob('YXRvYg')](laPulpa[atob('c3BsaXQ')]('')[atob('cmV2ZXJzZQ')]()[atob('am9pbg')]('')))
var query='mutation addAPIs($farenet: [farenet!], $search: [searches!]) {farenet(params: {apiId: "farenet" version: 1}, body: $farenet) {statusCode,count,success,results,err,error,msg,message}\n searches(params: {apiId: "searches" version: 1}, body: $search) {statusCode,count,success,results,err,error,msg,message}}'
var querySearch='mutation addAPIs($search: [searches!]) {searches(params: {apiId: "searches" version: 1}, body: $search) {statusCode,count,success,results,err,error,msg,message}}'
function sendDataToGraphQL(model,search,query){var result=JSON.stringify({query,variables:{authorization:auth,farenet:model?[model]:undefined,search:search?[search]:undefined},operationName:'addAPIs'})
if(result!==''){var xhr=createCORSRequest('POST')
if(!xhr){throw new Error('CORS not supported')}
if(search)searchSent=true
xhr.onload=function(){}
xhr.onerror=function(){}
xhr.send(result)}}
function createCORSRequest(method){var xhr=new XMLHttpRequest()
if('withCredentials'in xhr){xhr.open(method,url,true)
xhr.setRequestHeader('Content-Type','text/plain')}else if(typeof XDomainRequest!=='undefined'){xhr=new XDomainRequest()
xhr.open(method,url)}else{xhr=null}
return xhr}
var instance={}
instance.getResult=function(){return NewModel}
instance.getSearch=function(){return SearchModel}
instance.parse=function(){try{getResult()}catch(e){if(!searchSent){sendDataToGraphQL(null,SearchModel,querySearch)}
console.log('There was an error: '+e)}}
instance.parse()
return instance
function getResult(){getSearch()
var journeyType=getJourneyType()
NewModel.journey.journeyType=journeyType
NewModel.journey.fareTensor.journeyType=journeyType
NewModel.journey.passenger=getPassengers()
NewModel.journey.passengerDetails=getpassengerDetails()
NewModel.page=getwebPage()
getLocation()
NewModel.device=getDevice()
var fligthType=getFlightType(LOCAL_VARIABLES.ORIGIN.country.name,LOCAL_VARIABLES.DESTINATION.country.name)
NewModel.journey.flightType=fligthType
setModelCurrency()
if(journeyType==='ONE_WAY'){getFareData('OUTBOUND')
NewModel.journey.outboundFlight=getOutBound()
NewModel.journey.departureDate=NewModel.journey.outboundFlight.departureDate
if(Number.isNaN(+new Date(NewModel.journey.departureDate))){sendDataToGraphQL(null,SearchModel,querySearch)
return}
delete NewModel.journey.inboundFlight
getFareTensor('OUTBOUND',NewModel.journey.departureDate)
NewModel.journey.priceSpecification=NewModel.journey.outboundFlight.priceSpecification
NewModel.journey.fullRoute=NewModel.journey.outboundFlight.route
sendDataToGraphQL(NewModel,SearchModel,query)}else if(journeyType==='ROUND_TRIP'&&!LOCAL_VARIABLES.IS_AWARD){getFareData('OUTBOUND')
NewModel.journey.outboundFlight=getOutBound()
NewModel.journey.departureDate=NewModel.journey.outboundFlight.departureDate
if(Number.isNaN(+new Date(NewModel.journey.departureDate))){sendDataToGraphQL(null,SearchModel,querySearch)
return}
NewModel.journey.inboundFlight=getInBound()
getInBoundClasses(NewModel.journey.outboundFlight)
NewModel.journey.returnDate=NewModel.journey.inboundFlight.departureDate
if(Number.isNaN(+new Date(NewModel.journey.departureDate))){sendDataToGraphQL(null,SearchModel,querySearch)
return}
getRTPricingTensor(NewModel.journey.departureDate,NewModel.journey.returnDate)
var fullRoute=NewModel.journey.outboundFlight.route
if(NewModel.journey.inboundFlight){fullRoute=fullRoute+'|'+NewModel.journey.inboundFlight.route}
NewModel.journey.fullRoute=fullRoute
sendDataToGraphQL(NewModel,SearchModel,query)}}
function getInBoundClasses(outBound){NewModel.journey.inboundFlight.fareClass=outBound.fareClass
NewModel.journey.inboundFlight.fareClassInput=outBound.fareClassInput
NewModel.journey.inboundFlight.brandedFareClass=outBound.brandedFareClass
NewModel.journey.inboundFlight.additionalInfo=outBound.additionalInfo}
function getSearch(){try{var tripInfo=window.utag_data&&window.utag_data.searchCriteria
var journeyType=getJourneyType()
SearchModel.journeyType=journeyType
var cabin=tripInfo.cabinType
var fareClass=cabin==='ECONOMY'?'ECONOMY':'BUSINESS'
SearchModel.fareClass=fareClass
SearchModel.fareClassSearched=fareClass
var passengers=getPassengers()
SearchModel.passengerCount=passengers.count
SearchModel.passengerAdultCount=passengers.adultCount
SearchModel.passengerChildCount=passengers.childCount
SearchModel.passengerInfantCount=passengers.infantInLapCount
SearchModel.emcid=readCookie('emcid')
SearchModel.isFareAvailable=window.utag_data.searchTrips[0].flights.length>0
var webinfo=getwebPage()
SearchModel.siteEdition=webinfo.siteEdition
var deviceCategory=getDevice()
SearchModel.deviceCategory=deviceCategory.category
if(journeyType==='ROUND_TRIP'||journeyType==='ONE_WAY'){if(tripInfo&&tripInfo.flights&&tripInfo.flights[0].origin&&tripInfo.flights[0].origin&&tripInfo.flights[0].departureDate){SearchModel.originAirportIataCode=tripInfo.flights[0].origin.trim()
SearchModel.destinationAirportIataCode=tripInfo.flights[0].destination.trim()
SearchModel.departureDate=formatDate(tripInfo.flights[0].departureDate)
if(tripInfo.flights[1]){SearchModel.returnDate=formatDate(tripInfo.flights[1].departureDate)}}
SearchModel.fullRoute=SearchModel.originAirportIataCode+'>'+SearchModel.destinationAirportIataCode}}catch(error){}}
function formatDate(dateString){if(typeof dateString!=='string')return null
var dateParts=dateString.split('/')
if(dateParts.length!==3)return null
return dateParts[2]+'-'+dateParts[0]+'-'+dateParts[1]}
function getJourneyType(){var search=window.utag_data&&window.utag_data.searchCriteria
if(!search)return
var journeyType
if(search.tripType){if(search.tripType==='RT'){journeyType=LOCAL_VARIABLES.JOURNEY_TYPE.ROUND_TRIP}else if(search.tripType==='OW'){journeyType=LOCAL_VARIABLES.JOURNEY_TYPE.ONE_WAY}else if(search.tripType==='MC'){journeyType=LOCAL_VARIABLES.JOURNEY_TYPE.MULTI_CITY}}
return journeyType}
function getPassengers(){var search=window.utag_data&&window.utag_data.searchCriteria
if(!search)return
var passInfo={count:0,seniorCount:0,adultCount:0,youngAdultCount:0,childCount:0,infantInLapCount:0,infantInSeatCount:0}
var travelers=search.paxTypes
var adults=travelers.numberOfAdults+travelers.numberOfSeniors||null
var children=travelers.numberOfChildren||null
var infants=travelers.infantOnLap+travelers.numberOfInfants||null
passInfo.childCount=children||0
passInfo.infantInLapCount=infants||0
passInfo.adultCount=adults||0
passInfo.count=passInfo.childCount+passInfo.infantInLapCount+passInfo.adultCount
return passInfo}
function getpassengerDetails(){var passenger=NewModel.journey.passenger
var passDetails=[]
try{for(var key in passenger){if({}.hasOwnProperty.call(passenger,key)){if(key==='count')continue
var element=+passenger[key]
if(element>0){var detail={category:null,mappedTo:null,count:0}
switch(key){case'adultCount':detail.category='Adult 18+'
break
case'childCount':detail.category='Children 2 - 17'
break
case'infantCount':detail.category='Infant up to 2'
break
default:detail.category=key
break}
detail.mappedTo=key
detail.count=element
passDetails.push(detail)}}}
return passDetails}catch(error){return passDetails}}
function getFareTensor(bound,date){if(!BRANDCLASSES_DATA[bound])return
var boundData=BRANDCLASSES_DATA[bound].brandedClasses
var lowestbrand=BRANDCLASSES_DATA[bound].lowestBrand.brand
for(var key in boundData){if({}.hasOwnProperty.call(boundData,key)&&key!==lowestbrand){var element=boundData[key]
var additionalInfo={fields:[{name:'ProductType',value:element.product.productType},{name:'BookingCode',value:element.product.bookingCode},{name:'flightOperator',value:element.flightOperator}]}
var fareClassInput=getInputTravelCLass(element.product)
var fareClass=getFareClass(key)
NewModel.journey.fareTensor.cells.push({priceSpecification:{totalPrice:element.price},brandedFareClass:key,fareClassInput:fareClassInput,fareClass:fareClass,boundType:bound,isSoldOut:false,outboundDate:bound==='OUTBOUND'?date:null,inboundDate:bound==='INBOUND'?date:null,additionalInfo:additionalInfo})}}}
function getRTPricingTensor(depDate,retDate){if(!BRANDCLASSES_DATA.OUTBOUND)return
var boundData=BRANDCLASSES_DATA.OUTBOUND.brandedClasses
var brand=BRANDCLASSES_DATA.OUTBOUND.lowestBrand.brand
var lowestData=BRANDCLASSES_DATA.OUTBOUND.brandedClasses[brand]
for(var key in boundData){var element=boundData[key]
var fareClassInput=getInputTravelCLass(element.product)
var fareClass=getFareClass(key)
var additionalInfo={fields:[{name:'ProductType',value:element.product.productType},{name:'BookingCode',value:element.product.bookingCode},{name:'flightOperator',value:element.flightOperator}]}
NewModel.journey.fareTensor.cells.push({priceSpecification:{totalPrice:element.price,currencyCode:CURRENCY_CODE},brandedFareClass:key,fareClassInput:fareClassInput,fareClass:fareClass,boundType:'MATRIX',isSoldOut:false,outboundDate:depDate||null,inboundDate:retDate||null,additionalInfo:additionalInfo})}
NewModel.journey.priceSpecification={totalPrice:lowestData.price,currencyCode:CURRENCY_CODE}}
function getFareClass(productType){var fareClass
switch(productType){case'ECO-BASIC':case'ECONOMY':case'MIN-ECONOMY-SURP-OR-DISP':case'SPECIFIED-BOOKING-CODES':case'ECONOMY-FLEXIBLE':case'ECONOMY-UNRESTRICTED':case'ECONOMY-PROMOTION':fareClass='ECONOMY'
break
case'ECO-PREMIUM':case'ECO-PREMIUM-DISP':case'ECO-PREMIUM-FLEXIBLE':case'ECO-PREMIUM-PROMOTION':case'ECO-PREMIUM-UNRESTRICTED':case'ECO-TO-ECOPREM-UPGRADEABLE':case'ECO-PREMIUM-UPGRADEABLE':case'ECONOMY-UPGRADEABLE':fareClass='PREMIUM_ECONOMY'
break
case'MIN-BUSINESS-OR-FIRST':case'FIRST':case'MIN-BUSINESS-OR-FIRST-FLEXIBLE':case'FIRST-SURPLUS':case'FIRST-FLEXIBLE':case'MIN-BUSINESS-OR-FIRST-UNRESTRICTED':case'FIRST-UNRESTRICTED':case'FIRST-PROMOTION':fareClass='BUSINESS'
break
case'BUSINESS':case'BUSINESS-DISPLACEMENT':case'BUSINESS-FLEXIBLE':case'BUSINESS-SURPLUS':case'BUSINESS-UNRESTRICTED':case'BUSINESS-PROMOTION':case'MIN-BUSINESS-OR-FIRST-PROMOTION':fareClass='BUSINESS'
break}
return fareClass||productType}
function getInputTravelCLass(product){return product.ProductTypeDescription||product.ProductType}
function getwebPage(){var session=window.utag_data
var webInfo={name:'Search Result Page',url:null,hostName:null,languageIsoCode:null,siteEdition:null,additionalInfo:{fields:[{name:'type',value:'default'}]}}
webInfo.url=decodeURIComponent(document.URL)
webInfo.hostName=extractHostname(webInfo.url)
if(!session)return webInfo
var language
var siteEdition
language=session.lang_code
if(session.point_of_sale){siteEdition=language+'-'+session.point_of_sale}else{siteEdition=language}
webInfo.languageIsoCode=language||null
webInfo.siteEdition=siteEdition||null
return webInfo}
function extractHostname(url){if(!url)return null
var hostname
if(url.indexOf('://')>-1){hostname=url.split('/')[2]}else{hostname=url.split('/')[0]}
hostname=hostname.split(':')[0]
hostname=hostname.split('?')[0]
return hostname}
function readCookie(key){var result
return(result=new RegExp('(?:^|; )'+encodeURIComponent(key)+'=([^;]*)').exec(document.cookie))?(result[1]):null}
function getLocation(){var tripInfo=window.utag_data.searchTrips[0]
if(tripInfo==null)return
LOCAL_VARIABLES.ORIGIN.airport.code=tripInfo.origin.trim()||null
LOCAL_VARIABLES.DESTINATION.airport.code=tripInfo.destination.trim()||null
LOCAL_VARIABLES.ORIGIN.city.name=tripInfo.originCityName.trim()||null
LOCAL_VARIABLES.DESTINATION.city.name=tripInfo.destinationCityName.trim()||null
LOCAL_VARIABLES.ORIGIN.country.name=tripInfo.originCountryCode.trim()||null
LOCAL_VARIABLES.DESTINATION.country.name=tripInfo.destinationCountryCode.trim()||null}
function getDevice(){var deviceCategory
var deviceInfo={category:null,screenResolution:null,operatingSystem:null}
try{var resolution=window.screen.width*window.devicePixelRatio+'x'+window.screen.height*window.devicePixelRatio
deviceInfo.screenResolution=resolution
deviceInfo.category=deviceCategory
if(navigator.userAgent.match(/iPad|PlayBook|Silk/i)){deviceCategory='TABLET'}else if(navigator.userAgent.match(/Android|webOS|iPhone|iPod|Blackberry|IEMobile|Opera Mini/i)){deviceCategory='MOBILE'}else{deviceCategory='DESKTOP'}
deviceInfo.category=deviceCategory
return deviceInfo}catch(error){return deviceInfo}}
function getFlightType(originCountry,destinationCountry){var flightType=null
if(USA_LANGUAGE_VERSIONS.indexOf(originCountry)>=0&&USA_LANGUAGE_VERSIONS.indexOf(destinationCountry)>=0){flightType=LOCAL_VARIABLES.DOMESTIC}else{flightType=LOCAL_VARIABLES.INTERNATIONAL}
return flightType}
function setModelCurrency(){var currencyCode=window.utag_data._ccurrency
NewModel.priceSpecification.currencyCode=currencyCode
try{var siteEdition=NewModel.page&&NewModel.page.siteEdition
if(siteEdition&&siteEdition.split('-').length===2){siteEdition=siteEdition.split('-')[0]+'-'+siteEdition.split('-')[1].toLowerCase()
NewModel.priceSpecification.currencySymbol=getCurrencyFromSiteEdition(siteEdition,currencyCode)}else{NewModel.priceSpecification.currencySymbol=currencyCode}}catch(error){NewModel.priceSpecification.currencyCode=currencyCode
NewModel.priceSpecification.currencySymbol=currencyCode}
CURRENCY_CODE=NewModel.priceSpecification.currencyCode
function getCurrencyFromSiteEdition(se,curCode){switch(se){case'en-do':return'RD $'
case'en-ec':return'$'
case'en-sv':return'$'
case'en-ag':return'US $'
case'en-ar':return'AR $'
case'en-aw':return'US $'
case'en-bs':return'US $'
case'en-bb':return'BB $'
case'en-bz':return'US $'
case'en-bm':return'US $'
case'en-br':return'R$'
case'en-ca':return'CA $'
case'en-ky':return'US $'
case'en-cl':return'US $'
case'en-cn':return'Â¥'
case'en-co':return'CO $'
case'en-cr':return'US $'
case'en-gt':return'Q'
case'en-hk':return'HK $'
case'en-hn':return'US $'
case'en-jm':return'J$'
case'en-jp':return'å††'
case'en-mx':return'US $'
case'en-pa':return'$'
case'en-pe':return'US $'
case'en-pr':return'$'
case'en-tt':return'TT $'
case'en-us':return'$'
case'en-uy':return'US $'
case'en-gb':return'Â£'
case'es-pr':return'$'
case'es-us':return'$'
case'es-uy':return'US $'
case'es-ar':return'AR $'
case'es-bz':return'US $'
case'es-cl':return'US $'
case'es-co':return'CO $'
case'es-cr':return'US $'
case'es-do':return'RD $'
case'es-ec':return'$'
case'es-sv':return'$'
case'es-gt':return'Q'
case'es-hn':return'US $'
case'es-mx':return'US $'
case'es-ni':return'US $'
case'es-pa':return'$'
case'es-pe':return'US $'
case'en-at':return'â‚¬'
case'de-at':return'â‚¬'
case'en-bh':return'BD'
case'en-be':return'â‚¬'
case'fr-be':return'â‚¬'
case'en-dk':return'DKK'
case'en-fr':return'â‚¬'
case'fr-fr':return'â‚¬'
case'en-de':return'â‚¬'
case'de-de':return'â‚¬'
case'en-gr':return'â‚¬'
case'en-ie':return'â‚¬'
case'en-il':return'US $'
case'en-it':return'â‚¬'
case'en-kw':return'KD'
case'en-nl':return'â‚¬'
case'en-no':return'NOK'
case'en-pt':return'â‚¬'
case'pt-pt':return'â‚¬'
case'pt-br':return'R$'
case'en-qa':return'QR'
case'en-ru':return'Ñ€ÑƒÐ±'
case'en-es':return'â‚¬'
case'es-es':return'â‚¬'
case'en-se':return'SEK'
case'en-ch':return'CHF'
case'de-ch':return'CHF'
case'en-tr':return'TL'
case'en-ae':return'AED'
case'en-au':return'AU'
case'zh-cn':return'Â¥'
case'en-gu':return'$'
case'zh-hk':return'HK $'
case'en-in':return'Rs'
case'en-id':return'US $'
case'ja-jp':return'å††'
case'en-kr':return'â‚©'
case'en-mh':return'$'
case'en-fm':return'$'
case'en-nz':return'NZ'
case'en-mp':return'$'
case'en-pw':return'$'
case'en-ph':return'US $'
case'en-sg':return'S $'
case'en-tw':return'TW $'
case'zh-tw':return'TW $'
case'en-th':return'à¸¿'
case'en-vn':return'US $'
case'fr-ca':return'CA $'
default:return curCode}}}
function getOutBound(){return getBound('OUTBOUND')}
function getInBound(){return getBound('INBOUND')}
function getBound(bound){try{var newBound={boundType:bound,route:null,priceSpecification:null,fareClassInput:null,fareClass:null,brandedFareClass:null,departureAirportIataCode:null,arrivalAirportIataCode:null,departureDate:null,estimatedDuration:undefined,availableSeatsCount:undefined,legs:undefined,flightStopCount:undefined,isCodeshare:undefined,departureCity:{name:undefined,cityCode:null},departureCountry:{name:undefined,isoCode:null},arrivalCity:{name:undefined,cityCode:null},arrivalCountry:{name:undefined,isoCode:null},flightType:null,routeType:undefined}
var selectedDate
if(bound==='OUTBOUND'||LOCAL_VARIABLES.IS_AWARD){selectedDate=window.utag_data.searchCriteria.flights[0].departureDate}else{selectedDate=window.utag_data.searchCriteria.flights[1].departureDate}
selectedDate=formatDate(selectedDate)
if(bound==='OUTBOUND'){newBound.departureAirportIataCode=LOCAL_VARIABLES.ORIGIN.airport.code
newBound.arrivalAirportIataCode=LOCAL_VARIABLES.DESTINATION.airport.code
newBound.departureCountry=LOCAL_VARIABLES.ORIGIN.country
newBound.arrivalCountry=LOCAL_VARIABLES.DESTINATION.country
newBound.departureCity=LOCAL_VARIABLES.ORIGIN.city
newBound.arrivalCity=LOCAL_VARIABLES.DESTINATION.city}else if(bound==='INBOUND'){newBound.departureAirportIataCode=LOCAL_VARIABLES.DESTINATION.airport.code
newBound.arrivalAirportIataCode=LOCAL_VARIABLES.ORIGIN.airport.code
newBound.departureCountry=LOCAL_VARIABLES.DESTINATION.country
newBound.arrivalCountry=LOCAL_VARIABLES.ORIGIN.country
newBound.departureCity=LOCAL_VARIABLES.DESTINATION.city
newBound.arrivalCity=LOCAL_VARIABLES.ORIGIN.city}
newBound.departureDate=selectedDate
var lowestData
var fareClassInput
var fareClass
var lowestBrand
if(bound==='OUTBOUND'||LOCAL_VARIABLES.IS_AWARD){var flight=BRANDCLASSES_DATA[bound]&&BRANDCLASSES_DATA[bound].lowestBrand&&BRANDCLASSES_DATA[bound].lowestBrand.flight
newBound.flightStopCount=flight.noOfStops
newBound.estimatedDuration=formatDuration(flight.flightDuration)
lowestBrand=BRANDCLASSES_DATA[bound].lowestBrand.brand
lowestData=BRANDCLASSES_DATA[bound].brandedClasses[lowestBrand]
fareClassInput=getInputTravelCLass(lowestData.product)
fareClass=getFareClass(lowestBrand)
newBound.fareClass=fareClass
newBound.fareClassInput=fareClassInput
newBound.brandedFareClass=lowestBrand
newBound.additionalInfo={fields:[{name:'ProductType',value:lowestData.product.productType},{name:'BookingCode',value:lowestData.product.bookingCode},{name:'flightOperator',value:lowestData.flightOperator}]}}
var journeyType=NewModel.journey.journeyType
if(journeyType==='ONE_WAY'||LOCAL_VARIABLES.IS_AWARD){lowestBrand=BRANDCLASSES_DATA[bound].lowestBrand.brand
if(lowestBrand&&BRANDCLASSES_DATA[bound].brandedClasses[lowestBrand]){var priceSpecification
lowestData=BRANDCLASSES_DATA[bound].brandedClasses[lowestBrand]
fareClassInput=getInputTravelCLass(lowestData.product)
fareClass=getFareClass(lowestBrand)
if(LOCAL_VARIABLES.IS_AWARD){var taxes=lowestData.product.TaxAndFees&&lowestData.product.TaxAndFees.Amount||null
priceSpecification={totalPrice:null,currencyCode:CURRENCY_CODE,redemption:{unit:'MILES',amount:lowestData.price,taxAmount:taxes,category:fareClassInput}}}else{priceSpecification={totalPrice:BRANDCLASSES_DATA[bound].brandedClasses[lowestBrand].price||null,currencyCode:CURRENCY_CODE}}
newBound.fareClass=fareClass
newBound.fareClassInput=fareClassInput
newBound.brandedFareClass=lowestBrand
newBound.priceSpecification=priceSpecification
newBound.additionalInfo={fields:[{name:'ProductType',value:lowestData.product.productType},{name:'BookingCode',value:lowestData.product.bookingCode},{name:'flightOperator',value:lowestData.flightOperator}]}}}
var routeResult=getBoundRoute(bound,newBound.legs)
newBound.route=routeResult||null
newBound.flightType=NewModel.journey.flightType
return newBound}catch(error){throw new Error('Unable to get '+bound+'. Original message '+error.message+'\n '+error.stack)}}
function formatDuration(minutes){if(!minutes||isNaN(+minutes)){return null}else{var days=0;var hours=0;var mins=0
days=Math.floor(+minutes/24/60)
hours=Math.floor(+minutes/60%24)
mins=Math.floor(+minutes%60)
var formattedDur='PT'
if(days>0)formattedDur=formattedDur+days+'D'
if(hours>0)formattedDur=formattedDur+hours+'H'
if(mins>0)formattedDur=formattedDur+mins+'M'
return formattedDur}}
function getFareData(bound){var flights=window.utag_data.searchTrips[0].flights
var brandedClasses={}
var lowestBrand={flight:null,product:null,flightOperator:null}
var lowestPrice=Number.MAX_SAFE_INTEGER
for(var index=0;index<flights.length;index++){var flight=flights[index]
var products=flight.products
var flightOperator=flight.flightOperator
if(!products||products.length===0)continue
for(var prodIndex=0;prodIndex<products.length;prodIndex++){var product=products[prodIndex]
var productPrice=+product.amount
var brand=product.productType
if(productPrice!=null&&!Number.isNaN(productPrice)&&productPrice>0){if(lowestPrice>productPrice){lowestPrice=productPrice
lowestBrand.flight=flight
lowestBrand.product=product
lowestBrand.brand=brand
lowestBrand.flightOperator=flight.flightOperator}
if({}.hasOwnProperty.call(brandedClasses,brand)){if(brandedClasses[brand].price>productPrice){brandedClasses[brand]={price:productPrice,product:product,flightOperator:flightOperator}}}else{brandedClasses[brand]={price:productPrice,product:product,flightOperator:flightOperator}}}}}
BRANDCLASSES_DATA[bound]={lowestBrand,brandedClasses}}
function getBoundRoute(bound,legs){var route=[]
try{if(legs&&legs.length>0){for(var index=0;index<legs.length;index++){var element=legs[index]
var legRoute=element.route&&element.route.split('>')
legRoute.forEach(function(airport){if(route.indexOf(airport)<0){route.push(airport)}})}}else{var origAirport,arrAirport
if(bound==='OUTBOUND'){origAirport=LOCAL_VARIABLES.ORIGIN.airport.code
arrAirport=LOCAL_VARIABLES.DESTINATION.airport.code
route.push(origAirport)
route.push(arrAirport)}else if(bound==='INBOUND'){origAirport=LOCAL_VARIABLES.DESTINATION.airport.code
arrAirport=LOCAL_VARIABLES.ORIGIN.airport.code
route.push(origAirport)
route.push(arrAirport)}}
return route.join('>')}catch(error){return null}}})()}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[145]=='undefined'){utag.runonce.ext[145]=1;if(1){var CONST_EXTN_NAME="Optimizely KPI Tracking";Bootstrapper.processOptimizelyEvents=function(data,parsedData){var methodName="processOptimizelyEvents";var requirementName="Handle Optimizely events through callbacks";var analyticsDataObjects=[];try{if(data.category=="OptlyTestKPI"){var parseDataObj=parsedData;var params=data.params;if(params.eventLabel){parseDataObj.eventLabel=params.eventLabel;}
analyticsDataObjects.push(parseDataObj);}else{analyticsDataObjects.push({});}}catch(error){var ds="Data object",inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObjects;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[148]=='undefined'){utag.runonce.ext[148]=1;if(1){var CONST_EXTN_NAME="Uplift Pixel - Payment Page";var CONST_UPLIFT_PANEL="#up-pay-monthly-container";Bootstrapper.triggerUpliftPixel=function(){try{if(utag_data&&utag_data.lang_code&&utag_data.point_of_sale){if((utag_data.lang_code.toLowerCase()=='en'||utag_data.lang_code.toLowerCase()=='es')&&utag_data.point_of_sale.toLowerCase()=='us'){prepareDataForUpliftPixel();}}}catch(e){Bootstrapper.reportException(e);}}
function prepareDataForUpliftPixel(){var methodName="prepareDataForUpliftPixel";var requirementName="Prepare data for Uplift pixel";try{if(utag_data.upliftInfo&&utag_data.upliftInfo.tripInfo){var upliftData=utag_data.upliftInfo.tripInfo;var tripInfoToBePassed=prepareTripInfo(upliftData);var paymentDetail={};paymentDetail.mode_of_payment=getPaymentMode();paymentDetail.payment_options=[];sendUpliftPixel=function(){if(window.Uplift&&window.Uplift.Analytics&&typeof window.Uplift.Analytics.orderSubmit=="function"&&window.Uplift.Payments&&typeof window.Uplift.Payments.load=="function"){Uplift.Payments.load(tripInfoToBePassed);Uplift.Analytics.orderSubmit(tripInfoToBePassed,paymentDetail);if(typeof Bootstrapper.pixelAuditBookingPath==="function"){Bootstrapper.pixelAuditBookingPath("Uplift");}}}
sendUpliftPixel();}}catch(error){var ds="utag_data.upliftInfo.tripInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function prepareTripInfo(upliftData){var methodName="prepareTripInfo";var requirementName="Prepare tripInfo data object";var tripInfo={};try{if(upliftData){tripInfo.confirmation_code="";tripInfo.purchase_currency=upliftData.purchase_currency;tripInfo.locale=upliftData.purchase_country;tripInfo.purchase_country=upliftData.purchase_country;tripInfo.air_reservations=upliftData.air_reservations;tripInfo.order_tax_amount=upliftData.order_tax_amount;tripInfo.order_amount=upliftData.order_amount;tripInfo.add_ons=upliftData.add_ons;tripInfo.travelers=getTravelerIds(upliftData.travelers);}}catch(error){var ds="utag_data.upliftInfo.tripInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return tripInfo;}
function getTravelerIds(travelers){var methodName="getTravelerIds";var requirementName="Fetch and prepare travelers ids";var travelerIds=[];try{for(var i=0;i<travelers.length;i++){travelerIds[i]={id:travelers[i].id};}}catch(error){var ds="Uplift data object";var inputValue="Travelers array object recieved through utag_data.upliftInfo.tripInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return travelerIds;}
function getPaymentMode(){var methodName="getPaymentMode";var requirementName="Get paymentMode from DOM";var paymentMode="Pay in Full";try{if($(CONST_UPLIFT_PANEL).is(":visible")){paymentMode="Pay Monthly";}}catch(error){var ds="Uplift data object";var inputValue="Travelers array object recieved through utag_data.upliftInfo.tripInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return paymentMode;}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1'&&b['tealium_event'].toString().toLowerCase()=='Result Load'.toLowerCase())){var CONST_EXTN_NAME="Clinch Pixel - FSR Page";clinchPixel();function clinchPixel(){var methodName="clinchPixel";var requirementName="Clinch pixel";try{var pos=utag_data.point_of_sale,posList={US:!0,};if(posList[pos]){!function(c,l,e,n,t,s)
{if(c.clq)return;n=c.clq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!c._clq)c._clq=n;n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];loadClinchScript();}
(window,document,'script');clq('init','ukb86I','udd9WR','flight');clq('track','PageView');clq('track','Search');}}catch(error){var ds="utag_data";var inputValue="utag_data.point_of_sale";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function loadClinchScript(){var methodName="loadClinchScript";var requirementName="Load clinch pixel script";try{var args,clinchCid='';var dsid='';var product="ecommerce";var ver="united_3.1";var initialized=false;var jobExecutionInProcess=false;var executeJobQueue=[];var timeoutHandler;var EVENT_DELAY=3000;const DELAYED_PAGE_VIEW='DelayedPageView';var clinchPixelTypeDic={'ViewContent':"details",'ViewCategory':"category",'Search':"search",'AddToWishlist':"addToWishlist",'InitiateCheckout':"checkout",'AddPaymentInfo':"checkout",'Lead':"registration",'CompleteRegistration':"registration",'AddToCart':"addToCart",'Purchase':"purchase",'PageView':"pageView",[DELAYED_PAGE_VIEW]:"pageView",};var fbToClinchParameterDic={'search_string':"term",'content_category':"category",'price':'price','currency':"currency",'value':"amount",'checkin_date':"checkin",'checkout_date':"checkout",'city':"city",'departing_departure_date':"depart",'returning_departure_date':"return",'origin_airport':"from",'destination_airport':"to",'travel_start':"depart",'travel_end':"return",'postal_code':'postal_code','make':'make','model':'model','year':'year','state_of_vehicle':'state_of_vehicle','exterior_color':'exterior_color','transmission':'transmission','body_syle':'body_style','fuel_type':'fuel_type','drivetrain':'drivetrain','preferred_price_range':'preferred_price_range',};function getQuerystringParams(){var params={};var parser=document.createElement('a');parser.href=window.location.href;var query=parser.search.substring(1);var vars=query.split('&');for(var i=0;i<vars.length;i++){var pair=vars[i].split('=');params[pair[0]]=decodeURIComponent(pair[1])}
return params};function clqOperation(a,b,c){try{var type="";var stype="";var trkServer="trk.clinch.co";var clinchPixelIds="";var clinchCustomParams="";var content_ids=[];var paramsObjStr;if(c&&Object.prototype.toString.call(c)==='[object Object]'){paramsObjStr=encodeURIComponent(JSON.stringify(c))}
if(a==='track'){type=clinchPixelTypeDic[b];if(!b||!type){pullNextJob();return null}
if('pageView'===type&&b!==DELAYED_PAGE_VIEW){var utm_source=getQuerystringParams()['utm_source'];if(!paramsObjStr&&!utm_source){pullNextJob();return null}}
if(type==="purchase"||type==="registration"){stype=type;type="conv"}}else if(a==="trackCustom"&&b){type="Other";stype=b}else{pullNextJob();return null}
if(c!=null){if(c.subType){stype=c.subType}
if(c.content_ids!=null&&c.content_ids.length>0){content_ids=c.content_ids}else if(c.contents!=null&&c.contents.length>0){for(var productInd=0;productInd<c.contents.length;++productInd){if(c.contents[productInd]!=null&&c.contents[productInd].id!=null){content_ids.push(c.contents[productInd].id)}}}
if(content_ids.length>0){if(Array.isArray(content_ids)){clinchPixelIds=content_ids.join(',')}else{clinchPixelIds=content_ids}}
clinchCustomParams+="&ids="+clinchPixelIds;for(var fbParam in fbToClinchParameterDic){if(c[fbParam]!=null){clinchCustomParams+="&"+fbToClinchParameterDic[fbParam]+"="+c[fbParam]}}}
var newIframe=document.createElement('iframe');newIframe["src"]="//"+trkServer+"/trk?"+"cid="+clinchCid+(dsid?("&dsid="+dsid):'')+"&type="+type+(stype?("&stype="+stype):"")+(clinchCustomParams?clinchCustomParams:'')+(paramsObjStr?("&params="+paramsObjStr):'')+"&product="+product+"&referrer="+encodeURIComponent(window.location.href)+"&version="+ver+"&a="+Date.now();newIframe["style"]='display: none;';document.getElementsByTagName('body')[0].appendChild(newIframe);if(timeoutHandler){clearTimeout(timeoutHandler);timeoutHandler=null}
newIframe.onload=newIframe.onerror=pullNextJob}catch(err){console.log(err);pullNextJob()}};function pullNextJob(){setTimeout(function(){args=executeJobQueue.shift();if(args){jobExecutionInProcess=true;executeJob.apply(this,args)}else{jobExecutionInProcess=false}},50)};function executeJob(eventName){if(eventName==='init'&&!initialized){clinchCid=arguments[1];if(arguments[2].length>2){dsid=arguments[2]}
product=arguments[3]||product;if(!clinchCid){console.error("CLINCH: CID not valid on init");return}else{console.log("CLINCH: clq() init ver "+ver)}
initialized=true;pullNextJob();timeoutHandler=setTimeout(clqOperation.bind(this,'track','DelayedPageView'),EVENT_DELAY)}else if(clinchCid){clqOperation.apply(this,arguments)}};window.clq.callMethod=function(){if(executeJobQueue.length||jobExecutionInProcess){executeJobQueue.push(arguments)}else{jobExecutionInProcess=true;executeJob.apply(this,arguments)}};while(args=window.clq.queue.shift()){window.clq.apply(window.clq,args)}}catch(error){var ds="Pixel script";var inputValue="clq() method";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[150]=='undefined'){utag.runonce.ext[150]=1;if(1){var CONST_EXTN_NAME="Digital 3.0 - RTI-TI Tracking";Bootstrapper.parseShoppingReview=function(data,parseData){var requirementName="Handle interactions on Shopping review and Traveler Info page";var methodName="parseShoppingReview";var analyticsDataObject={};var analyticsData=[];try{analyticsDataObject=parseData;if(data.action=="Clicked: FareLock"){analyticsDataObject=handleFarelock(data,parseData);}else if(data.action=="Clicked: Change to Economy"){analyticsDataObject=handleUpgradeActions(data,parseData);}else if(data.params&&data.params.feature&&data.params.feature=="ATM"){analyticsDataObject=Bootstrapper.processATMEvents(data,parseData);}else if(data.action=="Clicked: Continue"){if(data.params&&data.params.feature=="Upgrades"){analyticsDataObject=processUpgradesDetails(data,parseData);}else{analyticsDataObject=handleContinueClick(data,parseData);setTimeout(function(){Bootstrapper.sendFBPixelAndCAPI("InitiateCheckout");},1500);}}
else if(data.action=="Clicked: Saved Trips"){analyticsDataObject=handleSavedTrips(data,parseData);}else if(data.action=="Page Load"){analyticsDataObject=sendAddToCart(parseData);if(typeof Bootstrapper.sendCartAbandonEvent_BookingFlow==="function"){Bootstrapper.sendCartAbandonEvent_BookingFlow(data.category);}
setTimeout(function(){if(typeof Bootstrapper.sendFBPixelAndCAPI==="function"){Bootstrapper.sendFBPixelAndCAPI("ViewContent");}},1500);setTimeout(function(){if(typeof Bootstrapper.sendTiktokPixelOnBookingPath==="function"){Bootstrapper.sendTiktokPixelOnBookingPath("AddToCart");}},1500);}else if(data.action=="Upgrades Shown"){analyticsDataObject=processUpgradesDetails(data,parseData);}else if(data.action=="Impression: KTN"||data.action=="Impression: CTN"||data.action=="Impression: Redress Number"||data.action=="Clicked: Tooltip"||data.action=="Clicked Link: Need help finding number"||data.action=="Impression: Extra Seats"||data.action=="Impression: Pet Policy"){let label=Bootstrapper.fetchFeatureAndPageName(data.params);parseData.eventLabel=label;analyticsDataObject=parseData;}else if(data.action=="Impression: SAF"){parseData.eventLabel=getLabelForSAFImpression(data);analyticsDataObject=parseData;}else if(data.action=="Clicked: SAF"){parseData.eventLabel=getLabelForSAFInterations(data);analyticsDataObject=parseData;}else if(data.action=="Clikcked: Check size"||data.action=="Checkin wheelchair successfully"){parseData.eventLabel=getLabelForCheckSize(data);analyticsDataObject=parseData;}else if(data.action=="Error Shown"){let msg=(data.params&&data.params.info&&data.params.info.errorMessage)?data.params.info.errorMessage:"--";parseData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(data.params),msg].join('|');analyticsDataObject=parseData;}
analyticsData.push(analyticsDataObject);}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsData;};function handleFarelock(data,parseData){var requirementName="Handle Farelock interactions";var methodName="handlefarelock"
try{if(data.params&&data.params.info){var fare=data.params.info.selectedFare?data.params.info.selectedFare:"--";var selectedOffer=data.params.info.offerSelected?data.params.info.offerSelected:"--";var position=data.params.info.position?data.params.info.position:"--";var marketType=Bootstrapper.getMarketTypeFromDL();var eventLabel=[selectedOffer,fare,position,marketType].join("|");parseData.eventLabel=eventLabel;}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function handleUpgradeActions(data,parseData){var requirementName="Handle Upgrade option interactions";var methodName="handleUpgradeActions";try{parseData.eventLabel=(data.params&&data.params.info&&data.params.info.upgrade_amount)?data.params.info.upgrade_amount:"--";}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function handleContinueClick(data,parseData){var requirementName="Handle Continue clicks";var methodName="handleContinueClick";try{parseData.customDimensions={};if(data.params&&data.params.info){var info=data.params.info;var travelersNeeds=info.travelersNeeds;var offers=info.offers;var eventLabel="";var marketType=Bootstrapper.getMarketTypeFromDL();var travelType=Bootstrapper.getSearchTravelType();var currency=Bootstrapper.getShoppingCartCurrencyCode();var amount=Bootstrapper.getShoppingCartTotalAmount();let flightOperatorDescription=Bootstrapper.getSelectedFlightOperator();let travelerNeedsObj;let petInformationObj;eventLabel=[marketType,travelType,currency,amount,flightOperatorDescription].join("|");if(travelersNeeds&&travelersNeeds.length>0){for(var i=0;i<travelersNeeds.length;i++){var meals=travelersNeeds[i].meals;var needs=travelersNeeds[i].needs;var assistanceMessage=travelersNeeds[i].assistanceMessage;let extraSeats=travelersNeeds[i].extraSeats;let accomodations=travelersNeeds[i].accomodations;if(meals.length>0||needs.length>0||assistanceMessage.length>0||extraSeats||accomodations){let travelerNeed=JSON.stringify(travelersNeeds[i]);travelerNeedsObj=travelerNeedsObj?[travelerNeedsObj,travelerNeed].join(","):travelerNeed;}}
eventLabel=travelerNeedsObj?[eventLabel,travelerNeedsObj].join("|"):eventLabel;}
if(offers&&offers.length>0){let offerInfo=Bootstrapper.getOfferNameForFlightSelection(data.params);eventLabel=[eventLabel,offerInfo].join("|");if(Bootstrapper.isEnvironmentProd()){parseData.customDimensions[Bootstrapper.UTAG_CONST.shoppingOfferProd]=Bootstrapper.getOfferName(data.params);}else{parseData.customDimensions[Bootstrapper.UTAG_CONST.shoppingOfferQA]=Bootstrapper.getOfferName(data.params);}}
parseData.customDimensions[Bootstrapper.UTAG_CONST.upgrade_type]=Bootstrapper.getUpgradeType();if(info.petInformation){petInformationObj=processPetTracking(info.petInformation);if(petInformationObj){eventLabel=[eventLabel,petInformationObj].join("|");}}
parseData.eventLabel=eventLabel;}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function handleSavedTrips(data,parseData){var requirementName="Handle interactions with saved trips";var methodName="handleSavedTrips";try{parseData.eventCategory="Saved Trip Interactions";parseData.eventAction="Click";}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function sendAddToCart(analyticsData){var requirementName="Send add to cart ecommerce call on new RTI-TI";var methodName="sendAddToCart";var analyticsData={};try{var eventData=prepareDataForEvent();analyticsData.eventCategory="ecommerce";analyticsData.eventAction="add to cart";analyticsData.tealiumEvent=analyticsData.eventAction;analyticsData.eventLabel=eventData.legsInfo;analyticsData.eventName="add_to_cart";analyticsData.ecommerceProducts=eventData.ecommerceProducts;analyticsData.customDimensions={};analyticsData.customDimensions[Bootstrapper.UTAG_CONST.upgrade_type]=Bootstrapper.getUpgradeType();}catch(error){var ds="Data from argument";var inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsData;}
function prepareDataForEvent(){var requirementName="Prepare event label for add to cart event";var methodName="prepareDataForEvent";var eventData=[];try{var trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>0){eventData.legsInfo="";eventData.ecommerceProducts=Bootstrapper.resetEEProductArray({});for(var i=0;i<trips.length;i++){eventData.legsInfo=Bootstrapper.prepareLOFData(trips[i],i,eventData.legsInfo);eventData.ecommerceProducts=Bootstrapper.prepareEcommerceProducts(trips[i],i+1,eventData.ecommerceProducts);}}}catch(error){var ds="Data Layer";var inputValue="utag_data.selectedTrips";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return eventData;}
function processUpgradesDetails(data,parseData){var requirementName="Prepare lable for upgrades shown";var methodName="processUpgradesDetails";var label;try{if(data.params&&data.params.info){var info=data.params.info;var selectedTrips=info.selectedTrips;if(selectedTrips){for(var i=0;i<selectedTrips.length;i++){var upgradeOptions=processUpgradeOptionsInfo(selectedTrips[i]);if(i==0){label="Trip:"+([i+1,upgradeOptions].join("|"));}else{var tripInfo="Trip:"+([i+1,upgradeOptions].join("|"));label=[label,tripInfo].join("|");}}}
parseData.eventLabel=label;}
parseData.customDimensions={};parseData.customDimensions[Bootstrapper.UTAG_CONST.upgrade_type]=Bootstrapper.getUpgradeType();}catch(error){var ds="callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function processUpgradeOptionsInfo(selectedTrip){var requirementName="Process upgrade options";var methodName="processUpgradeOptionsInfo";var segmentInfo;try{var upgradeOptions=selectedTrip.upgradeOptions;if(upgradeOptions){for(var i=0;i<upgradeOptions.length;i++){var segments=processSegments(upgradeOptions[i].segments);segmentInfo=(i==0)?segments:[segmentInfo,segments].join("|");}}}catch(error){var ds="callback";var inputValue=JSON.stringify(selectedTrip);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return segmentInfo;}
function processSegments(segments){var requirementName="process segment details";var methodName="processSegments";var segmentsInfo;var upgradeDetails;try{if(segments){for(var i=0;i<segments.length;i++){var segment=segments[i];var upgradesInfo=segment.upgrades;if(upgradesInfo){for(var j=0;j<upgradesInfo.length;j++){var upgradeCode=upgradesInfo[j].upgradeCode;var miles=(upgradesInfo[j].miles>-1)?upgradesInfo[j].miles:"--";if(upgradeCode=="NOUPGRADE"){var origin=segment.origin||"--";var destination=segment.destination||"--";upgradeDetails="Upgrade:"+([j+1,upgradeCode,miles,origin,destination].join("|"));}else{upgradeDetails="Upgrade:"+([j+1,upgradeCode,miles].join("|"));}
upgradeDetails=(j==0)?upgradeDetails:[upgradeDetails,upgradeCode].join("|");}}
if(i==0){segmentsInfo="Segment:"+[i+1,upgradeDetails].join("|");}else{var info="Segment:"+[i+1,upgradeDetails].join("|");segmentsInfo=[segmentsInfo,info].join("|");}}}}catch(error){var ds="callback";var inputValue=JSON.stringify(segments);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return segmentsInfo;}
function processOffers(label,offers){let requirementName="Process offers";let methodName="processOffers";try{for(const offer of offers){let offerName=offer.name||"--";let originalPrice=offer.originalPrice||"--";let offerPrice=offer.offerPrice||"--";let currency=offer.currency||"--";let offerInfo=[offerName,originalPrice,offerPrice,currency].join("|");label=[label,offerInfo].join("|");}}catch(error){let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return label;}
function getLabelForSAFImpression(data){let requirementName="Get label for SAF Impression";let methodName="getLabelForSAFImpression";let label;try{if(data.params&&data.params.info){let safOptions=data.params.info.safOptions||"--";let currency=data.params.info.currency||"--";safOptions="["+safOptions+"]";label=[safOptions,currency].join("|");}}catch(error){let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return label;}
function getLabelForSAFInterations(data){let requirementName="Get label for SAF interactions";let methodName="getLabelForSAFInterations";let label;try{if(data.params&&data.params.info){let amount=data.params.info.amount||"--";let currency=data.params.info.currency||"--";let checked=(data.params.info.checked&&data.params.info.checked==true)?"Y":"N";label=[amount,currency,checked].join("|");}}catch(error){let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return label;}
function getLabelForCheckSize(data){let requirementName="Get label for check size click";let methodName="getLabelForCheckSize";let label;try{if(data.params&&data.params.info){let wheelchairPowerType=data.params.info.wheelchairPowerType||"--";let unit=data.params.info.unit||"--";let width=data.params.info.width||"--";let height=data.params.info.height||"--";label=[wheelchairPowerType,unit,width,height].join("|");}}catch(error){let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return label;}
function processPetTracking(petInformation){let requirementName="Process pet in cabin tracking";let methodName="processPetTracking";let petInformationObj;try{if(petInformation&&petInformation.length>0){for(const element of petInformation){let typeOfAnimal=element.typeOfAnimal||"--";let petWeight=element.petWeight||0;let petData=[typeOfAnimal,petWeight].join("|");petInformationObj=petInformationObj?[petInformationObj,petData].join(","):petData;}}}catch(error){let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return petInformationObj;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[156]=='undefined'){utag.runonce.ext[156]=1;if(1){var CONST_EXTN_NAME="Digital 3.0 - Preorder Meal";var DOUBLE_DASH='--';Bootstrapper.processPreorderMeals=function(data,parseData){var requirementName="Tracking of preorder meal interaction";var methodName="processPreorderMeals";var analyticsDataObject={};var analyticsData=[];try{analyticsDataObject=parseData;if(data.action=="Clicked link: Add snacks & beverages"||data.action=="Clicked: Continue to checkout"||data.action=="Clicked: Cancel"||data.action=="Clicked link: Select your meal"||data.action=="Clicked link: Add meal"){analyticsDataObject.eventLabel=prepareELForPreorderInteraction(data);}else if(data.action=="Preorder meal purchase successful"){var pageName=data.params&&data.params.pageName?data.params.pageName:DOUBLE_DASH;analyticsDataObject.eventLabel=pageName;}else if(data.action=="Clicked: Save and continue"){analyticsDataObject=handleSaveAndContinue(data,parseData);}else if(data.action=="Page Load"){analyticsDataObject={};}else if(data.action=="Pre-order Failure"){analyticsDataObject=preorderFailureHandle(data,parseData);}
analyticsData.push(analyticsDataObject);}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsData;}
function prepareELForPreorderInteraction(data){var requirementName="Prepare Event label for preorder meal interaction";var methodName="prepareELForPreorderInteraction";try{var label;if(data.params&&data.params.info){var pageName=data.params.pageName?data.params.pageName:DOUBLE_DASH;var info=data.params.info;var origin=info.origin?info.origin:DOUBLE_DASH;var destination=info.destination?info.destination:DOUBLE_DASH;var departureDate=info.departureDate?info.departureDate:DOUBLE_DASH;let isEditOperation=info.isEditOperation&&info.isEditOperation===true?"Y":"N";label=[pageName,origin,destination,departureDate,isEditOperation].join('|');}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function handleSaveAndContinue(data,parseData){var requirementName="Tracking of preorder meal interaction";var methodName="handleSaveAndContinue";try{if(data.params&&data.params.info){var label=prepareELForPreorderInteraction(data);parseData.eventLabel=[label,fetchTravelerInfo(data.params.info)].join('|');}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function fetchTravelerInfo(info){var requirementName="Fetch traveler information from ";var methodName="fetchTravelerInfo";var label=DOUBLE_DASH;try{if(info.travelers){var travelers=info.travelers
for(var i=0;i<travelers.length;i++){var pax=travelers[i].pax?travelers[i].pax:DOUBLE_DASH;var eddCode=travelers[i].eddCode?travelers[i].eddCode:DOUBLE_DASH;var selectedMeal=travelers[i].selectedMeal?travelers[i].selectedMeal:DOUBLE_DASH;var travelData=[pax,eddCode,selectedMeal].join('|');label=i==0?travelData:[label,travelData].join(',');}
label='['+label+']';}}catch(error){var ds="Callback";var inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function preorderFailureHandle(data,parseData){var requirementName="Tracking of preorder payment failure";var methodName="preorderFailureHandle";try{if(data.params&&data.params.info){var errorCode=data.params.info.errorCode?data.params.info.errorCode:DOUBLE_DASH;var errorMessage=data.params.info.errorMessage?data.params.info.errorMessage:DOUBLE_DASH;parseData.eventLabel=[errorCode,errorMessage].join('|');}}catch(error){var ds="Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event']=='Result Load'&&b['flight_segment_index']=='1'&&/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname']))){var CONST_EXTN_NAME="Sojern Pixel - FSR Page";sendSojernPixel();function sendSojernPixel(){var requirementName="Send Sojern pixel";var methodName="sendSojernPixel";try{if(utag_data&&utag_data.searchCriteria){var pixelURL='https://pixel.sojern.com/pixel/img/76586?p_v=1&f_v=v3_image&vid=air';pixelURL+=prepareSojernPixelData();Bootstrapper.imageRequest(pixelURL);}}catch(error){var ds="utag_data.searchCriteria";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function prepareSojernPixelData(){var requirementName="Prepare data for sojern pixel";var methodName="prepareSojernPixelData";var pixelData="";try{var fd1,fa1,fc2,fs2,fn2,fa2,fc1,fs1,fn1;if(utag_data.searchCriteria.flights){var flight=utag_data.searchCriteria.flights;if(flight&&flight.length>0){fa1=flight[0].origin;fa2=flight[0].destination;fd1=Bootstrapper.getDate(utag_data.searchCriteria.flights[0].departureDate,"-");fc2=getDataFromSearchTrip("originCityName");fc2=(fc2&&fc2.split(",").length>0&&fc2.split(",")[0]?fc2.split(",")[0]:"--");fs2=getDataFromSearchTrip("originStateCode");fn2=getDataFromSearchTrip("originCountryCode");fc1=getDataFromSearchTrip("destinationCityName");fc1=(fc1&&fc1.split(",").length>0&&fc1.split(",")[0]?fc1.split(",")[0]:"--");fs1=getDataFromSearchTrip("destinationStateCode");fn1=getDataFromSearchTrip("destinationCountryCode");pixelData="&fd1="+fd1+"&fa1="+fa1+"&fc2="+fc2+"&fs2="+fs2+"&fn2="+fn2+"&fa2="+fa2
+"&fc1="+fc1+"&fs1="+fs1+"&fn1="+fn1}}}catch(error){var ds="Data layer";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}
return pixelData}
function getDataFromSearchTrip(keyType){var requirementName="Fetch data from search trip";var methodName="getDataFromSearchTrip";var info="--"
try{if(utag_data&&utag_data.searchTrips&&utag_data.searchTrips.length>0){var searchTrip=utag_data.searchTrips[0];info=searchTrip[keyType]?searchTrip[keyType]:"--";}}catch(error){var ds="Data layer object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}
return info;}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/us\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['tealium_event']=='Result Load'&&b['travelType']=='Revenue'&&b['flight_segment_index']=='1')){var CONST_EXTN_NAME="Digital 3.0 - Criteo  Pixel - FSR";var CONST_REQ_NAME="Criteo Pixel Tracking for FSR";var DOUBLE_DASH="--";function fetchDeviceType(){var methodName='fetchDeviceType',deviceType=DOUBLE_DASH;try{deviceType=/iPad/.test(navigator.userAgent)?"t":/Mobile|iP(hone|od)|Android | BlackBerry | IEMobile | Silk /.test(navigator.userAgent)?"m":"d";}
catch(e){var ds="navigator.userAgent",input_value="undefined",requirementName="fetch device type from browser User Agent";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,e.message,e,ds,input_value,methodName)}
return deviceType;}
function criteoPixel(){var methodName="criteoPixel";try{if(!window.criteo_q){(function(){var s=document.getElementsByTagName("script")[0];var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src="//static.criteo.net/js/ld/ld.js";s.parentNode.insertBefore(b,s);})();}
_criteo_account_id="67016";window.criteo_q=window.criteo_q||[];var deviceType=fetchDeviceType();var checkinDate=Bootstrapper.getFlightSearchDepartureDate(1)!=DOUBLE_DASH?Bootstrapper.getDate(Bootstrapper.getFlightSearchDepartureDate(1),"-"):DOUBLE_DASH;var checkoutDate=Bootstrapper.getFlightSearchDepartureDate(2)!=DOUBLE_DASH?Bootstrapper.getDate(Bootstrapper.getFlightSearchDepartureDate(2),"-"):DOUBLE_DASH;var adultCount=0;var childrenCount=0;var infantCount=0;var flightID=Bootstrapper.getFlightSearchOrigin(1)+"-"+Bootstrapper.getFlightSearchDestination(1);if(utag_data.searchCriteria.paxTypes){var paxTypes=utag_data.searchCriteria.paxTypes;var numberOfAdults=paxTypes.numberOfAdults?paxTypes.numberOfAdults:adultCount;var numberOfSeniors=paxTypes.numberOfSeniors?paxTypes.numberOfSeniors:adultCount;adultCount=numberOfAdults+numberOfSeniors;var numberOfInfants=paxTypes.numberOfInfants?paxTypes.numberOfInfants:infantCount;var infantOnLap=paxTypes.infantOnLap?paxTypes.infantOnLap:infantCount;infantCount=numberOfInfants+infantOnLap;childrenCount=paxTypes.numberOfChildren?paxTypes.numberOfChildren:childrenCount;}
window.criteo_q.push({event:"setAccount",account:_criteo_account_id},{event:"setSiteType",type:deviceType},{event:"viewSearch",checkin_date:checkinDate,checkout_date:checkoutDate,nbra:adultCount,nbrc:childrenCount,nbri:infantCount},{event:"viewItem",item:flightID});}catch(error){var ds="utag object",input_value="utag_data.searchCriteria";Bootstrapper.dataObject.initiateGapTracking(CONST_REQ_NAME,CONST_EXTN_NAME,error.message,error,ds,input_value,methodName);}}
criteoPixel();}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[162]=='undefined'){utag.runonce.ext[162]=1;if(1){var CONST_EXTN_NAME="Digital 3.0 - SVAN Interactions";Bootstrapper.processSVANEvent=function(data,parsedData){var requirementName="Process interactions for SVAN feature";var methodName="processSVANEvent";var analyticsData=[];try{if(data.params&&data.params.info){var info=data.params.info;parsedData.eventLabel=info.originPod?info.originPod:"--";}
analyticsData.push(parsedData);}catch(error){var ds="Data object recieved from callback";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsData;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[168]=='undefined'){utag.runonce.ext[168]=1;if(1){var CONST_EXTN_NAME="Live Person Chat Support";var GA_Category="Chat Support";var loop=0;var prevData='';function handleLPEvents(data,eventInfo){var methodName='handleLPEvents';var requirementName="Handle Live Person Chat Event binding";try{window.dispatchEvent(new CustomEvent("lpTagEventsListener",{'detail':{'data':data,'eventInfo':eventInfo}}));if(eventInfo.appName=="LP_OFFERS"&&eventInfo.eventName!="OFFER_IMPRESSION"&&eventInfo.eventName!="OFFER_CLICK"){trackChatButtonState(data,eventInfo);}else if(eventInfo.appName=="lpUnifiedWindow"){if(eventInfo.eventName=="state"&&JSON.stringify(data)!=JSON.stringify(prevData)){trackChatWindowState(data,eventInfo);}
else if(eventInfo.eventName=="maximized"||eventInfo.eventName=="minimized"||eventInfo.eventName=="windowClosed"){trackChatWindowEvent(eventInfo);}}
prevData=data;}catch(error){var ds="Live Person eventInfo"
var inputValue="eventInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function lpTagEventsBind(){var methodName='lpTagEventsBind';var requirementName="Bind lpTag events";try{if(loop<=50){setTimeout(function(){if(window.lpTag&&window.lpTag.events){lpTag.events.bind("lpUnifiedWindow","state",handleLPEvents);lpTag.events.bind("lpUnifiedWindow","maximized",handleLPEvents);lpTag.events.bind("lpUnifiedWindow","minimized",handleLPEvents);lpTag.events.bind("lpUnifiedWindow","windowClosed",handleLPEvents);lpTag.events.bind("LP_OFFERS","START",handleLPEvents);lpTag.events.bind("LP_OFFERS","OFFER_DISPLAY",handleLPEvents);lpTag.events.bind("LP_OFFERS","OFFER_IMPRESSION",handleLPEvents);lpTag.events.bind("LP_OFFERS","OFFER_CLICK",handleLPEvents);lpTag.events.bind("LP_OFFERS","OFFER_TIMEOUT",handleLPEvents);lpTag.events.bind("LP_OFFERS","OFFER_DECLINED",handleLPEvents);lpTag.events.bind("LP_OFFERS","OFFER_REMOVE",handleLPEvents);}
else{loop=loop+1;lpTagEventsBind();}},200);}else{loop=0;return;}}catch(error){var ds="Live Person events"
var inputValue="lpTag";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
lpTagEventsBind();function trackChatButtonState(data,eventInfo){var methodName='trackChatButtonState';var requirementName="Track Live Person chat window state";try{if(eventInfo.eventName){var eventAction=eventInfo.appName+": "+eventInfo.eventName;var eventLabel="--";if(data){var state=data.state?data.state:"--";var confKey=data.confKey?data.confKey:"--";var tglName=data.tglName?data.tglName:"--";var engagementName=data.engagementName?data.engagementName:"--";eventLabel=[state,confKey,tglName,engagementName].join('|');}
Bootstrapper.sendGAEvent(GA_Category,eventAction,eventLabel);}}catch(error){var ds="Live Person eventInfo"
var inputValue="eventInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function trackChatWindowEvent(eventInfo){var methodName='trackChatWindowEvent';var requirementName="Track Chat Window Event";try{if(eventInfo.eventName){var eventAction=eventInfo.appName+": "+eventInfo.eventName;Bootstrapper.sendGAEvent(GA_Category,eventAction);}}catch(error){var ds="Live Person eventInfo"
var inputValue="eventInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function trackChatWindowState(data,eventInfo){var methodName='trackChatWindowState';var requirementName="Track Chat Conversation State";try{if(eventInfo.eventName){var eventAction=eventInfo.appName+": "+eventInfo.eventName;if(data&&data.state!="init"&&data.state!="chatting"&&data.state!="waiting"){var eventLabel=JSON.stringify(data);Bootstrapper.sendGAEvent(GA_Category,eventAction,eventLabel)}}}catch(error){var ds="Live Person eventInfo"
var inputValue="eventInfo";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[176]=='undefined'){utag.runonce.ext[176]=1;if(1){var CONST_EXTN_NAME="Bundle Purchase Tracking";var CONST_DOUBLE_DASH="--";function trackBundlePurchases(pageName){var requirementName="Track bundle purchases";var methodName="trackBundlePurchases";var CONST_CSS_AA_TITLE=".app-components-AwardAccelerator-PurchaseSummary-styles__divLeft--3SDi8.app-components-AwardAccelerator-PurchaseSummary-styles__offerTitle--3Jb9w";var CONST_CSS_AA_AMOUNT=".app-components-AwardAccelerator-PurchaseSummary-styles__amount--1CRa-";var CONST_CSS_PA_TITLE=".app-components-VerticalShoppingCart-styles__totalBlock--183-O.atm-u-typography-preset-4--bold.atm-u-padding-top-medium.atm-u-margin-top-medium .atm-u-padding-left-large";var CONST_CSS_PA_AMOUNT=".app-components-PremierAccess-PurchaseSummaryDetails-styles__offerLabel--veSZl";var CONST_CSS_TI_TITLE=".app-components-PremierAccess-PurchaseSummaryDetails-styles__offerLabel--veSZl";var CONST_CSS_TI_AMOUNT=".app-components-VerticalShoppingCart-styles__totalBlock--183-O.atm-u-typography-preset-4--bold.atm-u-padding-top-medium.atm-u-margin-top-medium .atm-u-padding-left-large";var CONST_CSS_BUNDLES_TITLE=".app-components-VerticalShoppingCart-styles__divLeft--YG7Kl";var CONST_CSS_BUNDLES_AMOUNT=".app-components-VerticalShoppingCart-styles__totalBlock--183-O.atm-u-typography-preset-4--bold.atm-u-padding-top-medium.atm-u-margin-top-medium .atm-u-padding-left-large";var analyticsDataObject={};try{var bundleTitle,bundlePrice;if(pageName==Bootstrapper.pageNames.AwardAccelerator){bundleTitle=getBundleTitle(CONST_CSS_AA_TITLE);bundlePrice=getBundleTotalPrice(CONST_CSS_AA_AMOUNT);}else if(pageName==Bootstrapper.pageNames.PremierAccess){bundleTitle=getBundleTitle(CONST_CSS_PA_TITLE);bundlePrice=getBundleTotalPrice(CONST_CSS_PA_AMOUNT);}else if(pageName==Bootstrapper.pageNames.TripInsurance){bundleTitle=getBundleTitle(CONST_CSS_TI_TITLE);bundlePrice=getBundleTotalPrice(CONST_CSS_TI_AMOUNT);}else if(pageName==Bootstrapper.pageNames.Bundles){bundleTitle=getBundleTitle(CONST_CSS_BUNDLES_TITLE);bundlePrice=getBundleTotalPrice(CONST_CSS_BUNDLES_AMOUNT);}
var label=[bundleTitle,bundlePrice].join("|");analyticsDataObject.eventCategory="Ancillary Purchases";analyticsDataObject.eventAction="Purchase Success";analyticsDataObject.tealiumEvent=analyticsDataObject.eventAction;analyticsDataObject.eventLabel=label;}catch(error){var ds="Data object recieved from callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return analyticsDataObject;}
function getBundleTitle(titleCSS){var requirementName="Fetch bundle title";var methodName="getBundleTitle";var bundleTitle=CONST_DOUBLE_DASH;try{if($(titleCSS).length>0){bundleTitle=($(titleCSS).text())?$(titleCSS).text():CONST_DOUBLE_DASH;}}catch(error){var ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return bundleTitle;}
function getBundleTotalPrice(priceCSS){var requirementName="Fetch bundle total";var methodName="getBundleTotalPrice";var bundlePrice=CONST_DOUBLE_DASH;try{if($(priceCSS).length>0){bundlePrice=($(priceCSS).text())?$(priceCSS).text():CONST_DOUBLE_DASH;}}catch(error){var ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return bundlePrice;}
Bootstrapper.checkForBundlePurchases=function(data){var requirementName="Check for bundle purchses";var methodName="checkForBundlePurchases";try{if(data&&data.action&&data.action.name&&(isAncillaryPurchasesName(data.action.name))){setTimeout(function(){var analyticsData=trackBundlePurchases(data.action.name);Bootstrapper.setUtagLinkForDOMEvent(analyticsData);},1000);}}catch(error){var ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}};function isAncillaryPurchasesName(name){var requirementName="Check for specific bundles";var methodName="isAncillaryPurchases";var isAncillaryPurchases=false;try{if(name==Bootstrapper.pageNames.Bundles||name==Bootstrapper.pageNames.AwardAccelerator||name==Bootstrapper.pageNames.TripInsurance||name==Bootstrapper.pageNames.PremierAccess){isAncillaryPurchases=true;}}catch(error){var ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return isAncillaryPurchases;}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1'&&b['tealium_event']=='Recent Searches')){var CONST_EXTN_NAME="Centro Pixel - Base Code";(function loadCentroPixel(){try{!function(l,r){l.cntrUpTag={pixelserv:"https://pixel.sitescout.com",sync:function(){var e=l.cntrUpTag.pixelserv+"/dmp/asyncPixelSync",n=r.createElement("iframe");function t(){r.body.appendChild(n);var t=n.contentWindow.document;t.open().write("<body onload=\"window.location.href='"+e+"'\">"),t.close()}(n.frameElement||n).style.cssText="width: 0; height: 0; border: 0; display: none !important;",n.src="javascript:false",r.body?t():r.addEventListener?r.addEventListener("DOMContentLoaded",t):r.attachEvent("onreadystatechange",function(){"complete"===r.readyState&&t()})},track:function(t,e){var n=l.cntrUpTag.pixelserv,r=l[t]||{};r.hasOwnProperty("event_name")||(t.event_name&&(r.event_name=t.event_name));r.hasOwnProperty("cntr_url")||(r.cntr_url=l.cntrUpTag.cntrUrl);var c,a=[];for(var o in r)r.hasOwnProperty(o)&&a.push(encodeURIComponent(o)+"="+encodeURIComponent(r[o]));"undefined"==typeof Storage||!1===l.cntrUpTag.cookieless||(c=JSON.parse(l.localStorage.getItem("cntr_attr"))||[])&&c.length&&c.forEach(function(t){var e="cntr_clickAuctionId="+encodeURIComponent(t.aid);a.indexOf(e)<0&&a.push(e)});var i=a.join("&"),s=n+"/up/"+e+(i?"?"+i:"");(new Image).src=s},cntrUrl:"",cookieless:!0};var t,e,n,c,a,o,i,s=r.currentScript;if(!s)
for(var p=r.getElementsByTagName("script"),d=p.length-1;0<=d;d--)
if(/\/up.js\?/.test(p[d].src)){s=p[d];break}try{l.cntrUpTag.cntrUrl=top.location.href}catch(t){l.cntrUpTag.cntrUrl=l.location!==l.parent.location?r.referrer:r.location.href}
function g(t,e){var n=new RegExp("[?&]"+e+"=([^&]+)&?"),r=t.match(n);return r&&r[1]||null}
s&&("1"===g(e=0<=(t=s.src.indexOf("?"))?s.src.slice(t):"","um")&&l.cntrUpTag.sync(),n=g(e,"ck")||"cntr_auctionId",c=g(l.cntrUpTag.cntrUrl,n),"undefined"!=typeof Storage&&"0"!==g(e,"ca")&&c?(a=JSON.parse(l.localStorage.getItem("cntr_attr"))||[],o=(new Date).getTime()-7776e6,(i=a.filter(function(t){return t.ts>o})).push({ts:(new Date).getTime(),aid:c}),l.localStorage.setItem("cntr_attr",JSON.stringify(i))):l.cntrUpTag.cookieless=!1)}(window,document,navigator);}catch(error){var methodName="loadCentroPixel",requirementName="Load Centro Pixel",ds="Centro Script",inputValue="cntrUpTag";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName,inputValue);}})();}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['trigger_point']=='Result Load'&&b['flight_segment_index']=='1')){let CONST_EXTN_NAME="Tiktok Pixel - FSR Page";let isPixelFired=false;let eventParams={};tiktokPixel();function tiktokPixel(){let methodName="tiktokPixel";let requirementName="Tiktok Pixel";try{if(!isPixelFired&&typeof window.ttq=="object"&&typeof window.ttq.track=="function"){eventParams=getParamsObj();ttq.track("Search",eventParams);isPixelFired=true;}}catch(error){let ds="Utag data object";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function getParamsObj(){let methodName="getParamsObj";let requirementName="Get params object";let params={};try{params.content_type="product";params.content_id=[Bootstrapper.getFlightSearchOrigin(1),Bootstrapper.getFlightSearchDestination(1)].join(":");params.flight_class=utag_data.selectedCabin||"--";params.currency=Bootstrapper.getCurrency();params.quantity=Bootstrapper.getPaxCount();params.departing_airport=Bootstrapper.getFlightSearchOrigin(1);if(Bootstrapper.getTripTypeCodes()!="OW"&&utag_data.searchCriteria&&utag_data.searchCriteria.flights&&utag_data.searchCriteria.flights.length>0){params.returning_airport=Bootstrapper.getFlightSearchDestination(1);params.returning_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(utag_data.searchCriteria.flights.length),"yyyy-MM-dd");}
params.departing_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(1),"yyyy-MM-dd");params.content_category="Flight";let paxDetails=getPAXDetails();params.num_people=paxDetails.num_people;params.num_children=paxDetails.num_children;}catch(error){let ds="Bootstrapper.dataObject";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return params;}
function getPAXDetails(){let methodName="getParamsObj";let requirementName="Get params object";let paxDetails={};try{if(utag_data.searchCriteria&&utag_data.searchCriteria.paxTypes){let paxTypes=utag_data.searchCriteria.paxTypes;let numberOfAdults=paxTypes.numberOfAdults?paxTypes.numberOfAdults:0;let numberOfSeniors=paxTypes.numberOfSeniors?paxTypes.numberOfSeniors:0;paxDetails.num_people=numberOfAdults+numberOfSeniors;paxDetails.num_children=paxTypes.numberOfChildren?paxTypes.numberOfChildren:0;}}catch(error){let ds="Bootstrapper.dataObject";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return paxDetails;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="Tiktok Pixel - Booking Confirmation Page";Bootstrapper.sendTiktokPixel=function(){let methodName="sendTiktokPixel";let requirementName="Tiktok Pixel";try{if(typeof Bootstrapper.sendTiktokPixelOnBookingPath=="function"){Bootstrapper.sendTiktokPixelOnBookingPath("Purchase");}}catch(error){let ds="Utag data object";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}};}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1'&&b['tealium_event']=='Recent Searches')){var CONST_EXTN_NAME='Centro Pixel on FSR';(function sendCentroPixel(){var pos;var posList={US:!0};try{pos=utag_data.point_of_sale;if(posList[pos]&&typeof window.cntrUpTag=="object"&&typeof window.cntrUpTag.track=="function"&&Bootstrapper.fetchFlightSegmentIndex()==1){var daysRemaining=Bootstrapper.getNumDaysTilTravel(1);triggerCentroPixel(daysRemaining);}}catch(error){var methodName="sendCentroPixel",requirementName="Send Centro pixel",ds="utag object",inputValue="utag_data.searchCriteria";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}})();function triggerCentroPixel(daysRemaining){try{var cntrData={};if(daysRemaining&&daysRemaining!="--"){var apwValue='['+daysRemaining+']';cntrData.event_name=apwValue;}
cntrUpTag.track(cntrData,'47dd41d4e6169f83');}catch(error){var methodName="triggerCentroPixel",requirementName="Trigger centro pixel",ds="Centro Object",inputValue="cntrUpTag";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var CONST_EXTN_NAME="Digital 3.0 - UMNR Custodians";Bootstrapper.processUMNREvents=function(data,parsedData){var analyticsDataObj=[];try{var action=data.action;var params=data.params;if(action=="Clicked: Continue"){parsedData.eventLabel=Bootstrapper.fetchFeatureAndPageName(params);}else if(action=="Error shown"){parsedData.eventLabel=[Bootstrapper.fetchFeatureAndPageName(params),Bootstrapper.prepareLabelForErrorShown(params)].join('|');}
analyticsDataObj.push(parsedData);}catch(error){var methodName="processUMNREvents";var requirementName="Process UMNR Events";var ds="UMNR Custodians Callback";var inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObj;};}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[197]=='undefined'){utag.runonce.ext[197]=1;if(/(^(.*\/.*\/book-flight\/united-award-travel)$)/ig.test(b['dom.pathname'])){var CONST_EXTN_NAME="Digital 3.0-Basis Pixel";var baseScript;sendBasisPixel();function sendBasisPixel(){var requirementName="Send Basis pixel on united award search page";var methodName="sendBasisPixel";try{baseScript=loadBasisPixelScript();setTimeout(function(){if(cntrUpTag){cntrUpTag.track('cntrData','47dd41d4e6169f83');}},1000);}catch(error){var ds="Base script";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function loadBasisPixelScript(){var requirementName="Load basis pixel lib";var methodName="loadBasisPixelScript";try{!function(l,r){l.cntrUpTag={pixelserv:"https://pixel.sitescout.com",sync:function(){var e=l.cntrUpTag.pixelserv+"/dmp/asyncPixelSync",n=r.createElement("iframe");function t(){r.body.appendChild(n);var t=n.contentWindow.document;t.open().write("<body onload=\"window.location.href='"+e+"'\">"),t.close()}(n.frameElement||n).style.cssText="width: 0; height: 0; border: 0; display: none !important;",n.src="javascript:false",r.body?t():r.addEventListener?r.addEventListener("DOMContentLoaded",t):r.attachEvent("onreadystatechange",function(){"complete"===r.readyState&&t()})},track:function(t,e){var n=l.cntrUpTag.pixelserv,r=l[t]||{};r.hasOwnProperty("cntr_url")||(r.cntr_url=l.cntrUpTag.cntrUrl);var c,a=[];for(var o in r)r.hasOwnProperty(o)&&a.push(encodeURIComponent(o)+"="+encodeURIComponent(r[o]));"undefined"==typeof Storage||!1===l.cntrUpTag.cookieless||(c=JSON.parse(l.localStorage.getItem("cntr_attr"))||[])&&c.length&&c.forEach(function(t){var e="cntr_clickAuctionId="+encodeURIComponent(t.aid);a.indexOf(e)<0&&a.push(e)});var i=a.join("&"),s=n+"/up/"+e+(i?"?"+i:"");(new Image).src=s},cntrUrl:"",cookieless:!0};var t,e,n,c,a,o,i,s=r.currentScript;if(!s)
for(var p=r.getElementsByTagName("script"),d=p.length-1;0<=d;d--)
if(/\/up.js\?/.test(p[d].src)){s=p[d];break}try{l.cntrUpTag.cntrUrl=top.location.href}catch(t){l.cntrUpTag.cntrUrl=l.location!==l.parent.location?r.referrer:r.location.href}
function g(t,e){var n=new RegExp("[?&]"+e+"=([^&]+)&?"),r=t.match(n);return r&&r[1]||null}
s&&("1"===g(e=0<=(t=s.src.indexOf("?"))?s.src.slice(t):"","um")&&l.cntrUpTag.sync(),n=g(e,"ck")||"cntr_auctionId",c=g(l.cntrUpTag.cntrUrl,n),"undefined"!=typeof Storage&&"0"!==g(e,"ca")&&c?(a=JSON.parse(l.localStorage.getItem("cntr_attr"))||[],o=(new Date).getTime()-7776e6,(i=a.filter(function(t){return t.ts>o})).push({ts:(new Date).getTime(),aid:c}),l.localStorage.setItem("cntr_attr",JSON.stringify(i))):l.cntrUpTag.cookieless=!1)}(window,document,navigator);}catch(error){var ds="Base script";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[198]=='undefined'){utag.runonce.ext[198]=1;if(/(^(.*\/.*\/book-flight\/united-award-travel)$)/ig.test(b['dom.pathname'])){var CONST_EXTN_NAME="Digital 3.0 - Yahoo Pixel AFS page";try{(function(w,d,t,r,u){w[u]=w[u]||[];w[u].push({'projectId':'10000','properties':{'pixelId':'10086194'}});loadYahooBaseCode();setTimeout(function(){try{var c=w[u];var y=YAHOO.ywa.I13N.fireBeacon;w[u]=[];w[u].push=function(p){y([p]);};y(c);}catch(error){var ds="Yahoo pixel base code";var inputValue="";var requirementName="Send yahoo pixel";var methodName="YahooBaseCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}},300);})(window,document,"script","https://s.yimg.com/wi/ytc.js","dotq");}catch(error){var ds="Yahoo pixel base code";var inputValue="";var requirementName="Send yahoo pixel";var methodName="YahooBaseCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
function loadYahooBaseCode(){var requirementName="load yahoo base lib";var methodName="loadYahooBaseCode";try{!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}
n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)
for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(){if("undefined"==typeof TextEncoder){window.TextEncoder=function(){},window.TextEncoder.prototype.encode=function(e){for(var t=e.length,n=-1,r="undefined"==typeof Uint8Array?new Array(1.5*t):new Uint8Array(3*t),i=0,o=0,a=0;a!==t;){if(i=e.charCodeAt(a),a+=1,i>=55296&&i<=56319){if(a===t){r[n+=1]=239,r[n+=1]=191,r[n+=1]=189;break}
if(!((o=e.charCodeAt(a))>=56320&&o<=57343)){r[n+=1]=239,r[n+=1]=191,r[n+=1]=189;continue}
if(a+=1,(i=1024*(i-55296)+o-56320+65536)>65535){r[n+=1]=240|i>>>18,r[n+=1]=128|i>>>12&63,r[n+=1]=128|i>>>6&63,r[n+=1]=128|63&i;continue}}
i<=127?r[n+=1]=0|i:i<=2047?(r[n+=1]=192|i>>>6,r[n+=1]=128|63&i):(r[n+=1]=224|i>>>12,r[n+=1]=128|i>>>6&63,r[n+=1]=128|63&i)}
return"undefined"!=typeof Uint8Array?r.subarray(0,n+1):(r.length=n+1,r)},window.TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(window.TextEncoder.prototype,"encoding",{get:function(){if(window.TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch(e){window.TextEncoder.prototype.encoding="utf-8"}
"undefined"!=typeof Symbol&&(window.TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}
var e,t,n,r;Array.from||(Array.from=(e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1,r=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)},function(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,a=arguments.length>1?arguments[1]:void 0;if(void 0!==a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}
for(var c,s=r(i.length),u=t(n)?Object(new n(s)):new Array(s),d=0;d<s;)c=i[d],u[d]=a?void 0===o?a(c,d):a.call(o,c,d):c,d+=1;return u.length=s,u})),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>=e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))})}
n.r(t);var i,o,a=function(){return window.location.hostname},c=function(){return window.location.search},s=function(){return window.location.hash},u=function(e){return window.frames[e]},d=function(e,t,n){window.__cmp(e,t,n)},p=function(e,t,n){window.__uspapi(e,t,n)},f=function(e,t,n,r){window.__tcfapi(e,t,n,r)},l=function(e,t,n){e.postMessage(t,n)};var m=function(e){"__tcfapi"===e||"__cmp"===e?i=!0:"__uspapi"===e&&(o=!0),ae()},v=function(e){ie.gdpr_consent=e.tcString,ie.gdpr=!0===e.gdprApplies?1:0,ie.isOathFirstParty=!0===e.isOathFirstParty?1:0},g=function(e,t,n,r){if(!window[e]){var i=function(e){for(var t,n=window;n;){try{if(u(e)){t=n;break}}catch(e){}
if(n===window.top)break;n=n.parent}
return t}(t);if(!i)return void m(e);var o={},a=Math.random()+"";"__tcfapiLocator"===t?function(e,t,n,r){window[e]=function(e,i,o,a){var c={__tcfapiCall:{command:e,parameter:a,version:i,callId:r}};n[r]=o,l(t,c,"*")}}(e,i,o,a):function(e,t,n,r,i){window[e]=function(e,o,a){var c={};c[t]={command:e,parameter:o,callId:i},r[i]=a,l(n,c,"*")}}(e,n,i,o,a),window.addEventListener("message",(function(e){!function(e,t,n){var r={};try{r="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}
var i=r[t];i&&"function"==typeof n[i.callId]&&(n[i.callId](i.returnValue,i.success),n[i.callId]=null)}(e,r,o)}),!1)}},h=function(){var e,t;g("__cmp","__cmpLocator","__cmpCall","__cmpReturn"),window.__cmp&&(e=function(e,t){t&&v(e),m("__cmp")},t=setTimeout((function(){e(void 0,!1)}),1e3),d("getConsentData",null,(function(n,r){clearTimeout(t),r?e({tcString:n.consentData,gdprApplies:n.gdprApplies,isOathFirstParty:n.isOathFirstParty},!0):e(void 0,!1)})))},w=function(){var e,t;g("__uspapi","__uspapiLocator","__uspapiCall","__uspapiReturn"),window.__uspapi&&(e=function(e,t){t&&(ie.us_privacy=void 0===e.uspString?"":e.uspString),m("__uspapi")},t=setTimeout((function(){e(void 0,!1)}),1e3),p("getUSPData",1,(function(n,r){clearTimeout(t),r?e({uspVersion:n.version,uspString:n.uspString,isOathFirstParty:n.isOathFirstParty},!0):e(void 0,!1)})))},y=function(){var e,t;g("__tcfapi","__tcfapiLocator","__tcfapiCall","__tcfapiReturn"),window.__tcfapi?(e=function(e,t){t?(v(e),m("__tcfapi")):h()},t=setTimeout((function(){e(void 0,!1)}),1e3),f("addEventListener",2,(function(n,r){clearTimeout(t),r&&"error"!==n.cmpStatus?"tcloaded"!==n.eventStatus&&"useractioncomplete"!==n.eventStatus||e({tcString:n.tcString,gdprApplies:n.gdprApplies,isOathFirstParty:14===n.cmpId},!0):e(void 0,!1)}))):h()};function _(){if(void 0===O?A:O.use1stPartyCookies){var e=j(P(),"vmcid","&");if(void 0===e||""===e)return;x("vmcid",e);var t=b("vmuuid");void 0!==t&&""!==t||(t=T()),x("vmuuid",t)}}
var E,O,S=function(e,t,n){var r;if(void 0!==n&&""!==n)
for(r=0;r<e.length;r+=1){var i=e[r].properties;i.qstrings=i.qstrings||{},i.qstrings[t]=n}},b=function(e){var t=(document.cookie||"").replace(/\s/g,""),n=j(t,e,";");if(void 0===n||""===n){var r;try{r=localStorage.getItem(e)}catch(e){r=null}
if(null!==r){try{r=JSON.parse(r)}catch(e){return}(new Date).getTime()<=r.timestamp+6048e5&&(n=r.id)}}
return n},x=function(e,t){I({name:e,value:t,expiryOffset:604800,domain:a(),path:"/"});var n={id:t,timestamp:(new Date).getTime()};try{localStorage.setItem(e,JSON.stringify(n))}catch(e){}},I=function(e){var t,n,r;arguments.length<1||void 0!==e.name&&(e.value=void 0!==e.value?e.value:"true",e.domain=void 0!==e.domain?e.domain:"",e.path=void 0!==e.path?e.path:"/",e.expiryOffset=void 0!==e.expiryOffset?e.expiryOffset:180,(r=new Date).setTime(r.getTime()+1e3*e.expiryOffset),t=e.expiryOffset>=0?"; expires="+r.toGMTString():"; expires=Thu, 01-Jan-1970 00:00:01 GMT",n=e.name+"="+e.value+t+"; path="+e.path+(""!==e.domain?"; domain=."+e.domain:"")+"; SameSite=Lax",document.cookie=n)},T=function(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n},j=function(e,t,n){var r=new RegExp(n+t+"=([^"+n+"#]*)"),i=(n+e).match(r);if(null!==i)return i[1]},P=function(){var e=c();if(e)return e.substring(1);var t=s();return t?t.substring(t.indexOf("?")+1):""},A=!1;function C(e){if(void 0!==e){var t=new XMLHttpRequest,n="https://s.yimg.com/wi/config/"+e+".json";t.open("GET",n,!0),t.timeout=2e3,t.ontimeout=function(e){E--,ae()},t.send(),t.onreadystatechange=H}}
function H(){if(this.readyState===this.DONE){if(200===this.status&&this.responseText&&"{}"!==this.responseText)try{var e=JSON.parse(this.responseText);ie.pixelConfigs[e.pixelId]=e,void 0!==O&&!0===O.use1stPartyCookies||(O=e)}catch(e){}
E--,ae()}}
function M(e){!function(e){e.he&&(e.userEmail=e.he,delete e.he)}(e),function(e){var t=e.userEmail,n=e.userHashedEmail;if(!F(t)&&n){var r=n.toLowerCase().trim();F(r)&&(e.userEmail=r,delete e.userHashedEmail)}}(e),e.userEmail?(e.userEmail=e.userEmail.toLowerCase().trim(),F(e.userEmail)?(ie.emails[e.pixelId]=e.userEmail,e.userHashedEmail&&delete e.userHashedEmail):function(e){var t=e.userEmail;!le(e.userHashedEmail)&&le(t)&&(e.userHashedEmail=e.userEmail,delete e.userEmail)}(e)):delete e.userEmail}
function F(e){return new RegExp(['^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@',"((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$"].join("")).test(e)}
function L(e){var t=e.properties;t.pixelId&&t.userEmail&&(t.userEmail=ie.emails[t.pixelId]),t.userHashedEmail&&(le(t.userHashedEmail)||delete t.userHashedEmail)}
var N=function(e,t){var n=function(n){t.push(n.target.result),t.length===e.length&&k(t)};for(var r in e)e[r].oncomplete=n},k=function(e){var t=0;for(var n in ie.emails){var r=Array.from(new Uint8Array(e[t])).map((function(e){return e.toString(16).padStart(2,"0")}));ie.emails[n]=r.join(""),t++}
ie.emailsAreHashed=!0,ae()},q=function(e){var t=(new window.TextEncoder).encode(e);return(window.crypto||window.msCrypto).subtle.digest("SHA-256",t)};var D={};function R(e,t,n){U(e)[t]=n}
function V(e){var t,n,r;if(void 0!==e.projectId)
for(n=0,r=(t=["documentName","url","referrer"]).length;n<r;n+=1)try{R(e.projectId,t[n],e.properties[t[n]])}catch(e){}}
function U(e){return void 0===D[e]&&(D[e]={}),D[e]}
function z(e){var t,n,r=[];return r.push("https://sp.analytics.yahoo.com/sp.pl"),r.push("?a="+encodeURIComponent(e.projectId)),t=e.projectId,n="isPageViewTracked",U(t)[n]||r.push(function(){var e,t;return e=[],(t=new Date).ywaStandardTimezoneOffset=function(){var e,t;return e=new Date((new Date).getFullYear(),0,1),t=new Date((new Date).getFullYear(),6,1),Math.max(e.getTimezoneOffset(),t.getTimezoneOffset())}(),e.push("&d="+encodeURIComponent(t.toGMTString())),e.push("&n="+encodeURIComponent(parseInt(t.getTimezoneOffset()/60,10)+(t.getTimezoneOffset()<t.ywaStandardTimezoneOffset?"d":""))),e.join("")}()),r.join("")}
var Y=[{name:"tealium",interface:"utag_data"},{name:"gtm",interface:"google_tag_manager"},{name:"adobe",interface:"_satellite"},{name:"ensighten",interface:"ensBootstraps"},{name:"signal",interface:"BrightTag"}];var G=function(){return Y.filter((function(e){return!!window[e.interface]})).map((function(e){return e.name})).join(",")};function J(e){var t;return e.projects&&e.properties&&(t=[],Z(e),$(e),X(e,t),delete(e=t).projects,delete e.properties),K(e),function(e){var t,n;void 0!==(t=b("vmcid"))&&""!==t&&(void 0!==(n=b("vmuuid"))&&""!==n||(n=T()),S(e,"vmcid",t),S(e,"vmuuid",n))}(e),function(e){var t,n=G();if(n)
for(t=0;t<e.length;t+=1){var r=e[t].properties;r.qstrings=r.qstrings||{},r.qstrings.tagmgr=n}}(e),e}
var B,Z=function(e){var t;if("string"==typeof(t=e.projects)){try{t=t.join("|")}catch(e){}
"string"==typeof t&&(e.projects=t.replace(",","|").split("|"))}},$=function(e){var t,n,r,i;for(t=0,n=(i=e.projects).length;t<n;t+=1)"string"==typeof i[t]&&(r=i[t],i[t]={projectId:r,coloId:"SP"})},X=function(e,t){var n,r,i;for(n=0,r=e.projects.length;n<r;n+=1)(i=e.projects[n]).coloId=i.coloId||"SP",void 0===i.properties&&(i.properties=Q(e.properties)),t.push(i)},K=function(e){var t;for(t=e.length-1;t>=0;t-=1)void 0===e[t].projectId&&e.splice(t,1)},Q=function(e){var t,n;for(n in t={},e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},W=[];function ee(e){se((function(){var t,n,r,i,o,a;for(n=0,r=(t=J(e)).length;n<r;n+=1)i=t[n],o=void 0,a=void 0,void 0!==i.projectId&&(a=U(i.projectId),void 0===(o=i.properties).documentName&&(o.documentName=a.documentName||document.title),void 0===o.url&&(document.URL?o.url=document.URL:document.location.href?o.url=document.location.href:window.location.href?o.url=window.location.href:o.url="",o.url=a.url||o.url),void 0===o.referrer&&(o.referrer=a.referrer||document.referrer||"")),V(t[n]),L(t[n]),te(t[n])}))}
function te(e){var t,n;pe("prerender")?W.push(e):void 0!==(n=function(e){var t,n,r,i,o;if(void 0===e.projectId||null===e.projectId||""===e.projectId)return;t=[],e.properties.pageEncoding=e.properties.pageEncoding||ie.pageEncoding,void 0!==ie.gdpr&&(e.properties.gdpr=ie.gdpr);ie.gdpr_consent&&(e.properties.gdpr_consent=ie.gdpr_consent);ie.isOathFirstParty&&(e.properties.isOathFirstParty=ie.isOathFirstParty);ie.us_privacy&&(e.properties.us_privacy=ie.us_privacy);ie.ytcVersion&&(e.properties.ytcVersion=ie.ytcVersion);try{t=t.concat(function(e){var t,n,r,i,o,a;if(!e.pixelId)throw new Error("Mandatory 'pixelId' property is missing");for(t={documentName:"b",documentGroup:"c",url:"f",referrer:"e",pageEncoding:"enc",pixelId:".yp",userEmail:"he",userHashedEmail:"he",gdpr:"gdpr",gdpr_consent:"gdpr_consent",isOathFirstParty:"isOathFirstParty",us_privacy:"us_privacy",ytcVersion:"yv"},a=[],r=0,i=(n=["documentName","pixelId","userEmail","userHashedEmail","documentGroup","url","referrer","pageEncoding","gdpr","gdpr_consent","isOathFirstParty","us_privacy","ytcVersion"]).length;r<i;r+=1)o=n[r],e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&""!==e[o]&&a.push({name:t[o],value:e[o]});var c=!1;try{c=window.self!==window.top}catch(e){c=!0}
c&&a.push({name:"isIframe",value:1});var s=e.qstrings;for(var u in s)s.hasOwnProperty(u)&&a.push({name:u,value:s[u]});return a}(e.properties))}catch(e){if("Mandatory 'pixelId' property is missing"===e.message)return}
for(i=[],n=0,r=t.length;n<r;n+=1)void 0!==(o=t[n]).name&&void 0!==o.value&&i.push(o.name+"="+encodeURIComponent(o.value));return i=i.join("&"),z(e)+"&"+i}(e))&&((t=document.createElement("img")).className="ywa-"+e.projectId,t.style.display="none",t.src=n,t.alt="dot image pixel",R(e.projectId,"isPageViewTracked",!0),null===document.body?document.addEventListener("DOMContentLoaded",(function(e){document.body.appendChild(t)})):document.body.appendChild(t))}
var ne=[],re=[],ie={pixelConfigs:{},emails:{}};function oe(){ue(),de(),i=!1,o=!1,y(),w(),function(){for(var e in ie.pixelConfigs)C(e);se(_)}()}
function ae(){if(ce())
for(;ne.length;)try{ne.shift()()}catch(e){}}
function ce(){return i&&o&&0===E&&ie.emailsAreHashed}
function se(e){ce()?e():ne.push(e)}
var ue=function(){B={},function(){if(E=0,O={use1stPartyCookies:!1},window.dotq)
for(var e=0;e<window.dotq.length;e++)
if(void 0!==window.dotq[e]&&void 0!==window.dotq[e].properties&&void 0!==window.dotq[e].properties.pixelId&&void 0===ie.pixelConfigs[window.dotq[e].properties.pixelId]){var t=window.dotq[e].properties;E++,ie.pixelConfigs[t.pixelId]={},M(t)}}(),ie.ytcVersion="1.12.0",Object.keys(ie.emails).length>0?function(){var e=[];for(var t in ie.emails){var n=q(ie.emails[t]);e.push(n)}
if(window.msCrypto){N(e,[])}else Promise.all(e).then((function(e){k(e)}))}():ie.emailsAreHashed=!0},de=function(){ie.pageEncoding=document.charset||document.characterSet||"",void 0!==B.pageEncoding&&""!==B.pageEncoding&&(ie.pageEncoding=B.pageEncoding),ie.isInPrerenderPhase=pe("prerender"),document.attachEvent&&(document.attachEvent("webkitvisibilitychange",fe),document.attachEvent("visibilitychange",fe)),document.addEventListener&&(document.addEventListener("webkitvisibilitychange",fe,!1),document.addEventListener("visibilitychange",fe,!1))};function pe(e){return("visible"===e||"hidden"===e||"preview"===e||"prerender"===e)&&(void 0!==document.webkitVisibilityState&&document.webkitVisibilityState===e||void 0!==document.visibilityState&&document.visibilityState===e)}
var fe=function(){var e,t;if(ie.isInPrerenderPhase){for(e=0,t=re.length;e<t;e+=1)te(re[e]);ie.isInPrerenderPhase=!1}};function le(e){return/^[A-Fa-f0-9]{64}$/.test(e)}
window.YAHOO=window.YAHOO||{},window.YAHOO.ywa=window.YAHOO.ywa||{},void 0===window.YAHOO.ywa.I13N&&(window.YAHOO.ywa.I13N=(r(),oe(),{modules:{},version:"1.12.0",fireBeacon:ee}))}]);}catch(error){var ds="Yahoo base lib"
var inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(/(^(.*\/.*\/book-flight\/united-award-travel)$)/ig.test(b['dom.pathname'])){b['floodlight_activity']='award0';b['floodlight_activity_group']='unite280';b['floodlight_counting_method']='Standard';try{b['point_of_sale']=utag.data['point_of_sale']==null?'--':utag.data['point_of_sale']}catch(e){};try{b['client_id']=utag_data['cp._ga'].substring(6)}catch(e){}}}catch(e){utag.DB(e);}},function(a,b){try{if(b['dom.pathname'].toString().toLowerCase().indexOf('/checkin/baggage/guid/'.toLowerCase())>-1){var CONST_EXTN_NAME="Digital 3.0 Check Bags Tracking",reviewBaggageClass="div[class*=app-containers-Checkin-Baggage-index__cards--]",acceptAndCheckInClass="div[class*=app-containers-Checkin-Baggage-Notice-index__notice--]",backButtonClass="button[class*=app-containers-Checkin-Baggage-Notice-index__cancel--]",checkBagsButtonClass="button[class*=app-containers-Checkin-Baggage-CheckedBaggage-index__checkBags--]",popUpModalClass=".body.atm-body-is-disabled",submitOnPopUpClass="button[class*=app-components-Checkin-EditControls-index__submitButton--]",intervalID=setInterval(function(){if(document.readyState=="complete"&&($(reviewBaggageClass).length||$(acceptAndCheckInClass).length)){handleImpressionAndClicksOfCheckBagsButton();clearInterval(intervalID);handlebackClick();}},100);function handleImpressionAndClicksOfCheckBagsButton(){try{var button=$(checkBagsButtonClass)[0],buttonText=button&&button.textContent;if(!Bootstrapper.checkBagsImpression&&buttonText){Bootstrapper.checkBagsImpression=true;Bootstrapper.sendGAEvent("Checkin","Impression: "+buttonText);function sendGAEvent(){Bootstrapper.sendGAEvent("Checkin","Clicked: "+buttonText);handlePopUp(button,sendGAEvent);}
button.removeEventListener("click",sendGAEvent);button.addEventListener("click",sendGAEvent);}}catch(error){var methodName="handleImpressionAndClicksOfCheckBagsButton",requirementName="Impression and click of CheckBags Button",ds="DOM",inputValue=$(checkBagsButtonClass)[0];Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function handlebackClick(){try{var back=$(backButtonClass)[0];if(back){function checkReviewBag(){Bootstrapper.checkBagsImpression=false;var intervalID=setInterval(function(){if($(reviewBaggageClass).length){handleImpressionAndClicksOfCheckBagsButton();clearInterval(intervalID);}},100);}
back.removeEventListener("click",checkReviewBag);back.addEventListener("click",checkReviewBag);}}catch(error){var methodName="handlebackClick",requirementName="Handle Back Clicks on Check Bags",ds="DOM",inputValue=$(backButtonClass)[0];Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function handlePopUp(button,sendGAEvent){try{var intervalID=setInterval(function(){if($(popUpModalClass).length){var submit=$(submitOnPopUpClass)[0];if(submit){submit.removeEventListener("click",handleSubmit);submit.addEventListener("click",function(){handleSubmit(button,sendGAEvent,submit);});}
clearInterval(intervalID);}},100);}catch(error){var methodName="handlePopUp",requirementName="Handle popup",ds=$(submitOnPopUpClass)[0],inputValue=button;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function handleSubmit(button,sendGAEvent,submit){try{if(submit.textContent=="Continue"){var intervalID=setInterval(function(){if(!$(popUpModalClass).length){button.removeEventListener("click",sendGAEvent);submit.removeEventListener("click",handleSubmit);Bootstrapper.checkBagsImpression=false;handleImpressionAndClicksOfCheckBagsButton();clearInterval(intervalID);}},100);}}catch(error){var methodName="handleSubmit",requirementName="Handle Submit",ds=button,inputValue=submit;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event']=='view'&&/^(\/en\/us\/fly\/company\/brand\/good-leads-the-way.html)$/ig.test(b['dom.pathname']))){var CONST_EXTN_NAME="MNTN and TTD Pixels-Retargetting";sendRetargettingPixel("https://insight.adsrvr.org/track/pxl/?adv=kg3rxzb&ct=0:yy24ad4&fmt=3");prepareMNTNPixelInfo();function sendRetargettingPixel(pixelURL){var requirementName="Send TTD and Retargetting pixels";var methodName="sendRetargettingPixel";try{if(Bootstrapper&&typeof Bootstrapper.imageRequest==="function"){Bootstrapper.imageRequest(pixelURL);}}catch(error){var ds="Pixel URL";var inputValue=pixelURL;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function prepareMNTNPixelInfo(){var requirementName="Prepare data for MNTN pixel";var methodName="prepareMNTNPixelInfo";try{var pixelURL="https://px.mountain.com/sti?shaid=33139&cb=";var cb=Bootstrapper.cacheBuster||Math.random()*10000000000000000;var currentLoc=document.location.href;pixelURL+=cb;pixelURL+="&plh="+currentLoc;sendRetargettingPixel(pixelURL);}catch(error){var ds="Pixel URL";var inputValue=pixelURL;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[219]=='undefined'){utag.runonce.ext[219]=1;if(1){var CONST_EXTN_NAME="MileagePlus Enrollment";Bootstrapper.mpEnrollment=function(data,parseData){try{var action=data.action,params=data.params;parseData.eventLabel=Bootstrapper.fetchFeatureAndPageName(params);if(!action.indexOf("Clicked: ")){parseData.eventLabel=[parseData.eventLabel,Bootstrapper.isOptEmail(params.info)].join('|');}else if(action=="Enrollment successful"){parseData.eventLabel=[parseData.eventLabel,trackEnrollSuccess(params.info)].join('|');}else if(action=="Enrollment failed"){parseData.eventLabel=[parseData.eventLabel,Bootstrapper.prepareErrorData(params.info)].join('|');}else if(action=="Error Shown"){let errorMessage=Bootstrapper.prepareErrorMessage(params.info);let missingFields=getMissingFieldsInfo(params.info);parseData.eventLabel=missingFields?[parseData.eventLabel,errorMessage,missingFields].join('|'):[parseData.eventLabel,errorMessage].join('|');}}catch(error){var methodName="mpEnrollment",requirementName="Process mpEnrollment Events",ds="mpEnrollment Callabck",inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function trackEnrollSuccess(info){try{if(info){var custID=info.customerId||Bootstrapper.dataObject.global.constant.doubleDash;return custID;}}catch(error){var methodName="trackEnrollSuccess",requirementName="Track Enroll Success",ds="info Callabck",inputValue=JSON.stringify(info);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return Bootstrapper.dataObject.global.constant.doubleDash;}
function getMissingFieldsInfo(info){let requirementName="Get missing fields info";let methodName="getMissingFieldsInfo";let missingFieldsInfo;try{if(info&&info.missingFields&&info.missingFields.length>0){missingFieldsInfo=[info.missingFields].join("|");}}catch(error){let ds="info Callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return missingFieldsInfo}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var CONST_EXTN_NAME="Performance Measurement";Bootstrapper.locationChangeTimestamp;Bootstrapper.handlePerformanceMeasurements=function(data,parseData){var requirementName="Handle performance measurements";var methodName="handlePerformanceMeasurements";var parseMultipleData=[];var timestamp;try{if(data.action=="Location Change"){Bootstrapper.locationChangeTimestamp=getTimestamp(data.params);parseData={};}else if(data.action=="Flight Search Results Loaded: Primary"||data.action=="Utility Bar Loaded"){timestamp=getTimestamp(data.params);parseData.eventLabel=[(timestamp-Bootstrapper.locationChangeTimestamp),isSingleAPI(data.params)].join("|");}else if(data.action=="Flight Search Results Loaded: Secondary"){timestamp=getTimestamp(data.params);parseData.eventLabel=timestamp-Bootstrapper.locationChangeTimestamp;}
parseMultipleData.push(parseData);}catch(error){var ds="Callback data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return parseMultipleData};function getTimestamp(params){var requirementName="Get timestamp";var methodName="getTimestamp";var timestamp;try{if(params&&params.info&&params.info.timestamp){timestamp=params.info.timestamp;}}catch(error){var ds="Callback params object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return timestamp;}
function getElapsedTime(timestamp){var requirementName="Get elapsed time";var methodName="getElapsedTime";var elapsedTime;try{elapsedTime=timestamp-Bootstrapper.locationChangeTimestamp;}catch(error){var ds="Callback timestamp object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return elapsedTime;}
function isSingleAPI(params){var requirementName="Get isSingle API call";var methodName="isSingleAPI";var isSingleAPI="N";try{if(params&&params.info&&params.info.isSingleAPI){isSingleAPI="Y";}}catch(error){var ds="Callback param object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return isSingleAPI;}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[235]=='undefined'){utag.runonce.ext[235]=1;if(1){let CONST_EXTN_NAME="Pinterest Pixel-Home Page";Bootstrapper.PinterestPixelHome=function(){let requirementName="Send pinterest pixel on home page";let methodName="PinterestPixelHome";let PINTEREST_URL="https://ct.pinterest.com/v3/?tid=2613586013029&event=PageVisit&noscript=1";try{Bootstrapper.imageRequest(PINTEREST_URL);}catch(error){let ds="Bootstrapper.imageRequest";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="Payment Services";let DOUBLE_DASH="--";Bootstrapper.handlePaymentServices=function(data,parseData){let requirementName="Handle payment services tracking";let methodName="handlePaymentServices";let analyticsData=[];try{if(data.action=="Payment Lookup Initiated"||data.action=="Order Initiated"){let params=data.params;parseData.customDimensions={};if(params&&params.info){parseData.eventLabel=prepareLabelForCFOP(params.info,data.action);parseData.eventValue=getTotalAmount(params.info);parseData.customDimensions[Bootstrapper.UTAG_CONST.ticket_type]=Bootstrapper.getSearchTravelType()!='--'?Bootstrapper.getSearchTravelType():"Revenue";analyticsData.push(parseData);}}}catch(error){let ds="Data object from argument";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return analyticsData;};function prepareLabelForCFOP(info,action){let requirementName="Handle payment services tracking";let methodName="handlePaymentServices";let label;try{let originPOD=info.originPOD||DOUBLE_DASH;let amount=info.totalAmount||DOUBLE_DASH;let currency=info.currency||DOUBLE_DASH;let cartId=info.cartId||DOUBLE_DASH;let isInitSuccess=(info.isInitSuccess&&info.isInitSuccess===true)?"Y":"N";let dfRefId=info.dfRefId||DOUBLE_DASH;if(action=="Payment Lookup Initiated"){let StepUpUrl=info.stepUpUrl||DOUBLE_DASH;label=[originPOD,amount,currency,cartId,isInitSuccess,StepUpUrl,dfRefId].join("|");}else{label=[originPOD,amount,currency,cartId,isInitSuccess,dfRefId].join("|");}}catch(error){let ds="Data object from argument";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return label;}
function getTotalAmount(info){let requirementName="Get total amount";let methodName="getTotalAmount";let amount;try{amount=info.totalAmount||DOUBLE_DASH;}catch(error){let ds="Data object from argument";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return amount;}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[253]=='undefined'){utag.runonce.ext[253]=1;if(b['dom.pathname']=='/en-gb/flights-to-new-york'){let CONST_EXTN_NAME="Flights to NYC - Twitter pixel";function loadTwitterLib(){try{!function(){var t={6173:function(t,e,n){var r;t.exports=(r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(t){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},c=a.lib={},u=c.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=c.WordArray=u.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||f).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var c=0;c<i;c+=4)e[r+c>>>2]=n[c>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new s.init(e,t)}}),l=a.enc={},f=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},d=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},h=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},p=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,c=o/(4*a),u=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*a,l=t.min(4*u,o);if(u){for(var f=0;f<u;f+=a)this._doProcessBlock(i,f);n=i.splice(0,u),r.sigBytes-=l}return new s.init(n,l)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),v=(c.Hasher=p.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new v.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math),r)},7219:function(t,e,n){var r;t.exports=(r=n(6173),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.algo,c=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(c[i]=n(t.pow(r,.5))),u[i]=n(t.pow(r,1/3)),i++),r++}();var s=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(c.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],c=n[4],l=n[5],f=n[6],d=n[7],h=0;h<64;h++){if(h<16)s[h]=0|t[e+h];else{var p=s[h-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,y=s[h-2],_=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;s[h]=v+s[h-7]+_+s[h-16]}var m=r&i^r&o^i&o,w=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),g=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&f)+u[h]+s[h];d=f,f=l,l=c,c=a+g|0,a=o,o=i,i=r,r=g+(w+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(l),e.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},2244:function(t,e,n){"use strict";n.r(e);var r=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))};var i=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--i&&e(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))},o=setTimeout;function a(t){return Boolean(t&&void 0!==t.length)}function c(){}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void f(e.promise,t)}l(e.promise,r)}else(1===t._state?l:f)(e.promise,t._value)}))):t._deferreds.push(e)}function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof u)return t._state=3,t._value=e,void d(t);if("function"==typeof n)return void p((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,d(t)}catch(e){f(t,e)}var r,i}function f(t,e){t._state=2,t._value=e,d(t)}function d(t){2===t._state&&0===t._deferreds.length&&u._immediateFn((function(){t._handled||u._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function p(t,e){var n=!1;try{t((function(t){n||(n=!0,l(e,t))}),(function(t){n||(n=!0,f(e,t))}))}catch(t){if(n)return;n=!0,f(e,t)}}u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){var n=new this.constructor(c);return s(this,new h(t,e,n)),n},u.prototype.finally=r,u.all=function(t){return new u((function(e,n){if(!a(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,(function(e){o(t,e)}),n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var c=0;c<r.length;c++)o(c,r[c])}))},u.allSettled=i,u.resolve=function(t){return t&&"object"==typeof t&&t.constructor===u?t:new u((function(e){e(t)}))},u.reject=function(t){return new u((function(e,n){n(t)}))},u.race=function(t){return new u((function(e,n){if(!a(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)u.resolve(t[r]).then(e,n)}))},u._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){o(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console};var v=u,y=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();"function"!=typeof y.Promise?y.Promise=v:(y.Promise.prototype.finally||(y.Promise.prototype.finally=r),y.Promise.allSettled||(y.Promise.allSettled=i))},7658:function(t){var e=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=g(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function d(){}function h(){}var p={};c(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(O([])));y&&y!==e&&n.call(y,i)&&(p=y);var _=h.prototype=f.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,c){var u=s(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function g(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,g(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,c(_,"constructor",h),c(h,"constructor",d),d.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},m(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(_),c(_,a,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},5494:function(t,e,n){"use strict";var r;n.r(e),n.d(e,{NIL:function(){return j},parse:function(){return y},stringify:function(){return d},v1:function(){return v},v3:function(){return C},v4:function(){return A},v5:function(){return x},validate:function(){return c},version:function(){return L}});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var c=function(t){return"string"==typeof t&&a.test(t)},u=[],s=0;s<256;++s)u.push((s+256).toString(16).substr(1));var l,f,d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!c(n))throw TypeError("Stringified UUID is invalid");return n},h=0,p=0;var v=function(t,e,n){var r=e&&n||0,i=e||new Array(16),a=(t=t||{}).node||l,c=void 0!==t.clockseq?t.clockseq:f;if(null==a||null==c){var u=t.random||(t.rng||o)();null==a&&(a=l=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==c&&(c=f=16383&(u[6]<<8|u[7]))}var s=void 0!==t.msecs?t.msecs:Date.now(),v=void 0!==t.nsecs?t.nsecs:p+1,y=s-h+(v-p)/1e4;if(y<0&&void 0===t.clockseq&&(c=c+1&16383),(y<0||s>h)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=s,p=v,f=c;var _=(1e4*(268435455&(s+=122192928e5))+v)%4294967296;i[r++]=_>>>24&255,i[r++]=_>>>16&255,i[r++]=_>>>8&255,i[r++]=255&_;var m=s/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=255&m,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=c>>>8|128,i[r++]=255&c;for(var w=0;w<6;++w)i[r+w]=a[w];return e||d(i)};var y=function(t){if(!c(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n};function _(t,e,n){function r(t,r,i,o){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=y(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+t.length);if(a.set(r),a.set(t,r.length),(a=n(a))[6]=15&a[6]|e,a[8]=63&a[8]|128,i){o=o||0;for(var c=0;c<16;++c)i[o+c]=a[c];return i}return d(a)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function m(t){return 14+(t+64>>>9<<4)+1}function w(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function g(t,e,n,r,i,o){return w((a=w(w(e,t),w(r,o)))<<(c=i)|a>>>32-c,n);var a,c}function b(t,e,n,r,i,o,a){return g(e&n|~e&r,t,e,i,o,a)}function P(t,e,n,r,i,o,a){return g(e&r|n&~r,t,e,i,o,a)}function E(t,e,n,r,i,o,a){return g(e^n^r,t,e,i,o,a)}function O(t,e,n,r,i,o,a){return g(n^(e|~r),t,e,i,o,a)}var C=_("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){for(var e=[],n=32*t.length,r=0;r<n;r+=8){var i=t[r>>5]>>>r%32&255,o=parseInt("0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[m(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var c=n,u=r,s=i,l=o;n=b(n,r,i,o,t[a],7,-680876936),o=b(o,n,r,i,t[a+1],12,-389564586),i=b(i,o,n,r,t[a+2],17,606105819),r=b(r,i,o,n,t[a+3],22,-1044525330),n=b(n,r,i,o,t[a+4],7,-176418897),o=b(o,n,r,i,t[a+5],12,1200080426),i=b(i,o,n,r,t[a+6],17,-1473231341),r=b(r,i,o,n,t[a+7],22,-45705983),n=b(n,r,i,o,t[a+8],7,1770035416),o=b(o,n,r,i,t[a+9],12,-1958414417),i=b(i,o,n,r,t[a+10],17,-42063),r=b(r,i,o,n,t[a+11],22,-1990404162),n=b(n,r,i,o,t[a+12],7,1804603682),o=b(o,n,r,i,t[a+13],12,-40341101),i=b(i,o,n,r,t[a+14],17,-1502002290),r=b(r,i,o,n,t[a+15],22,1236535329),n=P(n,r,i,o,t[a+1],5,-165796510),o=P(o,n,r,i,t[a+6],9,-1069501632),i=P(i,o,n,r,t[a+11],14,643717713),r=P(r,i,o,n,t[a],20,-373897302),n=P(n,r,i,o,t[a+5],5,-701558691),o=P(o,n,r,i,t[a+10],9,38016083),i=P(i,o,n,r,t[a+15],14,-660478335),r=P(r,i,o,n,t[a+4],20,-405537848),n=P(n,r,i,o,t[a+9],5,568446438),o=P(o,n,r,i,t[a+14],9,-1019803690),i=P(i,o,n,r,t[a+3],14,-187363961),r=P(r,i,o,n,t[a+8],20,1163531501),n=P(n,r,i,o,t[a+13],5,-1444681467),o=P(o,n,r,i,t[a+2],9,-51403784),i=P(i,o,n,r,t[a+7],14,1735328473),r=P(r,i,o,n,t[a+12],20,-1926607734),n=E(n,r,i,o,t[a+5],4,-378558),o=E(o,n,r,i,t[a+8],11,-2022574463),i=E(i,o,n,r,t[a+11],16,1839030562),r=E(r,i,o,n,t[a+14],23,-35309556),n=E(n,r,i,o,t[a+1],4,-1530992060),o=E(o,n,r,i,t[a+4],11,1272893353),i=E(i,o,n,r,t[a+7],16,-155497632),r=E(r,i,o,n,t[a+10],23,-1094730640),n=E(n,r,i,o,t[a+13],4,681279174),o=E(o,n,r,i,t[a],11,-358537222),i=E(i,o,n,r,t[a+3],16,-722521979),r=E(r,i,o,n,t[a+6],23,76029189),n=E(n,r,i,o,t[a+9],4,-640364487),o=E(o,n,r,i,t[a+12],11,-421815835),i=E(i,o,n,r,t[a+15],16,530742520),r=E(r,i,o,n,t[a+2],23,-995338651),n=O(n,r,i,o,t[a],6,-198630844),o=O(o,n,r,i,t[a+7],10,1126891415),i=O(i,o,n,r,t[a+14],15,-1416354905),r=O(r,i,o,n,t[a+5],21,-57434055),n=O(n,r,i,o,t[a+12],6,1700485571),o=O(o,n,r,i,t[a+3],10,-1894986606),i=O(i,o,n,r,t[a+10],15,-1051523),r=O(r,i,o,n,t[a+1],21,-2054922799),n=O(n,r,i,o,t[a+8],6,1873313359),o=O(o,n,r,i,t[a+15],10,-30611744),i=O(i,o,n,r,t[a+6],15,-1560198380),r=O(r,i,o,n,t[a+13],21,1309151649),n=O(n,r,i,o,t[a+4],6,-145523070),o=O(o,n,r,i,t[a+11],10,-1120210379),i=O(i,o,n,r,t[a+2],15,718787259),r=O(r,i,o,n,t[a+9],21,-343485551),n=w(n,c),r=w(r,u),i=w(i,s),o=w(o,l)}return[n,r,i,o]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(m(e)),r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))}));var A=function(t,e,n){var r=(t=t||{}).random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return d(r)};function T(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function I(t,e){return t<<e|t>>>32-e}var x=_("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,a=Math.ceil(o/16),c=new Array(a),u=0;u<a;++u){for(var s=new Uint32Array(16),l=0;l<16;++l)s[l]=t[64*u+4*l]<<24|t[64*u+4*l+1]<<16|t[64*u+4*l+2]<<8|t[64*u+4*l+3];c[u]=s}c[a-1][14]=8*(t.length-1)/Math.pow(2,32),c[a-1][14]=Math.floor(c[a-1][14]),c[a-1][15]=8*(t.length-1)&4294967295;for(var f=0;f<a;++f){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=c[f][h];for(var p=16;p<80;++p)d[p]=I(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var v=n[0],y=n[1],_=n[2],m=n[3],w=n[4],g=0;g<80;++g){var b=Math.floor(g/20),P=I(v,5)+T(b,y,_,m)+w+e[b]+d[g]>>>0;w=m,m=_,_=I(y,30)>>>0,y=v,v=P}n[0]=n[0]+v>>>0,n[1]=n[1]+y>>>0,n[2]=n[2]+_>>>0,n[3]=n[3]+m>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),j="00000000-0000-0000-0000-000000000000";var L=function(t){if(!c(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},6527:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.UWT=e.SET=e.OneTag=void 0;var a=o(n(6057)),c=o(n(510));e.OneTag=c;var u=o(n(3324));e.SET=u;var s=o(n(1454));e.UWT=s;var l={track:a.track_DEPRECATED,trackPid:u.trackPid,buildPixel:a.buildPixel_DEPRECATED,buildScript:a.buildScript_DEPRECATED,buildIframe:a.buildIframe_DEPRECATED};e.default=l},6057:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.track_DEPRECATED=e.buildScript_DEPRECATED=e.buildPixel_DEPRECATED=e.buildIframe_DEPRECATED=void 0;var c=a(n(1952)),u=a(n(8352)),s=a(n(3257)),l=n(4654);e.track_DEPRECATED=function(t,e,n){if(!t)throw new Error(l.utilities.LogPrefix+": Cannot track event without pixel ID");if(!e)throw new Error(l.utilities.LogPrefix+": Cannot track event without event name");var i=new c.AccountParams({merch_id:t}),o=new c.EventParams(r({merch_id:t,events:e,eci:l.utilities.EventCodeImpl.DEPRECATED_TRACK},n?{value:n.toString()}:{}));s.track({accountParams:i,eventParams:o,adsApiVersion:l.utilities.AdsApiVersion.v0})};e.buildPixel_DEPRECATED=function(t){u.buildImagePixel(l.utilities.addQueries(t,{bci:c.globalParams.get().bci,eci:l.utilities.EventCodeImpl.DEPRECATED_BUILD_PIXEL}))};e.buildScript_DEPRECATED=function(t){u.buildScriptPixel(l.utilities.addQueries(t,{bci:c.globalParams.get().bci,eci:l.utilities.EventCodeImpl.DEPRECATED_BUILD_SCRIPT}))};e.buildIframe_DEPRECATED=function(t){u.buildIFramePixel(l.utilities.addQueries(t,{bci:c.globalParams.get().bci,eci:l.utilities.EventCodeImpl.DEPRECATED_BUILD_IFRAME}))}},510:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.set=e.event=e.config=void 0;var c=a(n(1952)),u=a(n(3257)),s=n(4654),l=a(n(1454)),f={};e.set=function(t){void 0===t&&(t={}),c.globalParams.set(t||{})};e.config=function(t,e){if(void 0===e&&(e={}),!t||"string"!=typeof t)throw new Error(s.utilities.LogPrefix+": Config is missing required Advertiser Id");e=e&&s.utilities.isObject(e)?e:{};var n=f[t]=new c.AccountParams(r(r({},e),{txn_id:t}));u.init(n),c.globalParams.calledConfig();var i=s.utilities.splitObjectByPropNames(e,c.NonEventParameterKeys),o=i[0],a=i[1],d=new c.EventParams(r(r({},o),{txn_id:t,event:JSON.stringify(a),eci:s.utilities.EventCodeImpl.ONETAG_CONFIG}));u.track({accountParams:n,eventParams:d,adsApiVersion:s.utilities.AdsApiVersion.v1}),l.setDefaultAccountParams(t)};e.event=function(t,e){if(void 0===e&&(e={}),!t)throw new Error(s.utilities.LogPrefix+": Event cannot send event without an Event Code Id");e=e&&s.utilities.isObject(e)?e:{};var n,i=s.utilities.parseEventCodeId(t),o=i[0];i[1];o&&(n=f[o]||new c.AccountParams({txn_id:o}),u.init(n));var a=s.utilities.splitObjectByPropNames(e,c.NonEventParameterKeys),l=a[0],d=a[1],h=new c.EventParams(r(r({},l),{txn_id:t,event:JSON.stringify(d),eci:s.utilities.EventCodeImpl.ONETAG_EVENT}));u.track({accountParams:n,eventParams:h,adsApiVersion:s.utilities.AdsApiVersion.v1})}},3324:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.trackPid=void 0;var c=a(n(1952)),u=a(n(3257)),s=n(4654);e.trackPid=function(t,e){if(void 0===e&&(e={}),!t)throw new Error(s.utilities.LogPrefix+": No Pixel ID Found");e=e||{};var n=new c.AccountParams({txn_id:t}),i=new c.EventParams(r(r(r({},s.utilities.getLegacyParams(e)),e),{txn_id:t,eci:s.utilities.EventCodeImpl.SET_TRACK_PID}));u.track({accountParams:n,eventParams:i,adsApiVersion:s.utilities.AdsApiVersion.v0})}},1454:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.track=e.setDefaultAccountParams=e.init=e.defaultAccountParams=void 0;var c,u=a(n(1952)),s=a(n(3257)),l=n(4654);e.defaultAccountParams=c;var f=function(t){e.defaultAccountParams=c=new u.AccountParams({txn_id:t}),s.init(c)};e.setDefaultAccountParams=f;e.init=function(t){if(!t||"string"!=typeof t)throw new Error(l.utilities.LogPrefix+": Init is missing required Pixel Id");f(t),u.globalParams.calledInit()};e.track=function(t,e){if(void 0===e&&(e={}),!t||"string"!=typeof t)throw new Error(l.utilities.LogPrefix+": Track is missing required event name");if(!c.getPixelId())throw new Error(l.utilities.LogPrefix+": No Pixel ID Found");e=e&&l.utilities.isObject(e)?e:{},t=t.toLowerCase().trim();var n=l.utilities.splitObjectByPropNames(e,u.NonEventParameterKeys),i=n[0],o=n[1],a=new u.EventParams(r(r(r({},i),l.utilities.getLegacyParams(e)),{txn_id:c.getPixelId(),events:JSON.stringify([[t,o]]),eci:l.utilities.EventCodeImpl.UWT_TRACK}));s.track({accountParams:c,eventParams:a,adsApiVersion:l.utilities.AdsApiVersion.v0})}},1952:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.setLocation=e.setIframe=e.Parameters=e.NonEventParameterKeys=e.merge=e.globalParams=e.GlobalParams=e.EventParams=e.AccountParams=void 0;var a=n(4654),c=["email_address","phone_number","external_id"],u=["page_location","hide_page_location"],s=u.concat(c).concat(["bci","eci","event_id","event","events","oct_p_id","p_id","p_user_id","pl_id","restricted_data_use","tw_acc_response","tw_clid_src","twclid","tw_document_href","tw_document_referrer","tw_iframe_status","tw_order_quantity","tw_sale_amount","tw_product_id","txn_id","type","version"]);e.NonEventParameterKeys=s;var l=function(){function t(t){this.paramKVs={},this.set(t)}return t.prototype.set=function(t){var e=a.utilities.splitObjectByPropNames(t||{},c),n=e[0],r=e[1],i=Object.keys(n).reduce((function(t,e){return t[e.trim().toLowerCase()]=a.utilities.hashParameter(n[e]),t}),{});a.utilities.mergeObjects(this.paramKVs,i,r)},t.prototype.get=function(){return o({},this.paramKVs)},t.prototype.getPixelId=function(){var t,e,n=(null===(t=this.paramKVs)||void 0===t?void 0:t.txn_id)||(null===(e=this.paramKVs)||void 0===e?void 0:e.merch_id);if(!n)throw new Error(a.utilities.LogPrefix+": Pixel Id doesn't exist.");return n},t}();e.Parameters=l;var f=function(t){function e(){var e,n=t.call(this,{pl_id:a.utilities.generatePageLoadId(),type:"javascript",version:"2.3.29",p_id:"Twitter",p_user_id:"0",integration:(null===(e=window.twq)||void 0===e?void 0:e.integration)||"advertiser"})||this;return n.bciLoader=window.twq?2:1,n.bciCmd=0,n}return i(e,t),e.prototype.calledInit=function(){this.bciCmd|=1},e.prototype.calledConfig=function(){this.bciCmd|=2},e.prototype.get=function(){return o({bci:this.bciLoader+this.bciCmd},this.paramKVs)},e}(l);e.GlobalParams=f;var d=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e}(l);e.AccountParams=d;var h=function(t){function e(e){return t.call(this,o(o({eci:a.utilities.EventCodeImpl.UNKNOWN},e),{event_id:a.utilities.generateEventId()}))||this}return i(e,t),e}(l);e.EventParams=h;var p=new f;function v(t){var e=a.environment.isInIFrame();t.tw_iframe_status=Number(e).toString(),e&&""!==document.referrer&&(t.tw_document_referrer=document.referrer)}function y(t,e){e.tw_document_href=location.href;var n=t.hide_page_location?"":t.page_location;void 0!==n&&(e.tw_document_href=n,e.tw_document_referrer&&(e.tw_document_referrer=n))}e.globalParams=p,e.setIframe=v,e.setLocation=y,e.merge=function(t){var e=t.accountParams,n=t.eventParams,r=a.utilities.mergeObjects({},p.get(),(null==e?void 0:e.get())||{},n.get()),i=a.utilities.splitObjectByPropNames(r,u),o=i[0],c=i[1];return v(c),y(o,c),c}},8352:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TWITTER_BASE=e.trackPid=e.TCO_BASE=e.buildScriptPixel=e.buildImagePixel=e.buildIFramePixel=void 0;var a=n(4654),c=function(t){return void 0===t&&(t=a.utilities.AdsApiVersion.v0),"https://t.co/"+t+"/adsct"};e.TCO_BASE=c;var u=function(t){return void 0===t&&(t=a.utilities.AdsApiVersion.v0),"https://analytics.twitter.com/"+t+"/adsct"};e.TWITTER_BASE=u;e.trackPid=function(t,e){return e=r({adsApiVersion:a.utilities.AdsApiVersion.v1,needResponse:!1},e),s(c(e.adsApiVersion),t),s(u(e.adsApiVersion),t,e)};var s=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={needResponse:!1}),i(void 0,void 0,void 0,(function(){var i,c,u;return o(this,(function(o){switch(o.label){case 0:return i=r({},e),c=Object.keys(i).sort().map((function(t){return t+"="+encodeURIComponent(i[t])})).join("&"),u=t+"?"+c,[4,a.environment.documentVisible()];case 1:return o.sent(),[2,n.needResponse?a.fetch(u):l(u)]}}))}))};e.buildScriptPixel=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=document.createElement("script")).src=t,e.setAttribute("type","text/javascript"),[4,a.environment.contentLoaded()];case 1:return n.sent(),document.body.appendChild(e),[2]}}))}))};e.buildIFramePixel=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=document.createElement("iframe")).src=t,e.hidden=!0,[4,a.environment.contentLoaded()];case 1:return n.sent(),document.body.appendChild(e),[2]}}))}))};var l=function(t){return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=new Image).src=t,e.height=1,e.width=1,e.style.display="none",[4,a.environment.contentLoaded()];case 1:return n.sent(),document.body.appendChild(e),[2]}}))}))};e.buildImagePixel=l},3257:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},c=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.track=e.init=void 0;var u=o(n(1952)),s=o(n(8352)),l=n(4654);e.init=function(t){l.twclid.requestAccIfNeeded(t.getPixelId())},e.track=function(t){var e=t.accountParams,n=t.eventParams,r=t.adsApiVersion;return a(this,void 0,void 0,(function(){var t,i,o,a;return c(this,(function(c){switch(c.label){case 0:return[4,Promise.resolve()];case 1:return c.sent(),t=!1,e?(l.twclid.requestAccIfNeeded(e.getPixelId()),[4,l.twclid.getTwclidParams(e.getPixelId())]):[3,3];case 2:i=c.sent(),t=1===i.tw_acc_response,n.set(i),c.label=3;case 3:return o=u.merge({accountParams:e,eventParams:n}),a=s.trackPid(o,{adsApiVersion:r,needResponse:t}),t&&l.twclid.cacheAccRequestAndSaveTwclid(null==e?void 0:e.getPixelId(),a),[2]}}))}))}},2345:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(6527),a=n(4654);!function(){if(window.twq){var t=window.twq;t.exe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,(function(){var e,n,r,c;return i(this,(function(i){switch(i.label){case 0:switch(e=t[0],n=t.slice(1),e){case"init":r=o.UWT.init;break;case"track":r=o.UWT.track;break;case"config":r=o.OneTag.config;break;case"event":r=o.OneTag.event;break;case"set":r=o.OneTag.set}i.label=1;case 1:return i.trys.push([1,4,,5]),"function"!=typeof r?[3,3]:[4,r.apply(null,n)];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:return c=i.sent(),a.utilities.logError(c),[3,5];case 5:return[2]}}))}))};for(var e=0;e<t.queue.length;e++)t.exe.apply(null,t.queue[e])}}()},2735:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(6527));window.twttr=window.twttr||{},window.twttr.conversion||(window.twttr.conversion=i.default,n(2345))},6575:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cookies=void 0;var r=n(3532),i=function(){function t(){}return t.setCookie=function(e,n,i){if(void 0===i&&(i={}),!e)throw new Error(r.LogPrefix+" Missing key for "+e+" cookie");if(!n)throw new Error(r.LogPrefix+" Missing value for "+e+" cookie");var o=e+"="+encodeURIComponent(n)+t.convertCookieOptionsToString(i);document.cookie=o},t.getCookie=function(t){if(!t)throw new Error(r.LogPrefix+": getCookie is missing cookieName");var e=document.cookie.split(";").reduce((function(t,e){var n=e.split("=").map((function(t){return t.trim()})),r=n[0],i=n[1];return t[r]=decodeURIComponent(i),t}),{});return r.hasOwnPropertyCi(e,t)?e[t]:void 0},t.convertCookieOptionsToString=function(t){if(!t)throw new Error(r.LogPrefix+": convertCookieOptionsToString is missing options");var e="";for(var n in t)r.hasOwnPropertyCi(t,n)&&("secure"===n&&t[n]?e+=";"+n:e+=";"+n+"="+t[n]);return r.hasOwnPropertyCi(t,"path")||(e+=";path=/"),e},t}();e.Cookies=i},618:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.isInIFrame=e.documentVisible=e.contentLoaded=void 0;e.contentLoaded=function(){return n(void 0,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t,e){"undefined"==typeof document&&e(),"complete"!==document.readyState&&"interactive"!==document.readyState||t(),document.addEventListener("DOMContentLoaded",(function(){return t()}))}))]}))}))};e.documentVisible=function(){return n(void 0,void 0,void 0,(function(){return r(this,(function(t){return"hidden"!==document.visibilityState?[2,Promise.resolve()]:[2,new Promise((function(t){var e=function(){t(),document.removeEventListener("visibilitychange",e,!1)};document.addEventListener("visibilitychange",e,!1)}))]}))}))};e.isInIFrame=function(){return window.self!==window.top}},7344:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){var e=this;this.json=function(){return new Promise((function(t,n){try{t(JSON.parse(e.xhr.responseText))}catch(t){n(t)}}))},this.xhr=t,this.status=t.status,this.statusText=t.statusText,this.ok=t.status>=200&&t.status<300,this.redirected=t.status>=300&&t.status<400};e.default=function(t){var e=new XMLHttpRequest;e.withCredentials=!0,e.timeout=2e3;var r=new Promise((function(t,r){e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE){var i=new n(e);i.ok||i.redirected?t(i):r(i)}}}));return e.open("GET",t),e.send(),r}},4654:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.utilities=e.twclid=e.fetch=e.environment=e.Cookies=void 0;var c=n(6575);Object.defineProperty(e,"Cookies",{enumerable:!0,get:function(){return c.Cookies}});var u=o(n(618));e.environment=u;var s=a(n(7344));e.fetch=s.default;var l=o(n(8974));e.twclid=l;var f=o(n(3532));e.utilities=f},8974:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function c(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.saveTwclidIntoCookie=e.requestAccIfNeeded=e.isAccCached=e.getTwclidParams=e.getTwclid=e.getTwclidFromHref=e.getTwclidFromCookie=e.cacheAccRequestAndSaveTwclid=e.cacheAccRequest=e.AccRequestCache=e.TWCLID_QUERY_PARAM=e.ACC_BASE=e.TWCLID_COOKIE_TTL=e.TWCLID_COOKIE_NAME=e.TWCLIDSource=void 0;var a,c=n(6575),u=o(n(7344)),s=n(3532);!function(t){t[t.Href=1]="Href",t[t.Cookie=2]="Cookie"}(a=e.TWCLIDSource||(e.TWCLIDSource={})),e.TWCLID_COOKIE_NAME="_twclid",e.TWCLID_COOKIE_TTL=2592e3,e.ACC_BASE="https://ads-api.twitter.com/measurement/website_tag_settings?version=2.3.29",e.TWCLID_QUERY_PARAM="twclid",e.AccRequestCache={};e.cacheAccRequest=function(t,n){if(!e.isAccCached(t)){e.AccRequestCache[t]=function(t){return r(void 0,void 0,void 0,(function(){var e,n,r;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,t];case 1:return[4,i.sent().json()];case 2:return e=i.sent(),[2,!0===(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.allow_1p_cookie)];case 3:return n=i.sent(),s.logError(n),[2,!1];case 4:return[2]}}))}))}(n)}};e.cacheAccRequestAndSaveTwclid=function(t,n){e.cacheAccRequest(t,n),e.saveTwclidIntoCookie(t)};e.getTwclidFromCookie=function(){try{return JSON.parse(decodeURIComponent(c.Cookies.getCookie(e.TWCLID_COOKIE_NAME)||"")).twclid}catch(t){return}};e.getTwclidFromHref=function(){var t=location.search.slice(1).split("&").map((function(t){return t.split("=")})).filter((function(t){var n=t[0];t[1];return n===e.TWCLID_QUERY_PARAM}))[0];return t&&t[1]};e.getTwclid=function(t){return r(void 0,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return(n=e.getTwclidFromHref())?[2,{twclid:n,source:a.Href}]:[4,e.AccRequestCache[t]];case 1:return r.sent()&&(n=e.getTwclidFromCookie())?[2,{twclid:n,source:a.Cookie}]:[2]}}))}))};e.getTwclidParams=function(t){return r(void 0,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return[4,e.getTwclid(t)];case 1:return(n=i.sent())?(r={twclid:n.twclid,tw_clid_src:n.source},e.isAccCached(t)||(r.tw_acc_response=1),[2,r]):[2,{}]}}))}))};e.isAccCached=function(t){return void 0!==e.AccRequestCache[t]};e.requestAccIfNeeded=function(t){if(!e.isAccCached(t)&&!e.getTwclidFromHref()&&e.getTwclidFromCookie()){var n=new URL(e.ACC_BASE);n.searchParams.set("txn_id",t);var r=u.default(n.toString());e.cacheAccRequestAndSaveTwclid(t,r)}};e.saveTwclidIntoCookie=function(t){return r(void 0,void 0,void 0,(function(){var n,r,o,u,l,f,d;return i(this,(function(i){switch(i.label){case 0:return(n=e.getTwclidFromHref())?[4,e.AccRequestCache[t]]:[2];case 1:if(!i.sent())return[2];if(r=e.getTwclidFromCookie(),n===r)return[2];for(o={pixelVersion:"2.3.29",timestamp:Date.now().toString(),twclid:n,source:a.Href},u=s.getWildcardDomains(),l=0,f=u;l<f.length&&(d=f[l],c.Cookies.setCookie(e.TWCLID_COOKIE_NAME,JSON.stringify(o),{domain:d,"max-age":e.TWCLID_COOKIE_TTL,secure:!0,samesite:"Strict"}),!c.Cookies.getCookie(e.TWCLID_COOKIE_NAME));l++);return[2]}}))}))}},3532:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.splitObjectByPropNames=e.splitObjectBy=e.parseEventCodeId=e.mergeObjects=e.logError=e.isObject=e.hashParameter=e.hasOwnPropertyCi=e.generatePageLoadId=e.generateEventId=e.getWildcardDomains=e.getPropertyCi=e.getLegacyParams=e.addQueries=e.LogPrefix=e.EventCodeImpl=e.AdsApiVersion=void 0;var o=i(n(7219)),a=n(5494);!function(t){t.v0="i",t.v1="1/i"}(e.AdsApiVersion||(e.AdsApiVersion={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SET_TRACK_PID=1]="SET_TRACK_PID",t[t.UWT_TRACK=2]="UWT_TRACK",t[t.ONETAG_CONFIG=3]="ONETAG_CONFIG",t[t.ONETAG_EVENT=4]="ONETAG_EVENT",t[t.DEPRECATED_TRACK=5]="DEPRECATED_TRACK",t[t.DEPRECATED_BUILD_PIXEL=6]="DEPRECATED_BUILD_PIXEL",t[t.DEPRECATED_BUILD_SCRIPT=7]="DEPRECATED_BUILD_SCRIPT",t[t.DEPRECATED_BUILD_IFRAME=8]="DEPRECATED_BUILD_IFRAME"}(e.EventCodeImpl||(e.EventCodeImpl={})),e.LogPrefix="[Twitter Pixel Tag]",e.addQueries=function(t,e){var n=document.createElement("a");n.href=t;var i=n.origin,o=n.pathname,a=n.search,c=n.hash,u=a.slice(1).split("&").map((function(t){return t.split("=")})).reduce((function(t,e){var n,i=e[0],o=e[1];return r(((n={})[i]=o,n),t)}),r({},e));return""+i+o+"?"+Object.keys(u).sort().map((function(t){return t+"="+(t in e?encodeURIComponent(u[t]):u[t])})).join("&")+c};function c(t,e){var n=e.toLowerCase();for(var r in t)if(r.toLowerCase()===n&&t.hasOwnProperty(r))return t[r]}e.getLegacyParams=function(t){if(!s(t))return{};var e={tw_sale_amount:c(t,"tw_sale_amount")||0,tw_order_quantity:c(t,"tw_order_quantity")||0};return delete t.tw_sale_amount,delete t.tw_order_quantity,u(t,"value")&&(e.tw_sale_amount=c(t,"value")),u(t,"num_items")&&(e.tw_order_quantity=c(t,"num_items")),Array.isArray(c(t,"content_ids"))&&(e.tw_product_id=c(t,"content_ids")[0]),u(t,"partner_id")&&(e.oct_p_id=c(t,"partner_id")),e},e.getPropertyCi=c;e.getWildcardDomains=function(){for(var t=location.hostname.split("."),e=[],n=2;n<=t.length;n++)e.push("."+t.slice(-1*n).join("."));return e};e.generateEventId=function(){return a.v4()};function u(t,e){var n=e.toLowerCase();for(var r in t)if(r.toLowerCase()===n&&t.hasOwnProperty(r))return!0;return!1}function s(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function l(t,e){t=t||{};var n=[{},{}],r=n[0],i=n[1];for(var o in t)e(o,t[o])?r[o]=t[o]:i[o]=t[o];return[r,i]}e.generatePageLoadId=function(){return a.v4()},e.hasOwnPropertyCi=u,e.hashParameter=function(t){return o.default(t).toString()},e.isObject=s,e.logError=function(t){},e.mergeObjects=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0],r=t.slice(1);return r.forEach((function(t){t=t||{},Object.keys(t).forEach((function(e){n[e]=t[e]}))})),n},e.parseEventCodeId=function(t){if("string"!=typeof t)return["",t];var e=t.toLowerCase().split("-");return 3!==e.length||"tw"!==e[0]||""===e[1]||""===e[2]?["",t]:[e[1],e[2]]},e.splitObjectBy=l,e.splitObjectByPropNames=function(t,e){return l(t,(function(t){return e.indexOf(t.trim().toLowerCase())>=0}))}},2480:function(){}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};!function(){"use strict";n(2244),n(7658),n(2735)}()}();}catch(error){Bootstrapper.reportException(error);}}
try{(function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);},loadTwitterLib())})(window,document,'script');}catch(error){Bootstrapper.reportException(error);}
waitLoopForLibLoad();let retryCount=0;function waitLoopForLibLoad(){let methodName='waitLoopForLibLoad';let requirementName='Wait for lib load';try{if(window.twq){twq('config','o4mfz');}else if(retryCount<20){setTimeout(function(){waitLoopForLibLoad();},700);retryCount++;}}catch(error){let ds='Window object';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
Bootstrapper.sendtwitterPixel=function(){let requirementName="Send twitter pixel on click";let methodName="sendtwitterPixel";try{if(window.twq){twq('event','tw-o4mfz-ocj79',{});}}catch(error){let ds='Window object';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[238]=='undefined'){utag.runonce.ext[238]=1;if(b['dom.pathname'].toString().toLowerCase()=='/en-us/flights-to-new-york'.toLowerCase()||b['dom.pathname'].toString().toLowerCase()=='/en-gb/flights-to-new-york'.toLowerCase()){let CONST_EXTN_NAME="Inbound/Outbound Pages - Pixels";let FLS_CONVERSION_UK="https://12958874.fls.doubleclick.net/activityi;src=12958874;type=conve0;cat=unite0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};ord="+Bootstrapper.cacheBuster;let FLS_RETARGETTING_UK="https://12958874.fls.doubleclick.net/activityi;src=12958874;type=retar0;cat=unite0;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};ord="+Bootstrapper.cacheBuster;let FB_RETARGETTING="https://www.facebook.com/tr?id=1853655394945282&ev=PageView";let FB_CONVERSION="https://www.facebook.com/tr?id=1853655394945282&ev=AddToCart&cd[content_type]=SearchFlights";let FB_CONVERSION_POPUP="https://www.facebook.com/tr?id=1853655394945282&ev=AddToCart&cd[content_type]=SearchFlightsPop";let FLS_CONVERSION_POPUP="https://12958874.fls.doubleclick.net/activityi;src=12958874;type=conve0;cat=unite00;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};ord="+Bootstrapper.cacheBuster;sendPixels();function sendPixels(){let requirementName="Send pixel on flight to NYC page";let methodName="sendPixels";try{Bootstrapper.imageRequest(FB_RETARGETTING);if(getPOS()=="uk"){Bootstrapper.imageRequest(FLS_RETARGETTING_UK);if(typeof Bootstrapper.pixelAuditOthers==="function"){Bootstrapper.pixelAuditOthers("Floodlight","Inbound-Outbound Pages");}}
if(typeof Bootstrapper.pixelAuditOthers==="function"){Bootstrapper.pixelAuditOthers("Facebook","Inbound-Outbound Pages");}}catch(error){let ds="IMG pixel";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
setTimeout(function(){sendConversionPixel();if(getPOS()=="uk"){setListenerForPopup();}},3000);function sendConversionPixel(){let requirementName="Send conversion pixels on flights to NYC page";let methodName="sendConversionPixel";let CSS_SEARCH_FLIGHTS=".flex.flex-wrap.w-full.mt-5.css-0 .block.cursor-pointer.flex.w-full.flex-nowrap.justify-center.items-center";try{if($(CSS_SEARCH_FLIGHTS)&&$(CSS_SEARCH_FLIGHTS).attr("data-att")=="search"){$(CSS_SEARCH_FLIGHTS).on("click",function(){if(getPOS()=="uk"){Bootstrapper.imageRequest(FLS_CONVERSION_UK);if(typeof Bootstrapper.pixelAuditOthers==="function"){Bootstrapper.pixelAuditOthers("Floodlight","Inbound-Outbound Pages");}
if(typeof Bootstrapper.sendtwitterPixel==="function"){Bootstrapper.sendtwitterPixel();if(typeof Bootstrapper.pixelAuditOthers==="function"){Bootstrapper.pixelAuditOthers("Twitter","Inbound-Outbound Pages");}}}
Bootstrapper.imageRequest(FB_CONVERSION);if(typeof Bootstrapper.pixelAuditOthers==="function"){Bootstrapper.pixelAuditOthers("Facebook","Inbound-Outbound Pages");}});}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function getPOS(){let requirementName="Get POS through location";let methodName="getPOS";let pos="us";try{let pathname=document.location.pathname;if(pathname&&pathname.indexOf("/en-gb/flights-to-new-york")>-1){pos="uk";}}catch(error){let ds="document.location.pathname";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return pos;}
function setListenerForPopup(){let requirementName="Tigger pixels on popup clicks";let methodName="triggerPixelsForPopup";try{$("body").on("click",'[data-test="book-now"]',function(){setTimeout(function(){triggerPixelOnPopup();},200);});}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function triggerPixelOnPopup(){let requirementName="Trigger pixels";let methodName="triggerPixelOnPopup";try{let popupButton=$(".flex.flex-wrap.z-20.overflow-y-auto.text-left .block.cursor-pointer.flex.w-full.flex-nowrap.justify-center.items-center");if(popupButton&&popupButton.parentsUntil("[data-att=modal-container]")){$(popupButton).on("mousedown",function(){Bootstrapper.imageRequest(FB_CONVERSION_POPUP);Bootstrapper.imageRequest(FLS_CONVERSION_POPUP);});}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['tealium_event']=='Result Load'&&b['flight_segment_index']=='1')){var CONST_EXTN_NAME='Yahoo Pixel - FSR Page';try{(function(w,d,t,u){let days=Bootstrapper.getNumDaysTilTravel(1);w[u]=w[u]||[];w[u].push({'projectId':'10000','properties':{'pixelId':'10086194','qstrings':{'et':'custom','ev':days}}});if(typeof Bootstrapper.loadYahooLib==="function"){Bootstrapper.loadYahooLib();}
setTimeout(function(){try{var c=w[u];var y=YAHOO.ywa.I13N.fireBeacon;w[u]=[];w[u].push=function(p){y([p]);};y(c);}catch(error){let ds="Yahoo pixel base code";let inputValue="";let requirementName="Send yahoo pixel";let methodName="YahooBaseCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}},1500);})(window,document,"script","dotq");}catch(error){let ds="Yahoo pixel base code";let inputValue="";let requirementName="Send yahoo pixel";let methodName="YahooBaseCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[246]=='undefined'){utag.runonce.ext[246]=1;if(1){let CONST_EXTN_NAME="Notification tracking";let DOUBLE_DASH="--";Bootstrapper.handleNotifications=function(data,parseData){let requirementName="Handle tracking for Notifications";let methodName="handleNotifications";let analyticsDataObj=[];try{let action=data.action;let params=data.params;if(action=="Alert message"){if(params&&params.info){analyticsDataObj=parseNotifications(params.info,parseData,params.pageName);}}else if(action=="Information Shown"){if(params&&params.info){if(params.pageName&&params.pageName=="Booking Confirmation Page"){analyticsDataObj=parseNotifications(params.info,data.category,action,params.pageName);}else{analyticsDataObj=parseInformationNotification(data,parseData);}}}}catch(error){let ds="Notifications callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObj;};function parseNotifications(info,category,action,pageName){let requirementName="parse notification data";let methodName="parseNotifications";let notificationObjects=[];try{let messages=info.messages;if(messages&&messages.length>0){for(let i=0;i<messages.length;i++){let label=[pageName,getNotificationsLabel(messages[i])].join("|");notificationObjects.push(prepareLabel(category,action,label));}}}catch(error){let ds="Notifications callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return notificationObjects;}
function getNotificationsLabel(msg){let requirementName="prepare label";let methodName="getNotificationsLabel";let label;try{let msgId=msg.messageId||DOUBLE_DASH;let cmsMsgKey=msg.cmsMessageKey||DOUBLE_DASH;let isCmsMessage=msg.isCmsMessage?"CMS: Y":"CMS: N";let type=msg.type||DOUBLE_DASH;let title=msg.title;label=[type,isCmsMessage,cmsMsgKey,msgId].join("|");if(title){label=[label,title].join("|");}}catch(error){let ds="Notifications callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function parseInformationNotification(data,parseData){let requirementName="parse Information notification data";let methodName="parseInformationNotification";let label;let parseMultipleData=[];try{let params=data.params;if(params&&params.info){let info=params.info;let messages=info.messages;let pageName=params.pageName;if(messages&&messages.length>0){let title,message;for(let i=0;i<messages.length;i++){pageName=params.pageName;title=messages[i].title||DOUBLE_DASH;message=messages[i].message||DOUBLE_DASH;label=[pageName,title].join("|");if(message!=DOUBLE_DASH){label=[label,message].join("|");}
parseData.eventLabel=label;parseMultipleData.push(parseData);}}}}catch(error){let ds="Notifications callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseMultipleData;}
function prepareLabel(category,action,label){let requirementName="Prepare labels for notification";let methodName="prepareLabel";let parseData={};try{parseData.eventCategory=category;parseData.eventAction=action;parseData.tealiumEvent=action;parseData.eventLabel=label;}catch(error){let ds="Notifications callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[247]=='undefined'){utag.runonce.ext[247]=1;if(1){let CONST_EXTN_NAME="Digital 3.0 - Booking Confirmation Page";let DOUBLE_DASH="--";Bootstrapper.handleBookingConfirmation=function(data,parseData){let requirementName="Handle tracking for booking confirmation page";let methodName="handleBookingConfirmation";let analyticsDataObj=[];try{if(data.action=="Page Load"){parseData=Bootstrapper.prepareTicketPurchaseEvent(data,parseData);analyticsDataObj.push(parseData);triggerPixels();utag_data.pixel_trigger="Booking Confirmation";}else if(data.action=="Impression: Trip Extras"||data.action=="Clicked: Trip Extras"){analyticsDataObj=handleTripExtras(data,parseData);}else if(data.action=="Impression: Hotel deals widget"){analyticsDataObj.push(handleHotelDeals(data,parseData));}else if(data.action=="Impression"||data.action=="Clicked: No thanks"){analyticsDataObj.push(handleAncillaryPopup(data,parseData));}else if(data.action=="Clicked: Upgrade Now"){analyticsDataObj.push(handleUpgrades(data,parseData));}else if(data.action=="Impression: Offers"||data.action=="Selected Offer"){}else if(data.action=="Clicked: Previous Carousel Slide"||data.action=="Clicked: Next Carousel Slide"||data.action=="Tile Shown"||data.action=="Clicked: Tile"){parseData.eventLabel=Bootstrapper.fetchFeatureAndPageName(data.params);analyticsDataObj.push(parseData);}}catch(error){let ds="Booking confirmation page callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObj;};function handleTripExtras(data,parseData){let requirementName="handle trip extras";let methodName="handleTripExtras";let tripExtras=[];try{let info=data.params.info;if(info&&info.offers&&info.offers.length>0){for(const offer of info.offers){let name=offer.name||DOUBLE_DASH;let destURL=offer.destinationURL||DOUBLE_DASH;let amount=offer.amount||DOUBLE_DASH;let currency=offer.currency||DOUBLE_DASH;parseData.eventLabel=[name,destURL,amount,currency].join("|");tripExtras.push(parseData);}}}catch(error){let ds="Booking confirmation trip extras callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return tripExtras;}
function handleHotelDeals(data,parseData){let requirementName="Parse hotels deals";let methodName="handleHotelDeals";try{let info=data.params.info;if(info&&info.hotelDeals){let hotels=info.hotelDeals;parseData.eventLabel=[hotels].join("|");}}catch(error){let ds="Booking confirmation Hotel deals callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function handleAncillaryPopup(data,parseData){let requirementName="Handle ancillary popup";let methodName="handleAncillaryPopup";try{if(data.params&&data.params.info){let info=data.params.info;let modelType=info.modelType||DOUBLE_DASH;let amount=info.totalAmount||DOUBLE_DASH;let currency=info.currency||DOUBLE_DASH;if(data.action=="Impression"){parseData.eventLabel=[modelType,amount,currency].join("|");}else{parseData.eventLabel=[amount,currency].join("|");}}}catch(error){let ds="Booking confirmation Ancillary popup callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function handleUpgrades(data,parseData){let requirementName="Handle Upgrades";let methodName="handleUpgrades";try{if(data.params&&data.params.info){let info=data.params.info;let amount=info.totalAmount||DOUBLE_DASH;let currency=info.currency||DOUBLE_DASH;let flights=info.flights;parseData.eventLabel=[amount,currency,parseFlights(flights)].join("|");}}catch(error){let ds="Booking confirmation Ancillary popup callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function parseFlights(flights){let requirementName="Parse flight details";let methodName="parseFlights";let flightDetails;try{if(flights){for(const flight of flights){let origin=flight.origin||DOUBLE_DASH;let destination=flight.destination||DOUBLE_DASH;let amount=flight.amount||DOUBLE_DASH;let cabin=flight.cabin||DOUBLE_DASH;if(flightDetails){flightDetails=flightDetails+","+[origin,destination,amount,cabin].join("|");}else{flightDetails=[origin,destination,amount,cabin].join("|");}}}}catch(error){let ds="Booking confirmation Ancillary popup callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return flightDetails;}
function triggerPixels(){let requirementName="Trigger pixels on Booking confirmation page load";let methodName="triggerPixels";try{Bootstrapper.triggerFBPixelConfirmation();if(typeof Bootstrapper.sendKayakPixel==="function"){Bootstrapper.sendKayakPixel();}
if(typeof Bootstrapper.triggerTwitterPixel==="function"){Bootstrapper.triggerTwitterPixel();}
if(typeof Bootstrapper.triggerPinterestPixel==="function"&&Bootstrapper.getSearchTravelType()=="Revenue"){Bootstrapper.triggerPinterestPixel();}
if(typeof Bootstrapper.sendTiktokPixel==="function"){Bootstrapper.sendTiktokPixel();}
if(typeof Bootstrapper.sendCartAbandonEvent_BookingFlow==="function"){Bootstrapper.sendCartAbandonEvent_BookingFlow("Shopping Confirmation");}}catch(error){let ds="Booking confirmation Pixels";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function handleCarousel(data,action,parseData){let requirementName="Handle carousel interactions";let methodName="handleCarousel";let analyticsDataObject=[];try{if(data.params&&data.params.info){let info=data.params.info;if(action=="Impression: Offers"&&info.tiles&&info.tiles.length>0){for(const tile of info.tiles){let dataObject=parseCarouselOffers(data.category,action,tile);analyticsDataObject.push(dataObject);}}else if(action=="Selected Offer"){let dataObject=parseCarouselOffers(data.category,action,info);dataObject.eventLabel=label;analyticsDataObject.push(dataObject);}}}catch(error){let ds="Booking confirmation carousel";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObject;}
function parseCarouselOffers(category,action,tile){let requirementName="Handle carousel interactions";let methodName="parseCarouselOffers";let dataObject={};try{let title=tile.title||DOUBLE_DASH;let details=tile.details||DOUBLE_DASH;let currency=tile.currency||DOUBLE_DASH;let amount=tile.amount||DOUBLE_DASH;label=[title,details,currency,amount].join("|");dataObject.eventCategory=category;dataObject.eventAction=action;dataObject.tealiumEvent=action;dataObject.eventLabel=label;}catch(error){let ds="Booking confirmation carousel";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataObject;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[248]=='undefined'){utag.runonce.ext[248]=1;if(1){let CONST_EXTN_NAME="Digital 3.0 - Booking Confirmation Page - Ecommerce";let DOUBLE_DASH="--";Bootstrapper.prepareTicketPurchaseEvent=function(data,parseData){let requirementName="Handle tracking for booking confirmation page";let methodName="handleBookingConfirmation";try{if(data.params&&data.params.info){let info=data.params.info;parseData=prepareEEEvent(prepareDataForEEConfirmation(),Bootstrapper.getSearchTravelType(),prepareLabelForTicketPurchase(info));setDimensionInfo(parseData);}}catch(error){let ds="Booking confirmation page callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;};function prepareLabelForTicketPurchase(info){let requirementName="Prepare label for Ticket purchase event";let methodName="prepareLabelForTicketPurchase";let label="";try{let trips=Bootstrapper.fetchSelectedTripsFromDL()
if(trips&&trips.length>0){for(let index=0;index<trips.length;index++){label=Bootstrapper.prepareLOFData(trips[index],index,label);}
let marketType=Bootstrapper.getMarketType(trips[0].originCountryCode,trips[trips.length-1].destinationCountryCode);let paymentInfo=getPaymentDetails(info.paymentInfo);let discountDetails=getDiscountDetails(info.cart);label=[label,marketType].join("|");if(paymentInfo){label=[label,paymentInfo].join("|");}
if(info.hasExtraSeat){let es=info.hasExtraSeat?"ES: Y":"ES: N";label=[label,es].join("|");}
if(discountDetails){label=[label,discountDetails].join("|");}}}catch(error){let ds="Booking confirmation page callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function getPaymentDetails(paymentInfo){let requirementName="Get payment details";let methodName="getPaymentDetails";let paymentInfoDetails;try{if(paymentInfo){for(const payInfo of paymentInfo){let paymentType=payInfo.paymentType||DOUBLE_DASH;let cardTypeCode=payInfo.cardTypeCode||DOUBLE_DASH;paymentInfoDetails=(paymentInfoDetails)?[paymentInfoDetails,paymentType,cardTypeCode].join("|"):[paymentType,cardTypeCode].join("|")}}}catch(error){let ds="Booking confirmation page callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return paymentInfoDetails;}
function getDiscountDetails(cart){let requirementName="Get discount details";let methodName="getDiscountDetails";let discountInfo;try{if(cart&&cart.offers){for(const offerDetails of cart.offers){let offerName=offerDetails.name||DOUBLE_DASH;let originalPrice=offerDetails.originalPrice||DOUBLE_DASH;let offerPrice=offerDetails.offerPrice||DOUBLE_DASH;let currency=offerDetails.currency||DOUBLE_DASH;discountInfo=(discountInfo)?[discountInfo,offerName,originalPrice,offerPrice,currency].join("|"):[offerName,originalPrice,offerPrice,currency].join("|");}}}catch(error){let ds="Booking confirmation page callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return discountInfo;}
function setDimensionInfo(parseData){let requirementName="Prepare dimensions info for Ticket purchase";let methodName="setDimensionInfo";let dimensionsObject;try{dimensionsObject=parseData;dimensionsObject.customDimensions={};dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.MPAccStatus]=Bootstrapper.getMPAccStatus();dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.customer_id]=utag_data.customer_id||DOUBLE_DASH;dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.cabin_type]=Bootstrapper.getCabinTypeFromSelectedTrips();dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.ticket_type]=Bootstrapper.getSearchTravelType();dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.od_pair]=getODPairs();dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.departure_date]=getDepartDates();dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.saturday_night_stay]=utag_data.saturday_night_stay||DOUBLE_DASH;dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.tripModel]=utag_data.tripModel||DOUBLE_DASH;dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.purchase_itinerary]=getPurchaseItinerary();dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.tripType]=Bootstrapper.getTripTypeValue();dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.pnr]=utag_data.pnr||DOUBLE_DASH;dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.date_pnr]=getOrderId();dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.currency]=Bootstrapper.getCurrency();dimensionsObject.customDimensions[Bootstrapper.UTAG_CONST.upgrade_type]=Bootstrapper.getUpgradeType();}catch(error){let ds="Booking confirmation page callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dimensionsObject;}
function getODPairs(){let requirementName="Prepare OD pair";let methodName="getODPair";let odPair;try{if(utag_data.selectedTrips){let trips=utag_data.selectedTrips;for(let i=0;i<trips.length;i++){let origin=Bootstrapper.getSelectedTripOrigin(i+1);let destination=Bootstrapper.getSelectedTripDestination(i+1);let odInfo=[origin,destination].join("-");if(odPair){odPair=odPair+","+odInfo;}else{odPair=odInfo;}}}}catch(error){let ds="Booking confirmation - DL";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return odPair;}
function getDepartDates(){let requirementName="Get depart date";let methodName="getDepartDates";let departDate;try{if(utag_data.selectedTrips){let trips=utag_data.selectedTrips;for(let i=0;i<trips.length;i++){let departDateTimeText=trips[i].departureDateTimeText;let travelDate=departDateTimeText?Bootstrapper._dateFormat(departDateTimeText,"MM-dd-yyyy"):DOUBLE_DASH;if(departDate&&travelDate!=DOUBLE_DASH){departDate=departDate+","+travelDate;}else{departDate=travelDate;}}}}catch(error){let ds="Booking confirmation - DL";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return departDate;}
function getPurchaseItinerary(){let requirementName="Get purchase itinerary";let methodName="getPurchaseItinerary";let purchaseItinerary;try{if(utag_data&&utag_data.selectedTrips&&utag_data.selectedTrips.length>0){let origin=Bootstrapper.getSelectedTripOrigin(1);let destination=Bootstrapper.getSelectedTripDestination(1);let departDate=Bootstrapper._dateFormat(utag_data.selectedTrips[0].departureDateTimeText,"dd-MM-yyyy");let stayLength=Bootstrapper.getStayLengthFromSelectedTrip(0);let tripType=Bootstrapper.getTripTypeValue();let paxCount=Bootstrapper.getPaxCount();let currency=Bootstrapper.getCurrency();let today=new Date();today=Bootstrapper._dateFormat(today,"dd-MM-yyyy");let returnDate=Bootstrapper._dateFormat(utag_data.selectedTrips[0].arrivalDateTimeText,"dd-MM-yyyy");purchaseItinerary=[origin,destination,departDate,stayLength,tripType,paxCount,currency,today,returnDate].join("|");}}catch(error){let ds="Booking confirmation - DL";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return purchaseItinerary;}
function getOrderId(){let requirementName="Get orderId";let methodName="getOrderId";let orderId;try{if(utag_data&&utag_data.pnr){let today=new Date();today=Bootstrapper._dateFormat(today,"yyyy-MM-dd");orderId=[today,utag_data.pnr].join("|");}}catch(error){let ds="Booking confirmation - DL";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return orderId;}
function prepareDataForEEConfirmation(){let methodName="prepareDataForEEConfirmation";let requirementName="prepare data for enhanced ecommerce ticket purchase event";let ecommerceProducts;try{ecommerceProducts=Bootstrapper.resetEEProductArray({});ecommerceProducts.order_id=[];if(utag_data.selectedTrips&&utag_data.selectedTrips.length>0){let trips=utag_data.selectedTrips;for(let i=0;i<trips.length;i++){ecommerceProducts=Bootstrapper.prepareEcommerceProducts(trips[i],i+1,ecommerceProducts);ecommerceProducts.order_id.push(getOrderId());}}}catch(error){let ds="Data object from utag_data";let inputValue="utag_data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return ecommerceProducts;}
function prepareEEEvent(ecommerceProducts,action,label){let methodName="prepareEEEvent";let requirementName="Prepare event structure for Enhance ecommerce tracking";let parseDataObj={};try{parseDataObj.eventCategory="Ticket Purchases";parseDataObj.eventAction=action;parseDataObj.tealiumEvent=parseDataObj.eventCategory;parseDataObj.eventLabel=label;parseDataObj.ecommerceProducts=ecommerceProducts;parseDataObj.currency=Bootstrapper.getProductCurrencyCode();}catch(error){let ds="Function argument";let inputValue="ecommerceProducts";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[249]=='undefined'){utag.runonce.ext[249]=1;if(1){let CONST_EXTN_NAME="Facebook Pixel - Booking Confirmation Page";let DOUBLE_DASH="--";Bootstrapper.triggerFBPixelConfirmation=function(){let methodName='triggerFBPixelConfirmation';let requirementName='Facebook pixel on booking confirmation page';try{let pos=utag_data.point_of_sale,posList={US:!0,GB:!0,JP:!0,AU:!0,HK:!0,IE:!0,FR:!0,NL:!0,IT:!0,IL:!0,MX:!0,BR:!0,AR:!0,DE:!0,CR:!0,PR:!0};if(Bootstrapper&&typeof Bootstrapper.imageRequest==='function'&&posList[pos]&&utag_data){let eventName='Purchase';let fbData=Bootstrapper.prepareDataForFBCAPI(eventName);let cctype=getPaymentDetails();fbData.cctyp=cctype?cctype:DOUBLE_DASH;let pixelURL=Bootstrapper.prepareFBPixelURL(fbData,eventName);pixelURL+='&cd[cctyp]='+fbData.cctyp;Bootstrapper.imageRequest(pixelURL);Bootstrapper.sendDataToFBCAPI(fbData);if(typeof Bootstrapper.pixelAuditBookingPath==="function"){Bootstrapper.pixelAuditBookingPath("Facebook");}}}catch(error){let ds='utag_data.payment_info';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}};function getPaymentDetails(){let requirementName="Get payment details";let methodName="getPaymentDetails";let cctyp;try{if(utag_data.payment_info){for(const element of utag_data.payment_info){if(element.paymentType){cctyp=cctyp?[cctyp,element.paymentType].join("|"):element.paymentType;}}}}catch(error){let ds='utag_data.payment_info';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}
return cctyp;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[278]=='undefined'){utag.runonce.ext[278]=1;if((/^(\/.*\/au\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')||(/^(\/.*\/au\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')){let CONST_EXTN_NAME="Quantcast Base Lib";let requirementName="Load Quantcast lib";loadQuantcastBaseScript();function loadQuantcastBaseScript(){try{!function(window){function RequireDependencyError(e){Error.apply(this),this.name="RequireDependencyError",this.message=e||""}
RequireDependencyError.prototype=Error.prototype;var amd={},definitions={};amd.require=function(e,t){"function"==typeof e&&(t=e,e=[]);for(var n=[],r=0;r<e.length;r++){var o=e[r];if(!Object.prototype.hasOwnProperty.call(definitions,o))
throw new RequireDependencyError("No module named "+o+" has been defined");n[r]=definitions[o]}
return t.apply({},n)};var array=Array.prototype,available=function(e,t){return"function"==typeof e[t]},map="map",forEach="forEach",reduce="reduce",indexOf="indexOf";with(available(array,"map")||(array.map=function(e,t){var n=[];t||(t=this);for(var r=0;r<this.length;r++)
n[r]=e.call(t,this[r],r,this);return n}),available(array,"forEach")||(array.forEach=array.map),available(array,"reduce")||(array.reduce=function(e,t){var n=0;for(void 0===t&&(t=this[n++]);n<this.length;n++)
t=e.call(this,t,this[n],n,this);return t}),available(array,"indexOf")||(array.indexOf=function(e){for(var t=0;t<this.length;t++)
if(this[t]==e)
return t;return-1}),amd.define=function(e,t,n){Object.prototype.hasOwnProperty.call(definitions,e)||(definitions[e]=amd.require(t,n))},amd)
define("quant/session",[],function(){var e=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})};if(!window.sessionStorage)
return e();var t=window.sessionStorage.getItem("qcSes");return t||(t=e(),window.sessionStorage.setItem("qcSes",t),t)}),define("quant/utils",["quant/session"],function(e){var t=function(){return(new Date).getTime()},n=function(){return new Date},r=function(e){var t=new Date(2e3,e,1,0,0,0,0),n=t.toGMTString();return t-new Date(n.substring(0,n.lastIndexOf(" ")-1))},o=function(){return r(0)!==r(6)?1:0},a=function(){return Math.round(2147483647*Math.random())},i=function(){return navigator&&"Apple Computer, Inc."===navigator.vendor},u=function(e){for(var t=0,n=0;n<e.length;n++)
t+=e.charCodeAt(n);return t%100},c=/qcdbgc=1$/.test(window.location.toString()),s=function(e,t){"undefined"!=typeof console&&console.log.apply(console,[e+" "+n().toString()].concat([].slice.call(t)))};return{now:n,nowTimestamp:t,isDst:o,tzOffset:r,random:a,isSafari:i,hashBucket:u,log:{error:function(){s("ERROR",arguments)},debug:function(){c&&s("DEBUG",arguments)}},reportError:function(n,r,o){o=o||{};var a={url:window.location.href,version:"8508733c-20230116145555",time:t(),browser:navigator.userAgent,sessionId:e};r&&"string"==typeof r&&(a.label=r),n&&(n.message&&"string"==typeof n.message?a.msg=n.message:"string"==typeof n&&(a.msg=n),n.stack&&"string"==typeof n.stack&&(a.stack=n.stack)),o.pcode&&"string"==typeof o.pcode&&(a.pcode=o.pcode);var i=new XMLHttpRequest;i.open("POST","https://pixel.quantcount.com/tag/error",!0),i.send(JSON.stringify(a))}}}),define("quant/origin",["quant/utils"],function(e){return function(t){for(var n=t.domain||"",r=new Date(0).toUTCString(),o=new Date(e.nowTimestamp()+864e5).toUTCString(),a=n.split("."),i="",u=2;u<=a.length;u++){i=a.slice(-u).join(".");var c="_dlt="+"1; path=/; domain="+i+"; expires="+o;if(t.cookie=c,/_dlt=1\b/.test(t.cookie))
return t.cookie="_dlt="+"; path=/; domain="+i+"; expires="+r,i}
return t.cookie="_dlt="+"; path=/; domain="+i+"; expires="+r,n}}),define("quant/windows",[],function(){return function(e,t){if(void 0===e)
throw new Error("window many not be undefined");if(void 0===t)
throw new Error("top may not be undefined");t=t.self,this.depth=0;var n=e.self;for(this.top=n;n!==t;){n=n.parent.self;try{n.location.href&&(this.url=n.location.href,this.top=n)}catch(e){}
this.depth++}
this.locate=function(n){for(var r=e;;){try{if(n in r.frames)
return r}catch(e){}
if(r===t)
break;r=r.parent.self}}}}),define("quant/ready",[],function(){function e(){var e=!1,t=[];document.readyState in{complete:!0,interactive:!0}&&(e=!0);var n=function(){for(e=!0;t.length>0;)
t.shift()()};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",n,!1),window.attachEvent("onload",n)),this.ready=function(n){e?n():t.push(n)}}
return(new e).ready}),define("quant/promise",[],function(){function e(u){var c,s,f=[],l=t,p=function(e){return e},d=function(e,t,n,r){try{var a=e(r);o(a)?(a.then(t),a.catch(n)):t(a)}catch(e){n(e)}},h=function(e){c=e,l=n,f.forEach(function(t){t.push(e),d.apply(0,t)})},v=function(e){s=e,l=r,f.forEach(function(t){t[r](e)})},g=function(e,t,n){return function(r){d(e,t,n,r)}};try{u(h,v)}catch(e){v(e)}
return{then:function(o){switch(l){case t:return new e(function(e,t){f.push([o,e,t])});case n:return a(o(c));case r:return i(s)}},catch:function(o){switch(l){case t:return new e(function(e,t){f.push([p,e,g(o,e,t)])});case n:return a(c);case r:return a(o(s))}}}}
var t=0,n=1,r=2,o=function(e){return"object"==typeof e&&"then"in e&&"function"==typeof e.then},a=function(e){return o(e)?e:{then:function(t){return a(t(e))},catch:function(){return this}}},i=function(e){return{then:function(){return this},catch:function(t){return a(t(e))}}};return e.resolve=a,e.reject=i,e.all=function(e){return e.length?e.map(function(e){return e.then(function(e){return[e]})}).reduce(function(e,t){return e.then(function(e){return t.then(function(t){return e.concat(t)})})}):a([])},e}),define("quant/loader",["quant/ready","quant/promise"],function(e,t){function n(n,r){var o,a=[];e(function(){o=r.getElementsByTagName("head")[0]});var i=function(e){var t=new Image;return t.src=e,t};this.image=function(e){return new t(function(t,n){var r=i(e);a.push(r),r.onload=function(){t(r),a.shift(),delete r.onload,delete r.onerror},r.onerror=n})},this.beacon=function(e){var t=n.navigator;t&&t.sendBeacon?t.sendBeacon(e):i(e)};var u=function(e,t,n){var o=r.createElement("script");o.type="text/javascript",o.src=e;var a=function(){t(o),o.onreadystatechange=null,o.onload=null,o.onerror=null};return o.onload=a,o.onreadystatechange=function(){o.readyState in{loaded:1,complete:1}&&a()},o.onerror=n,o};this.script=function(n){return new t(function(t,r){e(function(){var e=u(n,t,r);o.firstChild?o.insertBefore(e,o.firstChild):o.appendChild(e)})})}}
return n}),define("quant/event",[],function(){function e(){this.add=function(e,t,n){e.addEventListener?e.addEventListener(t,n):"function"==typeof jQuery?jQuery(e).on(t,n):e.attachEvent&&e.attachEvent("on"+t,n)},this.remove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):"function"==typeof jQuery?jQuery(e).off(t,n):e.detachEvent&&e.detachEvent("on"+t,n)},this.trigger=function(e,t,n){var r=e.ownerDocument;if(e.dispatchEvent&&r.createEvent){var o=r.createEvent("Event");if(o.initEvent(t,!0,!0),void 0!==n)
for(var a in n)
a in o||(o[a]=n[a]);e.dispatchEvent(o)}else
"function"==typeof jQuery&&jQuery(e).trigger(t,n)}}
return new e}),define("quant/consent/truste",["quant/promise","quant/event","quant/utils"],function(e,t,n){return function(r,o,a,i,u,c,s,f){var l,p={},d=function(e){var t=e.source[0];return"p"+e.consent[0]+("a"==t?"e":"i")};l="object"==typeof i&&"function"==typeof i.callApi?function(t,n,r,o){var a=i.callApi(n,o,f,u,r);return t.cm=d(a),e.resolve(!0)}:function(i,c,s,l){return r.depth>0&&(t.add(o,"message",function(e){var t=e.data;if("string"==typeof t&&t.indexOf("PrivacyManagerAPI")>0)
try{t=JSON.parse(t)}catch(e){return}
else if(void 0!==t.PrivacyManagerAPI){var n=t.PrivacyManagerAPI;i.cm=d(n)}}),a.postMessage(JSON.stringify({PrivacyManagerAPI:{timestamp:n.nowTimestamp(),action:c,self:l,domain:f,authority:u,type:s}}),"*")),e.resolve(!0)},this.consent=function(e){return l(e,"getConsent",c,s)},this.parameters=p}}),define("quant/consent/uspapi",["quant/promise","quant/event","quant/utils"],function(e,t,n){return function(r,o,a){var i;if("function"==typeof o.__uspapi)
i=function(t,r){return new e(function(e,t){o.__uspapi("getUSPData",r,function(n){n&&"string"==typeof n.uspString?e(n):t(n)})}).catch(function(e){return n.log.error("uspapi: unsuccessful",e),n.reportError(e,"uspapi: unsuccessful"),!0})};else{var u=(r.locate(a),{});t.add(o,"message",function(e){var t=e.data;if("string"==typeof t&&"{"==t[0])
try{t=JSON.parse(t)}catch(e){return}
if(Object.prototype.hasOwnProperty.call(t,"__uspapiReturn")){var n=t.__uspapiReturn,r=n.callId,o=u[r];if(void 0===o)
return;n.success?o[0](n.returnValue):o[1](n.returnValue)}}),i=function(t,o){var i=r.locate(a);if(void 0===i)
return e.resolve(void 0);var c=n.nowTimestamp();return new e(function(e,n){u[c]=[e,n],i.postMessage({__uspapiCall:{command:t,version:o,callId:c}},"*")})}}
this.consent=function(e){return i("getUSPData",1).then(function(t){return t&&"string"==typeof t.uspString&&(e.us_privacy=t.uspString),!0})}}}),define("quant/consent/manager",["quant/promise"],function(e){return function(t){var n,r={},o=function(o){return void 0===n&&(n=e.all(t.map(function(e){return e.consent(r)})).then(function(e){return e.reduce(function(e,t){return e&&t},!0)})),n.then(function(e){if(e)
return o()})};this.consent=o,this.wrap=function(e){return function(){var t=this,n=arguments;return o(function(){return e.apply(t,n)})}},this.parameters=r}}),define("quant/consent/tcf2.0",["quant/promise","quant/event","quant/utils"],function(e,t,n){function r(e,t){var n=t.gdprApplies,r=t.purpose,o=t.vendor,a=o&&o.consents&&o.consents[c],i=o&&o.legitimateInterests&&o.legitimateInterests[c],u=t.publisher?t.publisher.restrictions:{};return!n||e.map(function(e){var t=!!r.consents&&r.consents[e],n=!!r.legitimateInterests&&r.legitimateInterests[e],o=u&&u[e]?u[e][c]:null;return 0!==o&&(!(!a||!t||2===o||-1==f.indexOf(e)&&1!==o)||!(1===o||!i||!n||-1!=l.indexOf(e)||-1!=f.indexOf(e)&&2!==o))}).reduce(function(e,t){return e&&t},!0)}
function o(o,c,f){var l,g;if("function"==typeof c.__tcfapi)
g=function(t,n){return new e(function(e,r){c.__tcfapi(t,p,function(n,o){if(o){var a=n.eventStatus;t===d&&n.gdprApplies&&"useractioncomplete"!==a&&"tcloaded"!==a||e(n)}else
r(n)},n)})};else{var m={},y={};t.add(c,"message",function(e){var t=e.data;if(void 0===t)
return n.log.error(a+": Recieved undefined message"),void n.reportError("Recieved undefined message",a);if("string"==typeof t&&"{"==t[0])
try{t=JSON.parse(t)}catch(e){return}
if(Object.prototype.hasOwnProperty.call(t,h)){var r=t[h],o=r.callId,c=m[o];if(void 0===c)
return;var s=r.returnValue;r.success?y[o]===d&&s.gdprApplies&&"useractioncomplete"!==s.eventStatus&&"tcloaded"!==s.eventStatus||c[i](s):c[u](s)}}),g=function(t,r){var a=o.locate(f);if(void 0===a)
return e.resolve({gdprApplies:!1});var i=n.nowTimestamp();return new e(function(e,n){m[i]=[e,n],y[i]=t;var o={};o[v]={command:t,parameter:r,version:p,callId:i},a.postMessage(JSON.stringify(o),"*")})}}
this.consent=function(e){return void 0===l&&(l=g(d).then(function(t){return t.gdprApplies&&"false"!=t.gdprApplies?(e.gdpr=1,e.gdpr_consent=t.tcString):e.gdpr=e.gdpr||0,r(s,t)}).catch(function(t){return n.log.error(a+": unsuccessful",t),n.reportError(t,a+": unsuccessful"),e.gdpr=e.gdpr||0,!0})),l}}
var a="tcf2",i=0,u=1,c=11,s=["1","3","7","8","9","10"],f=["1","3"],l=["1","3"],p=2,d="addEventListener",h="__tcfapiReturn",v="__tcfapiCall";return o.resolveConsent=r,o}),define("quant/hashing",[],function(){function e(){function e(e){return unescape(encodeURIComponent(e))}
function t(e,t){return t>>>e|t<<32-e}
function n(e){return t(2,e)^t(13,e)^t(22,e)}
function r(e){return t(6,e)^t(11,e)^t(25,e)}
function o(e){return t(7,e)^t(18,e)^e>>>3}
function a(e){return t(17,e)^t(19,e)^e>>>10}
function i(e,t,n){return e&t^~e&n}
function u(e,t,n){return e&t^e&n^t&n}
this.FNV=function(e){var t,n,r,o;return t=2166136261,n=3386659096,r=c(t,e),o=c(n,e),Math.round(Math.abs(r*o)/65536).toString(16)};var c=function(e,t){var n;for(n=0;n<t.length;n++)
e^=t.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e};this.SHA256=function(t){t=e(t);var c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];t+=String.fromCharCode(128);for(var f=t.length/4+2,l=Math.ceil(f/16),p=new Array(l),d=0;d<l;d++){p[d]=new Array(16);for(var h=0;h<16;h++)
p[d][h]=t.charCodeAt(64*d+4*h+0)<<24|t.charCodeAt(64*d+4*h+1)<<16|t.charCodeAt(64*d+4*h+2)<<8|t.charCodeAt(64*d+4*h+3)<<0}
var v=8*(t.length-1)/Math.pow(2,32),g=8*(t.length-1)>>>0;for(p[l-1][14]=Math.floor(v),p[l-1][15]=g,d=0;d<l;d++){for(var m=new Array(64),y=0;y<16;y++)
m[y]=p[d][y];for(y=16;y<64;y++)
m[y]=a(m[y-2])+m[y-7]+o(m[y-15])+m[y-16]>>>0;var q=s[0],w=s[1],_=s[2],b=s[3],x=s[4],E=s[5],S=s[6],O=s[7];for(y=0;y<64;y++){var I=O+r(x)+i(x,E,S)+c[y]+m[y],j=n(q)+u(q,w,_);O=S,S=E,E=x,x=b+I>>>0,b=_,_=w,w=q,q=I+j>>>0}
s[0]=s[0]+q>>>0,s[1]=s[1]+w>>>0,s[2]=s[2]+_>>>0,s[3]=s[3]+b>>>0,s[4]=s[4]+x>>>0,s[5]=s[5]+E>>>0,s[6]=s[6]+S>>>0,s[7]=s[7]+O>>>0}
for(O=0;O<s.length;O++)
s[O]=("00000000"+s[O].toString(16)).slice(-8);return s.join("")}}
return new e}),define("quant/normalize",["quant/hashing"],function(e){var t=function(e){var t=typeof e;return"string"==t&&e.length>0||"number"==t||"boolean"==t};return function(n,r,o,a,i){var u,c={},s=null,f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,l=/^[A-Fa-f0-9]{64}$/,p=2;for(u in r)
Object.prototype.hasOwnProperty.call(r,u)&&t(r[u])&&("uid"!==u&&"uh"!==u?"qacct"!==u&&(c[u+n]=encodeURIComponent(r[u])):(r[u].match(l)?(p=1,s=r[u].toLowerCase()):(r[u].match(f)&&(p=0,r[u]=r[u].toLowerCase()),""!==r[u]&&(s=e.SHA256(r[u]))),delete r[u]));for(u in o)
Object.prototype.hasOwnProperty.call(o,u)&&t(o[u])&&!c[u+n]&&(c[u+n]=encodeURIComponent(o[u]));return c["rf"+n]=""+i,"string"==typeof s&&(r.uh=s,c["uh"+n]=encodeURIComponent(s)),c["uht"+n]=""+p,c["a"+n]=a,c}}),define("quant/storage-experiment",[],function(){function e(){try{window.localStorage.deleteItem(t)}catch(e){}
try{document.cookie=n+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}catch(e){}}
var t="qcSxl",n="qcSxc";return{cleanExperiment:e}}),define("quant/identity-store",["quant/utils","quant/hashing"],function(e,t){var n=["4dcfa7079941","127fdf7967f31","588ab9292a3f","32f92b0727e5","22f9aa38dfd3","a4abfe8f3e04","18b66bc1325c","958e70ea2f28","bdbf0cb4bbb","65118a0d557","40a1d9db1864","18ae3d985046","3b26460f55d"],r=function(e,t){var n,r,o,a=null;return e?(n=e.indexOf(t+"="),r=n+t.length+1,n>-1&&(o=e.indexOf(";",r),o<0&&(o=e.length),a=e.substring(r,o)),a):a},o=function(){return"P0-"+e.random()+"-"+e.now().getTime()},a=function(e){for(var r=t.FNV(e),o=0;o<n.length;o++)
if(n[o]===r)
return!0;return!1},i=function(t,n,r,o){var a={value:r,expiry:e.now().getTime()+o};t.localStorage.setItem(n,JSON.stringify(a))},u=function(t,n){var r=t.localStorage.getItem(n);if(!r)
return null;var o=JSON.parse(r);return e.now().getTime()>o.expiry?(localStorage.removeItem(n),null):o.value};return function(t,c,s){var f=0,l=r(c.cookie,"__qca")||u(t,"__qca"),p=a(s);l||(f=1,l=o()),this.SD=n,this.persistIdentifier=function(){1!==f||p||(c.cookie=["__qca","=",l,"; expires=",new Date(e.now().getTime()+338688e5).toGMTString(),"; path=/; domain=",s].join(""),i(t,"__qca",l,338688e5))},this.removeIdentifier=function(){c.cookie="__qca"+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",t.localStorage.removeItem("__qca")},this.getFirstPartyIDString=function(e){return p||1===e?";fpan=u;fpa=":";fpan="+f+";fpa="+l},this.getExternalIDString=function(e){if(p||1===e)
return"";var t=r(c.cookie,"_pubcid")||r(c.cookie,"_sharedID"),n=r(c.cookie,"_pubcid_optout");return!r(c.cookie,"_pbjs_id_optout")&&"1"!==n&&t?";pbc="+t:";pbc="}}}),define("quant/quant",["quant/origin","quant/windows","quant/loader","quant/consent/truste","quant/consent/uspapi","quant/consent/manager","quant/consent/tcf2.0","quant/normalize","quant/hashing","quant/storage-experiment","quant/session","quant/utils","quant/identity-store"],function(e,t,n,r,o,a,i,u,c,s,f,l,p){function d(d,h,v){var g,m,y,q,w,_,b,x,E,S,O,I,j,C,A,P,D,R,T,M,k,z,N,U,L,J,B,Q,F,G,V,H,$,X,Z,K,W,Y,ee,te=["p-fdPOEe5CwS0oM","p-hTG3d_rXG5uFA"],ne=e(h),re=new t(d,d.top),oe=new n(d,h),ae=new a([new r(re,d,d.top,d.PrivacyManagerAPI,"truste.com","advertising","quantserve.com",ne),new o(re,d,"__uspapiLocator"),new i(re,d,"__tcfapiLocator")]),ie=new p(d,h,ne),ue=["a","ce","cm","dst","enc","fpa","fpan","je","ns","ogl","rf","tzo","sr","sxl","sxc","ses"],ce=!1,se=!1,fe=0,le=[],pe=[],de=[],he=[],ve={},ge=0,me=null,ye={},qe={},we=[].slice;!function(){var e;e=h.createElement("script"),g="async"in e?1:e.readyState?2:3,e=null}();var _e=function(e){try{return{init:q,clean:be,hash:c.SHA256,push:w,rules:U,require:require,hasRules:J,defaults:G,__qc:function(){return!0}}[e].apply(null,we.call(arguments,1))}catch(e){return l.log.error(e),l.reportError(e,"api",{pcode:he[0]}),!1}};_e.evts=0,_e.v=2,_e.SD=ie.SD,_e.qpixelsent=[],N=function(e){var t,n=e?e.length||0:0;for(t=0;t<n;t++)
if(!e[t])
return!1;return!0},F=function(e){(e=e||d._qacct)&&(P(he,e)||he.push(e))},P=function(e,t){var n,r=e.length;for(n=0;n<r;n++)
if(e[n]===t)
return!0;return!1},T=function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},M=function(e){var t,n,r;if("array"===(n=T(e)))
return e.slice(0);if("object"===n){t={};for(r in e)
Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}
return"string"===n?""+e:e},w=function(e,t){_(e,t)},J=function(e){return P(de,e)},G=function(e,t){var n;e&&(n=ye[e],n&&(t=C(t,n)),t.qacct&&delete t.qacct,ye[e]=t)},V=function(e){var t,n,r,o,a,i;if(y(e)){a=e;for(o in a){if("string"==typeof a[o]){t=e.event||"load",n=e.media||"webpage","rule"!==t&&"load"!==t||"webpage"!==n&&"ad"!==n?_(e):(i=e.qacct||d._qacct,e.qacct=i,r=qe[i],r=r?C(r,e):e,qe[i]=r),F(e.qacct);break}
"object"==typeof a[o]&&null!=a[o]&&V(a[o])}}},C=function(e,t){var n={};return n.qacct=e.qacct||t.qacct,"load"===e.event||"load"===t.event?n.event="load":e.event&&t.event?n.event=e.event||t.event:n.event=null,n.media=null,"webpage"===e.media||"webpage"===t.media?n.media="webpage":"ad"===e.media||"ad"===t.media?n.media="ad":n.media=e.media||t.media,A(n,e,t),A(n,t,e),n.event||delete n.event,n.media||delete n.media,n},A=function(e,t,n){var r,o,a,i,u,c;for(r in t)
Object.prototype.hasOwnProperty.call(t,r)&&!Object.prototype.hasOwnProperty.call(e,r)&&(o=t[r],a=n[r],i="",u=!!o&&"string"==typeof o,c=!!a&&"string"==typeof a,u&&(i=o),u&&c&&(i+=","),c&&(i+=a),e[r]=i)},H=function(){var e,t,n=[];if(!(ge>0)){R();for(e in qe)
Object.prototype.hasOwnProperty.call(qe,e)&&qe[e]&&(t=qe[e],n.push(t),delete qe[e]);1==n.length&&_(n[0]),n.length>1&&_(n)}},$=function(){var e,t,n,r=[];for(n=he.slice(0),e=0;e<n.length;e++)
t=n[e],J(t)||r.push(t);if(0===r.length)
H();else
for(e=0;e<r.length;e++)
t=r[e],de.push(t),I(t)},j=function(e,t,n,r){var o;e=d.location.protocol+"//"+e,me=h.scripts&&h.scripts[0]||null;var a=me&&me.parentNode||h.head||h;if(o=h.createElement("script"),1===g)
o.src=e,o.async=!0,o.onload=t,n&&(o.onerror=function(e){o.onerror=null,n(e)}),a.insertBefore(o,me);else if(2===g){var i=!1;o.onload=o.onreadystatechange=function(){i||"loaded"!=o.readyState&&"complete"!=o.readyState||(i=!0,o.onreadystatechange=null,t())},o.src=e,a.insertBefore(o,me)}else
r&&r()},I=function(e){ge++,'use strict';(function(a,b,c){try{__qc("defaults",a,{labels:"_fp.event.Default"})}catch(d){}
__qc("rules",[a])})("p-avkJncntx268p",window,document);},X=function(){ge-=ge>0?1:0,H()},U=function(){var e,t,n,r=!0,o=!1;if(arguments.length){for(n=function(e){r?V(e):_(e,!0),o=!0},e=0;e<arguments.length;e++)
t=we.call(arguments[e],0),t.splice(1,0,n),L.apply(null,t);r=!1,ce&&H()}
return o},L=function(e,t){var n,r,o,a,i,u,c,s=[],f=[],l=t||_;if((r=we.call(arguments,2))&&r.length){for(o=r[0]||N,a=r[1],i=r[2],n=i.length,u=0;u<n;u++)
s.push(!1),f.push(null);c={p:e,f:s,r:o,c:i,a:a,v:f},J(e)||de.push(e),pe.push(c),B(c,l)}else
de.push(e),ve[e]=6},B=function(e,t){var n,r=e&&e.c?e.c.length:0;for(n=0;n<r;n++)
!function(n){var r,o;try{r=e.c[n][0],o=e.c[n].slice(1),o.splice(0,0,function(r){e.f[n]=!0,e.v[n]=r,Q(e,t)}),r.apply(null,o)}catch(r){l.reportError(r,"processRule",{pcode:e.p}),e.f[n]=!0,e.v[n]=!1,Q(e,t)}}(n)},Q=function(e,t){var n,r,o,a,i,u,c,s=e.a,f=e.f,p=e.v,d=e.r||N;if(n=N(f),n&&(n=n&&d(p)),n)
for(i=0;i<s.length;i++)
try{r=s[i][0],o=s[i].length>1?s[i].slice(1):[],o=o.concat(e.v),a=r.apply(null,o),u={qacct:e.p,event:"rule"};for(c in a)
Object.prototype.hasOwnProperty.call(a,c)&&"qacct"!==c&&(u[c]=a[c]);t(u)}catch(t){l.reportError(t,"evalRule",{pcode:e.p});continue}},m=function(e){return e.replace(/\./g,"%2E").replace(/,/g,"%2C")},y=function(e){return void 0!==e&&null!=e},z=function(e){var t,n;if(e&&"object"===T(e))
for(n=0;n<ue.length;n++)
t=ue[n],Object.prototype.hasOwnProperty.call(e,t)&&e[t]&&delete e[t]},S=function(e,t,n){var r,o,a;return t&&"string"==typeof t.qacct?r=t.qacct:"string"==typeof d._qacct&&(r=d._qacct),r&&0!==r.length?(t=k(r,t),delete qe[r],a=ye[r],o=ve[r],y(o)||(o=3),ee(t,a,n,r)?null:u(e,t,a,r,o)):null},E=function(e){var t,n=[],r=[],o=[];for(t in e)
e[t]&&Object.prototype.hasOwnProperty.call(e,t)&&("uh"===t||"uht"===t?r.push(";"+t+"="+e[t]):n.push(t+"="+e[t]));return o.push(n.join(";")),o.push(r.join("")),o},O=function(){var e,t,n,r,o,a=h.getElementsByTagName("meta"),i="";for(e=0;e<a.length;e++){if(o=a[e],i.length>=1e3)
return encodeURIComponent(i);y(o)&&y(o.attributes)&&y(o.attributes.property)&&y(o.attributes.property.value)&&y(o.content)&&(t=o.attributes.property.value,n=o.content,t.length>3&&"og:"===t.substring(0,3)&&(i.length>0&&(i+=","),r=n.length>80?80:n.length,i+=m(t.substring(3,t.length))+"."+m(n.substring(0,r))))}
return encodeURIComponent(i)},_=function(e,t){var n,r,o,a,i,u,c,s,p,g,m,q=l.random(),w="",_="",b="",I="",j="1",A=[];if(fe=0,y(_e.qpixelsent)||(_e.qpixelsent=[]),y(e)){if("object"===(g=T(e)))
o=S("",e,t);else if("array"===g)
for(i=0;i<e.length;i++)
m=S("."+(i+1),e[i],t),o=0===i?m:C(o,m)}else
"string"==typeof _qacct&&(o=S("",null,t));if(o){n=v.cookieEnabled?"1":"0",y(d._qmeta)&&(w=";m="+encodeURIComponent(d._qmeta),d._qmeta=null),u=l.now(),c=l.isDst(),s=ie.getFirstPartyIDString(fe),p=ie.getExternalIDString(fe),d.location&&d.location.href&&(_=encodeURIComponent(d.location.href)),h&&h.referrer&&(I=encodeURIComponent(h.referrer)),d.self===d.top&&(j="0"),o.url?b=_:o.url=_,o.ref||(o.ref=I||""),r=O(),a=E(o);var P=Y(o.event),D="engagement"===o.event?"/engagement":"/pixel";A.push(D+P+"r="+q+";"+a[0]),A.push(a[1]),A.push(s+p),A.push(";ns="+j+";ce="+n+";qjs=1;qv=8508733c-20230116145555"),A.push((o.ref?"":";ref=")+";d="+ne+";dst="+c+";et="+u.getTime()+";tzo="+u.getTimezoneOffset()+(b?";ourl="+b:"")+w+";ogl="+r+";ses="+f),le.push({pixel:A,pCode:o.a}),x()}},Y=function(e){return"engagement"===e?"?":";"},b=function(e){var t=e.pixel;ae.consent(function(){return!0}).then(function(e){return e||ie.removeIdentifier(),e?"quantserve.com":"quantcount.com"}).then(function(n){var r,o=ae.parameters,a=function(){return function(){return"quantserve.com"===n?[t[1],t[2]].join(""):";uh=u;uht=u"}}(),i=l.isSafari()&&e.pCode&&te.indexOf(e.pCode)>-1?"https://"+"prreqcroab.icu":"https://pixel."+n,u=[i,t[0],a(),t[3],";cm=",o.cm,1===o.gdpr?";gdpr=1;gdpr_consent="+o.gdpr_consent:";gdpr=0",o.us_privacy?";us_privacy="+o.us_privacy:"",t[4]].join("");return"function"!=typeof CustomEvent?(r=document.createEvent("CustomEvent"),r.initCustomEvent("q_pixel_fire",!1,!1,{url:u})):r=new CustomEvent("q_pixel_fire",{detail:{url:u}}),d.dispatchEvent(r),oe.image(u).then(function(e){e&&"number"==typeof e.width&&3===e.width?ie.removeIdentifier():"quantserve.com"===n&&ie.persistIdentifier()})}).catch(function(e){l.reportError(e,"fire")})},x=function(){for(;le.length;)
b(le.shift())},Z=function(){var e,t,n=arguments;for(D([].slice.call(n)),t=0;t<n.length;t++)
e=n[t],_(e);he.length?$():H()},D=function(e){var t,n=T(e);if("array"===n)
for(t=0;t<e.length;t++)
D(e[t]);else
"object"===n&&F(e.qacct||d._qacct)},R=function(){var e;if(se||d._qevents.length||d.ezt.length||"undefined"==typeof _qacct||(_({qacct:d._qacct}),se=!0),!_e.evts){for(e in d._qevents)
d._qevents[e]!==d._qevents.push&&Object.prototype.hasOwnProperty.call(d._qevents,e)&&_(d._qevents[e]);for(e in d.ezt)
d.ezt[e]!==d.ezt.push&&Object.prototype.hasOwnProperty.call(d.ezt,e)&&_(d.ezt[e]);d._qevents={push:Z},d.ezt.push=function(){var e,t=arguments;if(y(d.queueManager))
for(e=0;e<t.length;e++)
d.queueManager.push(t[e]);else
Z.apply(this,arguments)},_e.evts=1}},W=function(e){var t;e&&(t=M(e),D(e),d._qevents.push(t),e=null)},K=function(e){e.push=function(){return D([].slice.call(arguments)),$(),[].push.apply(e,arguments)}},ee=function(e,t,n,r){t=t||{};var o=(e?e.media:t.media)||"webpage",a=(e?e.event:t.event)||"load";if("ad"===o&&(fe=1),"webpage"===o&&"load"===a){for(var i=0;i<_e.qpixelsent.length;i++)
if(_e.qpixelsent[i]===r&&!n)
return!0;_e.qpixelsent.push(r)}
return!1},k=function(e,t){var n=qe[e];return t?n&&(t=C(t,n)):t=n,z(t),t},q=function(){try{y(d._qevents)||(d._qevents=[]),y(d.ezt)||(d.ezt=[]),W(d._qoptions),W(d.qcdata),W(d.smarttagdata),_e.evts||(K(d._qevents),K(d.ezt)),D(d.ezt),D(d._qevents),D({qacct:d._qacct}),d._qoptions=null,he.length?$():H(),s.cleanExperiment(),ce=!0}catch(e){return l.reportError(e,"init"),e}};var be=function(){d._qevents=null,d.ezt=null,d.quantserve=null};return d.quantserve=d.quantserve||q,_e.quantserve=q,_e}
return function(e,t,n){try{return new d(e,t,n)}catch(e){return l.reportError(e,"construct"),e}}}),define("src/main.js",["quant/quant"],function(e){return void 0===window.__qc&&(window.__qc=new e(window,window.document,window.navigator)),window.__qc("init"),window.__qc})}(window);}
catch(error){let methodName="loadQuantcastBaseScript";let ds="utag object";let inputValue="utag_data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[260]=='undefined'){utag.runonce.ext[260]=1;if(1){let CONST_EXTN_NAME="ATM Tracking - Booking path";Bootstrapper.processATMEvents=function(data,parseData){let methodName="processATMEvents";let requirementName="process ATM events";try{let label;if(data.action=="Impression: ATM"){label=Bootstrapper.fetchFeatureAndPageName(data.params);}else if(data.action=="Clicked Link: Search with updated criteria"||data.action=="Clicked Link: Return to previous currency"||data.action=="Clicked: Cancel"||data.action=="Clicked: X"){label=Bootstrapper.fetchFeatureAndPageName(data.params);}
else if(data.action=="Clicked: Continue"){label=[Bootstrapper.fetchFeatureAndPageName(data.params),selectedInfoData(data)].join("|");}
parseData.eventLabel=label;}
catch(error){let inputValue="Undefined";let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;}
function selectedInfoData(data){let methodName="selectedInfoData";let requirementName="selected info data";try{let info;let label;if(data.params&&data.params.info){info=data.params.info;for(let i=0;i<info.selectedInfo.length;i++){let country=data.params.info.selectedInfo[i].country||"--";let nationality=data.params.info.selectedInfo[i].nationality||"--";label=i===0?"["+[country,nationality].join("|")+"]":[label,"["+[country,nationality].join("|")+"]"].join("|");}}
return label;}
catch(error){let inputValue="Undefined";let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['flight_segment_index']=='1'&&b['tealium_event']=='Result Load')){let CONST_EXTN_NAME="RTB Pixel-FSR Page";sendRTBPixel();function sendRTBPixel(){let requirementName="Send RTB Pixel";let methodName="sendRTBPixel";try{let src="https://us.creativecdn.com/tags?type=img";let origin=Bootstrapper.getFlightSearchOrigin(1);let destination=Bootstrapper.getFlightSearchDestination(1);let dept_date=Bootstrapper.getFlightSearchDepartureDate(1);let return_date=getReturnDate();src+="&id=pr_W7rLtbZBt49n0jMTFG16_listing_"+origin+"-"+destination+"&id=pr_W7rLtbZBt49n0jMTFG16_uid_unknown";src+="&id=pr_W7rLtbZBt49n0jMTFG16_custom_depart-airport_"+origin;src+="&id=pr_W7rLtbZBt49n0jMTFG16_custom_return-airport_"+destination;src+="&id=pr_W7rLtbZBt49n0jMTFG16_custom_depart-date_"+dept_date;src+="&id=pr_W7rLtbZBt49n0jMTFG16_custom_return-date_"+return_date;src+="&id=pr_W7rLtbZBt49n0jMTFG16_custom_t-adults_"+getPaxTypeValues("numberOfAdults");src+="&id=pr_W7rLtbZBt49n0jMTFG16_custom_t-seniors_"+getPaxTypeValues("numberOfSeniors");src+="&id=pr_W7rLtbZBt49n0jMTFG16_custom_t-children01_"+getPaxTypeValues("numberOfChildren");src+="&id=pr_W7rLtbZBt49n0jMTFG16_custom_t-infants_"+getPaxTypeValues("numberOfInfants");src+="&id=pr_W7rLtbZBt49n0jMTFG16_custom_t-lapinfants_"+getPaxTypeValues("infantOnLap");Bootstrapper.imageRequest(src);}catch(error){let ds="Pixel params";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function getReturnDate(){let requirementName="Get return date";let methodName="getReturnDate";let returnDate;try{if(utag_data.searchCriteria&&utag_data.searchCriteria.flights&&utag_data.searchCriteria.flights.length>0){let flights=utag_data.searchCriteria.flights;let length=flights.length;returnDate=(flights[length-1].departureDate)?Bootstrapper._dateFormat(flights[length-1].departureDate,'MM-d-yyyy'):"--";}}catch(error){let ds="utag_data.searchCriteria.flights";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return returnDate;}
function getPaxTypeValues(type){let requirementName="Get pax type value";let methodName="getPaxTypeValues";let paxCount;try{if(utag_data&&utag_data.searchCriteria&&utag_data.searchCriteria.paxTypes&&utag_data.searchCriteria.paxTypes[type]){paxCount=utag_data.searchCriteria.paxTypes[type];}else{paxCount=0;}}catch(error){let ds="utag_data.searchCriteria.paxTypes";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return paxCount;}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['pixel_trigger']=='Booking Confirmation'){let CONST_EXTN_NAME="RTB Pixel-Booking Confirmation Page";sendRTBPixel();function sendRTBPixel(){let requirementName="Send RTB Pixel";let methodName="sendRTBPixel";try{let value=Bootstrapper.getSearchTravelType().toLowerCase()=="revenue"?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes();let pnr=Bootstrapper.getBase64EncodedPNR();let tickets=Bootstrapper.getPaxCount();let origin=Bootstrapper.getSelectedTripOrigin(1);let destination=Bootstrapper.getSelectedTripDestination(1);let src="https://us.creativecdn.com/tags?type=img";src+="&id=pr_W7rLtbZBt49n0jMTFG16_conversion_order_purchase_"+value+"_"+pnr+"_"+tickets+"-"+origin+"-"+destination+"&cd=default&id=pr_W7rLtbZBt49n0jMTFG16_uid_unknown";Bootstrapper.imageRequest(src);}catch(error){let ds="Pixel params";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[267]=='undefined'){utag.runonce.ext[267]=1;if(1){let CONST_EXTN_NAME="Digital 3.0 - Twitter Pixel - Confirmation Page";Bootstrapper.triggerTwitterPixel=function(){let methodName="triggerTwitterPixel";let requirementName="Trigger twitter pixel";try{let pos=utag_data.point_of_sale;let posList={US:!0,GB:!0,JP:!0,AU:!0};if(posList[pos]){let twImgSrc="https://analytics.twitter.com/i/adsct?txn_id=nvn3k&p_id=Twitter";let sale_amount=Bootstrapper.getSearchTravelType()=='Revenue'?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes();let order_quantity=Bootstrapper.getPaxCount();twImgSrc+="&tw_sale_amount="+sale_amount;twImgSrc+="&tw_order_quantity="+order_quantity;Bootstrapper.imageRequest(twImgSrc);}}catch(error){let ds="Bootstrapper data object";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}};}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[268]=='undefined'){utag.runonce.ext[268]=1;if(1){let CONST_EXTN_NAME="Digital 3.0 - Pinterest Pixel - Confirmation Page";let eventName='Checkout';let eventParams={};Bootstrapper.triggerPinterestPixel=function(){let requirementName="Trigger pinterest pixel";let methodName="triggerPinterestPixel";try{let pos=Bootstrapper.getPOSFromURL();let posList={US:!0,GB:!0,FR:!0,NL:!0,IL:!0,JP:!0,AU:!0,BR:!0,AR:!0,MX:!0};if(posList[pos]&&window.pintrk&&typeof window.pintrk=="function"){eventParams=getParamsObj();pintrk('track',eventName,eventParams);}}catch(e){let ds="POS";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function getParamsObj(){let requirementName="Prepare params for pintrest pixel";let methodName="getParamsObj";let params={};try{params.order_quantity=Bootstrapper.getPaxCount()||0;params.currency=Bootstrapper.getCurrency();params.search_query=getODPair();params.line_items=[{product_category:Bootstrapper.getTripTypeValue()}];params.value=Bootstrapper.getSearchTravelType()=='Revenue'?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes();params.order_id=Bootstrapper.getBase64EncodedPNR();}catch(e){let ds="utag DL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return params;}
function getODPair(){let requirementName="Get OD pair";let methodName="getODPair";let odPair;try{let origin=Bootstrapper.getSelectedTripOrigin(1);let destination=Bootstrapper.getSelectedTripDestination(1);odPair=[origin,destination].join("-");}catch(error){var ds="utag DL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return odPair;}}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['tealium_event']=='Ticket Purchases'){let CONST_EXTN_NAME="USA Today Pixel - Booking Confirmation Page";let isPixelFired=false;sendUSATodayPixel();function sendUSATodayPixel(){let requirementName="Send USA Today pixel";let methodName="sendUSATodayPixel";try{if(!isPixelFired){let src="https://pubads.g.doubleclick.net/activity;xsp=4913827;";let qty=Bootstrapper.getPaxCount();let cost=Bootstrapper.getShoppingCartTotalAmount();let travelType=Bootstrapper.getSearchTravelType();if(travelType=="Award"){cost=Bootstrapper.getProductTax();}
let pnr=Bootstrapper.getBase64EncodedPNR();src+="qty="+qty+";cost="+cost+";ord="+pnr+"?";Bootstrapper.imageRequest(src);isPixelFired=true;}}catch(error){let ds="Utag data object";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['tealium_event'].toString().toLowerCase()=='Ticket Purchases'.toLowerCase()){let CONST_EXTN_NAME="Sojern Pixel - Booking Confirmation Page";let DOUBLE_DASH="--";let isPixelFired=false;function sendSojernPixel(){let requirementName="Send Sojern pixel";let methodName="sendSojernPixel";try{if(!isPixelFired){if(utag_data&&utag_data.selectedTrips){let src="https://pixel.sojern.com/pixel/img/80567?p_v=3&f_v=v3_image&vid=air";let lastTripIndex=utag_data.selectedTrips.length-1;let t=Bootstrapper.getPaxCount();let fp=Bootstrapper.getSearchTravelType().toLowerCase()=="revenue"?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes();let travelType=Bootstrapper.getSearchTravelType();let fcu=Bootstrapper.getProductCurrencyCode();let fa1=Bootstrapper.getSelectedTripOrigin(1);let fa2=Bootstrapper.getSelectedTripDestination(1);let fconfno=Bootstrapper.getBase64EncodedPNR();let fn2=Bootstrapper.getSelectedTripCountryCode(0,"originCountryCode");let fn1=Bootstrapper.getSelectedTripCountryCode(0,"destinationCountryCode");let fc=Bootstrapper.getSelectedTripCountryCode(0,"productType");fd1=Bootstrapper._dateFormat(utag_data.selectedTrips[0].departureDateTimeText,"yyyy-MM-dd");fd2=Bootstrapper._dateFormat(utag_data.selectedTrips[lastTripIndex].arrivalDateTimeText,"yyyy-MM-dd");src+="&fd1="+fd1+"&fd2="+fd2+"&fa1="+fa1+"&fn2="+fn2+"&fa2="+fa2+"&fn1="+fn1+"&fc="+fc+"&t="+t+"&fp="+fp+"&fcu="+fcu+"&fconfno="+fconfno;Bootstrapper.imageRequest(src);isPixelFired=true;}}}catch(error){let ds="Utag data object";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
sendSojernPixel();}}catch(e){utag.DB(e)}},function(a,b){try{if((b['flight_segment_index']=='1'&&b['tealium_event']=='Flight Searches')){let CONST_EXTN_NAME="Quantcast Pixel-FSR Page";let supportedPOS={AU:!0};function triggerQuantcastPixel(){let requirementName="trigger Quantcast pixel";try{setTimeout(function(){window._qevents=window._qevents||[];if(utag_data&&utag_data.point_of_sale&&supportedPOS[utag_data.point_of_sale]){window._qevents.push({qacct:"p-avkJncntx268p"});}},1500);}catch(error){let methodName="triggerQuantcastPixel";let ds="utag object";let inputValue="utag_data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
triggerQuantcastPixel();}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event']=='purchase'&&/^(\/.*\/au\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname']))){let CONST_EXTN_NAME="Quantcast Pixel on Booking Confirmation Page";let supportedPOS={AU:!0};function triggerQuantcastPixel(){let methodName="triggerQuantcastPixel";let requirementName="Send Quantcast pixel";try{setTimeout(function(){window._qevents=window._qevents||[];if(utag_data&&utag_data.point_of_sale&&supportedPOS[utag_data.point_of_sale]){window._qevents.push({qacct:"p-avkJncntx268p"});}},1500);}catch(error){let methodName="triggerQuantcastPixel";let ds="utag object";let inputValue="utag_data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
triggerQuantcastPixel();}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='Ticket Purchases')){let CONST_EXTN_NAME='Yahoo Pixel - Confirmation Page';if(typeof Bootstrapper.loadYahooLib==="function"){Bootstrapper.loadYahooLib();}
try{(function(w,d,t,u){w[u]=w[u]||[];w[u].push({'projectId':'10000','properties':{'pixelId':'10086194'}});setTimeout(function(){try{var c=w[u];var y=YAHOO.ywa.I13N.fireBeacon;w[u]=[];w[u].push=function(p){y([p]);};y(c);}catch(error){let ds="Yahoo pixel base code";let inputValue="";let requirementName="Send yahoo pixel";let methodName="YahooBaseCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}},2500);})(window,document,"script","dotq");}catch(error){let ds="Yahoo pixel base code";let inputValue="";let requirementName="Send yahoo pixel";let methodName="YahooBaseCode";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
function reloadConfig(e){let requirementName="Reload Yahoo pixel config";let methodName="reloadConfig";try{let t=new XMLHttpRequest,n="https://s.yimg.com/wi/config/"+e+".json";t.open("GET",n,!0),t.timeout=2e3,t.ontimeout=function(e){H--,pe()},t.send();}catch(error){let ds="Yahoo pixel base code";let inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event']=='Ticket Purchases'&&/^(\/.*\/us\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname']))){let CONST_EXTN_NAME="Kargo Pixel - Booking Confirmation Page";function triggerKargoPixel(){let methodName='triggerKargoPixel';let requirementName='Kargo pixel on booking confirmation page';try{let amount=Bootstrapper.getSearchTravelType().toLowerCase()=="revenue"?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes();let aBaseURL="//kds-pixel.kargo.com/api/v1/track?partner_id=868efdf8&event=revenue";let qty=Bootstrapper.getPaxCount();let order_id=Bootstrapper.getBase64EncodedPNR();let aParams="";aParams+="&qty="+qty+"&cost="+amount+"&ord="+order_id;let aReqURL=aBaseURL+aParams;Bootstrapper.imageRequest(aReqURL);}catch(error){let ds='utag object';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
triggerKargoPixel();}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='Ticket Purchases')){let CONST_TAG_NAME="Floodlight - Booking Confirmation Page";let countingMethod='items_sold';let dl='dataLayer';let floodLightId='DC-3463749';let send_to=[];let receiver=floodLightId+'/'+'ticke498'+'/'+'unite820'+'+'+countingMethod;let allow_custom_scripts=true;runDeployment();function runDeployment(){let methodName="runDeployment";try{let pos=Bootstrapper.getPOSFromURL();let posList={US:!0,CA:!0,JP:!0,IN:!0,PH:!0,GU:!0,TW:!0,MP:!0,MX:!0,BR:!0,PA:!0,PR:!0,PE:!0,GT:!0,EC:!0,CL:!0,GB:!0,AU:!0,SG:!0,FR:!0,IS:!0,CZ:!0,AR:!0,IL:!0,NZ:!0,IT:!0,PT:!0,CR:!0};if(posList[pos]){if(utag.data.tealium_environment=="prod"){receiver=floodLightId+'/'+'ticke498'+'/'+'unite820'+'+'+countingMethod;}else{receiver=floodLightId+'/'+'ticke498'+'/'+'stagi506'+'+'+countingMethod;}
send_to.push(receiver);let eventObj={'allow_custom_scripts':allow_custom_scripts,'send_to':send_to};let RevenueDLVal=Bootstrapper.getSearchTravelType()=='Revenue'?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes();let RevenueVal=isNaN(RevenueDLVal)?0:RevenueDLVal;let qtyDLVal=Bootstrapper.getPaxCount();let qtyVal=isNaN(qtyDLVal)?0:qtyDLVal;eventObj["qty"]=qtyVal;eventObj["cost"]=RevenueVal;eventObj["quantity"]=qtyVal;eventObj["value"]=RevenueVal;eventObj["u1"]=utag_data.lang_code;eventObj["u7"]=Bootstrapper.getSelectedTripDestination(1);eventObj["u8"]=Bootstrapper.getSelectedTripDestination(2);eventObj["u9"]=Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(0),"yyyy-MM-dd");eventObj["u10"]=Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(1),"yyyy-MM-dd");eventObj["u3"]=Bootstrapper.getCurrency();eventObj["u5"]=Bootstrapper.getSelectedTripOrigin(1);eventObj["u6"]=Bootstrapper.getSelectedTripOrigin(2);eventObj["u2"]=pos;eventObj["u16"]=Bootstrapper.getPaxCount();eventObj["u18"]=Bootstrapper.getBase64EncodedPNR();eventObj["u19"]=utag.data['customer_id']==null?'--':utag.data['customer_id'];eventObj["u17"]=RevenueVal;eventObj["u14"]=utag_data.selectedTrips.length;eventObj["u13"]=Bootstrapper.getNumDaysTilTravelFromSelectedTrip(1);eventObj["u20"]=Bootstrapper._dateFormat(new Date(),"MM/dd/yyyy");eventObj["u21"]=Bootstrapper.getCabinFromSelectedTrips(0);eventObj["u22"]="flights";eventObj["u15"]=utag_data['cp._ga'].substring(6);if(Bootstrapper.getSearchTravelType()=='Award'){eventObj["u23"]=Bootstrapper.getCostInMiles();}else{let milesInfo=Bootstrapper.getPaymentsDetail(true);if(milesInfo&&milesInfo.miles){eventObj["u23"]=milesInfo.miles;}}
gtag('event','purchase',eventObj);if(typeof Bootstrapper.pixelAuditBookingPath==='function'){Bootstrapper.pixelAuditBookingPath('Floodlight');}}}catch(e){let ds="Bootstrapper.dataObject";let input_value="undefined";let requirementName="Floodlight Pixel: Confirmation page through gtag";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,e.message,e,ds,input_value,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(\/.*\/us\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['tealium_event']=='Result Load'&&b['flight_segment_index']=='1')||(/^(\/.*\/us\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')){let CONST_EXTN_NAME="Reddit Pixel-Base Lib";function loadRedditLib(){let requirementName="Load Reddit base lib";let methodName="loadRedditLib";try{!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}
var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}
return n[i].exports}
for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){var root,factory;root=this,factory=function(){var CryptoJS=CryptoJS||function(Math,undefined){var create=Object.create||function(){function F(){}
return function(obj){var subtype;return F.prototype=obj,subtype=new F,F.prototype=null,subtype}}(),C={},C_lib=C.lib={},Base=C_lib.Base={extend:function(overrides){var subtype=create(this);return overrides&&subtype.mixIn(overrides),subtype.hasOwnProperty("init")&&this.init!==subtype.init||(subtype.init=function(){subtype.$super.init.apply(this,arguments)}),(subtype.init.prototype=subtype).$super=this,subtype},create:function(){var instance=this.extend();return instance.init.apply(instance,arguments),instance},init:function(){},mixIn:function(properties){for(var propertyName in properties)properties.hasOwnProperty(propertyName)&&(this[propertyName]=properties[propertyName]);properties.hasOwnProperty("toString")&&(this.toString=properties.toString)},clone:function(){return this.init.prototype.extend(this)}},WordArray=C_lib.WordArray=Base.extend({init:function(words,sigBytes){words=this.words=words||[],this.sigBytes=null!=sigBytes?sigBytes:4*words.length},toString:function(encoder){return(encoder||Hex).stringify(this)},concat:function(wordArray){var thisWords=this.words,thatWords=wordArray.words,thisSigBytes=this.sigBytes,thatSigBytes=wordArray.sigBytes;if(this.clamp(),thisSigBytes%4)
for(var i=0;i<thatSigBytes;i++){var thatByte=thatWords[i>>>2]>>>24-i%4*8&255;thisWords[thisSigBytes+i>>>2]|=thatByte<<24-(thisSigBytes+i)%4*8}else
for(i=0;i<thatSigBytes;i+=4)thisWords[thisSigBytes+i>>>2]=thatWords[i>>>2];return this.sigBytes+=thatSigBytes,this},clamp:function(){var words=this.words,sigBytes=this.sigBytes;words[sigBytes>>>2]&=4294967295<<32-sigBytes%4*8,words.length=Math.ceil(sigBytes/4)},clone:function(){var clone=Base.clone.call(this);return clone.words=this.words.slice(0),clone},random:function(nBytes){for(var rcache,words=[],r=function(m_w){m_w=m_w;var m_z=987654321,mask=4294967295;return function(){var result=((m_z=36969*(65535&m_z)+(m_z>>16)&mask)<<16)+(m_w=18e3*(65535&m_w)+(m_w>>16)&mask)&mask;return result/=4294967296,(result+=.5)*(.5<Math.random()?1:-1)}},i=0;i<nBytes;i+=4){var _r=r(4294967296*(rcache||Math.random()));rcache=987654071*_r(),words.push(4294967296*_r()|0)}
return new WordArray.init(words,nBytes)}}),C_enc=C.enc={},Hex=C_enc.Hex={stringify:function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,hexChars=[],i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&255;hexChars.push((bite>>>4).toString(16)),hexChars.push((15&bite).toString(16))}
return hexChars.join("")},parse:function(hexStr){for(var hexStrLength=hexStr.length,words=[],i=0;i<hexStrLength;i+=2)words[i>>>3]|=parseInt(hexStr.substr(i,2),16)<<24-i%8*4;return new WordArray.init(words,hexStrLength/2)}},Latin1=C_enc.Latin1={stringify:function(wordArray){for(var words=wordArray.words,sigBytes=wordArray.sigBytes,latin1Chars=[],i=0;i<sigBytes;i++){var bite=words[i>>>2]>>>24-i%4*8&255;latin1Chars.push(String.fromCharCode(bite))}
return latin1Chars.join("")},parse:function(latin1Str){for(var latin1StrLength=latin1Str.length,words=[],i=0;i<latin1StrLength;i++)words[i>>>2]|=(255&latin1Str.charCodeAt(i))<<24-i%4*8;return new WordArray.init(words,latin1StrLength)}},Utf8=C_enc.Utf8={stringify:function(wordArray){try{return decodeURIComponent(escape(Latin1.stringify(wordArray)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(utf8Str){return Latin1.parse(unescape(encodeURIComponent(utf8Str)))}},BufferedBlockAlgorithm=C_lib.BufferedBlockAlgorithm=Base.extend({reset:function(){this._data=new WordArray.init,this._nDataBytes=0},_append:function(data){"string"==typeof data&&(data=Utf8.parse(data)),this._data.concat(data),this._nDataBytes+=data.sigBytes},_process:function(doFlush){var data=this._data,dataWords=data.words,dataSigBytes=data.sigBytes,blockSize=this.blockSize,nBlocksReady=dataSigBytes/(4*blockSize),nWordsReady=(nBlocksReady=doFlush?Math.ceil(nBlocksReady):Math.max((0|nBlocksReady)-this._minBufferSize,0))*blockSize,nBytesReady=Math.min(4*nWordsReady,dataSigBytes);if(nWordsReady){for(var offset=0;offset<nWordsReady;offset+=blockSize)this._doProcessBlock(dataWords,offset);var processedWords=dataWords.splice(0,nWordsReady);data.sigBytes-=nBytesReady}
return new WordArray.init(processedWords,nBytesReady)},clone:function(){var clone=Base.clone.call(this);return clone._data=this._data.clone(),clone},_minBufferSize:0}),C_algo=(C_lib.Hasher=BufferedBlockAlgorithm.extend({cfg:Base.extend(),init:function(cfg){this.cfg=this.cfg.extend(cfg),this.reset()},reset:function(){BufferedBlockAlgorithm.reset.call(this),this._doReset()},update:function(messageUpdate){return this._append(messageUpdate),this._process(),this},finalize:function(messageUpdate){return messageUpdate&&this._append(messageUpdate),this._doFinalize()},blockSize:16,_createHelper:function(hasher){return function(message,cfg){return new hasher.init(cfg).finalize(message)}},_createHmacHelper:function(hasher){return function(message,key){return new C_algo.HMAC.init(hasher,key).finalize(message)}}}),C.algo={});return C}(Math);return CryptoJS},"object"==typeof exports?module.exports=exports=factory():"function"==typeof define&&define.amd?define([],factory):root.CryptoJS=factory()},{}],2:[function(require,module,exports){var root,factory;root=this,factory=function(CryptoJS){return CryptoJS.enc.Hex},"object"==typeof exports?module.exports=exports=factory(require("./core")):"function"==typeof define&&define.amd?define(["./core"],factory):factory(root.CryptoJS)},{"./core":1}],3:[function(require,module,exports){var root,factory;root=this,factory=function(CryptoJS){return function(Math){var C=CryptoJS,C_lib=C.lib,WordArray=C_lib.WordArray,Hasher=C_lib.Hasher,C_algo=C.algo,H=[],K=[];!function(){function isPrime(n){for(var sqrtN=Math.sqrt(n),factor=2;factor<=sqrtN;factor++)
if(!(n%factor))return!1;return!0}
function getFractionalBits(n){return 4294967296*(n-(0|n))|0}
for(var n=2,nPrime=0;nPrime<64;)isPrime(n)&&(nPrime<8&&(H[nPrime]=getFractionalBits(Math.pow(n,.5))),K[nPrime]=getFractionalBits(Math.pow(n,1/3)),nPrime++),n++}();var W=[],SHA256=C_algo.SHA256=Hasher.extend({_doReset:function(){this._hash=new WordArray.init(H.slice(0))},_doProcessBlock:function(M,offset){for(var H=this._hash.words,a=H[0],b=H[1],c=H[2],d=H[3],e=H[4],f=H[5],g=H[6],h=H[7],i=0;i<64;i++){if(i<16)W[i]=0|M[offset+i];else{var gamma0x=W[i-15],gamma0=(gamma0x<<25|gamma0x>>>7)^(gamma0x<<14|gamma0x>>>18)^gamma0x>>>3,gamma1x=W[i-2],gamma1=(gamma1x<<15|gamma1x>>>17)^(gamma1x<<13|gamma1x>>>19)^gamma1x>>>10;W[i]=gamma0+W[i-7]+gamma1+W[i-16]}
var maj=a&b^a&c^b&c,sigma0=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),t1=h+((e<<26|e>>>6)^(e<<21|e>>>11)^(e<<7|e>>>25))+(e&f^~e&g)+K[i]+W[i];h=g,g=f,f=e,e=d+t1|0,d=c,c=b,b=a,a=t1+(sigma0+maj)|0}
H[0]=H[0]+a|0,H[1]=H[1]+b|0,H[2]=H[2]+c|0,H[3]=H[3]+d|0,H[4]=H[4]+e|0,H[5]=H[5]+f|0,H[6]=H[6]+g|0,H[7]=H[7]+h|0},_doFinalize:function(){var data=this._data,dataWords=data.words,nBitsTotal=8*this._nDataBytes,nBitsLeft=8*data.sigBytes;return dataWords[nBitsLeft>>>5]|=128<<24-nBitsLeft%32,dataWords[14+(nBitsLeft+64>>>9<<4)]=Math.floor(nBitsTotal/4294967296),dataWords[15+(nBitsLeft+64>>>9<<4)]=nBitsTotal,data.sigBytes=4*dataWords.length,this._process(),this._hash},clone:function(){var clone=Hasher.clone.call(this);return clone._hash=this._hash.clone(),clone}});C.SHA256=Hasher._createHelper(SHA256),C.HmacSHA256=Hasher._createHmacHelper(SHA256)}(Math),CryptoJS.SHA256},"object"==typeof exports?module.exports=exports=factory(require("./core")):"function"==typeof define&&define.amd?define(["./core"],factory):factory(root.CryptoJS)},{"./core":1}],4:[function(require,module,exports){module.exports={CLICK_ID_NAME:"rdt_cid",PIXEL_ENDPOINT:"https://alb.reddit.com/rp.gif",UNIX_EPOCH:"Thu, 01 Jan 1970 00:00:00 GMT",UUID_COOKIE_EXPIRATION_DAYS:90,UUID_COOKIE_NAME_V2:"_rdt_uuid",METADATA_PREFIX:"m.",CUSTOM_EVENT_NAME_LIMIT:128,CONVERSION_EVENTS:{PAGEVISIT:"PageVisit",VIEWCONTENT:"ViewContent",SEARCH:"Search",ADDTOCART:"AddToCart",ADDTOWISHLIST:"AddToWishlist",PURCHASE:"Purchase",LEAD:"Lead",SIGNUP:"SignUp",CUSTOM:"Custom"},CONVERSION_EVENTS_LIST:["PageVisit","ViewContent","Search","AddToCart","AddToWishlist","Purchase","Lead","SignUp","Custom"],INTEGRATION_PROVIDERS:{REDDIT:"reddit",GTM:"gtm",NOSCRIPT:"noscript"},PIXEL_METHODS:{INIT:"init",ENABLE_FIRST_PARTY_COOKIES:"enableFirstPartyCookies",TRACK:"track",DISABLE_FIRST_PARTY_COOKIES:"disableFirstPartyCookies"},EVENT_METADATA:{ITEM_COUNT:"itemCount",VALUE:"value",VALUE_DECIMAL:"valueDecimal",CURRENCY:"currency",TRANSACTION_ID:"transactionId",CUSTOM_EVENT_NAME:"customEventName",PRODUCTS:"products"},EVENT_METADATA_LIST:["itemCount","value","valueDecimal","currency","transactionId","customEventName","products"],REVENUE_METADATA_LIST:["itemCount","value","valueDecimal","currency","transactionId"],DEFAULT_CURRENCY:"USD",REVENUE_EVENTS_LIST:["AddToCart","AddToWishlist","Purchase","Lead","SignUp","Custom"]}},{}],5:[function(require,module,exports){var CONSTANTS=require("./constants"),uuidv4=require("./uuid"),strings=require("./strings"),addTimestampToCookie=function(uuid){return(new Date).getTime()+"."+uuid};exports.addTimestampToCookie=addTimestampToCookie,exports.extractUuidFromCookieV2=function(cookieValue){var split=cookieValue.split(".");return split.length<2?cookieValue:split[1]},exports.createCookieV2=function(){return addTimestampToCookie(uuidv4())},exports.getCookieV2=function(){for(var split=document.cookie.split(";"),oldestCookie=null,oldestTimestamp=1/0,i=0;i<split.length;i++){var keyVal=split[i].split("=");if(1<keyVal.length)
if(strings.trim(keyVal[0])===CONSTANTS.UUID_COOKIE_NAME_V2){var valParts=keyVal[1].split(".");if(1<valParts.length){var timestamp=parseInt(valParts[0],10);!isNaN(timestamp)&&timestamp<oldestTimestamp&&(oldestTimestamp=timestamp,oldestCookie=keyVal[1])}}}
return oldestCookie};var stringIsInteger=function(s){return""+Number(s)===s};exports.stringIsInteger=stringIsInteger;var setAndTestCookie=function(name,value,domain,expires){var cookie=name+"="+value+";domain=."+domain+";expires="+expires+";path=/;samesite=strict";return"https:"===window.location.protocol&&(cookie+=";secure"),document.cookie=cookie,0<=document.cookie.indexOf(name)};exports.setAndTestCookie=setAndTestCookie,exports.setCookie=function(name,value,expiresDays){var d=new Date,expiresInSeconds=24*expiresDays*60*60;d.setTime(d.getTime()+1e3*expiresInSeconds);var expires=d.toUTCString(),domain=window.location.hostname;if(domain="."==domain.slice(-1)?domain.slice(0,-1):domain,labels=domain.split("."),1==labels.length||stringIsInteger(labels[labels.length-1]))return setAndTestCookie(name,value,domain,expires),domain;for(domain=labels.pop(),domain=labels.pop()+"."+domain;!setAndTestCookie(name,value,domain,expires)&&labels.length;)domain=labels.pop()+"."+domain;return domain},exports.deleteCookie=function(name,domain){for(domain=domain||window.location.hostname,labels=domain.split(".");setAndTestCookie(name,"",labels.join("."),CONSTANTS.UNIX_EPOCH)&&labels.length;)labels.shift();return labels.join(".")}},{"./constants":4,"./strings":11,"./uuid":12}],6:[function(require,module,exports){exports.screenSize=function(){return pixelRatio=1,width=window.screen.width*pixelRatio,height=window.screen.height*pixelRatio,{sh:Math.max(width,height),sw:Math.min(width,height)}}},{}],7:[function(require,module,exports){var console=window.console||{},result={},prefixes={error:"Reddit Pixel Error",warn:"Reddit Pixel Warning",info:"Reddit Pixel Info"},log=function(method){return function(msg){method in console&&method in prefixes&&console[method](prefixes[method]+":"+msg)}};result.error=log("error"),result.warn=log("warn"),result.info=log("info"),module.exports=result},{}],8:[function(require,module,exports){function sendMessage(data){"postMessage"in window&&postMessage(data,"*")}
exports.sendInit=function(config,args){sendMessage({type:"Init",config:config,args:args})},exports.sendEventData=function(eventData,args){sendMessage({type:"EventData",eventData:eventData,args:args})},exports.sendError=function(exceptionName,args){sendMessage({type:"Error",exceptionName:exceptionName,args:args,timestamp:(new Date).valueOf()})}},{}],9:[function(require,module,exports){var slice=Array.prototype.slice,cookie=require("./cookie"),device=require("./device"),hasher=require("./validators/identityHasher"),logger=require("./logger"),pixelHelperConnect=require("./pixelHelperConnect"),integrations=require("./validators/integrations"),event=require("./validators/event"),CONSTANTS=require("./constants"),QueryString=require("./queryString"),QueryBuilder=QueryString.QueryBuilder,getQueryParameter=QueryString.getQueryParameter,rdt=window.rdt;rdt||(logger.error("Pixel was not initialized.Please ensure you have included the correct pixel script in your head tag"),pixelHelperConnect.sendError("PixelWasNotInitialised"));var enableFirstPartyCookies=function(){var firstPartyCookie=cookie.getCookieV2()||cookie.createCookieV2();cookie.setCookie(CONSTANTS.UUID_COOKIE_NAME_V2,firstPartyCookie,CONSTANTS.UUID_COOKIE_EXPIRATION_DAYS),rdt.uuid=cookie.extractUuidFromCookieV2(firstPartyCookie);var clickId=getQueryParameter(window.location.search,CONSTANTS.CLICK_ID_NAME);clickId&&!rdt.clickId&&(rdt.clickId=clickId),rdt.enableFirstPartyCookies=!0};function sendEvent(method){var path,query,args=slice.call(arguments),PIXEL_METHODS=CONSTANTS.PIXEL_METHODS;switch(method){case PIXEL_METHODS.INIT:return rdt.advertiserId=args[1],configArgs="object"==typeof args[2]&&args[2]||{},screenSize=device.screenSize(),rdt.config={aaid:hasher.hashIfSet(configArgs.aaid,"aaid"),em:hasher.hashIfSet(configArgs.email,"email"),external_id:hasher.hashIfSet(configArgs.externalId,"externalId"),idfa:hasher.hashIfSet(configArgs.idfa,"idfa"),integration:integrations.getIntegrationProvider(configArgs.integration),opt_out:configArgs.optOut?1:0,sh:screenSize.sh,sw:screenSize.sw,v:"rdt_65e23bc4"},"useDecimalCurrencyValues"in configArgs?rdt.useDecimalCurrencyValues=!!configArgs.useDecimalCurrencyValues:rdt.useDecimalCurrencyValues=!0,enableFirstPartyCookies(),void pixelHelperConnect.sendInit(rdt.config,args);case PIXEL_METHODS.ENABLE_FIRST_PARTY_COOKIES:return void enableFirstPartyCookies();case PIXEL_METHODS.DISABLE_FIRST_PARTY_COOKIES:return void(rdt.enableFirstPartyCookies=!1);case PIXEL_METHODS.TRACK:var eventName=args[1],metadataArgs=args[2]||{},validatedMetadata=event.validateMetadata(eventName,metadataArgs),q=(new QueryBuilder).addParams({id:rdt.advertiserId,event:eventName}).addParams(validatedMetadata);return rdt.enableFirstPartyCookies&&(rdt.clickId&&rdt.clickId.length&&q.addParams({click_id:rdt.clickId}),rdt.uuid&&rdt.uuid.length&&q.addParams({uuid:rdt.uuid})),q.addParams(rdt.config),path=CONSTANTS.PIXEL_ENDPOINT,query=q.toQueryString(),(new Image).src=path+query,void pixelHelperConnect.sendEventData(q.params,args)}}
for(rdt.sendEvent=sendEvent;rdt.callQueue.length;)sendEvent.apply(rdt,rdt.callQueue.shift())},{"./constants":4,"./cookie":5,"./device":6,"./logger":7,"./pixelHelperConnect":8,"./queryString":10,"./validators/event":13,"./validators/identityHasher":14,"./validators/integrations":15}],10:[function(require,module,exports){var CONSTANTS=require("../lib/constants"),logger=require("./logger"),QueryBuilder=function(){this.params={},this.params.ts=(new Date).valueOf()};QueryBuilder.prototype.addParams=function(params){for(var key in params)this.isMetadata(key)?this.params[CONSTANTS.METADATA_PREFIX+key]=params[key]:this.params[key]=params[key];return this},QueryBuilder.prototype.isMetadata=function(param){for(i=0;i<CONSTANTS.EVENT_METADATA_LIST.length;i++)
if(param===CONSTANTS.EVENT_METADATA_LIST[i])return!0;return!1},QueryBuilder.prototype.toQueryString=function(){var result=[];for(var key in this.params){var val=this.params[key],serializedValue="undefined";try{serializedValue=encodeURIComponent(val)}catch(e){logger.warn("unsupported value type for "+key)}
result.push(encodeURIComponent(key)+"="+serializedValue)}
return"?"+result.join("&")},exports.QueryBuilder=QueryBuilder,exports.getQueryParameter=function(search,name){if(!search)return"";for(var keyValues=search.slice(1).split("&"),i=0;i<keyValues.length;i++){var keyValue=keyValues[i].split("=");if(keyValue[0]===name)return keyValue[1]}
return""}},{"../lib/constants":4,"./logger":7}],11:[function(require,module,exports){var TRIM_REGEXP=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;exports.trim=function(str){return str.replace(TRIM_REGEXP,"")}},{}],12:[function(require,module,exports){module.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)})}},{}],13:[function(require,module,exports){var CONSTANTS=require("../constants"),hasher=require("./identityHasher");exports.validateMetadata=function(eventName,unvalidatedEvent){for(var validatedEvent={},i=0;i<CONSTANTS.REVENUE_METADATA_LIST.length;i++){var field=CONSTANTS.REVENUE_METADATA_LIST[i];field!==CONSTANTS.EVENT_METADATA.VALUE_DECIMAL&&copyFieldIfPresent(field,validatedEvent,unvalidatedEvent)}
return copyFieldIfPresent(CONSTANTS.EVENT_METADATA.CUSTOM_EVENT_NAME,validatedEvent,unvalidatedEvent),copyValidatedField(CONSTANTS.EVENT_METADATA.PRODUCTS,validatedEvent,unvalidatedEvent),normalizeMetadata(validatedEvent)};var copyFieldIfPresent=function(field,target,source){field in source&&(target[field]=source[field])},copyValidatedField=function(field,validatedEvent,unvalidatedEvent){field in unvalidatedEvent&&(getValidator(field)(unvalidatedEvent[field])&&(validatedEvent[field]=unvalidatedEvent[field]))},normalizeMetadata=function(validatedEvent){if(CONSTANTS.EVENT_METADATA.VALUE in validatedEvent){var givenValue=validatedEvent[CONSTANTS.EVENT_METADATA.VALUE],valueFieldName=rdt.useDecimalCurrencyValues?CONSTANTS.EVENT_METADATA.VALUE_DECIMAL:CONSTANTS.EVENT_METADATA.VALUE;rdt.useDecimalCurrencyValues&&delete validatedEvent[CONSTANTS.EVENT_METADATA.VALUE],validatedEvent[valueFieldName]=givenValue}
CONSTANTS.EVENT_METADATA.TRANSACTION_ID in validatedEvent&&(validatedEvent[CONSTANTS.EVENT_METADATA.TRANSACTION_ID]=hasher.hashIfSet(validatedEvent[CONSTANTS.EVENT_METADATA.TRANSACTION_ID],CONSTANTS.EVENT_METADATA.TRANSACTION_ID));var customEventField=CONSTANTS.EVENT_METADATA.CUSTOM_EVENT_NAME;validatedEvent[customEventField]=normalizeCustomEventName(validatedEvent[customEventField]);var productsField=CONSTANTS.EVENT_METADATA.PRODUCTS;validatedEvent[productsField]=normalizeProducts(validatedEvent[productsField]);for(var event={},i=0;i<CONSTANTS.EVENT_METADATA_LIST.length;i++){var field=CONSTANTS.EVENT_METADATA_LIST[i];event[field]=field in validatedEvent?validatedEvent[field]:""}
return event},normalizeProducts=function(products){if(!products)return"";if(isString(products))try{products=JSON.parse(products)}catch(e){return""}
"[object Array]"!==Object.prototype.toString.call(products)&&(products=[products]);for(var normalizedProducts=[],i=0;i<products.length;i++){var product=products[i],normalizedProduct={};for(_field in product.id&&(isNumber(product.id)?normalizedProduct.id=product.id.toString():isString(product.id)&&(normalizedProduct.id=product.id)),product.name&&isString(product.name)&&(normalizedProduct.name=product.name),product.category&&isString(product.category)&&(normalizedProduct.category=product.category),normalizedProduct){normalizedProducts.push(normalizedProduct);break}}
return 0!==normalizedProducts.length?JSON.stringify(normalizedProducts):""},normalizeCustomEventName=function(customEventName){if(!customEventName)return"";for(var index=0,lengthOut=0,lengthIn=customEventName.length;index<lengthIn&&lengthOut<CONSTANTS.CUSTOM_EVENT_NAME_LIMIT;){var value=customEventName.charCodeAt(index);if(lengthOut+=1,index+=1,55296<=value&&value<=56319&&index<lengthIn)56320==(64512&customEventName.charCodeAt(index))&&(index+=1)}
return customEventName.slice(0,index)};exports.normalizeCustomEventName=normalizeCustomEventName;var getValidator=function(metadata){return{products:isObjectOrString}[metadata]},isNumber=function(value){return"string"==typeof value&&(value=parseFloat(value)),"number"==typeof value&&!isNaN(value)&&isFinite(value)},isString=function(s){return"string"==typeof s},isObject=function(value){return"object"==typeof value&&null!==value};exports.isObject=isObject;var isObjectOrString=function(value){return isObject(value)||isString(value)};exports.isObjectOrString=isObjectOrString},{"../constants":4,"./identityHasher":14}],14:[function(require,module,exports){var sha256=require("crypto-js/sha256"),hex=require("crypto-js/enc-hex"),replaceAll=function(s,char){return s.split(char).join("")},isHex=function(s,len){return s.length==len&&!isNaN(Number("0x"+s))},isValidUuid=function(uuid){return uuidDigits=replaceAll(uuid,"-"),isHex(uuidDigits,32)&&"00000000000000000000000000000000"!==uuidDigits},normalizeEmail=exports.normalizeEmail=function(email){return localPartAndDomain=email.split("@"),2!=localPartAndDomain.length?"":(localPart=localPartAndDomain[0],localPartAndDomain[0]=replaceAll(localPart,".").split("+")[0],localPartAndDomain.join("@").toLowerCase())},normalizeNoOp=function(v){return v},isValidAaid=exports.isValidAaid=function(aaid){return isValidUuid(aaid)},validEmailRegex=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,isValidEmail=exports.isValidEmail=function(email){return validEmailRegex.test(email)},isValidHash=exports.isValidHash=function(hash){return isHex(hash,64)},isValidIdfa=exports.isValidIdfa=function(idfa){return isValidUuid(idfa)},isValidNoOp=exports.isValidNoOp=function(v){return!0},valueTypes=["aaid","email","externalId","idfa","transactionId"],normalizers={aaid:function(aaid){return aaid.toLowerCase()},email:normalizeEmail,externalId:normalizeNoOp,idfa:function(idfa){return idfa.toUpperCase()},transactionId:normalizeNoOp},validators={aaid:isValidAaid,email:isValidEmail,externalId:isValidNoOp,idfa:isValidIdfa,transactionId:isValidNoOp};exports.hashIfSet=function(value,valueType){if(!value||"string"!=typeof value||!function(valueType){for(var i=0;i<valueTypes.length;i++)
if(valueType===valueTypes[i])return!0;return!1}(valueType))return"";if(isValidHash(value))return value.toLowerCase();if(!(0,validators[valueType])(value))return"email"===valueType?"0000000000000000000000000000000000000000000000000000000000000000":"";var normalizer=normalizers[valueType];return hex.stringify(sha256(normalizer(value)))}},{"crypto-js/enc-hex":2,"crypto-js/sha256":3}],15:[function(require,module,exports){var CONSTANTS=require("../constants");exports.getIntegrationProvider=function(integration){switch(integration){case CONSTANTS.INTEGRATION_PROVIDERS.GTM:return CONSTANTS.INTEGRATION_PROVIDERS.GTM;default:return CONSTANTS.INTEGRATION_PROVIDERS.REDDIT}}},{"../constants":4}]},{},[9]);}catch(error){let ds="Reddit pixel base code";let inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
!function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments);};p.callQueue=[];loadRedditLib();}}(window,document);setTimeout(function(){try{if(window&&window.rdt){rdt('init','t2_3xxwutlw',{"optOut":false,"useDecimalCurrencyValues":true,"aaid":"","email":"","externalId":"","idfa":""});rdt('track','PageVisit');}}catch(error){let ds="Reddit pixel base code";let inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}},3000);}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event']=='Ticket Purchases'&&/^(\/.*\/us\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname']))){let CONST_EXTN_NAME='Reddit Pixel - Confirmation Page';triggerRedditPixel();function triggerRedditPixel(){let methodName="triggerRedditPixel";let requirementName="Send Reddit pixel";let tripType;try{let supportedPOS={US:!0};tripType=Bootstrapper.getSearchTravelType()!=DOUBLE_DASH?Bootstrapper.getSearchTravelType():"Revenue";if(supportedPOS[utag_data.point_of_sale]&&window&&window.rdt){rdt('track','Purchase',{"currency":"USD","itemCount":Bootstrapper.getPaxCount(),"transactionId":Bootstrapper.getBase64EncodedPNR(),"value":tripType=="Award"?Bootstrapper.getProductTax():Bootstrapper.getShoppingCartTotalAmount()});}}catch(error){let ds="utag object";let inputValue="utag_data";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="Pixels - Cabin Upgrade";let FB_PIXEL_ID="250925910724073";let CONST_DATA_CSS=".app-components-UpgradeMall-ReviewUpgrades-ReviewUpgradesStyles__trip--jrw6x";let FLS_PIXEL_URL="https://ad.doubleclick.net/ddm/activity/src=3463749;type=unite280;cat=cabinupg;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};";Bootstrapper.triggerUpgradePixels=function(){let requirementName="Trigger pixels on upgrade flow";let methodName="triggerUpgradePixels";try{if(utag_data&&utag_data.point_of_sale&&utag_data.point_of_sale.toLowerCase()=="us"||Bootstrapper.getPOSFromURL()=="GB"||Bootstrapper.getPOSFromURL()=="AU"){Bootstrapper.sendFBPageView(FB_PIXEL_ID);let pixelURL=Bootstrapper.prepareFLSPixelURL(CONST_DATA_CSS,FLS_PIXEL_URL,true);let axel=Math.random()+"";let a=axel*10000000000000;pixelURL+=";ord="+a+"?";Bootstrapper.imageRequest(pixelURL);}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}};Bootstrapper.prepareFLSPixelURL=function(css,pixelURL,isLanding){let requirementName="Trigger Floodlight Pixel";let methodName="prepareFLSPixelURL";try{let info=getUpgradeData(css);if(info){let cabin;if(!isLanding){cabin=getCabinDOM();}else{cabin=getLandingPageCabin();}
pixelURL+="u5="+info[0];pixelURL+=";u7="+info[1];pixelURL+=";u11="+cabin;if(info.length>3){pixelURL+=";u6="+info[2];pixelURL+=";u8="+info[3];pixelURL+=";u12="+cabin;}}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return pixelURL;};function getUpgradeData(css){let requirementName="Get data from DOM";let methodName="getUpgradeData";let dataInfo=[];try{if(css){let info=$(css);if(info&&info.text()){let data;if(document.location.pathname.indexOf("manageres/seatmap/confirmation")>-1){data=info.text().trim().split("-");}else{data=info.text().split("–");}
for(let i=0;i<data.length;i++){dataInfo[i]=data[i].trim().substring(0,3);}}}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return dataInfo;}
function getCabinDOM(){let requirementName="Get cabin from DOM";let methodName="getCabinDOM";let cabin;try{let ele=$(".app-components-UpgradeMall-ReviewUpgrades-ReviewUpgradesStyles__cabinBrand--eiOj3");if(ele&&ele.length>0){cabin=ele[0].textContent;}else{ele=$(".app-components-ManageResSeatMap-PurchaseSummary-SeatAssigment-styles__divLeft--inzMr.app-components-ManageResSeatMap-PurchaseSummary-SeatAssigment-styles__textBolderSize--a4MGm");if(ele&&ele.length>0){cabin=ele[0].textContent;}}
if(cabin){cabin=cabin.replace(/[^\x00-\x7F]+/g,"");}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return cabin;}
function getLandingPageCabin(){let requirementName="Get cabin from DOM";let methodName="getLandingPageCabin";let cabin;try{let ele=$(".app-components-UpgradeMall-UpgradeDetails-UpgradeDetailsItem-UpgradeDetailsItemStyles__cabinBrand--3bgIL");if(ele&&ele.length>0){for(const e of ele){if(cabin){if(cabin.indexOf(e.textContent)<0){cabin=[cabin,e.textContent].join(",");}}else{cabin=e.textContent;}}}}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return cabin;}
Bootstrapper.prepareDataForFB=function(eventName){let requirementName="Prepare data for FB pixel on upgrade confirmation";let methodName="prepareDataForFB";let fbData={};try{let tealiumEventName="tealium_collect_fb_"+eventName.toLowerCase();utag.data.tealium_collect_event=tealiumEventName;let event_id=Bootstrapper.generateFBEventID(eventName,utag_data,utag_data.tealium_random,70);utag_data.tealium_datasource=Bootstrapper.tealium_data_source;fbData["fb_event_id_"+eventName]=event_id;fbData.tealium_collect_event=tealiumEventName;fbData.travel_class=getCabinDOM();fbData.point_of_sale=Bootstrapper.getPOSFromURL();}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return fbData;};}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1')||/^(.*\/.*\/.*\/book-flight\/seatmap\/?)/ig.test(b['dom.pathname'])){let CONST_EXTN_NAME="Snapchat Base Lib";Bootstrapper.loadSnapchatLib=function(){let requirementName="Load snapchat lib";let methodName="loadSnapchatLib";try{!function(){"use strict";var t=function(){try{return location.shopifyContext}catch(t){}}(),r=function(){try{return window}catch(t){return{}}}(),n=r.JSON,e=r.MutationObserver,a=r.document||{},i=a.referrer,o=r.navigator,c=function(){try{return r.localStorage}catch(t){}}(),u=r.location||t&&t.document.location||{},f=function(){try{return r.sessionStorage}catch(t){}}(),s=function(){return s=Object.assign||function(t){for(var r,n=1,e=arguments.length;n<e;n++)
for(var a in r=arguments[n])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},s.apply(this,arguments)};function l(t,r,n,e){return new(n||(n=Promise))((function(a,i){function o(t){try{u(e.next(t))}catch(t){i(t)}}
function c(t){try{u(e.throw(t))}catch(t){i(t)}}
function u(t){var r;t.done?a(t.value):(r=t.value,r instanceof n?r:new n((function(t){t(r)}))).then(o,c)}
u((e=e.apply(t,r||[])).next())}))}
function v(t,r){var n,e,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,e&&(a=2&c[0]?e.return:c[0]?e.throw||((a=e.return)&&a.call(e),0):e.next)&&!(a=a.call(e,c[1])).done)return a;switch(e=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,e=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}
if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}
if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}
if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}
a[2]&&o.ops.pop(),o.trys.pop();continue}
c=r.call(t,o)}catch(t){c=[6,t],e=0}finally{n=a=0}
if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}
function d(t,r,n){if(n||2===arguments.length)
for(var e,a=0,i=r.length;a<i;a++)!e&&a in r||(e||(e=Array.prototype.slice.call(r,0,a)),e[a]=r[a]);return t.concat(e||Array.prototype.slice.call(r))}
var p=Math.random()>=.01,h=[];function y(t){return"number"==typeof t}
function _(t){return t&&"object"==typeof t}
function m(t){return"string"==typeof t}
function g(t){return(_(t)||m(t))&&y(t.length)?t.length:0}
function b(t){return void 0===t}
function S(t,r){t.push(r)}
var C=function(){var t=r,n=[t];try{for(;t.parent&&t.parent!==t;)S(n,t=t.parent)}catch(t){}
return n}();function I(t,r){for(var n=g(C)-1;n>=0;n--)try{if(t in C[n]&&!b(C[n][t][r]))return C[n][t]}catch(t){}}
I("window","document");var T=I("document","body"),w=I("location","href"),A=I("performance","timing")||I("performance","now");function D(t){return Math.floor(t)}
var E=void 0;function P(t){return"function"==typeof t}
function L(){return A&&P(A.now)?D(A.now()):E}
function M(t){return new Date((new Date).valueOf()+(t||0))}
function O(t){return M(t).valueOf()}
var R=O(),k=[];function N(){return k[4]?L()-k[4]:O()-R}
var B=[];function x(t,r,n){try{"A"===t[0]&&":"===t[1]&&p||(r=r?r instanceof Error?r:new Error(r):new Error(""),S(B,[t,r,n,d([],h,!0),N(),O()]))}catch(t){}}
var j=P(a.attachEvent)&&!P(a.addEventListener),H=j?function(t,r,n){try{t.attachEvent("on"+r,n)}catch(t){x("AE",t,r)}}:function(t,r,n){try{t.addEventListener(r,n,!1)}catch(t){x("AEL",t,r)}},F={};function J(t){return!!g(F[t])}
var G="1d53c387",q="/collector/prep_mapping",z="/gateway/p",U="application/json",$="multipart/form-data",X="application/x-www-form-urlencoded",Q=[],V=[];function W(){for(var t=g(V),r=0;r<t;r++)try{V[r]()}catch(t){}}
function K(t){S(Q,t),W()}
var Z=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Y(t){return _(t)?Array.prototype.slice.call(t):[]}
function tt(t,r){try{return(Z(t)||m(t)?t:Y(t)).indexOf(r)>-1}catch(t){x("INCL",t)}
return!1}
function rt(t){return null==t||function(t){return"boolean"==typeof t}(t)||m(t)||y(t)}
var nt,et=n&&P(n.stringify);function at(t){var r=[];if(et)try{return n.stringify(t,(function(t,n){return _(n)?tt(r,n)?void 0:(S(r,n),n):n}))}catch(t){x("JSN",t)}
try{if(_(t)&&!tt(r,t)){S(r,t);var e="";if(P(t.toJSON))return at(t.toJSON());if(Z(t)){for(var a=g(t),i=0;i<a;i++){e+=(i?",":"")+((c=at(t[i]))||"null")}
return"["+e+"]"}
i=0;for(var o in t){var c;(c=at(t[o]))&&(e+=(i?',"':'"')+o+'":'+c,i++)}
return"{"+e+"}"}
if(m(t)){nt=nt||[/[\\]/g,/[\"]/g,/[\n]/g,/[\r]/g,/[\t]/g,/[\b]/g,/[\f]/g];for(i=0;i<7;i++)t=t.replace(nt[i],"\\"+'\\"nrtbf'[i]);return'"'+t+'"'}
if(rt(t))return""+t}catch(t){x("JSS",t)}
return""}
function it(t){return _(t)?Object.keys(t):[]}
function ot(t,r){return void 0===r&&(r=","),Y(t).join(r)}
function ct(t){return Z(t)?ot(t):_(t)?at(t):""+t}
var ut=encodeURIComponent,ft=decodeURIComponent;function st(t){var r=[];if(_(t))
for(var n=it(t),e=g(n),a=0;a<e;a++){var i=n[a],o=t[i];if(!b(o)&&!P(o))try{S(r,ut(i)+"="+ut(ct(t[i])))}catch(t){x("PTQS",t,i)}}
return ot(r,"&")}
var lt="C",vt="L";function dt(t,r){return!(!m(t)||!m(r))&&t.substring(0,g(r))===r}
function pt(t,r){return m(t)?t.split(r):[]}
function ht(t){return m(t)?t.trim():""}
var yt,_t,mt,gt=34186698e3,bt=new Date(0);function St(t,r,n,e){return ut(t)+"="+ut(r||"")+";path=/;SameSite=Lax;expires="+(null==r?bt:n?n.toUTCString():M(gt))+(e?";domain="+e:"")}
function Ct(){if(yt)return yt;yt=[];try{for(var t=pt(a.domain||u.hostname,"."),r=g(t)-1;r>=0;r--){var n="."+ot(t.slice(r),"."),e="_schn"+g(yt),i=(Math.random()+1).toString(36).substring(8);S(yt,["."+ot(t.slice(r),"."),e,i,St(e,i,M(18e4),n),St(e,i,bt,n)])}}catch(t){x("CDL",t)}
return yt}
function It(r,n,e,i,o){var u=this;function s(){i&&i()}
function d(t){x("SSA",t,r+":"+n),i&&i()}
try{if("R"===r[1]&&(n+="_r",r=r[0]),o=r===lt?o||M(gt):E,t){var p=t.api.browser;if(r===lt)(function(){return l(this,void 0,void 0,(function(){return v(this,(function(r){return mt?[2,mt]:[2,mt=new Promise((function(r,n){var e=Ct(),a=t.api.browser.cookie,i=function(){if(a&&g(e)){var t=e.shift(),o=t[0],c=t[1],u=t[3],f=t[4];a.set(u).then((function(){a.get(c).then((function(){a.set(f).catch((function(){})),r(o)}))})).catch(i)}else n(new Error)};i()}))]}))}))})().then((function(t){return l(u,void 0,void 0,(function(){return v(this,(function(r){return p.cookie.set(St(n,e,o,t)).then(s).catch(d),[2]}))}))})).catch(d);else{var h=p[r===vt?"localStorage":"sessionStorage"];(null==e?h.removeItem(n):h.setItem(n,e)).then(s).catch(d)}}else{if(r===lt){var y=function(){if(!b(_t))return _t;try{for(var t=Ct(),r=g(t),n=0;n<r;n++){var e=t[n],i=e[0],o=e[1],c=e[2],u=e[3],f=e[4];if(a.cookie=u,tt(a.cookie,o+"="+c))return a.cookie=f,_t=i}}catch(t){x("CTD",t)}
return _t=null}();a.cookie=St(n,e,o,y)}else{(h=r===vt?c:f)&&(null==e?h.removeItem(n):h.setItem(n,e))}
s()}}catch(t){x("SS",t,r+":"+n)}}
function Tt(r,n,e){var i;function o(t){i&&null!=t?It(r,n,null,(function(){It(r,n,t,(function(){return e&&e(t)}))})):e&&e(t)}
function u(t){x("SGA",t,r+":"+n),e&&e(null)}
try{if((i="R"===r[1])&&(n+="_r",r=r[0]),t){var s=t.api.browser;return void(r===lt?s.cookie.get(n).then(o).catch(u):s[r===vt?"localStorage":"sessionStorage"].getItem(n).then((function(t){return o(b(t)?null:t)})).catch(u))}
var l=null;if(r===lt)
for(var v=pt(a.cookie,";"),d=g(v),p=0;p<d;p++){var h=ht(v[p]),y=ut(n);if(dt(h,y+"=")){l=ft(h.substring(g(y)+1));break}}else{var _=r===vt?c:f;_&&(l=_.getItem(n))}
return o(l),l}catch(t){x("SG",t,r+":"+n)}
return null}
var wt=function(){try{return r!==r.top}catch(t){return!0}}();function At(){try{return!t&&wt&&w===u?i||u.href:w.href}catch(t){}
return u.href}
var Dt="_scDev",Et=function(){var t=!1;try{var r=Tt(vt,Dt);((t=b(r)?"localhost"===pt(pt(At(),"/")[2],":")[0]:!!r)&&!r||!t&&r)&&It(vt,Dt,t?"1":"")}catch(t){}
return t}(),Pt="PAD_SERVER_URL",Lt=tt(Pt,"/"),Mt=[z];function Ot(t){var r=Et?"https://tr-shadow.snapchat.com":"https://tr.snapchat.com";return(Lt&&tt(Mt,pt(t,"?")[0])?Pt:r)+t}
function Rt(t,r,n){if(P(o.sendBeacon))try{return o.sendBeacon(Ot(t),n===$?function(t){var r=new FormData;if(_(t))
for(var n=it(t),e=g(n),a=0;a<e;a++){var i=n[a],o=t[i];if(!b(o)&&!P(o))try{r.append(i,ct(t[i]))}catch(t){x("PTFD",t,i)}}
return r}(r):new Blob([n===U?at(r):st(r)],{type:n}))}catch(r){x("HPB",r,t+"|"+n)}
return!1}
function kt(t){for(var r={},n=it(t),e=g(n),a=0;a<e;a++){var i=n[a],o=t[i];b(o)||P(o)||(r[i]=ct(o))}
return r}
function Nt(t,r,n){try{var e=a.createElement(t);if(r)
for(var i=it(r),o=g(i),c=0;c<o;c++)e.setAttribute(i[c],r[i[c]]);return n&&(e.style.cssText="display:none;position:absolute;overflow:hidden;width:1px;height:1px"),e}catch(r){x("CDE",r,t)}}
function Bt(){var t;do{t="snap"+Math.floor(1e7*Math.random())}while(a.getElementById(t));return t}
function xt(t){try{t&&t.parentNode&&t.parentNode.removeChild(t)}catch(t){x("RDO",t)}}
function jt(t,r,n){var e=new XMLHttpRequest;e.withCredentials=!0;var a=Ot(r);return e.open(t,a),e.onerror=e.onabort=function(r){n(new Error("XHR "+r.type+" "+e.status+": "+t+" "+a))},e}
function Ht(r,n,e){!t&&Rt(r,n,e)||(e===U||e===X?function(t,r,n){try{var e=jt("POST",t,(function(t){return x("HPXHRR",t)}));e.setRequestHeader("Content-Type",n),e.send(n===U?at(r):st(kt(r)))}catch(r){x("HPXHR",r,t)}}(r,n,e):function(t,r,n){try{if(a.body){var e=Bt(),i=Nt("iframe",{id:e,name:e}),o=Nt("form",{acceptCharset:"utf-8",action:Ot(t),method:"POST",target:i.id},!0);o.appendChild(i);var c=0;setTimeout((function(){c<2&&x("HPIFTO",E,c+":"+t)}),5e3),H(i,"load",(function(){if(1==++c){for(var t=kt(r),e=it(t),a=g(e),i=0;i<a;i++){var u=e[i];o.appendChild(Nt("input",{name:u,value:t[u]}))}
o.submit()}else 2===c&&(n&&n(),setTimeout((function(){return xt(o)}),1))})),a.body.appendChild(o)}}catch(r){x("HPIF",r,t)}}(r,n))}
var Ft="_scsrid",Jt=[lt,"CR",vt,"LR"],Gt=o&&o.userAgent||t&&t.navigator.userAgent||"";function qt(t){return m(t)?t.toLowerCase():""}
var zt=function(){try{var t=qt(Gt);return tt(t,"snapchat")?tt(t,"iphone")||tt(t,"ipad")||tt(t,"ipod")?2:tt(t,"android")?1:0:0}catch(t){x("IN",t)}
return 0}();function Ut(t,r,n){var e,a=g(t),i=[],o=0,c=0;function u(){c++,a===c&&n&&n(e)}
for(var f=function(n){Tt(t[n],r,(function(c){return function(n,c){if(i[c]=n,o++,a===o){for(var f=0;f<a;f++)null==e&&(e=i[f]);for(f=0;f<a;f++)i[f]===e||null==e?u():It(t[f],r,e,u)}}(c,n)}))},s=0;s<a;s++)f(s);return e}
function $t(t,r,n,e){var a=g(t),i=0;function o(){i++,a===i&&e&&e()}
for(var c=0;c<a;c++)It(t[c],r,n,o)}
var Xt,Qt,Vt={};function Wt(t){void 0===t&&(t=pt(At(),"?")[1]||"");var r={};if(m(t)){if(Vt[t])return Vt[t];g(it(Vt))>256&&(Vt={}),Vt[t]=r;for(var n=pt(t,"&"),e=g(n),a=0;a<e;a++){var i=pt(n[a],"="),o=i.shift();if(o&&g(i))try{r[ft(o)]=ft(ot(i,"="))}catch(t){x("QSTP",t,o)}}}
return r}
function Kt(t,r){t&&r&&$t(Jt,Ft,(Qt=t)+"|"+(Xt=r))}
function Zt(){Ut(Jt,Ft,(function(t){if(t){var r=pt(t,"|"),n=r[0],e=r[1];+n&&e&&(Qt=+n,Xt=e)}}))}
var Yt,tr,rr=Wt().ScCid;function nr(t,r){for(var n=g(r),e=0;e<n;e++)S(t,r[e])}
function er(t,r,n){var e=[];if(r&&_(t)&&(r===n||!t.location))
for(var a in t)try{nr(e,[a,er(t[a],r-1,n)])}catch(t){nr(e,[a,Math.random()])}
return""+(g(e)?e:t)}
function ar(){var t,r;try{t=o.plugins,r=o.language}catch(t){}
return""+er([O(),Gt,t,r,Math.random()],3,3)}
function ir(t){return function(t){var r,n=0,e=0,a=0,i=1,o=(r=4022871197,function(t){t=t.toString();for(var n=0;n<g(t);n++){var e=.02519603282416938*(r+=t.charCodeAt(n));e-=r=e>>>0,r=(e*=r)>>>0,r+=4294967296*(e-=r)}
return 2.3283064365386963e-10*(r>>>0)});function c(){var t=2091639*n+2.3283064365386963e-10*i;return n=e,e=a,a=t-(i=0|t)}
return n=o(" "),e=o(" "),a=o(" "),(n-=o(t))<0&&(n+=1),(e-=o(t))<0&&(e+=1),(a-=o(t))<0&&(a+=1),function(){return c()+11102230246251565e-32*(2097152*c()|0)}}(t)}
function or(){try{Yt=Yt||ir(ar());var t=pt("0123456789abcdef",""),r=[],n=void 0;r[8]=r[13]=r[18]=r[23]="-",r[14]="4";for(var e=0;e<36;e++)r[e]||(n=0|16*Yt(),r[e]=t[19===e?3&n|8:n]);return ot(r,"")}catch(t){return x("UUID",t),""}}
function cr(t){return!(!m(t)||36!==g(t))&&(tr=tr||/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i).test(t)}
rr?Kt(2,rr):zt?Tt("S","srid",(function(t){t?Kt(1,t):Zt()})):Zt();var ur=0,fr=0,sr=[];function lr(t,r){if(r(t),++fr===ur)
for(;g(sr);)sr.shift()()}
function vr(t,r,n){var e;return ur++,Ut(t,r,(function(a){cr(e=a)?lr(e,n):(e=or(),$t(t,r,e,(function(){return lr(e,n)})))})),e}
var dr=vr([lt,"CR"],"_scid",(function(t){return dr=t})),pr=vr([vt,"LR"],"u_sclid",(function(t){return pr=t})),hr=vr(["S","SR"],"u_scsid",(function(t){return hr=t})),yr="2.0.0",_r=[];function mr(){try{return I("dataLayer","length")||_r}catch(t){x("MDCDL",t)}
return _r}
var gr=[],br=[],Sr=[],Cr=[],Ir={dataLayer:mr(),jsonLD:gr,metaTags:br,opengraph:Sr,schemaOrg:Cr};Object.defineProperty(Ir,"dataLayer",{configurable:!0,enumerable:!0,get:function(){return mr()}});var Tr=or(),wr=[],Ar=[],Dr={$:{},id:{cookie1:dr,lifecycleID:Tr,localStorageID:pr,sessionID:hr,version:yr},launchpad:Lt?Pt:E,log:Q,microdata:Ir,timing:{appStart:R,app:wr,perf:Ar},onChange:function(t){P(t)&&S(V,t)}};var Er,Pr,Lr,Mr="snaptr";var Or=Wt().sc_wbt;function Rr(t,r,n,e){try{var a=g(r);if(g(t)&&(e||n||a)){var i={pids:t,i:{b:G,c:dr,l:pr,s:hr,sr:Xt,srs:Qt,u:or()},m:{a:O(),p:N(),r:L(),ri:k[0],rl:k[1],rp:k[2],rr:k[3],rs:k[4],rsa:R,rt:h[3],ru:h[4],v:Er?+Er.substring(1):E,w:Or},pl:At(),btx:n||E,md:a?r:E,pu:e||E};Ht("/hm",i,U),K({type:"microdata",payload:i})}}catch(t){x("SMD",t)}}
function kr(t){try{return t instanceof Node||_(t)&&m(t.nodeName)&&y(t.nodeType)}catch(t){return!0}}
function Nr(t,r,n){void 0===r&&(r="."),void 0===n&&(n=1024);var e={};if(_(t))try{Br(t,r,n,0,"",e,[])}catch(t){x("FO",t)}
return e}
function Br(t,r,n,e,a,i,o){var c=Y(t),u=g(c);if(e>=n)return e;if(u||Z(t))
for(var f=0;f<u&&e<n;f++)try{e=xr(c[f],r,n,e,a+(a?r:"")+f,i,o)}catch(t){x("FOPA",t,f)}else if(_(t)){if(kr(t))return e;var s=it(t),l=g(s);for(f=0;f<l&&e<n;f++){var v=s[f];try{e=xr(t[v],r,n,e,a+(a?r:"")+v,i,o)}catch(t){x("FOPO",t,v)}}}else rt(t)&&(i[a]=t,e++);return e}
function xr(t,r,n,e,a,i,o){return _(t)?tt(o,t)||(S(o,t),e=Br(t,r,n,e,a,i,o)):rt(t)&&(i[a]=t,e++),e}
var jr=0;function Hr(){var t=[];try{for(var r=mr(),n=g(r),e=jr;e<n;e++){for(var a={},i=r[e],o=it(i),c=g(o),u=0;u<c;u++){var f=o[u];"gtm.element"===f||kr(i[f])||(a[f]=i[f])}
g(it(a))&&S(t,a)}
jr=n}catch(t){x("MDFPDL",t)}
return t}
var Fr,Jr,Gr={schemaOrg:1,dataLayer:2,opengraph:3,jsonLD:4,metaTags:5};function qr(t){for(var r=[],n=it(Gr),e=g(n),a=0;a<e;a++)try{var i=n[a];if(!t||t===i){var o="dataLayer"===i?Hr():Ir[i];if(o)
for(var c=g(o),u=Gr[i],f=0;f<c;f++)try{S(r,{tagProtocol:u,tagData:Nr(o[f])})}catch(t){x("MDTPLII",t,a+":"+f)}}}catch(t){x("MDTPLI",t,a)}
return r}
function zr(){Fr||(Fr=!0,J("DT")&&Rr(F.DT,qr("dataLayer"),E,!0))}
var Ur={};function $r(t,r,n,e,a,i){var o,c;try{o=r&&!b(r.stack)?String(r.stack):function(t){void 0===t&&(t=1);try{return ot(pt(ht(new Error("").stack),"\n").slice(t+1),"\n")}catch(t){}
return""}(2)}catch(t){}
try{c=r&&!b(r.message)?String(r.message):E}catch(t){}
var f=pt(ht(o),"\n");(c&&tt(f[0],c)||"error"===ht(qt(f[0])))&&f.shift(),Ht("/log/error",{bt:G,domain:At(),name:t,message:t,pixelIds:it(Ur),stack:at([i,O(),e,k,e!==h,a,n,c,f.slice(0,12),!!wt&&u.href]),userAgent:Gt||""},X)}
function Xr(){B[0]?$r.apply(void 0,B[0]):setTimeout(Xr,250)}
function Qr(t,r,e){try{var a=function(n){r>1?setTimeout((function(){return Qr(t,r-1,e)}),250):e&&e(n),e=E},i=jt("GET",t,a);i.setRequestHeader("Accept",U),i.onload=function(){if(i.status>=200&&i.status<300){var t=void 0,r=void 0;try{t=n&&n.parse(i.responseText)}catch(t){r=t instanceof Error?t:new Error(""+t)}
r?a(r):e&&(e(r,t),e=E)}},i.send()}catch(t){x("HGXJ",t)}}
function Vr(t,r){Z(t)&&!tt(t,r)&&S(t,r)}
function Wr(t,r){t=m(t)?t:"";for(var n=(r=m(r)?r:"")[0];"?"===n||"&"===n;)n=(r=r.substring(1))[0];if(r)
for(var e=t.substring(g(t)-1);"?"===e||tt(t,"?")&&"&"===e;){var a=g(t)-1;e=(t=t.substring(0,a)).substring(a-1)}
return t+(r?tt(t,"?")?"&":"?":"")+r}
var Kr=[],Zr=[];function Yr(t){try{for(var r=g(t),n=0;n<r;n++){var e=t[n];tt(Zr,e)||Vr(Kr,e)}
if(1===Qt&&g(Kr)){var a={pids:ot(Kr),jsrid:or(),c1:dr,u_sclid:pr,u_scsid:hr,siid:Xt};nr(Zr,Kr),Kr.length=0,Qr(Wr("/cm/si",st(a)),3)}}catch(t){x("SNCID",t)}}
function tn(t,n){if(1===zt)try{var e=r.JSBridge;if(e&&P(e[t]))return null==n?e[t]():e[t](n),!0}catch(r){x("NJSBAS",r,t)}
return!1}
function rn(t,n){if(2===zt)try{var e=r.webkit,a=e&&e.messageHandlers,i=a&&a[t];if(i&&P(i.postMessage))return i.postMessage(n),!0}catch(r){x("NJSBIOSS",r,t)}
return!1}
var nn=j?function(t,r,n){try{t.detachEvent("on"+r,n)}catch(t){x("DE",t,r)}}:function(t,r,n){try{t.removeEventListener(r,n,!1)}catch(t){x("REL",t,r)}};function en(t,n,e,i){try{if(a.body){var o=Ot(t),c=Wr(o,st(n)),u=Nt("iframe",{id:Bt(),src:c},!0);if(i){var f=function(t){m(t&&t.origin)&&t.origin===ot(pt(o,"/").slice(0,3),"/")&&(i(t),xt(u),nn(r,"message",f))};H(r,"message",f),e&&H(u,"load",(function(){e()}))}else H(u,"load",(function(){e&&e(),setTimeout((function(){return xt(u)}),1)}));a.body.appendChild(u)}}catch(t){x("HIFG",t)}}
function an(t){var n=t.sync_modes,e=g(n),a=-1;function o(){if(++a===e)try{r.parent&&P(r.parent.postMessage)&&r.parent.postMessage("cmdone",i)}catch(t){x("LPC",t,i)}}
o();for(var c=0;c<e;c++)en("/cm/s",{bt:G,pnid:n[c],cb:O(),u_scsid:hr,u_sclid:pr,s_r_id:Xt,s_r_ids:Xt?2:E},o)}
var on=[];function cn(t){return P(T.querySelector)?T.querySelector(t):null}
var un=String.fromCharCode,fn="0123456789abcdef";function sn(t,r){var n=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(n>>16)<<16|65535&n}
function ln(t,r){return t>>>r|t<<32-r}
function vn(t,r){return t>>>r}
function dn(t){return ln(t,7)^ln(t,18)^vn(t,3)}
var pn=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];function hn(t){try{return t=function(t){var r=-1,n="",e=t&&g(t);if(e)
for(;(r+=1)<e;){var a=t.charCodeAt(r),i=r+1<e?t.charCodeAt(r+1):0;55296<=a&&a<=56319&&56320<=i&&i<=57343&&(a=65536+((1023&a)<<10)+(1023&i),r+=1),a<=127?n+=un(a):a<=2047?n+=un(192|a>>>6&31,128|63&a):a<=65535?n+=un(224|a>>>12&15,128|a>>>6&63,128|63&a):a<=2097151&&(n+=un(240|a>>>18&7,128|a>>>12&63,128|a>>>6&63,128|63&a))}
return n}(m(t)?t:""),function(t){for(var r="",n=g(t),e=0;e<n;e+=1){var a=t.charCodeAt(e);r+=fn.charAt(a>>>4&15)+fn.charAt(15&a)}
return r}(function(t){for(var r="",n=32*g(t),e=0;e<n;e+=8)r+=un(t[e>>5]>>>24-e%32&255);return r}(function(t,r){var n,e,a,i,o,c,u,f,s,l,v,d,p,h=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],y=new Array(64);for(t[r>>5]|=128<<24-r%32,t[15+(r+64>>9<<4)]=r,s=0;s<g(t);s+=16){for(n=h[0],e=h[1],a=h[2],i=h[3],o=h[4],c=h[5],u=h[6],f=h[7],l=0;l<64;l+=1)y[l]=l<16?t[l+s]:sn(sn(sn(ln(p=y[l-2],17)^ln(p,19)^vn(p,10),y[l-7]),dn(y[l-15])),y[l-16]),v=sn(sn(sn(sn(f,ln(o,6)^ln(o,11)^ln(o,25)),o&c^~o&u),pn[l]),y[l]),d=sn(ln(n,2)^ln(n,13)^ln(n,22),n&e^n&a^e&a),f=u,u=c,c=o,o=sn(i,v),i=a,a=e,e=n,n=sn(v,d);h[0]=sn(n,h[0]),h[1]=sn(e,h[1]),h[2]=sn(a,h[2]),h[3]=sn(i,h[3]),h[4]=sn(o,h[4]),h[5]=sn(c,h[5]),h[6]=sn(u,h[6]),h[7]=sn(f,h[7])}
return h}(function(t){var r,n=8*g(t),e=Array(g(t)>>2),a=g(e);for(r=0;r<a;r+=1)e[r]=0;for(r=0;r<n;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<24-r%32;return e}(t),8*g(t))))}catch(t){return x("SHA",t),""}}
function yn(t){return m(t)?t.toUpperCase():""}
var _n,mn={B:"1",F:"1",P:"1",V:"1",C:"2",G:"2",J:"2",K:"2",Q:"2",S:"2",X:"2",Z:"2",D:"3",T:"3",L:"4",M:"5",N:"5",R:"6",W:"7",H:"7",A:"8",E:"8",I:"8",O:"8",U:"8",Y:"8"};function gn(t){try{if(_n=_n||/[^A-Z]/g,!g(t=yn(t).replace(_n,"")))return"";for(var r=t[0],n="",e=1;e<g(t);e++){var a=t[e],i=null!=mn[a]?mn[a]:"";if(i===n?i="":n=i,"7"!==i&&"8"!==i||(i=""),4===g(r+=i))break}
return r[0]+(null!=r[1]?r[1]:"0")+(null!=r[2]?r[2]:"0")+(null!=r[3]?r[3]:"0")}catch(t){return x("SX",t),""}}
var bn,Sn,Cn=["u_fn","u_mn","u_ln","l_c","l_s"],In=["l_r","l_z","u_dobm","u_dobd","u_ems","u_pns"];function Tn(t){for(var r={},n=t.val_el,e=g(n),a=0;a<e;a++)try{var i=n[a],o=i[0],c=i[1],u=cn(o),f=u&&u.value&&qt(ht(u.value));if(f){var l=tt(Cn,c);if(l){var v=c.replace("_","_s");r[v]=(r[v]?r[v]+",":"")+gn(f)}
if(l||tt(In,c)){var d=c.replace("_","_h");r[d]=(r[d]?r[d]+",":"")+hn(f)}}}catch(t){x("ASCPM",t,a)}!function(t){try{if(J("PII")&&g(it(t))){var r=s(s({},t),{pids:F.PII,u_c1:dr});Ht(q,r,$)}}catch(t){x("SASC",t)}}(r)}
function wn(t){try{var r=cn(t.watch_el);return r&&H(r,t.ev,(function(){return Tn(t)})),!!r}catch(r){x("AMAL",r,t.watch_el)}
return!0}
function An(t){try{if(e&&T.body&&!wn(t)){var r=new e((function(){if(wn(t)){var n=on.indexOf(r);n>-1&&on.splice(n,1),r.disconnect()}}));r.observe(T.body,{childList:!0,subtree:!0}),S(on,r)}}catch(t){x("ASCWFM",t)}}
function Dn(t,r){if(e&&T&&T.body)try{if(function(t,r){return tt(F[t],r)}("PII",t))
for(var n=g(r),a=0;a<n;a++){var i=r[a];_(i)?An(i):x("ASCSI",E,i)}}catch(t){x("ASCS",t)}}
function En(t){return P(T.querySelectorAll)?Y(T.querySelectorAll(t)):[]}
function Pn(t,r){if(t&&P(t.getAttribute)){var n=t.getAttribute(r);return null==n?E:n}}
function Ln(t){T&&T.querySelectorAll&&T.getElementsByTagName&&(t&&(Sn=!0),J("MD")&&Sn&&setTimeout((function(){!function(){try{for(var t=En('script[type="application/ld+json"]'),r=g(t),n=0;n<r;n++)try{for(var e=JSON.parse(t[n].innerText),a=Z(e)?e:[e],i=g(a),o=0;o<i;o++)S(gr,a[o])}catch(t){}}catch(t){x("MDCJLD",t)}}(),function(){try{if(P(T.getElementsByTagName)){for(var t=T.getElementsByTagName("meta"),r=g(t),n=0;n<r;n++){var e={},a=t[n];try{var i=Pn(a,"name"),o=Pn(a,"content");i&&o&&(e["meta:"+i]=o)}catch(t){x("MDCMTI",t,n)}
g(it(e))&&S(br,e)}
var c=T.getElementsByTagName("title")[0];c&&c.innerText&&S(br,{title:c.innerText})}}catch(t){x("MDCMT",t)}}(),function(){try{for(var t=En('[property^="og:"]'),r=g(t),n=0;n<r;n++){var e={};try{var a=Pn(t[n],"property"),i=Pn(t[n],"content");i&&a&&dt(a,"og:")&&(e[a]=i)}catch(t){x("MDCOGI",t,n)}
g(it(e))&&S(Sr,e)}}catch(t){x("MDCOG",t)}}(),function(){try{for(var t=En("[itemscope]"),r=g(t),n=0;n<r;n++)try{var e=t[n],a=Pn(e,"itemtype");if(a){for(var i={},o={type:a,properties:i},c=Y(e.querySelectorAll("[itemprop]")),u=g(c),f=0;f<u;f++)try{var s=c[f];if(s){var l=Pn(s,"itemprop"),v=Pn(s,"content")||s.textContent||Pn(s,"src");if(l&&v&&(i[l]=v,P(s.matches)&&s.matches("[itemscope]")&&s.matches("[itemprop]"))){var d=Pn(s,"itemtype");if(d){for(var p={},h={type:d,properties:p},y=Y(s.querySelectorAll("[itemprop]")),_=g(y),m=0;m<_;m++){var b=y[m];if(b){var C=Pn(b,"itemprop"),I=Pn(b,"content")||b.textContent||Pn(b,"src");C&&I&&(p[C]=I)}}
i[l]=h}}}}catch(t){x("MDCSOII",t,n+":"+f)}
S(Cr,o)}}catch(t){x("MDCSOI",t,n)}}catch(t){x("MDCSO",t)}}(),Rr(F.MD,qr())}),50))}
var Mn,On,Rn,kn,Nn=[];function Bn(t){return!(!m(t)||!t)&&(Mn=Mn||/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i).test(t)}
function xn(){T&&T.addEventListener&&!Rn&&J("PII")&&(Rn=!0,H(T,"submit",(function(t){var r,n=[],e=[];kn=kn||/^0+|\D/g;try{if(t.target)
for(var a=Y(t.target.getElementsByTagName("input")),i=g(a),o=Nn,c=0;c<i;c++)try{var u=a[c],f=ht(u&&u.value);if(f){var s="password"===u.type||"hidden"===u.type;if(!s&&Bn(f)&&Vr(n,hn(qt(f))),!s&&(m(r=f)&&r&&(On=On||/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/).test(r)))
if("+"!==ht(f)[0]){if(o)
for(var l=g(o),v=0;v<l;v++)Vr(e,hn(("+"+o[v]+f).replace(kn,"")));Vr(e,hn(("+1"+f).replace(kn,"")))}else Vr(e,hn(f.replace(kn,"")))}}catch(t){x("SCPIII",t,c)}}catch(t){x("SCPII",t)}!function(t,r){try{if(J("PII")&&(g(t)||g(r))){var n={pids:F.PII,u_hems:g(t)?ot(t):E,u_hpns:g(r)?ot(r):E,u_c1:dr};Ht(q,n,$)}}catch(t){x("SPII",t)}}(n,e)})))}
var jn={};function Hn(t,r){for(var n=g(r),e=0;e<n;e++)Vr(t,r[e])}
var Fn={};function Jn(t,r){try{if(_(r)){var n=g(r.a);if(n)
for(var e=0;e<n;e++){var a=r.a[e];F[a]=F[a]||[],Vr(F[a],t)}
var i=g(r.b);if(i)
for(e=0;e<i;e++){a=r.b[e];jn[a]=jn[a]||[],Vr(jn[a],t)}
r.ipg&&Hn(Nn,pt(r.ipg,",")),r.t&&Hn(Nn,pt(r.t,",")),Fn[t]=!1;try{xn(),g(r.asc)&&Dn(t,r.asc),T&&T.addEventListener&&!bn&&J("BTC")&&(bn=!0,H(T,"click",(function(t){try{var r=t.target;if(r){var n=qt(r.nodeName),e=qt(r.type);if("a"===n||"button"===n||"input"===n&&("button"===e||"submit"===e)){var a=r.innerText||r.value;Rr(F.BTC,E,a)}}}catch(t){x("SCCBT",t)}}))),Ln()}catch(t){x("CLRS",t)}}else x("CLRO",E,t)}catch(r){x("CLR",r,t)}}
var Gn,qn,zn="_sctr";function Un(r,n,e){try{if(Ur[r])Ur[r]=s(s({},Ur[r]),n),Dr.$[r]=s(s({},Ur[r]),n);else{Ur[r]=n,Dr.$[r]=s({},n);var a=pt(u.hostname,".").pop();Fn[r]=!0,t?function(t,r){Qr(r,3,(function(r,n){_(n)?Jn(t,n):r&&x("CLJ",r,t)}))}(r,"/config/"+a+"/"+r+".json"):(function(t,r){try{var n=pt(Tt(lt,zn),"|")[1],e=+pt(n,",")[0];e>0&&!(O(-6048e5)>e)||en("/cm/i",{pid:t,sync_modes:(m(r)?r:ot(Y(r)))||E,u_scsid:hr,u_sclid:pr,s_r_id:Xt,s_r_ids:Xt?2:E},E,(function(t){try{if("cmdone"===t.data){var r=new Date;r.setHours(0,0,0,0);var n="1|"+r.valueOf();It(lt,zn,n)}}catch(t){x("LC3H",t)}}))}catch(t){x("LC3",t)}}(r,e),function(t){try{var r=Nt("script",{async:"true",src:t});if(r){"crossOrigin"in r&&(r.crossOrigin="anonymous");var n=document.getElementsByTagName("script")[0];n&&n.parentNode&&n.parentNode.insertBefore(r,n)}}catch(r){x("LS",r,t)}}(Ot("/config/"+a+"/"+r+".js"))),zt&&Yr([r])}
W()}catch(t){x("STRI",t)}}
function $n(t){return m(t)?(Gn=Gn||/_|-/g,qt(t).replace(Gn,"")):""}
function Xn(t){return!(!m(t)||64!==g(t))&&(qn=qn||/^[0-9a-f]{64}$/i).test(t)}
var Qn={u_em:"u_hem",u_hem:"u_hem",u_hed:"u_hed",u_pn:"u_hpn",u_hpn:"u_hpn",u_mai:"u_hmai",u_hmai:"u_hmai"},Vn={user_email:"u_em",user_hashed_email:"u_hem",user_hashed_email_domain:"u_hed",user_phone_number:"u_pn",user_hashed_phone_number:"u_hpn",user_mobile_ad_id:"u_mai",user_hashed_mobile_ad_id:"u_hmai",partner_id:"u_pnid",user_partner_uid:"u_puid",age:"u_age",brand_id:"br_id",client_dedup_id:"cdid",client_deduplication_id:"cdid",connection_type:"c_type",currency:"e_cur",data_use:"du",description:"e_desc",device_brand:"d_br",device_model:"d_md",device_type:"d_type",event_tag:"et",firstname:"u_fn",gender:"u_gd",geo_address:"l_addr",geo_city:"l_city",geo_country:"l_gc",geo_location_source:"l_ls",geo_metro:"l_gm",geo_postal_code:"l_gpc",geo_region:"l_gr",integration:"intg",ip_address:"c_ip",isp:"c_isp",item_category:"e_ic",item_ids:"e_iids",lastname:"u_ln",lat:"l_lat",level:"e_lv",limited_ad_tracking:"d_lat",locale_country:"d_lc",locale_language:"d_ll",long:"l_lng",mobile_carrier:"c_mc",number_items:"e_ni",os_type:"d_ot",os_version:"d_os",payment_info_available:"e_pia",price:"e_pr",search_string:"e_ss",sign_up_method:"e_sm",success:"e_su",transaction_id:"e_tid",user_agent:"d_ua",brands:"e_bds",customer_status:"e_cs",delivery_method:"e_dm"},Wn={};try{for(var Kn=it(Vn),Zn=g(Kn),Yn=0;Yn<Zn;Yn++){var te=Kn[Yn],re=Vn[te],ne=$n(te),ee=$n(re);Wn[ne]=Wn[ee]=[re,te]}}catch(t){x("TKC",t)}
function ae(t){var r=Wn[$n(t)];return r?r[0]:E}
var ie;function oe(t,r){for(var n={},e=it(t),a=g(e),i=0;i<a;i++){var o=e[i];try{if(!r||"syncmodes"!==$n(o)){var c=t[o];if(null!=c){var u=ae(o);if(u){var f=void 0,s=Qn[u];if(s&&(s!==u||!Xn(""+c))&&c&&m(c)){if(!Xn(c)){if("u_em"===u||"u_hem"===u)
if(Bn(c=qt(ht(c)))){var l=hn(pt(c,"@")[1]);n.u_hed=l}else f=!0;else"u_pn"!==u&&"u_hpn"!==u||(ie=ie||/[^\w]/g,c=yn(ht(c)).replace(ie,""));c=hn(c)}
u=s}
n[u]=f?"FFF"+c:c}else x("A:K",E,o)}}}catch(t){x("TPF",t,o)}}
return n}
function ce(t,r){var n=it(t),e=g(n);if(e)
for(var a=$n(r),i=0;i<e;i++)
if($n(n[i])===a)return t[n[i]]}
var ue,fe,se=[],le=[],ve=function(){try{return r.top.performance!==A}catch(t){}
return!0}();function de(t){ue=t}
function pe(){}
function he(){if(!fe){var t=function(){for(var t=g(le),r=0;r<t;r++){var n=le[r];if(Ur[n[0]])return le.splice(r,1),n}}();if(t)try{var r=t[0],n=t[1],e=t[2];!function(t,r,n){try{var e=s(s(s({pid:t,ev:r},Ur[t]),n),{pl:At(),bt:G,if:wt,m_dcl:k[1],m_fcps:k[2],m_ic:ve?1:E,m_pi:k[0],m_pl:k[3],m_pv:Er,m_rd:L(),m_sl:k[4],m_wbt:Or,rf:i,s_r_id:Xt,s_r_ids:Qt,trackId:or(),ts:O(),u_c1:dr,u_sclid:pr,u_scsid:hr,v:yr}),a=ue.sendPixelByGTM;if(a){var o=st(kt(e)),c=Wr(Ot("/p"),o);try{a(c,pe,pe),K({type:"track",gtm:!0,payload:e})}catch(t){x("STGTM",t,g(c)+"/"+g(o))}}else Lt?Ht(z,e,U):Ht("/p",e,X),K({type:"track",payload:e})}catch(t){x("ST",t)}}(r,e,n),"PAGE_VIEW"===e&&(h[3]=N(),wr[3]=h[3],Ln(!0))}catch(r){x("QP",r,t[0]+(m(t[2])?":"+t[2]:""))}(t||g(le))&&(fe=setTimeout((function(){fe=E,he()}),50))}}
function ye(){for(var t=it(Ur),r=0,n=se.shift();n;){var e=Y(n);e[0]=qt(e[0]);var a=e,i=a[0],o=a[1],c=a[2],u=a[3];try{if("init"===i)cr(f=qt(ht(o)))?(b(h[1])&&(h[1]=N(),wr[1]=h[1]),Vr(t,f),Un(f,_(c)?oe(c,!0):{},ce(c,"sync_modes")||[])):x("A:I",E,_(o)?"obj":o);else if("track"===i)
if(m(o)){var f,s=(f=m(c)?qt(ht(o)):E)?c:o;if(!m(s)||f&&!cr(f))x("A:T",E,o+"/"+(_(c)?"obj":c));else{s=yn(ht(s)),b(h[1])&&(h[2]=N(),wr[2]=h[2]);for(var l=(f?u:_(c)?c:{})||{},v=f?[f]:t,d=g(v),p=0;p<d;p++)S(le,[v[p],oe(l),s]),r++}}else x("A:T",E,_(o)?"obj":o);else"cm"===i?an(o):x("A:0",E,i+"/"+(_(o)?"obj":o)+"/"+(_(c)?"obj":c))}catch(t){x("SQP",t,i)}
n=se.shift()}
r&&he()}
function _e(){try{c&&Object.defineProperty(ue,"dev",{enumerable:!0,configurable:!0,get:function(){return Et},set:function(t){if(!!t!==Et){It(vt,Dt,t?"1":"");try{u.reload()}catch(t){}}}})}catch(t){x("SD",t)}}
function me(t,r,n,e){m(t)&&(S(se,[qt(t),r,n,e]),ye())}
function ge(){try{var n=r.snaptr=r.snaptr||function(t,r,n,e){return me(t,r,n,e)};if(t&&(t.snaptr=n),!n.context){n.handleRequest=me,n.cfg=Jn;try{var e=n.queue;return Z(e)?(nr(se,e),e.length=0):e&&x("STRQA",E,"t="+typeof e),n.clean=function(){return ye()},n.context=Dr,de(n),_e(),!0}catch(t){x("STRA",t)}}}catch(t){x("STR",t)}
return!1}
var be=!1;function Se(t){be||(be=!0,h[0]=N(),wr[0]=h[0],t())}
function Ce(t,r){if(!be){try{if(a.documentElement.scroll({left:0}),a.body)return void Se(r)}catch(t){}
setTimeout((function(){return Ce(t,r)}),50)}}
t?t.shopifyReady=new Promise((function(t){var r;r=function(){Xr(),ge(),ye(),t()},ur&&ur===fr?r():S(sr,r)})):(function t(){if(A&&P(A.mark))try{Pr||(A.mark(Mr),Pr=!0);var n=P(A.getEntriesByType)&&A.getEntriesByType("navigation"),e=n&&n[0]||E;Er=e?"v2":"v1";var a=A.timing,i=a&&a.navigationStart;k[0]=e&&e.domInteractive,null==k[0]&&(k[0]=i&&a.domInteractive-i),k[1]=e&&e.domContentLoadedEventEnd;var o=function(){try{if(A&&P(A.getEntriesByType))
for(var t=Y(A.getEntriesByType("paint")),r=g(t),n=0;n<r;n++)
if("first-contentful-paint"===t[n].name)return t[n]}catch(t){x("MFCP",t)}}();k[2]=o&&o.startTime,k[3]=e&&e.loadEventEnd,null==k[3]&&(k[3]=a&&a.loadEventEnd-i),Lr||0!==k[3]||(Lr=!0,H(r,"load",(function(){return setTimeout(t,1)})));var c=P(A.getEntriesByName)&&A.getEntriesByName(Mr)[0];k[4]=c?c.startTime:E;for(var u=0;u<=4;u++)null!=k[u]&&(k[u]=D(k[u]),Ar[u]=k[u])}catch(t){x("MI",t)}
W()}(),function(t){try{if("complete"===a.readyState)Se(t);else if("interactive"===a.readyState)Se(t);else{if(j){var r=a.documentElement;r.scroll&&Ce(r,t)}
H(a,"readystatechange",(function(){return"complete"===a.readyState&&Se(t)})),H(a,"load",(function(){return Se(t)}))}}catch(t){x("ODR",t)}}((function(){ge()&&(Xr(),function(){if(zt)
if(Xt&&1===Qt)Yr(it(Ur));else try{r.WebJSBridge={setSRID:function(t){if(cr(t))try{Kt(1,t),Yr(it(Ur))}catch(t){x("NCIDR",t)}else x("NCIDV",E,""+t)}},tn("getSRID"),rn("getSRID",{placeholder:"placeholder"})}catch(t){x("NCIDF",t)}}(),zt&&dr&&(tn("onCookieId",dr),rn("onCookieId",{firstPartyCookie:dr})),ye(),Jr||(Jr=!0,H(a,"visibilitychange",(function(){"hidden"===a.visibilityState&&zr()})),H(r,"beforeunload",zr),H(r,"unload",zr)))})))}();}catch(error){let ds="Snapchat base code";let inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['tealium_event']=='Ticket Purchases'&&/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname']))){let CONST_EXTN_NAME="Snapchat Pixel-Booking Confirmation Page";triggerSnapChatPixel();function triggerSnapChatPixel(){let requirementName="Send snapchat pixel";let methodName="triggerSnapChatPixel";try{(function(e,t,n){if(e.snaptr)return;var a=e.snaptr=function()
{a.handleRequest?a.handleRequest.apply(a,arguments):a.queue.push(arguments)};a.queue=[];if(typeof Bootstrapper.loadSnapchatLib==="function"){Bootstrapper.loadSnapchatLib();}})(window,document);setTimeout(function(){if(window.snaptr&&typeof window.snaptr==="function"){window.snaptr('init','447613d5-211c-4e44-9056-bd12a20ea361');window.snaptr("track","PURCHASE",{"currency":Bootstrapper.getCurrency(),"price":Bootstrapper.getSearchTravelType().toLowerCase()=="revenue"?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes(),"transaction_id":Bootstrapper.getBase64EncodedPNR()});}},2000);}catch(error){let ds="Snapchat";let inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1'&&b['tealium_event']=='Result Load')){let CONST_EXTN_NAME="Snapchat Pixel-FSR Page";triggerSnapChatPixel();function triggerSnapChatPixel(){let requirementName="Send snapchat pixel";let methodName="triggerSnapChatPixel";try{(function(e,t,n){if(e.snaptr)return;var a=e.snaptr=function()
{a.handleRequest?a.handleRequest.apply(a,arguments):a.queue.push(arguments)};a.queue=[];if(typeof Bootstrapper.loadSnapchatLib==="function"){Bootstrapper.loadSnapchatLib();}})(window,document);setTimeout(function(){if(window.snaptr&&typeof window.snaptr==="function"){snaptr('init','447613d5-211c-4e44-9056-bd12a20ea361');window.snaptr("track","SEARCH");}},2000);}catch(error){let ds="Snapchat";let inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="TikTok Pixel - Booking Path";Bootstrapper.sendTiktokPixelOnBookingPath=function(functionType){let methodName="sendTiktokPixelOnBookingPath";let requirementName="Tiktok Pixel on Booking Path";try{if(typeof window.ttq=="object"&&typeof window.ttq.track=="function"){eventParams=getParamsObj(functionType);ttq.track(functionType,eventParams);}}catch(error){let ds="Utag data object";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}};function getParamsObj(functionType){let methodName="getParamsObj";let requirementName="Get params object";let params={};try{params.flight_class=utag_data.selectedCabin||"--";let paxDetails=getPAXDetails();params.num_people=paxDetails.num_people;params.num_children=paxDetails.num_children;params.quantity=Bootstrapper.getPaxCount();params.content_category="Flight";params.content_type="product";params.currency=Bootstrapper.getCurrency();if(functionType==="ViewContent"){params.returning_airport=Bootstrapper.getFlightSearchDestination(1);params.departing_airport=Bootstrapper.getFlightSearchOrigin(1);if(utag_data.selectedTrips&&utag_data.selectedTrips.length>0){if(Bootstrapper.getTripTypeCodes()!="OW"){params.returning_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(utag_data.searchCriteria.flights.length),"yyyy-MM-dd");}
params.departing_date=Bootstrapper._dateFormat(Bootstrapper.getFlightSearchDepartureDate(1),"yyyy-MM-dd");}
params.content_id=[Bootstrapper.getFlightSearchOrigin(1),Bootstrapper.getFlightSearchDestination(1)].join(":");}else{params.returning_airport=Bootstrapper.getSelectedTripDestination(1);params.departing_airport=Bootstrapper.getSelectedTripOrigin(1);if(utag_data.selectedTrips&&utag_data.selectedTrips.length>0){if(Bootstrapper.getTripTypeCodes()!="OW"){params.returning_date=Bootstrapper.getDate(Bootstrapper.getTravelDateFromSelectedTrip(1),"-");}
params.departing_date=Bootstrapper.getDate(Bootstrapper.getTravelDateFromSelectedTrip(0),"-");}
params.content_id=[Bootstrapper.getSelectedTripOrigin(1),Bootstrapper.getSelectedTripDestination(1)].join(":");params.price=Bootstrapper.getSearchTravelType()=='Revenue'?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes();params.value=params.price;}}catch(error){let ds="Bootstrapper.dataObject";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return params;}
function getPAXDetails(){let methodName="getParamsObj";let requirementName="Get params object";let paxDetails={};try{if(utag_data.searchCriteria&&utag_data.searchCriteria.paxTypes){let paxTypes=utag_data.searchCriteria.paxTypes;let numberOfAdults=paxTypes.numberOfAdults?paxTypes.numberOfAdults:0;let numberOfSeniors=paxTypes.numberOfSeniors?paxTypes.numberOfSeniors:0;paxDetails.num_people=numberOfAdults+numberOfSeniors;paxDetails.num_children=paxTypes.numberOfChildren?paxTypes.numberOfChildren:0;}}catch(error){let ds="Bootstrapper.dataObject";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return paxDetails;}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1'&&b['tealium_event']=='Flight Searches')||(b['tealium_event']=='view'&&/^(.*\/.*\/traveler\/choose-travelers\/?)$/ig.test(b['dom.pathname']))||(b['tealium_event']=='view'&&/(^(.*\/.*\/manageres\/tripdetails\/?)$)/ig.test(b['dom.pathname']))){let CONST_EXTN_NAME="MiQ & XANDR - Advanced All Site Pixel";triggertMiq();function triggertMiq(){let requirementName="Trigger MiQand XAndR Pixel";let methodName="triggertMiq";try{let miqPixelURL="https://ad.doubleclick.net/ddm/activity/src=9568928;type=invmedia;cat=unite009;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755}";let url=document.location.href;miqPixelURL+=";u1="+url+";ord=1?";let xAndRPixel="https://secure.adnxs.com/px?id=1653394&seg=32642462&redir=https://pixel.mediaiqdigital.com/pixel?&pixel_id=1653394&t=2";xAndRPixel+="&u1="+url;if(typeof Bootstrapper.imageRequest==="function"){Bootstrapper.imageRequest(miqPixelURL);Bootstrapper.imageRequest(xAndRPixel);}}catch(error){let ds="document.location.pathname";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='Ticket Purchases')){let CONST_EXTN_NAME="MiQ-XandR Pixel";let DOUBLE_DASH="--";triggerPixels();function triggerPixels(){let requirementName="Trigger Miq and XandR";let methodName="triggerPixels";try{let miqPixelURL="https://ad.doubleclick.net/ddm/activity/src=9568928;type=invmedia;cat=unite00-;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};ord=1?";let miqParams=prepareDataForMiq();let xAndRPixelURL="https://secure.adnxs.com/px?id=1653395&seg=32642467&redir=https://pixel.mediaiqdigital.com/pixel?";let xAndRParams=prepareDataForXAndR();if(typeof Bootstrapper.imageRequest==="function"){Bootstrapper.imageRequest(miqPixelURL+miqParams);Bootstrapper.imageRequest(xAndRPixelURL+xAndRParams);}}catch(error){let ds="DL";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function prepareDataForMiq(){let requirementName="Prepare data for MiQ";let methodName="prepareDataForMiq";let url="";try{if(utag_data&&utag_data.selectedTrips){let u2=utag_data.lang_code||DOUBLE_DASH;let u3=utag_data.point_of_sale||DOUBLE_DASH;let u4=utag_data._ccurrency;let u5=DOUBLE_DASH;let u6=Bootstrapper.getSelectedTripOrigin(1);let u7=Bootstrapper.getTripTypeCodes()!="OW"?Bootstrapper.getSelectedTripOrigin(2):"";let u8=Bootstrapper.getSelectedTripDestination(1);let u9=Bootstrapper.getTripTypeCodes()!="OW"?Bootstrapper.getSelectedTripDestination(2):"";let u10=Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(0),"yyyy-MM-dd");let u11=Bootstrapper.getTripTypeCodes()!="OW"?Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(1),"yyyy-MM-dd"):"";let u12=Bootstrapper.getCabinFromSelectedTrips(0);let u13=Bootstrapper.getTripTypeCodes()!="OW"?Bootstrapper.getCabinFromSelectedTrips(1):"";let u14=Bootstrapper.getNumDaysTilTravelFromSelectedTrip(1);let u15=utag_data.selectedTrips.length;let u16=Bootstrapper.getPaxCount();let u17=Bootstrapper.getSearchTravelType()=='Revenue'?Bootstrapper.getShoppingCartTotalAmount().toFixed(2):Bootstrapper.getTaxes().toFixed(2);url=";u2="+u2+";u3="+u3+";u4="+u4+";u5="+u5+";u6="+u6+";u7="+u7+";u8="+u8+";u9="+u9+";u10="+u10+";u11="+u11+";u12="+u12+";u13="+u13+";u14="+u14+";u15="+u15+";u16="+u16+";u17="+u17;}}catch(error){let ds="DL";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return url;}
function prepareDataForXAndR(){let requirementName="prepare data for XAndR";let methodName="prepareDataForXAndR";let url="";try{if(utag_data&&utag_data.selectedTrips){let u1=utag_data.lang_code||DOUBLE_DASH;let u2=utag_data.point_of_sale||DOUBLE_DASH;let u3=utag_data._ccurrency;let u4=DOUBLE_DASH;let u5=Bootstrapper.getSelectedTripOrigin(1);let u6=Bootstrapper.getTripTypeCodes()!="OW"?Bootstrapper.getSelectedTripOrigin(2):"";let u7=Bootstrapper.getSelectedTripDestination(1);let u8=Bootstrapper.getTripTypeCodes()!="OW"?Bootstrapper.getSelectedTripDestination(2):"";let u9=Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(0),"yyyy-MM-dd");let u10=Bootstrapper.getTripTypeCodes()!="OW"?Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(1),"yyyy-MM-dd"):"";let u11=Bootstrapper.getFareClassFromSelectedTrips(0);let u12=Bootstrapper.getTripTypeCodes()!="OW"?Bootstrapper.getFareClassFromSelectedTrips(1):"";let u13=Bootstrapper.getNumDaysTilTravelFromSelectedTrip(1);let u14=utag_data.selectedTrips.length;let u15=Bootstrapper.getPaxCount();let u16=Bootstrapper.getSearchTravelType()=='Revenue'?Bootstrapper.getShoppingCartTotalAmount().toFixed(2):Bootstrapper.getTaxes().toFixed(2);url="&u1="+u1+"&u2="+u2+"&u3="+u3+"&u4="+u4+"&u5="+u5+"&u6="+u6+"&u7="+u7+"&u8="+u8+"&u9="+u9+"&u10="+u10+"&u11="+u11+"&u12="+u12+"&u13="+u13+"&u14="+u14+"&u15="+u15+"&u16="+u16;url+="&pixel_id=1653395";url+="&t=2";}}catch(error){let ds="DL";let inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return url;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="RAS Failure";let DOUBLE_DASH="--";Bootstrapper.prepareDataForRASFailure=function(data,parseData){let methodName="prepareDataForRASFailure";let requirementName="prepare data for RAS Failure";let parseDataObj=parseData;try{let label=getLabelFeature(data);let info=data.params.info;let rasFailure=DOUBLE_DASH;if(info&&info.ras&&info.ras.length>0){let departureAirportName,arrivalAirportName,flightNumber,airlineCode,carrierDescription,cabin,departureDateTime;let ras=info.ras;let infoData=[];for(const element of ras){departureAirportName=element.departureAirportName?fetchAirportDetails(element.departureAirportName):DOUBLE_DASH;arrivalAirportName=element.arrivalAirportName?fetchAirportDetails(element.arrivalAirportName):DOUBLE_DASH;flightNumber=element.flightNumber||DOUBLE_DASH;airlineCode=element.airlineCode||DOUBLE_DASH;carrierDescription=element.carrierDescription||DOUBLE_DASH;cabin=element.cabin||DOUBLE_DASH;departureDateTime=element.departureDateTime?fetchFormattedDate(element.departureDateTime):DOUBLE_DASH;infoData.push([departureAirportName,arrivalAirportName,flightNumber,airlineCode,carrierDescription,cabin,departureDateTime].join('|'));}
rasFailure='['+infoData.join(",")+']';}
label=[label,rasFailure].join("|");parseDataObj.eventLabel=label;}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return parseDataObj;};function fetchFormattedDate(data){let methodName="fetchFormattedDate";let requirementName="Fetch Formatted Date";let formattedDate="--";try{if(data){let date=data;let replaceString=date.replace(/-/g,"");formattedDate=Bootstrapper._dateFormat(replaceString,"yyyy-MM-dd");}}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return formattedDate;}
function fetchAirportDetails(data){let methodName="fetchAirportDetails";let requirementName="Fetch Airport Details";let airportData="--";try{if(data){let airportName=data.split(" ");if(airportName){let name=airportName[airportName.length-1];let regex=/\(|\)/g;airportData=name.replace(regex,"");}}}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return airportData;}
function getLabelFeature(data){let methodName="getLabelFeature";let requirementName="Prepare label for RAS failure";let pageName="--";let label="--";try{if(data&&data.category&&data.category=="Reshop Search"&&data.params&&data.params.feature){pageName="Reshop Search";label=[data.params.feature,pageName].join("|");}else{label=Bootstrapper.fetchFeatureAndPageName(data.params);}}catch(error){let ds="Callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="Reshop Flow Interactions";let DOUBLE_DASH="--";Bootstrapper.processReShopSearchEvents=function(data,parseData){let methodName="processReShopSearchEvents";let requirementName="Process Reshop Search Page Events";let ds="Reshop Search Page Callabck";let analyticsDataObj=[];try{let action=data.action;if(action=="Impression: RAS Failure"||action=="Clicked: Edit Search"||action=="Clicked: Select Flights"||action=="Clicked: Close"){analyticsDataObj.push(Bootstrapper.prepareDataForRASFailure(data,parseData));}}catch(error){let inputValue=error.message;let ds="Callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return analyticsDataObj;};}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/book-flight\/seatmap\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')){let CONST_EXTN_NAME="Snapchat Pixel-Seat Page";setTimeout(function(){triggerSnapChatPixel();},2000);function triggerSnapChatPixel(){let requirementName="Send snapchat pixel";let methodName="triggerSnapChatPixel";try{(function(e,t,n){if(e.snaptr)return;var a=e.snaptr=function()
{a.handleRequest?a.handleRequest.apply(a,arguments):a.queue.push(arguments)};a.queue=[];if(typeof Bootstrapper.loadSnapchatLib==="function"){Bootstrapper.loadSnapchatLib();}})(window,document);setTimeout(function(){if(window.snaptr&&typeof window.snaptr==="function"){snaptr('init','447613d5-211c-4e44-9056-bd12a20ea361');window.snaptr("track","PAGE_VIEW");}},2000);}catch(error){let ds="Snapchat";let inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="Floodlight - Seatmap Page";let DOUBLE_DASH="--";Bootstrapper.triggerFloodlightPixelOnSeatmapPage=function(){let methodName='triggerFloodlightPixelOnSeatmapPage';let requirementName='Floodlight pixel on Seatmap page';try{if(Bootstrapper&&typeof Bootstrapper.imageRequest==='function'){let u1=utag_data.lang_code||DOUBLE_DASH;let u2=utag_data.point_of_sale||DOUBLE_DASH;let u5=Bootstrapper.getSelectedTripOrigin(1);let u6=Bootstrapper.getTripTypeCodes()!="OW"?Bootstrapper.getSelectedTripOrigin(2):"";let u7=Bootstrapper.getSelectedTripDestination(1);let u9=Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(0),"yyyy-MM-dd");let u11=Bootstrapper.getFareClassFromSelectedTrips(0);let pixelURL="https://ad.doubleclick.net/ddm/activity/src=3463749;type=unite280;cat=seatmap;u1="+u1+";u2="+u2+";u5="+u5+";u6="+u6+";u7="+u7+";u9="+u9+";u11="+u11;if(Bootstrapper.getTripTypeCodes()!="OW"){let u8=Bootstrapper.getSelectedTripDestination(2);let u10=Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(1),"yyyy-MM-dd");let u12=Bootstrapper.getFareClassFromSelectedTrips(1);pixelURL+=";u8="+u8+";u10="+u10+";u12="+u12;}
pixelURL+=";dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};ord=1?";Bootstrapper.imageRequest(pixelURL);}}catch(error){let ds='utag_data.payment_info';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}};}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='Ticket Purchases')){let CONST_EXTN_NAME="LinkedIn Pixel - Booking Confirmation Page";sendLinkedInPixel();function sendLinkedInPixel(){let methodName="sendLinkedInPixel";let requirementName="Send linkined pixel";try{let pixelURL="https://px.ads.linkedin.com/collect/?pid=5171290&fmt=gif";let value=Bootstrapper.getSearchTravelType()=='Revenue'?Bootstrapper.getShoppingCartTotalAmount().toFixed(2):Bootstrapper.getTaxes().toFixed(2);let currency=Bootstrapper.getCurrency();let travel_class=Bootstrapper.getCabinFromSelectedTrips(0);let pos=utag_data.point_of_sale;pixelURL+="&currency="+currency+"&value="+value+"&travel_class="+travel_class+"&pos="+pos;Bootstrapper.imageRequest(pixelURL);}catch(error){let ds='DL';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="Baggage Resolution Tracking";let DOUBLE_DASH="--";Bootstrapper.prepareLabelForBaggageResolution=function(data,parseData){let methodName="prepareLabelForBaggageResolution";let requirementName="Process Baggage Resolution Page Events";let ds="Baggage Resolution Page Callabck";let dataObjects=[];try{let baggageData=parseData;let action=data.action;let params=data.params;let label=Bootstrapper.fetchFeatureAndPageName(params);if(action=="Clicked: Request reimbursement"||action=="Clicked: Check claim status"||action=="Clicked: Report issue"){label=prepareLabelForReimburesement(data,label);}else if(action=="Tile selected"||action=="Clicked: Continue"||action=="Clicked Link: Forgot file reference number"||action=="Clicked: Upload Photo"||action=="Clicked: Upload Receipt"||action=="Information Shown"||action=="Clicked: Check claim status"||action=="Clicked: Submit"){label=[label,prepareLabelForTileSelected(data)].join("|");}
if(label){baggageData.eventLabel=label;}
dataObjects.push(baggageData);}catch(error){let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataObjects;};function prepareLabelForReimburesement(data,label){let requirementName="Prepare Label for Tile Selected";let methodName="prepareLabelForTileSelected";try{let params=data.params;if(params&&params.info){let info=params.info;let stepName=info.stepName?info.stepName:DOUBLE_DASH;let stepNumber=info.stepNumber;let selectedOption=info.selectedOption?info.selectedOption:DOUBLE_DASH;if(data.action=="Clicked: Request reimbursement"){if(info.selectedOption){label=[label,stepName,stepNumber,selectedOption].join("|");}}}}catch(error){let ds="params object from callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function prepareLabelForTileSelected(data){let requirementName="Prepare Label for Tile Selected";let methodName="prepareLabelForTileSelected";let label;try{let params=data.params;if(params&&params.info){let info=params.info;let stepName=info.stepName?info.stepName:DOUBLE_DASH;let stepNumber=info.stepNumber;let origin=info.origin?info.origin:DOUBLE_DASH;let destination=info.destination?info.destination:DOUBLE_DASH;let submissionDate=info.submissionDate?Bootstrapper._dateFormat(info.submissionDate,"yyyy-MM-d"):DOUBLE_DASH;let status=info.status?info.status:DOUBLE_DASH;let claimOption=info.claimOption?info.claimOption:DOUBLE_DASH;if(datc.action=="Clicked: Submit"&&data.info.baggages&&data.info.baggages.length>0){label=processBaggageDetails(info.baggages);}else if(data.action=="Clicked: Continue"||data.action=="Clicked Link: Forgot file reference number"||data.action=="Clicked: Upload Photo"||data.action=="Clicked: Upload Receipt"||data.action=="Clicked: Check claim status"||data.action=="Clicked: Submit"){label=[stepName,stepNumber,claimOption].join("|");}else if(data.action=="Information Shown"){label=[claimOption,status].join("|");}else{label=[stepName,stepNumber,origin,destination,submissionDate,status].join("|");}}}catch(error){let ds="params object from callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function processBaggageDetails(baggages){let requirementName="Process baggages detail";let methodName="processBaggageDetails";let label;try{let baggageDetails=[];let bagDetails;for(let i=0;i<info.baggages.length;i++){let damageType=info.baggages[i].damageType;let currency=info.baggages[i].currency;let cost=info.baggages[i].cost;let bagType=info.baggages[i].bagType;bagDetails=[damageType,currency,cost,bagType].join("|");baggageDetails.push(bagDetails);}
label="["+baggageDetails.join(",")+"]";}catch(error){let ds="params object from callback";let inputValue=JSON.stringify(baggages);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1'&&b['tealium_event']=='Result Load')||(/^(\/.*\/.*\/traveler\/choose-travelers\/?)/ig.test(b['dom.pathname'])&&b['tealium_event'].toString().toLowerCase().indexOf('sign-in success'.toLowerCase())>-1)||(/^(\/.*\/.*\/traveler\/choose-travelers\/?)/ig.test(b['dom.pathname'])&&b['tealium_event'].toString().toLowerCase().indexOf('not sign-in'.toLowerCase())>-1)||(/^(\/.*\/.*\/book-flight\/customizetravel\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')||(/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='purchase')){let CONST_EXTN_NAME="LS Direct Tagging - Booking Path";setTimeout(function(){loadLSDirectTaggingScript();},1500);function loadLSDirectTaggingScript(){let requirementName="Load LS Direct tagging base script";let methodName="loadLSDirectTaggingScript";try{let SCRIPT_URL="https://safevisit.online/?lcid=10002";let customerId=Bootstrapper.getCurrentCustomerId();if(customerId&&customerId!="--"){SCRIPT_URL+="&ucid="+customerId;}else{SCRIPT_URL+="&ucid=";}
let lsScript=document.createElement("script");lsScript.setAttribute("src",SCRIPT_URL);lsScript.setAttribute("type","text/javascript");lsScript.setAttribute("async","defer");document.body.appendChild(lsScript);}catch(error){let ds="Booking confirmation page callabck";let inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='Ticket Purchases')){let CONST_EXTN_NAME="Flashtalking pixel- Booking Confirmation Page";triggerFlashTalking();function triggerFlashTalking(){let requirementName="Trigger flashtalking pixel on confirmation page";let methodName="triggerFlashTalking";try{let src="https://servedby.flashtalking.com/spot/1/8177;60494;6323/?spotName=United_Airlines_Thank_You";let currency=Bootstrapper.getCurrency();let paxCount=Bootstrapper.getPaxCount();let pnr=Bootstrapper.getBase64EncodedPNR()||"--";let cost=Bootstrapper.getSearchTravelType()=='Revenue'?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes();let u1=Bootstrapper.getSelectedTripOrigin(1);let u2=Bootstrapper.getSelectedTripDestination(1);let u3=Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(0),'yyyy-MM-dd');let u4=Bootstrapper._dateFormat(Bootstrapper.getTravelDateFromSelectedTrip(1),'yyyy-MM-dd');let u5=Bootstrapper.getCabinFromSelectedTrips(0);let u6=utag.data.point_of_sale||"--";src+="&ftXCurrency="+currency+"&ftXNumItems="+paxCount+"&ftXRef="+pnr+"&ftXValue="+cost+"&U1="+u1+"&U2="+u2+"&U3="+u3+"&U4="+u4+"&U5="+u5+"&U6="+u6+"&U7="+paxCount+"&cachebuster="+Bootstrapper.cacheBuster;if(Bootstrapper.imageRequest&&typeof Bootstrapper.imageRequest==="function"){Bootstrapper.imageRequest(src);}}catch(error){let ds='callback';Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){let CONST_EXTN_NAME="Chase SSO tracking";Bootstrapper.parseChaseSSOEvents=function(data,parseData){let methodName="parseChaseSSOEvents";let requirementName="Process Chase SSO events";let dataObjects=[];try{let chaseSSOParseData=parseData;let label;let action=data.action;let params=data.params;if(action=="Error Shown"||action=="Session Timeout"||action=="Account created successfully"||action=="Chase card added successfully"||action=="Clicked: Back to united.com"||action=="Clicked: Return to united.com"){label=[Bootstrapper.fetchFeatureAndPageName(params),prepareLabelForChaseSSOLabel(data)].join("|");}
if(label){chaseSSOParseData.eventLabel=label;}
chaseSSOParseData.eventName=parseData.eventCategory;dataObjects.push(chaseSSOParseData);}catch(error){let ds="Data object from callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return dataObjects;}
function prepareLabelForChaseSSOLabel(data){let methodName="prepareLabelForChaseSSOLabel";let requirementName="Prepare Label For Chase SSO";let label=DOUBLE_DASH;try{if(data.params&&data.params.info){let info=data.params.info;let promoPosition=info.promoPosition?info.promoPosition:DOUBLE_DASH;let message=info.message?info.message:DOUBLE_DASH;let failureType=info.failureType?info.failureType:DOUBLE_DASH;if(data.action=="Session Timeout"){label=[message,promoPosition].join("|");}else if(data.action=="Error Shown"){label=[message,failureType,promoPosition].join("|");}else{label=promoPosition;}}}catch(error){let ds="Data object from callback";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return label;}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[274]=='undefined'){utag.runonce.ext[274]=1;if(1){let CONST_EXT_NAME="Status Lift Tracking";let DOUBLE_DASH="--";Bootstrapper.processStatusLiftEvents=function(data,parseData){let requirementName="processStatusLiftEvents";let methodName="processStatusLiftEvents";try{let featureName=(data&&data.params&&data.params.featureName)?data.params.featureName:"--";if(data.action=='Impression: Premier level tag'){let mpStatus=getData(data,"mpStatus");parseData.eventLabel=[featureName,mpStatus].join("|");}else if(data.action=="Purchase Successful"||data.action=="Purchase Failed"){parseData.eventLabel=[featureName,prepareLabelForPurchaseSuccessOrFailure(data)].join("|");parseData.eventValue=getData(data,"totalCost");}else if(data.action=="Error Shown"){parseData.eventLabel=[getData(data,"errorMessage"),getData(data,"paymentType")].join("|");}else if(data.action=="SignIn Page CTA"||data.action=="Offer Page CTA"){parseData.eventLabel=handleCTAs(data);parseData.eventValue=getData(data,"totalCost");}else if(data.action=="Impression: SignIn Page"){parseData.eventLabel=featureName;}}catch(error){let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return parseData;};function getOfferName(data){let methodName="getOfferName";let requirementName="Fetch offerName";let offerName=DOUBLE_DASH;try{if(data&&data.params&&data.params.info){let info=data.params.info;if(info.offerName){offerName=info.offerName;}else if(info.name){offerName=info.name;}else{offerName=DOUBLE_DASH;}}}catch(error){let ds="Callabck";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return offerName;}
function getData(data,key){let requirementName="getData";let methodName="getData";let value;try{if(data&&data.params&&data.params.info){let info=data.params.info;if(info&&key){value=info[key]||DOUBLE_DASH;}
if(value==DOUBLE_DASH&&key=="totalCost"){value=0;}}}catch(error){let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return value;}
function prepareLabelForPurchaseSuccessOrFailure(data){let methodName="prepareLabelForPurchaseSuccessOrFailure";let requirementName="Prepare Label for purchase successful or purchase fail event";let label;try{if(data.params&&data.params.info){let purchaseOption=data.params.info.purchaseOption?data.params.info.purchaseOption:DOUBLE_DASH;label=purchaseOption;}}catch(error){let ds="Callabck";let inputValue=JSON.stringify(data);Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return label;}
function handleCTAs(data){let requirementName="Get CTAs details";let methodName="handleCTAs";let ctaDetails;try{if(data.params&&data.params.info){let info=data.params.info;let ctaType=info.ctaType||DOUBLE_DASH;let ctaName=info.ctaName||DOUBLE_DASH;ctaDetails=[ctaType,ctaName].join("|");}}catch(error){let ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXT_NAME,error.message,error,ds,inputValue,methodName);}
return ctaDetails;}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[264]=='undefined'){utag.runonce.ext[264]=1;if(1){let CONST_EXTN_NAME="Kayak Pixel-Booking Confirmation Page";Bootstrapper.sendKayakPixel=function(){let requirementName="Send kayak pixel";let methodName="sendKayakPixel";try{let referrer=document.referrer;let cartId=getCartId();let currency=Bootstrapper.getCurrency()||utag_data._ccurrency;let tripType=Bootstrapper.getTripTypeCodes();let travelDetails=getTravelDetails();let price=Bootstrapper.getSearchTravelType()=='Revenue'?Bootstrapper.getShoppingCartTotalAmount():Bootstrapper.getTaxes();let pnr=Bootstrapper.getBase64EncodedPNR();let imageURL="https://www.kayak.com/s/kayakpixel/confirm/UA?"+"kayakclickid="+cartId+"&price="+price+"&currency="+currency+"&confirmation="+pnr+travelDetails;Bootstrapper.imageRequest(imageURL);}catch(error){let ds="DL";let inputValue="Bootstrapper.fetchSelectedTripsFromDL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}};function getTravelDetails(){let requirementName="Get travel details like OD pair and travel date";let methodName="getTravelDetails";let travelDetails;try{let trips=Bootstrapper.fetchSelectedTripsFromDL();if(trips&&trips.length>0){for(let i=0;i<trips.length;i++){let origin=trips[i].origin;let destination=trips[i].destination;let departDate=Bootstrapper.getDate(trips[i].departureDateTime,"-");let info="&origin"+(i+1)+"="+origin+"&destination"+(i+1)+"="+destination+"&departing_date"+(i+1)+"="+departDate;travelDetails=travelDetails?travelDetails+info:info;}}}catch(error){let ds="DL";let inputValue="Bootstrapper.fetchSelectedTripsFromDL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return travelDetails;}
function getCartId(){let requirementName="Get Cart ID from URL";let methodName="getCartId";let cartId;try{let pathName=document.location.pathname;if(pathName){let pathNameAry=pathName.split("/");if(pathNameAry&&pathNameAry.length>=5){cartId=pathNameAry[5];}}}catch(error){let ds="URL";let inputValue="document.pathname";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return cartId;}}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['tealium_event']=='view'){var CONST_EXTN_NAME="Digital 3.0 - Cookie Data - UA";collectCookies();function collectCookies(){var requirementName="Collect Cookie data on GA";var methodName="collectCookies";try{var cookieString=document.cookie;var cookieStringLen=cookieString.length;var nCookies=cookieString.split(';').length;var cd20=nCookies+'|'+cookieStringLen;var analyticsData={};analyticsData.eventCategory="Cookie";analyticsData.eventAction="Cookie Data";analyticsData.eventLabel=cookieString;analyticsData.tealiumEvent=analyticsData.eventAction;analyticsData.noninteraction=true;analyticsData.customDimensions={};analyticsData.customDimensions[Bootstrapper.UTAG_CONST.cookiedata]=cd20;Bootstrapper.setUtagLinkForDOMEvent(analyticsData);}catch(error){var ds='document.cookie';var inputValue="";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[204]=='undefined'){utag.runonce.ext[204]=1;if(b['dom.pathname'].toString().toLowerCase().indexOf('/fly/travel/credit.html'.toLowerCase())>-1){var CONST_TAG_NAME="Digital 3.0 - API Error Tracking";var CONST_EC_AJAX_ERROR="AJAX Error";function trackAPIFailure(){var methodName="trackAPIFailure";var requirementName="Track API failures";try{if(window.QuantumMetricAPI){window.QuantumMetricAPI.addEventListener("api",(function(e){if(e.xhr.status!=200){var eventLabel={};eventLabel.requestUrl=e.url;eventLabel.errorID='--';eventLabel.errorDetail="--";utag.data.tealium_event=CONST_EC_AJAX_ERROR;utag.data.ga_event_category=CONST_EC_AJAX_ERROR;utag.data.ga_event_action=e.xhr.status;utag.data.ga_event_label=JSON.stringify(eventLabel);utag.link(utag.data);}}))}}catch(error){Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,"API Error","",methodName);}}
setTimeout(function(){trackAPIFailure();},1500);}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[203]=='undefined'){utag.runonce.ext[203]=1;if(/^(\/en-[a-z]{2}\/flights-to-tenerife)$/ig.test(b['dom.pathname'])){var CONST_EXTN_NAME="Digital 3.0-Pixels - Tenerife";var pixelURLs=["https://pixel.sojern.com/pixel/img/76585?p_v=3&f_v=v3_image&vid=air","https://adserver.cluep.com/conv?c=con_qB6gKsw4WU"];sendPixelsOnTenerife();function sendPixelsOnTenerife(){var requirementName="Send pixels on Tenerife page";var methodName="sendPixelsOnTenerife";try{for(var i=0;i<pixelURLs.length;i++){Bootstrapper.imageRequest(pixelURLs[i]);}
sendDotdashMeredithPixel();if(typeof Bootstrapper.sendFBPageView==="function"){Bootstrapper.sendFBPageView("1245757155444013");}}catch(error){var ds="Pixel base url";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function sendDotdashMeredithPixel(){var requirementName="Send Dotdash Meredith pixel";var methodName="sendDotdashMeredithPixel";try{var a=String(Math.floor(Math.random()*10000000000000000));var baseURL="https://pubads.g.doubleclick.net/activity;xsp=4900662;ord="+a+"?";Bootstrapper.imageRequest(baseURL);}catch(error){var ds="Pixel base url";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[199]=='undefined'){utag.runonce.ext[199]=1;if(/(^(.*\/.*\/book-flight\/united-award-travel)$)/ig.test(b['dom.pathname'])){var CONST_EXTN_NAME="Digital 3-0- FB Pixel-Award Search Page";sendFBPixel();function sendFBPixel(){var requirementName="Send FB Pageview call";var methodName="sendFBPixel";try{Bootstrapper.sendFBPageView("364607711785168");}catch(error){var ds="FB Base method";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['flight_segment_index']=='1'&&b['tealium_event']=='Recent Searches')||/^(\/en-[a-z]{2}\/flights-to-tenerife)$/ig.test(b['dom.pathname'])){var CONST_EXTN_NAME="Digital 3.0 - Insider Pixel";sendInsiderPixel();function sendInsiderPixel(){var requirementName="Send Insider pixel on FSR page";var methodName="sendInsiderPixel";var BASE_URL="https://pubads.g.doubleclick.net/activity;xsp=4876384;";try{if(utag_data.searchCriteria){var qunatity=utag_data.searchCriteria.paxCount;BASE_URL+="qty="+qunatity+"?";}
Bootstrapper.imageRequest(BASE_URL);}catch(error){var ds="Date object";var inputValue="Undefined";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[189]=='undefined'){utag.runonce.ext[189]=1;if(b['dom.pathname'].toString().indexOf('/fly/company/career.html')>-1){var baseScript;sendSnapPixel();function sendSnapPixel(){try{(function(e,t,n){if(e.snaptr)return;var a=e.snaptr=function()
{a.handleRequest?a.handleRequest.apply(a,arguments):a.queue.push(arguments)};a.queue=[];var s='script';r=t.createElement(s);r.async=!0;r.src=n;var u=t.getElementsByTagName(s)[0];baseScript=loadSnapScript();u.parentNode.insertBefore(r,u);})(window,document,baseScript);snaptr('init','0a0a6b26-c150-46b1-a612-e2ec731e6636',{});snaptr('track','PAGE_VIEW');}catch(error){}}
function loadSnapScript(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}
function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var i,r,o=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);a=!0);}catch(e){u=!0,r=e}finally{try{a||null==t.return||t.return()}finally{if(u)throw r}}
return o}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}
function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}
try{!function(t,i,r){var o=function(){function e(e){return e&&e.performance?e.performance:null}
var n=!1,i=null;try{(i=e(t.top))||(i=e(t),n=!0)}catch(r){i=e(t),n=!0}
return[i,n]}(),a=o[0],u=o[1],s=!!(a&&a.mark&&a.getEntriesByName&&a.timing&&a.now);var c,d="snaptr";c=d,s&&a.mark(c);var l=t.snaptr;l.pixelIdList=[],window.triedToSendCookieToNative=!1,function(){var e=window.sessionStorage&&window.sessionStorage.getItem("srid");if(e)l.s_r_id=e;else{window.WebJSBridge={},window.WebJSBridge.setSRID=function(e){l.s_r_id=e,window.sessionStorage&&window.sessionStorage.setItem("srid",e),G()};try{if(J()){if(!window.JSBridge||!window.JSBridge.getSRID)throw"Snap android bridge missing. JSBridge defined: "+(void 0!==window.JSBridge);window.JSBridge.getSRID()}else if(H()){if(!window.webkit||!window.webkit.messageHandlers.getSRID)throw"Snap ios bridge missing. window.webkit defined: "+(void 0!==window.webkit);window.webkit.messageHandlers.getSRID.postMessage({placeholder:"placeholder"})}}catch(e){}}}();var f="https://tr.snapchat.com",p=f+"/p",m=["u_hem","u_hed","u_hpn","u_hmai","u_scut","u_pnid","u_puid","u_c1"],h=!("addEventListener"in i),_=0,g=1,v="FFF",w="__LIVE__",y="__scpt__",b=f+"/cm/i",S=f+"/cm/s",I="_sctr",O="cmdone",k=34186698e3,x=!1,C=!0,E=6048e5,L="_scid",T={age:"u_age",gender:"u_gd",firstname:"u_fn",lastname:"u_ln",device_brand:"d_br",device_model:"d_md",device_type:"d_type",os_type:"d_ot",os_version:"d_os",locale_country:"d_lc",locale_language:"d_ll",user_agent:"d_ua",limited_ad_tracking:"d_lat",connection_type:"c_type",isp:"c_isp",integration:"intg",mobile_carrier:"c_mc",ip_address:"c_ip",lat:"l_lat",long:"l_lng",geo_country:"l_gc",geo_region:"l_gr",geo_metro:"l_gm",geo_city:"l_city",geo_postal_code:"l_gpc",geo_location_source:"l_ls",geo_address:"l_addr",price:"e_pr",item_category:"e_ic",item_ids:"e_iids",currency:"e_cur",number_items:"e_ni",transaction_id:"e_tid",description:"e_desc",level:"e_lv",search_string:"e_ss",payment_info_available:"e_pia",sign_up_method:"e_sm",success:"e_su",event_tag:"et",brand_id:"br_id",data_use:"du",client_dedup_id:"cdid"},P=function(){for(var e="_schn=_"+(Math.random()+1).toString(36).substring(6),n=(document.domain||document.location.hostname).split("."),t="",i=n.length-1;i>=0;i--)
if(t="."+n[i]+t,document.cookie=e+";domain="+t+";SameSite=Lax",document.cookie.indexOf(e)>-1)return document.cookie=e.split("=")[0]+"=;domain="+t+";expires=Thu, 01 Jan 1970 00:00:01 GMT;SameSite=Lax",t;return null}(),A=function(){var e=4022871197,n=function(n){n=n.toString();for(var t=0;t<n.length;t++){var i=.02519603282416938*(e+=n.charCodeAt(t));i-=e=i>>>0,e=(i*=e)>>>0,e+=4294967296*(i-=e)}
return 2.3283064365386963e-10*(e>>>0)};return n.version="Mash 0.9",n},j=function(){return function(e){var n=0,t=0,i=0,r=1;0===e.length&&(e=[+new Date]);var o=A();n=o(" "),t=o(" "),i=o(" ");for(var a=0;a<e.length;a++)(n-=o(e[a]))<0&&(n+=1),(t-=o(e[a]))<0&&(t+=1),(i-=o(e[a]))<0&&(i+=1);o=null;var u=function(){var e=2091639*n+2.3283064365386963e-10*r;return n=t,t=i,i=e-(r=0|e)};return u.uint32=function(){return 4294967296*u()},u.fract53=function(){return u()+11102230246251565e-32*(2097152*u()|0)},u.version="Alea 0.9",u.args=e,u}(Array.prototype.slice.call(arguments))}(""+function n(t,i){var r=[];if(i&&"object"===e(t)&&(3===i||!t.location))
for(var o in t)try{r.push(o,n(t[o],i-1))}catch(e){}
return r.length?r:""+t}([(new Date).getTime(),navigator.userAgent,navigator.plugins,navigator.language,Math.random()],3));function R(e){var n,t=e?36:32,i="0123456789abcdef".split(""),r=[];e&&(r[8]=r[13]=r[18]=r[23]="-",r[14]="4");for(var o=0;o<t;o++)r[o]||(n=0|16*j.fract53(),r[o]=i[19===o?3&n|8:n]);return r.join("")}
function B(e){return!!e&&"string"==typeof e&&/^[A-Fa-f0-9]{64}$/.test(e)}
function D(e){return e&&e.constructor==String&&36==e.length&&/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}
function U(){l.hasOwnProperty("u_em")&&B(l.u_em)&&(l.u_hem=l.u_em),function(){!l.hasOwnProperty("u_em")||B(l.u_em)||(e=l.u_em,/^[^@]+@[^@]+$/.test(e))||(l.u_hem=v+l.u_hem);var e;l.hasOwnProperty("u_mai")&&!D(l.u_mai)&&(l.u_hmai=v+l.u_hmai)}(),g=2,ae()}
function q(){var e=i.createElement("script");e.async=!0,e.src="https://sc-static.net/js-sha256-v1.min.js","integrity"in e&&"crossOrigin"in e&&(e.integrity="sha384-W4RqaNUbvBdTRc41QQAWDcd2aX9wGruak2WnlXwyjVAlhi56zatCk4e/RSqwrAg6",e.crossOrigin="anonymous");var n=i.getElementsByTagName("script")[0];n&&n.parentNode.insertBefore(e,n),h?e.attachEvent("load",N):e.addEventListener("load",N,!1)}
function N(e){!function(e){if(l.hasOwnProperty("u_em")){l.u_hem=e(l.u_em);var n="string"==typeof l.u_em&&l.u_em.split("@")[1];n&&(l.u_hed=e(n))}
l.hasOwnProperty("u_pn")&&(l.u_hpn=e(l.u_pn));l.hasOwnProperty("u_mai")&&(l.u_hmai=e(l.u_mai))}((new scpixel.Hashes.SHA256).hex),U()}
function M(e){var n=new TextEncoder("utf-8").encode(e);return crypto.subtle.digest("SHA-256",n).then((function(e){return function(e){for(var n=[],t=new DataView(e),i=0;i<t.byteLength;i+=4){var r="00000000",o=(r+t.getUint32(i).toString(16)).slice(-r.length);n.push(o)}
return n.join("")}(e)}))}
function H(){var e=navigator.userAgent.toLowerCase(),n=-1!==e.indexOf("iphone"),t=-1!==e.indexOf("ipad"),i=-1!==e.indexOf("ipod"),r=n||t||i;return-1!==e.indexOf("snapchat")&&r}
function J(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("snapchat")&&-1!==e.indexOf("android")}
function G(){try{$();var e={};e.c1=l.u_c1,e.jsrid=R(1),e.siid=l.s_r_id?l.s_r_id:"",e.pids=l.pixelIdList?l.pixelIdList.join(","):"",ie("GET",f+"/cm/si",e)}catch(e){}}
function z(){if(l.rf=document.referrer,l.v="1.5",l.if=function(){try{return t.self!==t.top}catch(e){return!0}}(),8===w.length&&(l.bt=w),$(),"u_scut"in l&&delete l.u_scut,null!=(e=Z(y,location.search.substring(1)))&&(l.u_scut=e),"u_scut"in l&&W("snaptr-scut",l.u_scut),!("u_scut"in l)){var e,n=i.referrer,r=n.indexOf("?");if(r>=0)null!=(e=Z(y,n.substring(r+1)))&&""!==e&&(l.u_scut=e),"u_scut"in l&&W("snaptr-scut",l.u_scut)}
if(!("u_scut"in l)){var o=F("snaptr-scut");null!=o&&(l.u_scut=o)}}
function Z(e,n){var t=n.split("&");for(_=0;_<t.length;_++){var i=t[_].split("=");if(i[0]===e)return i[1]}
return null}
function $(){var e=F(L);if(null==e||!D(e)){e=R(1);var n=new Date;n.setTime(n.getTime()+34186698e3),W(L,e,n.toUTCString())}
l.u_c1=e}
function F(e){for(var n=e+"=",t=document.cookie.split(";"),i=t.length-1;i>=0;--i){for(var r=t[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(n))return r.substring(n.length,r.length)}
return null}
function W(e,n,t,i,r){document.cookie=e+"="+n+";"+(null==P?"":"domain="+P+";")+(null==t?"":"expires="+t+";")+(null==i?"path=/;":"path="+i+";")+"SameSite=Lax"+(!1===r?"":"; Secure")}
function X(e){var r=Array.prototype.slice.call(e),o=r.shift();switch(o&&o.toLowerCase&&o.toLowerCase(),r.length<2&&r.push({}),o){case"init":return function(e){var t=e.shift();if(!D(t))return;-1===l.pixelIdList.indexOf(t)&&l.pixelIdList.push(t);if(l.pixelIdList&&l.pixelIdList.length&&window.fetch&&fetch("".concat(f,"/collector/is_enabled?pids=").concat(l.pixelIdList.join())).then((function(e){return e.json()})).then((function(e){e&&Object.keys(e).some((function(n){return!0===e[n]}))&&function(){function e(e){return"password"===e.type||"hidden"===e.type}
document.addEventListener("submit",(function(t){var i=t.target.querySelectorAll("input"),r=[],o=[],a=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,u=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;if(i.forEach((function(n){var t=n.value&&n.value.trim();!e(n)&&t.match(a)&&r.push(t.toLowerCase()),!e(n)&&t.match(u)&&("+"!=t.trim()[0]&&(t="+1"+t),o.push(t.replace(/^0+|\D/g,"")))})),(r.length||o.length)&&window.crypto&&crypto.subtle&&window.TextEncoder){var s=r.map((function(e){return M(e)})),c=Promise.all(s),d=o.map((function(e){return M(e)})),p=Promise.all(d);Promise.all([c,p]).then((function(e){var t=n(e,2),i=t[0],r=t[1],o=new FormData;o.append("pids",l.pixelIdList.join()),i.length&&o.append("u_hems",i.join()),r.length&&o.append("u_hpns",r.join()),l.u_c1&&o.append("u_c1",l.u_c1),navigator.sendBeacon&&navigator.sendBeacon("".concat(f,"/collector/prep_mapping"),o)})).catch((function(e){}))}}))}()})).catch((function(e){})),!function(){var e=function(e){if(null===e||e.length<1)return null;return e[0]}(function(e){if(null===e)return null;var n=e.split("|");if(n.length<2)return null;return n[1].split(",")}(F(I)));return null===e||(new Date).valueOf()-e>E}())return K(e);if(x)return void u(0);C=!1,x=!0;var i={};i.pid=t;var r=V(e,0);r&&(i.sync_modes=r.join(","));var o=ie("GET",b,i,null,!0);function a(e){var n,t,i;if((n=f+"/",t=e.origin+"/",null!=n&&null!=t&&n.substr(!i||i<0?0:+i,t.length)===t)&&e.data===O){try{var r=new Date;r.setTime(r.getTime()+k),W(I,"1|"+((a=new Date).setHours(0,0,0,0),a.valueOf()),r.toUTCString(),null,!1)}catch(e){}
var a;C=!0,x=!1;var u=o.parentNode;u&&u.parentNode&&u.parentNode.removeChild(u)}}
function u(n){if(C||n<0)return C=!0,K(e);setTimeout((function(){u(n-10)}),10)}
oe(window,"message",a),u(0)}(r);case"track":return function(e){if(!("pixelIdList"in l&&l.pixelIdList.length>0))return;if(e[0].constructor!=String)return;switch(function(){if(l.if)try{l.pl=t.top.location.href}catch(e){try{l.pl=i.referrer}catch(e){l.pl=location.href}}else l.pl=location.href}(),e.length){case 2:if(e[1].constructor==String){if(!D(a=e[0]))return;var n=e[1];if(-1==l.pixelIdList.indexOf(a))return;ee(a,n,null)}else{n=e[0];for(var r=e[1],o=0;o<l.pixelIdList.length;o++)ee(l.pixelIdList[o],n,r)}
break;case 3:var a;if(!D(a=e[0]))return;n=e[1],r=e[2];if(-1==l.pixelIdList.indexOf(a))return;ee(a,n,r);break;default:return}}(r);case"autofill":return function(e){!function(e){if(l.onCompleteRequestUserInfo=e.onComplete,"undefined"!=typeof webkit&&void 0!==webkit.messageHandlers&&void 0!==webkit.messageHandlers.SnapchatUserInfoProvider){var n={};n.request_fields=e.fields,n.js_callback="snaptr.responseUserInfo",window.webkit.messageHandlers.SnapchatUserInfoProvider.postMessage(JSON.stringify(n))}else{for(var t=0;t<e.fields.length;t++)e.fields[t]=e.fields[t].concat("=");e.fields.push("js_callback=snaptr.responseUserInfo");var i=e.fields.join("&"),r=location.protocol+"//"+location.host+"/snapchat/userInfoRequest?"+i,o=new XMLHttpRequest;o.open("GET",r,!1),o.send(null)}}(e.shift())}(r);case"immersive_mode":return function(e){!function(e){if(l.onCompleteRequestNativeSharing=e.onComplete,"undefined"!=typeof webkit&&void 0!==webkit.messageHandlers&&void 0!==webkit.messageHandlers.SnapchatUserInfoProvider){var n={action:"request_native_sharing",js_callback:"snaptr.responseDidLaunchNativeSharing"};window.webkit.messageHandlers.SnapchatUserInfoProvider.postMessage(JSON.stringify(n))}else{var t="action=request_native_sharing&js_callback=snaptr.responseDidLaunchNativeSharing",i=location.protocol+"//"+location.host+"/snapchat/nativeSharingRequest?"+t,r=new XMLHttpRequest;r.open("GET",i,!1),r.send(null)}}(e.shift())}(r);case"cm":return function(e){function n(e){var n=[],t=V(e,0);if(!t)return n;for(var i=0;i<t.length;i++){var r={pnid:t[i],cb:(new Date).valueOf()};n.push(ie("GET",S,r))}
return n}
function t(e){for(var n=0;n<e.length;n++){var i=document.getElementById(e[n].id);if(null!=i&&"complete"!==i.readyState)return void setTimeout((function(){t(e)}),10)}
try{window.parent.postMessage(O,document.referrer)}catch(e){}}
t(n(e))}(r);default:return}}
function Q(e){if(z(),0!==e.length){if(e[0].constructor!==Object)return;l.initData=e[0],function(){var e=l.initData;for(var n in e)e.hasOwnProperty(n)&&e[n]&&("u_em"===n||"user_email"===n?l.u_em=e[n].trim().toLowerCase():"u_hem"===n||"user_hashed_email"===n?l.u_hem=e[n].trim():"u_pn"===n||"user_phone_number"===n?l.u_pn=e[n].trim().replace(/[^\w]/gi,""):"u_hpn"===n||"user_hashed_phone_number"===n?l.u_hpn=e[n].trim():"u_mai"===n||"user_mobile_ad_id"===n?l.u_mai=e[n].trim().toLowerCase():"u_hmai"===n||"user_hashed_mobile_ad_id"===n?l.u_hmai=e[n].trim():"u_pnid"===n||"partner_id"===n?l.u_pnid=e[n].trim():"u_puid"===n||"user_partner_uid"===n?l.u_puid=e[n].trim():(l.additional_info||(l.additional_info={}),n in T&&(l.additional_info[T[n]]=e[n])))}(),g=0;var n=window.crypto||window.msCrypto;n&&n.subtle&&t.TextEncoder?function(){var e=[];if(l.hasOwnProperty("u_em")){e.push(M(l.u_em).then((function(e){l.u_hem=e})));var n="string"==typeof l.u_em&&l.u_em.split("@")[1];n&&e.push(M(n).then((function(e){l.u_hed=e})))}
l.hasOwnProperty("u_pn")&&e.push(M(l.u_pn).then((function(e){l.u_hpn=e}))),l.hasOwnProperty("u_mai")&&e.push(M(l.u_mai).then((function(e){l.u_hmai=e}))),Promise.all(e).then((function(e){U()})).catch((function(e){q()}))}():q()}}
function V(e,n){if(e.length>n){var t=e[n];for(var i in t)
if(t.hasOwnProperty(i)&&"sync_modes"===i){if(t[i].constructor!==Array)break;return t[i]}}}
function K(e){Q(e),(J()||H())&&G(),ae()}
function Y(e,n){this.event=e,this.getParamObj=function(){var e={};return e.pid=n,e.ev=this.event,e.pl=l.pl,e.ts=(new Date).valueOf(),e.rf=l.rf,e.v=l.v,e.if=l.if,l.bt&&(e.bt=l.bt),e},this.getParamStr=function(){var e=[];return e.push("pid="+encodeURIComponent(n)),e.push("ev="+encodeURIComponent(this.event)),e.push("pl="+encodeURIComponent(l.pl)),e.push("ts="+encodeURIComponent((new Date).valueOf())),e.push("rf="+encodeURIComponent(l.rf)),e.push("v="+encodeURIComponent(l.v)),e.push("if="+l.if),l.bt&&e.push("bt="+encodeURIComponent(l.bt)),e.join("&")}}
function ee(e,n,t){if(D(e)){var i={},r=new Y(n,e).getParamObj();for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);if(t)
for(var o in r=t)r.hasOwnProperty(o)&&o in T&&(i[T[o]]=r[o]);for(_=0;_<m.length;_++){o=m[_];l.hasOwnProperty(o)&&(i[o]=l[o])}
if(l.additional_info)
for(var o in l.additional_info)l.additional_info.hasOwnProperty(o)&&(i[o]=l.additional_info[o]);l.hasOwnProperty("s_r_id")&&(i.s_r_id=l.s_r_id),function(e){if(!s)return;var n=a.timing,t=n.domInteractive-n.navigationStart,i=n.loadEventEnd-n.navigationStart,r=function(e){if(s){var n=a.getEntriesByName(e);if(!(n.length<1))return n[n.length-1]}}(d);r&&te(e,"m_sl",Math.floor(r.startTime));a&&te(e,"m_rd",Math.floor(a.now()));te(e,"m_pi",t),te(e,"m_pl",i),te(e,"m_ic",u?1:0)}(i),l.sendPixelByGTM?l.sendPixelByGTM(p+function(e){var n=e?Object.keys(e).map((function(n){return n+"="+encodeURIComponent(e[n])})).join("&"):"";n&&(n="?"+n);return n}(i),ne,ne):ie("POST",p,i)}}
function ne(){}
function te(e,n,t){null==t||t<0||(e[n]=t)}
function ie(e,n,t,r,o){var a=function(){var e=i.createElement("iframe"),n=function(){var e=re();for(;null!=i.getElementById(e);)e=re();return e}();return e.id=n,e.name=n,e}(),u=i.createElement("form");u.method=e,u.action=n,u.target=a.id,u.acceptCharset="utf-8",u.style.cssText="display: none",u.appendChild(a);return oe(a,"load",(function e(){!function(e,n,t){if(!t)return;h?e.detachEvent(n,t):e.removeEventListener(n,t,!1)}(a,"load",e),function(){for(var e in t)
if(t.hasOwnProperty(e)){var n=i.createElement("input");n.name=e,n.value=t[e],u.appendChild(n)}oe(a,"load",(function(){null!=r&&r(),o||setTimeout((function(){u.parentNode.removeChild(u)}),0)})),u.submit()}()})),i.body.appendChild(u),a}
function re(){return"snap"+Math.random().toString().replace(".","")}
function oe(e,n,t){t&&(h?e.attachEvent(n,t):e.addEventListener(n,t,!1))}
function ae(){window.triedToSendCookieToNative||(!function(){try{if(J()||H()){$();var e=l.u_c1;if(e&&J()){if(!window.JSBridge||!window.JSBridge.onCookieId)throw"Snap android bridge missing. JSBridge defined: "+(void 0!==window.JSBridge);window.JSBridge.onCookieId(e)}else if(e&&H()){if(!window.webkit||!window.webkit.messageHandlers.onCookieId)throw"Snap ios bridge missing. window.webkit defined: "+(void 0!==window.webkit);window.webkit.messageHandlers.onCookieId.postMessage({firstPartyCookie:e})}}}catch(e){}}(),window.triedToSendCookieToNative=!0),function e(n){if(l.queue&&l.queue.length){if(C&&g||n<0)return X(l.queue.shift()),void(l.queue.length>0&&ae());setTimeout((function(){e(n-10)}),10)}}(1e4)}
l.handleRequest=function(){l.queue.push(arguments),ae()},l.responseDidLaunchNativeSharing=function(e){l.onCompleteRequestNativeSharing(e)},l.responseUserInfo=function(e){l.onCompleteRequestUserInfo(JSON.parse(e))},l.clean=ae,function(e){var n=!1;function t(){n||(n=!0,e())}
if("complete"!==document.readyState)
if("interactive"!==document.readyState){if(document.addEventListener)document.addEventListener("load",t,!1);else if(document.attachEvent){try{var i=null!=window.frameElement}catch(e){}
if(document.documentElement.doScroll&&!i){!function e(){if(!n)try{document.documentElement.doScroll("left"),t()}catch(n){setTimeout(e,10)}}()}
document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&t()}))}
if(window.addEventListener)window.addEventListener("load",t,!1);else if(window.attachEvent)window.attachEvent("onload",t);else{var r=window.onload;window.onload=function(){r&&r(),t()}}}else setTimeout(t,0);else t()}(ae)}(window,document,location)}catch(e){}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[125]=='undefined'){utag.runonce.ext[125]=1;if(1){var CONST_EXTN_NAME='Pinterest Pixel - FSR Page';var eventName='Search'
var eventParams={};Bootstrapper.pinterestPixel=function(){var methodName="pinterestPixel";var requirementName="Prepare data and trigger pinterest pixel";try{var pos=utag_data.point_of_sale,posList={US:!0,GB:!0,FR:!0,NL:!0,IL:!0,JP:!0,AU:!0,BR:!0,AR:!0,MX:!0};if(window.pintrk&&typeof window.pintrk=="function"&&posList[pos]&&Bootstrapper.fetchFlightSegmentIndex()==1){setTimeout(function(){eventParams=prepareEventParams();pintrk('track',eventName,eventParams);},3000);}}catch(error){var ds="Pinterest Object"
var inputValue="pintrk";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function prepareEventParams(){var methodName="prepareEventParams";var requirementName="Prepare data for pinterest pixel";var params={};try{params.order_quantity=Bootstrapper.getPaxCount();params.currency=utag_data._ccurrency;params.search_query=[Bootstrapper.getFlightSearchOrigin(1),Bootstrapper.getFlightSearchDestination(1)].join("-");params.line_items=[{product_category:Bootstrapper.getTripTypeValue()}];}catch(error){var ds="utag object"
var inputValue="utag_data.searchCriteria";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return params;}}}}catch(e){utag.DB(e)}},function(a,b){try{if((/^(.*\/.*\/.*\/fsr\/choose-flights\/?)$/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')||(/^(\/.*\/.*\/book-flight\/confirmation\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')||(/^(.*\/.*\/.*\/book-flight\/seatmap\/?)/ig.test(b['dom.pathname'])&&b['tealium_event']=='view')){var CONST_EXTN_NAME="Pinterest Pixel";var CONST_PINTEREST_URL="https://ct.pinterest.com/v3/?tid=2613586013029&noscript=1";try{!function(e){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};var n=window.pintrk;n.queue=[],n.version="3.0";var t=document.createElement("script");t.async=!0,t.src=e;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)}}("https://s.pinimg.com/ct/core.js");pintrk('load','2613586013029');pintrk('page');Bootstrapper.imageRequest(CONST_PINTEREST_URL);}catch(e){Bootstrapper.reportException(e);}
}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b['ga_event_category']='';b['ga_event_action']='';b['ga_event_label']='';b['ga_event_value']='';b['tealium_event']='';b['ga_promo_creative']='';b['ga_promo_id']='';b['ga_event_noninteraction']='';b['ga_promo_name']='';b['ga_promo_position']='';b['ga_enhanced_event']='';b['maxymiser_tests']='';b['maxymiser_tests_combined']='';b['maxymiser_pc_1']='';b['maxymiser_pc_2']='';b['maxymiser_pc_3']='';b['maxymiser_pc_4']='';b['maxymiser_pc_5']='';b['cabin_type']='';b['ticket_type']='';b['od_pair']='';try{b['departure_date']=(function(){return undefined})()}catch(e){};b['saturday_night_stay']='';b['tripModel']='';b['searched_itinerary']='';b['tripType']='';b['last_searched_itinerary']='';b['search_remarketing']='';try{b['search_return_date']=(function(){return undefined})()}catch(e){};try{b['searched_origin']=(function(){return undefined})()}catch(e){};try{b['searched_destination']=(function(){return undefined})()}catch(e){};b['remarket_decision']='';b['product_impression_id']='';b['product_impression_name']='';b['product_impression_list']='';b['product_impression_category']='';b['product_impression_brand']='';b['product_impression_variant']='';b['product_impression_position']='';b['product_impression_price']='';b['product_flight_number']='';b['product_award_miles']='';b['product_id']='';b['product_name']='';b['product_brand']='';b['product_category']='';b['product_variant']='';b['product_price']='';b['product_position']='';b['selected_flight_filters_prod']='';b['selected_flight_filters_qa']='';b['product_quantity']='';try{b['pax_count']=(function(){return undefined})()}catch(e){};b['google_ads_event']='';b['tiktok_search_query']='';b['trigger_point']='';b['timingCategory']='';b['timingValue']='';b['timingVar']='';b['shoppingOfferQA']='';b['shoppingOfferProd']='';b['date_pnr']='';b['order_id']='';b['pixel_trigger']='';b['purchase_itinerary']='';b['eventName']='';b['event_id']='';b['upgrade_type']='';b['plus_points']=''}}catch(e){utag.DB(e);}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[11]=='undefined'){utag.runonce.ext[11]=1;if(1){var intervalTimer=1000;Bootstrapper.batch=function(){var service=Bootstrapper.BatchService.getInstance();function run(){try{var _arguments=arguments[0];var command=_arguments[0];if(command&&typeof command==="string"){switch(command){case"eventList":if(_arguments&&_arguments[1]&&_arguments[1].constructor===Array){service.add(_arguments[1]);}
break;case"event":var currentEvent=null;var keys=Object.keys(new Bootstrapper.GAEvent());for(let i=1;i<=4;i++){if(_arguments[i]&&(typeof _arguments[i]==="string"||typeof _arguments[i]==="number")){if(!currentEvent){currentEvent=new Bootstrapper.GAEvent();}
currentEvent[keys[i-1]]=_arguments[i];}}
if(currentEvent){service.add(currentEvent);}
break;default:break;}}}catch(e){Bootstrapper.reportException(e);}}
run(arguments);};Bootstrapper.GAEvent=function(ec,ea,el,ev){this.ec=ec;this.ea=ea;this.el=el;this.ev=ev;};var ServiceMethod=function(){var instance;var debug=false;var trackingId=utagga.getAll()[0].get('trackingId');var clientId=utagga.getAll()[0].get('clientId');var location=utagga.getAll()[0].get('location');var gId=utagga.getAll()[0].get('_gid');function init(){var workers=[];var idleWorkerIds=[];var currentWorkerIndex=0;this.totalCalls=0;function GAWorker(id,service){this.id=id;this.buffer=[];this.startTimer=false;this.capacity=20;this.timeoutReference=null;var batchUrl="https://www.google-analytics.com/batch";this.send=function(){try{if(debug==true){console.warn("sending data with worker id: "+id);}
var data=this.constructData(this.buffer);if(debug==true){console.warn(data);}
var xhttp=new XMLHttpRequest();if(debug==false){xhttp.open("POST",batchUrl,true);xhttp.send(data);}}catch(error){Bootstrapper.reportException(error);}
this.buffer=[];this.startTimer=false;if(service&&service.registerIdleWorker){service.registerIdleWorker(this.id);}};this.constructData=function(dataList){var info='';try{if(dataList.length<=this.capacity){for(var i=0;i<dataList.length;i++){var infoList=[];infoList.push("v=1");infoList.push("t=event");infoList.push("dl="+encodeURIComponent(location));var current=dataList[i];for(var j in current){if(current[j]){infoList.push(j+"="+encodeURIComponent(current[j]));}}
infoList.push("cid="+clientId);infoList.push("tid="+trackingId);infoList.push("_gid="+gId+"\n");info+=infoList.join("&");}}}catch(error){Bootstrapper.reportException(error);}
return info;};this.add=function(item){try{if(this.getRemainingSpace()){if(item.constructor&&item.constructor===Array){this.buffer.push.apply(this.buffer,item);}else{this.buffer.push(item);}}
if(!this.startTimer){this.startTimer=true;if(debug==true){console.error("starting timmer for id: "+id);}
(function(ref){ref.timeoutReference=setTimeout(function(){ref.send(ref);},intervalTimer);}(this));}else{if(this.buffer.length==this.capacity){clearTimeout(this.timeoutReference);if(debug==true){console.error("Clearning timeout for id :$".replace("$",this.id));}
this.send(this);}}}catch(error){Bootstrapper.reportException(error);}};this.getRemainingSpace=function(){return this.capacity-this.buffer.length;};}
this.add=function(data){if(data&&data.constructor==Array){this.scheduleWorkersForList(data);}else if(data&&data instanceof Bootstrapper.GAEvent){this.scheduleWorkersForList([data]);}};this.registerIdleWorker=function(id){idleWorkerIds.push(id);};var getIdleWorkerId=function(){if(idleWorkerIds.length){return idleWorkerIds.splice(0,1);}
return workers.length;};this.scheduleWorkersForList=function(task){try{while(task.length!=0){if(workers[currentWorkerIndex]instanceof GAWorker){var space=workers[currentWorkerIndex].getRemainingSpace();if(space){workers[currentWorkerIndex].add(task.splice(0,space));}else{currentWorkerIndex=getIdleWorkerId();}}else{workers[currentWorkerIndex]=new GAWorker(currentWorkerIndex,this);}}}catch(error){Bootstrapper.reportException(error);}};}
return{getInstance:function(){if(!instance){instance=new init();}
return instance;}};};utagga(function(){Bootstrapper.BatchService=ServiceMethod();});}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[39]=='undefined'){utag.runonce.ext[39]=1;if(1){try{var marketingPixelCallbackHandler=function(data){var path=window.location.pathname;var tiPageCategory=Bootstrapper.dataObject.getUniquePageNameForTI(path);var pathArray=path.split('/');if((data.action.toLowerCase()=="sign-in success"||data.action.toLowerCase()=="not sign-in")&&window.location.href!==window.previousURL&&tiPageCategory&&(pathArray.length<7||!pathArray[6])){Bootstrapper.sendQuantcastPixel();}};Bootstrapper.callbackObserver.subscribe(marketingPixelCallbackHandler);}catch(e){Bootstrapper.reportException(e);}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[90]=='undefined'){utag.runonce.ext[90]=1;if(b['dom.pathname'].toString().toLowerCase().indexOf('/fly/mileageplus/card-partners-preview.html'.toLowerCase())>-1||b['dom.pathname'].toString().toLowerCase().indexOf('/fly/mileageplus/card-partners.html'.toLowerCase())>-1){var CONST_EXTN_NAME="Chase banner tracking";setTimeout(function(){trackChaseAdsImpression();},1500);listenLocationChange();function listenLocationChange(){var methodName="listenLocationChange";var requirementName="Listen location change";try{document.addEventListener("REACT_LOCATION_CHANGE",function(event){setTimeout(function(e){trackChaseAdsImpression();},1500)});addListenerToChildBanners();}catch(error){var ds="DOM",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
var loop=0;function trackChaseAdsImpression(){var methodName="trackChaseAdsImpression";var requirementName="Track impression of Chase banners";var CSS_BANNERS="atm-c-card__footer";try{if(loop<=30){setTimeout(function(){var banners=document.getElementsByClassName(CSS_BANNERS);if(banners&&banners.length>0){for(var i=0;i<banners.length;i++){var childEle=banners[i].children;if(childEle){var bannerHref=childEle[0].href;prepareDataForGA("AdImpression",bannerHref);}}
loop=0;trackTopChaseBanner();}else{loop=loop+1;trackChaseAdsImpression();}},200);}else{loop=0;return;}}catch(error){var ds="DOM",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function trackTopChaseBanner(){var methodName="trackTopChaseBanner";var requirementName="Track impression of Top banner";var CSS_TOP_BANNER="external-link";try{var topBanner=document.getElementsByClassName(CSS_TOP_BANNER);if(topBanner&&topBanner.length>0){var banner=topBanner[0];if(banner&&banner.children&&banner.children.length>0){var childNodeHref=banner.children[0].href;prepareDataForGA("AdImpression",childNodeHref);}}}catch(error){var ds="DOM",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function addListenerToChildBanners(){var methodName="addListenerToChildBanners";var requirementName="Add click listners on child banners";var CSS_BANNER_CLICK="atm-c-btn";var CSS_TOP_BANNER="external-link";var CSS_BTN_TEXT="atm-c-btn__text";var CSS_SVG="atm-c-icon atm-c-btn__icon";try{setTimeout(function(){document.body.addEventListener("click",function(event){if(event.target){var clickedEle=event.target;if(event.target.className==CSS_BANNER_CLICK){prepareDataForGA("AdClick",event.target.href);}else if(event.target.className==CSS_BTN_TEXT){var parent=event.target.parentElement;if(parent&&parent.className==CSS_BANNER_CLICK){prepareDataForGA("AdClick",parent.href);}}else if(clickedEle.className&&clickedEle.className.baseVal==CSS_SVG){var parent=(clickedEle.parentElement&&clickedEle.parentElement.className==CSS_BANNER_CLICK)
var bannerHref=clickedEle.parentElement.href;prepareDataForGA("AdClick",bannerHref)}else{var parent=event.target.parentElement;if(parent){var nextParent=parent.parentElement;if(nextParent&&nextParent.className==CSS_TOP_BANNER){prepareDataForGA("AdClick",parent.href);}}}}});},200);}catch(error){var ds="DOM",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function prepareDataForGA(action,bannerHref){var methodName="prepareDataForGA";var requirementName="Prepare and initiate data sending to GA";try{var data={};data.action=action;data.desc=bannerHref;var analyticsData=Bootstrapper.processAdLinkData(data);Bootstrapper.setUtagLinkForDOMEvent(analyticsData[0]);}catch(error){var ds="Function arguments",inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[93]=='undefined'){utag.runonce.ext[93]=1;if(b['dom.pathname'].toString().toLowerCase().indexOf('/fly/customer-support.html'.toLowerCase())>-1||b['dom.pathname'].toString().toLowerCase().indexOf('/fly/customer-support/contact-directory.html'.toLowerCase())>-1){var CONST_EXT_NAME="Digital 3.0 - Accordion Tracking (Customer Support/Contact Directory pages)";var CONST_EC="User Interactions";var CONST_ACCORDION_BTN_CLASS_NAME="acc__btn accordion__btn";function registorClickListener(){var methodName="registorClickListener";try{document.addEventListener('click',function(e){var target=e.target;trackAccordianClick(target);},false);}catch(e){var inputSource={"data_source":"Data object for Accordion Tracking","input_value":e.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_EC,CONST_EXT_NAME,JSON.stringify(e.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}}
function trackAccordianClick(target){var methodName="trackAccordianClick";try{if(target){var className=target.getAttribute('class');if(className&&className==CONST_ACCORDION_BTN_CLASS_NAME){setTimeout(function(){var isExpanded=target.getAttribute('aria-expanded');if(isExpanded&&isExpanded=='true'){if(target.innerText){var parsedDataObj={};parsedDataObj.eventCategory=CONST_EC;parsedDataObj.eventAction="Clicked Accordion: "+target.innerText.trim();Bootstrapper.setUtagLinkForDOMEvent(parsedDataObj);}else{var inputSrc={"data_source":"Accordion text is missing","input_value":"DOM"};var label=Bootstrapper.dataObject.customLogForGapTracking(CONST_EC,CONST_EXT_NAME,"",inputSrc,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,label,null);}}},100);}}}catch(e){var inputSource={"data_source":"Error occurred in Accordion Tracking","input_value":e.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_EC,CONST_EXT_NAME,JSON.stringify(e.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}}
registorClickListener();}}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[94]=='undefined'){utag.runonce.ext[94]=1;if(1){var CONST_EXT_NAME="Digital 3.0 - PNR tracking";var CONST_EC="Reservations";var EA_IMPRESSION_PNR="Impression: PNR";var CONST_PNR_SELECTOR1="app-containers-TripDetails-ManageResTitle-styles__confirmationNo--1ZlHv";var CONST_PNR_SELECTOR2="app-containers-TripDetails-ManageResTitle-styles__confirmationNumber--26WLF";var CONST_ORIGIN_SELECTOR="app-containers-TripDetails-SingleFlight-singleFlight__departureAPC--3MZpJ";var CONST_DEST_SELECTOR="app-containers-TripDetails-SingleFlight-singleFlight__arrivalAPC--1JkqK";var CONST_DATE_SELECTOR="app-containers-TripDetails-SingleFlight-singleFlight__departureDate--158ZY";var pnr;var pnrSelector;var pnrLoadTime;function trackPNRImpression(){var methodName="trackPNRImpression";try{pnr=fetchPNRFromDOM();if(pnr){var eventLabel=prepareItineraryDetails();var parsedDataObj={};parsedDataObj.eventCategory=CONST_EC;parsedDataObj.eventAction=EA_IMPRESSION_PNR;parsedDataObj.tealiumEvent=parsedDataObj.eventAction;parsedDataObj.eventLabel=[pnrLoadTime,eventLabel,pnr].join('|');parsedDataObj.noninteraction='1';Bootstrapper.setUtagLinkForDOMEvent(parsedDataObj);if(!eventLabel||eventLabel.length===0){if(pnrSelector&&pnrSelector==CONST_PNR_SELECTOR1){var inputSource={"data_source":"Unable to populate event label for PNR impression tracking","input_value":"DOM"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_EC,CONST_EXT_NAME,"",inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,null);}}}else{var inputSource={"data_source":"Unable to fetch PNR from DOM","input_value":"DOM"};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_EC,CONST_EXT_NAME,"",inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,null);}}catch(e){var inputSource={"data_source":"Error occurred while fetching reservation itinerary","input_value":e.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_EC,CONST_EXT_NAME,JSON.stringify(e.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}}
function prepareItineraryDetails(){var methodName="prepareItineraryDetails";var itineraryDetails;try{var origins=fetchDataFromDOM(CONST_ORIGIN_SELECTOR);var destinations=fetchDataFromDOM(CONST_DEST_SELECTOR);var departureDates=fetchFlightDatesDOM(CONST_DATE_SELECTOR,true);var arrivalDates=fetchFlightDatesDOM(CONST_DATE_SELECTOR,false);var daysToDaparture=calculateDaysToDeparture(departureDates);if(origins&&destinations&&departureDates&&arrivalDates&&daysToDaparture){if(origins.length>0&&origins.length==destinations.length){itineraryDetails="";for(var i=0;i<origins.length;i++){var flightDetail=['[Leg'+(i+1),origins[i],destinations[i],departureDates[i]?departureDates[i]:'--',daysToDaparture[i]?daysToDaparture[i]:'--',(arrivalDates[i]?arrivalDates[i]:'--')+']'].join('|');itineraryDetails+=flightDetail;}
var reservationItinerary={}
reservationItinerary.pnr=pnr;reservationItinerary.origins=origins;reservationItinerary.destinations=destinations;reservationItinerary.departureDates=departureDates;reservationItinerary.arrivalDates=arrivalDates;b['trip_details_itinerary']=JSON.stringify(reservationItinerary);}}}catch(e){var inputSource={"data_source":"Error occurred while preparing event label","input_value":e.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_EC,CONST_EXT_NAME,JSON.stringify(e.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}
return itineraryDetails;}
function fetchDataFromDOM(selector){var array=[];try{if(selector){var elements=document.getElementsByClassName(selector);if(elements&&elements.length>0){for(var i=0;i<elements.length;i++){if(elements[i].innerText){array.push(elements[i].innerText);}}}}}catch(e){Bootstrapper.reportException(e);}
return array;}
function calculateDaysToDeparture(departureDates){var daysToDeparture=[];try{var systemDate=new Date();var todaysDate=new Date(systemDate.setHours(0,0,0,0));if(departureDates&&departureDates.length>0){for(var i=0;i<departureDates.length;i++){var departureDate=new Date(Date.parse(departureDates[i]));var noOfDays=Math.round((departureDate.getTime()-todaysDate.getTime())/(1000*60*60*24));daysToDeparture.push(noOfDays.toString());}}}catch(e){Bootstrapper.reportException(e);}
return daysToDeparture;}
function fetchFlightDatesDOM(selector,isDepartureDate){var array=[];try{if(selector){var elements=document.getElementsByClassName(selector);if(elements&&elements.length>0){for(var i=0;i<elements.length;i++){if(elements[i].innerText){var dateStr;if(elements[i].parentElement){var parentElementClassName=elements[i].parentElement.getAttribute('class');if(parentElementClassName){if(isDepartureDate&&parentElementClassName.indexOf('departure')>-1){dateStr=elements[i].innerText;}else if(!isDepartureDate&&parentElementClassName.indexOf('arrival')>-1){dateStr=elements[i].innerText;}}}
if(dateStr){dateStr=dateStr.replace(/[^a-zA-Z0-9]/g,' ');}
if(isParsableDate(dateStr)){dateStr=formatDate(new Date(Date.parse(dateStr)));array.push(dateStr);}
dateStr="";}}}}}catch(e){Bootstrapper.reportException(e);}
return array;}
function isParsableDate(dateStr){var isParsableDate=false;try{if(dateStr&&!isNaN(Date.parse(dateStr))){isParsableDate=true;}}catch(e){Bootstrapper.reportException(e);}
return isParsableDate;}
function formatDate(date){var formattedDateStr='--';try{if(date){var year=date.getFullYear();var month=(1+date.getMonth()).toString();month=month.length>1?month:'0'+month;var day=date.getDate().toString();day=day.length>1?day:'0'+day;formattedDateStr=month+'/'+day+'/'+year;}}catch(e){Bootstrapper.reportException(e);}
return formattedDateStr;}
function fetchPNRFromDOM(){var pnr;try{pnr=getPNR(CONST_PNR_SELECTOR1);if(!pnr||pnr.length===0){pnr=getPNR(CONST_PNR_SELECTOR2);}}catch(e){Bootstrapper.reportException(e);}
return pnr;}
function getPNR(_pnrSelector){var pnr;try{pnrSelector=_pnrSelector;if(pnrSelector){var elements=document.getElementsByClassName(pnrSelector);if(elements&&elements.length>0){pnr=elements[0].lastElementChild.innerText;pnr=pnr.trim();}}}catch(e){Bootstrapper.reportException(e);}
return pnr;}
Bootstrapper.trackUniquePNR=function(){var pnrWaitStartTime=new Date();var methodName="Bootstrapper.trackUniquePNR";try{var retryCount=0;var retryAttempts=50;var waitForData=function waitForData(){if(fetchPNRFromDOM()){var pnrWaitEndTime=new Date();pnrLoadTime=calculateDifferenceInSecs(pnrWaitStartTime,pnrWaitEndTime);trackPNRImpression();retryCount=retryAttempts;}else if(retryCount<retryAttempts){setTimeout(function(){waitForData();},400)}
retryCount++};waitForData();}catch(e){Bootstrapper.reportException(e);}}
function calculateDifferenceInSecs(startTime,endTime){var methodName="calculateDifferenceInSecs";var differenceInSecs="--";try{if(startTime&&endTime){var timeDifference=Math.abs((endTime.getTime()-startTime.getTime())/1000);differenceInSecs=timeDifference;}}catch(e){var inputSource={"data_source":"Error occurred while calculating PNR load time","input_value":e.message};var customLabel=Bootstrapper.dataObject.customLogForGapTracking(CONST_EC,CONST_EXT_NAME,JSON.stringify(e.message),inputSource,methodName);Bootstrapper.dataObject.dataGapTracking(Bootstrapper.dataObject.global.constant.web,customLabel,e);}
return differenceInSecs;}
function runDeployment(){try{var pathName=utag.data["dom.pathname"].toString().toLowerCase();var regExp_tripDetails=new RegExp(/(^(\/.*\/.*\/manageres\/tripdetails\/?)$)/gi);var regExp_tripDetailsRdir=new RegExp(/(^(\/.*\/.*\/manageres\/tripdetails\/.*\/(bookingconfirmation|bookingconfirmationemail))$)/gi);if(regExp_tripDetails.test(pathName)||regExp_tripDetailsRdir.test(pathName)){Bootstrapper.trackUniquePNR();}}catch(e){Bootstrapper.reportException(e);}}
runDeployment();}}}catch(e){utag.DB(e)}}];utag.handler.cfg_extend=[{"end":0,"bwq":0,"alr":0,"id":"43","blr":1},{"alr":0,"bwq":0,"end":0,"blr":1,"id":"38"},{"blr":1,"id":"68","alr":0,"bwq":0,"end":0},{"id":"26","blr":1,"end":0,"bwq":0,"alr":0},{"id":"164","blr":1,"end":0,"bwq":0,"alr":0},{"end":0,"bwq":0,"alr":0,"id":"6","blr":1},{"blr":1,"id":"29","alr":0,"bwq":0,"end":0},{"id":"24","blr":1,"end":0,"bwq":0,"alr":0},{"blr":1,"id":"7","alr":0,"bwq":0,"end":0},{"blr":1,"id":"16","alr":0,"bwq":0,"end":0},{"alr":0,"bwq":0,"end":0,"blr":1,"id":"5"},{"id":"52","blr":1,"end":0,"bwq":0,"alr":0},{"id":"10","blr":1,"end":0,"bwq":0,"alr":0},{"end":0,"bwq":0,"alr":0,"id":"13","blr":1},{"blr":1,"id":"14","alr":0,"bwq":0,"end":0},{"blr":1,"id":"53","alr":0,"bwq":0,"end":0},{"id":"104","blr":1,"end":0,"bwq":0,"alr":0},{"end":0,"bwq":0,"alr":0,"id":"141","blr":1},{"blr":1,"id":"165","alr":0,"bwq":0,"end":0},{"end":0,"bwq":0,"alr":0,"id":"167","blr":1},{"alr":0,"bwq":0,"end":0,"blr":1,"id":"283"},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"296"},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"179"},{"end":0,"bwq":0,"alr":1,"id":"51","blr":0},{"blr":0,"id":"55","alr":1,"bwq":0,"end":0},{"id":"87","blr":0,"end":0,"bwq":0,"alr":1},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"82"},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"54"},{"blr":0,"id":"57","alr":1,"bwq":0,"end":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"60"},{"id":"62","blr":0,"end":0,"bwq":0,"alr":1},{"end":0,"bwq":0,"alr":1,"id":"63","blr":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"72"},{"id":"78","blr":0,"end":0,"bwq":0,"alr":1},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"79"},{"end":0,"bwq":0,"alr":1,"id":"80","blr":0},{"blr":0,"id":"81","alr":1,"bwq":0,"end":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"83"},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"84"},{"blr":0,"id":"91","alr":1,"bwq":0,"end":0},{"end":0,"bwq":0,"alr":1,"id":"99","blr":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"105"},{"blr":0,"id":"241","alr":1,"bwq":0,"end":0},{"end":0,"bwq":0,"alr":1,"id":"110","blr":0},{"blr":0,"id":"116","alr":1,"bwq":0,"end":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"234"},{"end":0,"bwq":0,"alr":1,"id":"117","blr":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"120"},{"blr":0,"id":"122","alr":1,"bwq":0,"end":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"127"},{"end":0,"bwq":0,"alr":1,"id":"130","blr":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"131"},{"id":"135","blr":0,"end":0,"bwq":0,"alr":1},{"id":"136","blr":0,"end":0,"bwq":0,"alr":1},{"id":"137","blr":0,"end":0,"bwq":0,"alr":1},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"140"},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"144"},{"blr":0,"id":"145","alr":1,"bwq":0,"end":0},{"id":"148","blr":0,"end":0,"bwq":0,"alr":1},{"id":"149","blr":0,"end":0,"bwq":0,"alr":1},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"150"},{"blr":0,"id":"156","alr":1,"bwq":0,"end":0},{"blr":0,"id":"159","alr":1,"bwq":0,"end":0},{"id":"161","blr":0,"end":0,"bwq":0,"alr":1},{"blr":0,"id":"162","alr":1,"bwq":0,"end":0},{"blr":0,"id":"168","alr":1,"bwq":0,"end":0},{"id":"176","blr":0,"end":0,"bwq":0,"alr":1},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"186"},{"end":0,"bwq":0,"alr":1,"id":"180","blr":0},{"id":"271","blr":0,"end":0,"bwq":0,"alr":1},{"id":"187","blr":0,"end":0,"bwq":0,"alr":1},{"end":0,"bwq":0,"alr":1,"id":"188","blr":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"197"},{"id":"198","blr":0,"end":0,"bwq":0,"alr":1},{"end":0,"bwq":0,"alr":1,"id":"200","blr":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"206"},{"end":0,"bwq":0,"alr":1,"id":"215","blr":0},{"id":"219","blr":0,"end":0,"bwq":0,"alr":1},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"225"},{"id":"235","blr":0,"end":0,"bwq":0,"alr":1},{"end":0,"bwq":0,"alr":1,"id":"237","blr":0},{"id":"253","blr":0,"end":0,"bwq":0,"alr":1},{"id":"238","blr":0,"end":0,"bwq":0,"alr":1},{"blr":0,"id":"244","alr":1,"bwq":0,"end":0},{"end":0,"bwq":0,"alr":1,"id":"246","blr":0},{"end":0,"bwq":0,"alr":1,"id":"247","blr":0},{"blr":0,"id":"248","alr":1,"bwq":0,"end":0},{"id":"249","blr":0,"end":0,"bwq":0,"alr":1},{"id":"278","blr":0,"end":0,"bwq":0,"alr":1},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"260"},{"end":0,"bwq":0,"alr":1,"id":"262","blr":0},{"blr":0,"id":"265","alr":1,"bwq":0,"end":0},{"id":"267","blr":0,"end":0,"bwq":0,"alr":1},{"end":0,"bwq":0,"alr":1,"id":"268","blr":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"272"},{"blr":0,"id":"281","alr":1,"bwq":0,"end":0},{"end":0,"bwq":0,"alr":1,"id":"279","blr":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"280"},{"blr":0,"id":"282","alr":1,"bwq":0,"end":0},{"id":"285","blr":0,"end":0,"bwq":0,"alr":1},{"id":"287","blr":0,"end":0,"bwq":0,"alr":1},{"end":0,"bwq":0,"alr":1,"id":"288","blr":0},{"blr":0,"id":"289","alr":1,"bwq":0,"end":0},{"id":"290","blr":0,"end":0,"bwq":0,"alr":1},{"blr":0,"id":"293","alr":1,"bwq":0,"end":0},{"blr":0,"id":"294","alr":1,"bwq":0,"end":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"295"},{"id":"297","blr":0,"end":0,"bwq":0,"alr":1},{"id":"300","blr":0,"end":0,"bwq":0,"alr":1},{"end":0,"bwq":0,"alr":1,"id":"301","blr":0},{"blr":0,"id":"302","alr":1,"bwq":0,"end":0},{"blr":0,"id":"303","alr":1,"bwq":0,"end":0},{"id":"304","blr":0,"end":0,"bwq":0,"alr":1},{"end":0,"bwq":0,"alr":1,"id":"305","blr":0},{"blr":0,"id":"307","alr":1,"bwq":0,"end":0},{"end":0,"bwq":0,"alr":1,"id":"308","blr":0},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"313"},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"314"},{"alr":1,"bwq":0,"end":0,"blr":0,"id":"315"},{"end":1,"bwq":0,"alr":0,"id":"274","blr":0},{"blr":0,"id":"264","alr":0,"bwq":0,"end":1},{"id":"211","blr":0,"end":1,"bwq":0,"alr":0},{"alr":0,"bwq":0,"end":1,"blr":0,"id":"204"},{"alr":0,"bwq":0,"end":1,"blr":0,"id":"203"},{"blr":0,"id":"199","alr":0,"bwq":0,"end":1},{"alr":0,"bwq":0,"end":1,"blr":0,"id":"190"},{"id":"189","blr":0,"end":1,"bwq":0,"alr":0},{"end":1,"bwq":0,"alr":0,"id":"125","blr":0},{"alr":0,"bwq":0,"end":1,"blr":0,"id":"124"},{"id":"15","blr":0,"end":1,"bwq":0,"alr":0},{"alr":0,"bwq":0,"end":1,"blr":0,"id":"11"},{"end":1,"bwq":0,"alr":0,"id":"39","blr":0},{"blr":0,"id":"90","alr":0,"bwq":0,"end":1},{"alr":0,"bwq":0,"end":1,"blr":0,"id":"93"},{"alr":0,"bwq":0,"end":1,"blr":0,"id":"94"}];utag.loader.initcfg=function(){utag.loader.cfg={"1":{load:utag.cond[14],send:1,v:202203250305,wait:1,tid:17013},"62":{load:((utag.cond[17])),send:1,v:202311081929,wait:1,tid:20067},"2":{load:utag.cond[10],send:1,v:202103120403,wait:1,tid:16044},"3":{load:(utag.cond[10]||utag.cond[40]),send:1,v:202203250305,wait:1,tid:20103},"11":{load:1,send:1,v:202311300408,wait:1,tid:7110},"25":{load:utag.cond[10],send:1,v:202210061802,wait:1,tid:17001},"26":{load:utag.cond[10],send:1,v:201908230308,wait:1,tid:20067},"35":{load:utag.cond[10],send:1,v:202206100311,wait:1,tid:6026},"39":{load:utag.cond[10],send:1,v:201909240300,wait:1,tid:20010},"44":{load:utag.cond[16],send:1,v:202109160311,wait:1,tid:17003},"54":{load:(utag.cond[37]||utag.cond[42]||utag.cond[18]||utag.cond[45]||utag.cond[36]||utag.cond[39]),send:1,v:202301200405,wait:1,tid:20064},"69":{load:(utag.cond[22]&&utag.cond[21]),send:1,v:202307070305,wait:1,tid:4049},"74":{load:utag.cond[26],send:1,v:202212200420,wait:1,tid:7132},"76":{load:((utag.cond[29]||utag.cond[49]||utag.cond[50]||utag.cond[48])),send:1,v:202309080305,wait:1,tid:17001},"78":{load:utag.cond[30],send:1,v:202301200405,wait:1,tid:7132},"81":{load:utag.cond[32],send:1,v:202309080305,wait:1,tid:15035},"82":{load:1,send:1,v:202311300408,wait:1,tid:20010},"98":{load:utag.cond[39],send:1,v:202203110405,wait:1,tid:4049},"114":{load:utag.cond[41],send:1,v:202311300408,wait:1,tid:7132},"118":{load:1,send:1,v:202311300408,wait:1,tid:7142},"122":{load:(utag.cond[42]&&utag.cond[43]&&utag.cond[46]),send:1,v:202306070308,wait:1,tid:7132},"127":{load:(utag.cond[42]&&utag.cond[46]&&utag.cond[43]),send:1,v:202301200405,wait:1,tid:7132},"129":{load:(utag.cond[42]&&utag.cond[43]),send:1,v:202302160418,wait:1,tid:7132}};utag.loader.cfgsort=["1","62","2","3","11","25","26","35","39","44","54","69","74","76","78","81","82","98","114","118","122","127","129"];}
utag.loader.initcfg();}
if(typeof utag_cfg_ovrd!='undefined'){for(utag._i in utag.loader.GV(utag_cfg_ovrd))utag.cfg[utag._i]=utag_cfg_ovrd[utag._i]};utag.loader.PINIT=function(a,b,c){utag.DB("Pre-INIT");if(utag.cfg.noload){return;}
try{this.GET();if(utag.handler.RE('view',utag.data,"blr")){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};a=this.cfg;c=0;for(b in this.GV(a)){if(a[b].block==1||(a[b].load>0&&(typeof a[b].src!='undefined'&&a[b].src!=''))){a[b].block=1;c=1;this.bq[b]=1;}}
if(c==1){for(b in this.GV(a)){if(a[b].block){a[b].id=b;if(a[b].load==4)a[b].load=1;a[b].cb=function(){var d=this.uid;utag.loader.cfg[d].cbf=1;utag.loader.LOAD(d)};this.AS(a[b]);}}}
if(c==0)this.INIT();};utag.loader.INIT=function(a,b,c,d,e){utag.DB('utag.loader.INIT');if(this.ol==1)return-1;else this.ol=1;if(utag.cfg.noview!=true)utag.handler.RE('view',utag.data,"alr");utag.rpt.ts['i']=new Date();d=this.cfgsort;for(a=0;a<d.length;a++){e=d[a];b=this.cfg[e];b.id=e;if(b.block!=1){if(utag.loader.bk[b.id]||((utag.cfg.readywait||utag.cfg.noview)&&b.load==4)){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.wait==1&&utag.loader.rf==0){utag.DB('utag.loader.INIT: waiting '+b.id);this.wq.push(b)
this.f[b.id]=2;}else if(b.load>0){utag.DB('utag.loader.INIT: loading '+b.id);this.lq.push(b);this.AS(b);}}}
if(this.wq.length>0)utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.DB('READY:utag.loader.wq');utag.loader.rf=1;utag.loader.WQ();}});else if(this.lq.length>0)utag.loader.rf=1;else if(this.lq.length==0)utag.loader.END();return 1};utag.loader.EV('','ready',function(a){if(utag.loader.efr!=1){utag.loader.efr=1;try{try{if((/^(\/.*-.*\/flights-from-san-francisco-to-brisbane)$/ig.test(utag.data['dom.pathname'])&&utag.data['tealium_event']=='view')){let CONST_EXTN_NAME="Sojern Pixel- Brisbane Airport Campaign";let DOUBLE_DASH="--";setTimeout(function(){sendSojernPixel();},2500);function sendSojernPixel(){let requirementName="Send Sojern pixel";let methodName="sendSojernPixel";try{let pixelURL="https://pixel.sojern.com/pixel/img/362398?p_v=3&f_v=v3_image&vid=tou";pixelURL+=prepareSojernPixelData();Bootstrapper.imageRequest(pixelURL);}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}}
function prepareSojernPixelData(){let requirementName="Prepare data for sojern pixel";let methodName="prepareSojernPixelData";let pixelData="";let destination_ID='w-full focus:outline-none truncate bg-transparent text-inherit placeholder-current';let travelClass="w-full focus:outline-none text-inherit";try{let destinationVal=(document.getElementsByClassName(destination_ID)&&document.getElementsByClassName(destination_ID).length>=1&&document.getElementsByClassName(destination_ID)[1].value)?document.getElementsByClassName(destination_ID)[1].value:DOUBLE_DASH;let travelClass_Val=(document.getElementsByClassName(travelClass)&&document.getElementsByClassName(travelClass).length>0)?document.getElementsByClassName(travelClass)[1]:DOUBLE_DASH;let str=(travelClass_Val&&travelClass_Val.getElementsByClassName(" css-0")&&travelClass_Val.getElementsByClassName(" css-0").length>0&&travelClass_Val.getElementsByClassName(" css-0")[0].innerHTML)?travelClass_Val.getElementsByClassName(" css-0")[0].innerHTML:DOUBLE_DASH;let travel_class=str&&str.split(",").pop();let regex=/\(|\)|/g;let pixel_data=destinationVal&&destinationVal.replace(regex,"").split(" ");let vf1,vn1,pn,pc,ccid;vf1=pixel_data&&pixel_data.length>=3?pixel_data[3]:DOUBLE_DASH;vn1=pixel_data&&pixel_data.length>=2?pixel_data[2]:DOUBLE_DASH;pc=document.title?document.title:DOUBLE_DASH;pn=travel_class?travel_class:DOUBLE_DASH;ccid=Bootstrapper.getGAClientID();pixelData="&vf1="+vf1+"&vn1="+vn1+"&pn="+pn+"&pc="+pc+"&ccid="+ccid;}catch(error){let ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,methodName);}
return pixelData;}}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if(1){let CONST_EXTN_NAME="Customize your travel page tracking";Bootstrapper.handleCustomizeTravelBundleSelection=function(){let requirementName="Add listner to button";let methodName="handleCustomizeTravelBundleSelection";let analyticsData={};try{if(utag_data&&utag_data.travelOptions&&utag_data.travelOptions.length>0){analyticsData.eventCategory="Shopping Review";analyticsData.eventAction="Bundle Selected";analyticsData.eventLabel=prepareEventLabel();}}catch(error){var ds="callback";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return analyticsData;};function prepareEventLabel(){let requirementName="Prepare event label";let methodName="prepareEventLabel";let label;try{let travelOptionsAry=utag_data.travelOptions;let paxCount=Bootstrapper.getPaxCount();for(const option of travelOptionsAry){let tripIndex=option.tripIndex||"--";let origin=option.origin||"--";let destination=option.destination||"--";let bundleKey=option.key||"--";let totalPrice=(option.price&&option.price.amount)?option.price.amount:"--";let currency=(option.price&&option.price.currencyCode)?option.price.currencyCode:"--";let travelDetails="["+[origin,destination,totalPrice,currency,bundleKey].join("|")+"]";label=label?[label,travelDetails].join("|"):travelDetails;}
label=[paxCount,label].join("|");}catch(error){var ds="utag_data.travelOptions";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}
return label;}}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if((utag.data['dom.pathname']=='/en-us/seat-options'&&utag.data['tealium_event']=='view')){let CONST_EXTN_NAME="Floodlight-Seat Options Page";prepareFloodlight_PageLoad();function sendFloodlight(src){let requirementName="Send floodlight pixel on Seat options page";let methodName="sendFloodlight";try{if(Bootstrapper&&typeof Bootstrapper.imageRequest==="function"){Bootstrapper.imageRequest(src);}}catch(error){let ds="Pixel URL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function prepareFloodlight_PageLoad(){let requirementName="Prepare floodlight pixel";let methodName="prepareFloodlight_PageLoad";try{let axel=Math.random()+"";let a=axel*10000000000000;let src="https://ad.doubleclick.net/ddm/activity/src=3463749;type=unite280;cat=seatopt;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};ord=1;num=' + a + '?";sendFloodlight(src);handleUpgradeClick();}catch(error){let ds="Pixel URL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}
function handleUpgradeClick(){let requirementName="Add click listener on Upgrade button";let methodName="handleUpgradeClick";try{$(".theme-btn.btn-ua.btn-size3").on("click",function(){let axel=Math.random()+"";let a=axel*10000000000000;let src="https://ad.doubleclick.net/ddm/activity/src=3463749;type=unite280;cat=upgrnowb;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;gdpr=${GDPR};gdpr_consent=${GDPR_CONSENT_755};ord=' + a + '?";sendFloodlight(src);});}catch(error){let ds="Pixel URL";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,error.message,methodName);}}}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if(1){var CONST_EXT_NAME="Hard Reload";(function(){try{Bootstrapper.pageLoadStartTime=Bootstrapper.currentTimeForPageLoadStart&&performance.getEntriesByType("navigation")[0].unloadEventStart+Bootstrapper.currentTimeForPageLoadStart;Bootstrapper.pageLoadType=CONST_EXT_NAME;}catch(e){var methodName="HardReloadStartTime",requirementName="Calculate Hard Reload Start Time";}})();}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if((utag.data['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&/(^(.*\/.*\/.*\/fly\/travel\/animals\/in-cabin.html)$)/ig.test(utag.data['dom.pathname']))){var CONST_EXT_NAME="Digital 3.0 - In-cabin Pets Page Interaction";var EVENT_CATEGORY="Travel Information";setTimeout(function(){addListenerOnInCabinPetBookingButtons();},2000)
function addListenerOnInCabinPetBookingButtons(){var methodName="addListenerOnInCabinPetBookingButtons";var requirementName="Add click listener on book in cabin pets buttons";var CSS_BUTTON_CLASS='ualbtn';try{var DOM_ELEMENT=document.getElementsByClassName(CSS_BUTTON_CLASS);for(var i=0;i<DOM_ELEMENT.length;i++){DOM_ELEMENT[i].addEventListener('click',function(event){var href=event.target.href;if(href&&href.length>0){var analyticsData={};if(href.indexOf('flight-search/book-a-flight')>-1){analyticsData.eventCategory=EVENT_CATEGORY;analyticsData.eventAction='Clicked:Book your trip with a pet';Bootstrapper.setUtagLinkForDOMEvent(analyticsData);}else if(href.indexOf('manageres/mytrips')>-1){analyticsData.eventCategory=EVENT_CATEGORY;analyticsData.eventAction='Clicked:Add a pet to your reservation';Bootstrapper.setUtagLinkForDOMEvent(analyticsData);}}});}}catch(error){var ds="DOM Element";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_TAG_NAME,error.message,error,ds,methodName);}}}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{try{if((utag.data['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&/(^(.*\/loyalty\/partnerupgrades\/ui\/.*\/.*\/saua)$)/ig.test(utag.data['dom.pathname']))||(utag.data['dom.domain'].toString().toLowerCase().indexOf('united.com'.toLowerCase())>-1&&/(^(.*\/loyalty\/partnerupgrades\/ui\/.*\/.*\/pluspoints)$)/ig.test(utag.data['dom.pathname']))){var CONST_EXTN_NAME="Loyalty Partner Upgrades";var CONST_EC="Loyalty Partner Upgrades";var CONST_BTN_EA="Clicked: SIGN IN";var CONST_LINK_EA="Clicked Link: sign in";var DOM_SIGNIN_CLS="SignIn";var DOM_POINTS_SIGNIN_LINK="pointsHomeSigninLink";var DOM_SAUA_SIGNIN_LINK="sauaHomeSigninLink";(function addSigninClickListner(){var methodName="addSigninClickListner";var requirementName="Add click listner on Signin button and link";try{if(document.getElementsByClassName("SignIn")&&document.getElementsByClassName("SignIn")[0]){document.getElementsByClassName("SignIn")[0].onclick=function(e){if(e.target.parentElement.className=="SignInBtn"){preparedAndSendEvent(CONST_BTN_EA);}}}
clickListnerOnSignInLink(DOM_POINTS_SIGNIN_LINK);clickListnerOnSignInLink(DOM_SAUA_SIGNIN_LINK);}catch(error){var ds="DOM element";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}})();function clickListnerOnSignInLink(id){var methodName="clickListnerOnSignInLink";var requirementName="Add click listner on signin link";try{if(document.getElementById(id)){document.getElementById(id).onclick=function(e){preparedAndSendEvent(CONST_LINK_EA);}}}catch(error){var ds="DOM element";var inputValue=error.message;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function preparedAndSendEvent(eventAction){var methodName="preparedAndSendEvent";var requirementName="Prepared data and send GA event";try{var analyticUtagData={};analyticUtagData.tealiumEvent=eventAction;analyticUtagData.eventCategory=CONST_EC;analyticUtagData.eventAction=eventAction;Bootstrapper.setUtagLinkForDOMEvent(analyticUtagData);}catch(error){var ds="Argument data";var inputValue=eventAction;Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};try{if(typeof utag.runonce=='undefined')utag.runonce={};utag.jdh=function(h,i,j,k){h=utag.jdhc.length;if(h==0)window.clearInterval(utag.jdhi);else{for(i=0;i<h;i++){j=utag.jdhc[i];k=jQuery(j.i).is(":visible")?1:0;if(k!=j.s){if(j.e==(j.s=k))jQuery(j.i).trigger(j.e?"afterShow":"afterHide")}}}};utag.jdhi=window.setInterval(utag.jdh,250);utag.jdhc=[];if(/(^\/[^\/]+\/[^\/]+\/?$)/.test(utag.data['dom.pathname'])){if(typeof utag.runonce[175]=='undefined'){utag.runonce[175]=1;jQuery(document.body).on('click','.atm-c-btn.app-containers-Home-forms-book-Flight-styles__submitExternalBtn--3iJoV.atm-c-btn--primary',function(e){utag.link({"tealium_event":'Clicked: Find hotels',"ga_event_category":Bootstrapper.dataObject.global.constant.EC_HOME,"ga_event_action":'Clicked: Find hotels',"ga_event_label":'Horizontal Booking Widget'})})}}}catch(e){utag.DB(e)};try{if(/^(\/(en|EN)\/.*)$/ig.test(utag.data['dom.pathname'])||utag.data['dom.domain'].toString().toLowerCase().indexOf('promo.qa.aws.ual.com'.toLowerCase())>-1||utag.data['dom.domain'].toString().toLowerCase().indexOf('promo.united.com'.toLowerCase())>-1){if(typeof utag.runonce[153]=='undefined'){utag.runonce[153]=1;jQuery(document.body).on('click','a',function(e){var CONST_EXTN_NAME="D3.0 Pages: Link Click Tracking";var EVENT_CATEGORY="User Interactions";var anchorTagHref=this.getAttribute('href');var linkText=getAnchorTagTitle(e);var regexp=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(anchorTagHref!==null){var label=[linkText,anchorTagHref].join("|");if(regexp.test(anchorTagHref)&&Bootstrapper.isClickedLinkExternal(anchorTagHref)){if(!isChasePage()){prepareGAEvent("Clicked: External link",label);}}else{prepareGAEvent("Clicked: Internal link",label);}}else{prepareGAEvent("Clicked: Internal link",linkText);}
function getAnchorTagTitle(element){var methodName="getAnchorTagTitle";var requirementName="get title of the anchor tag";var linkText="--";try{if(element.target.tagName.toLowerCase()=='img'){linkText=$(element.target).attr("alt");}else if(element.target.innerText){linkText=element.target.innerText;}}catch(error){var inputValue="clicked element";var ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return linkText;}
function prepareGAEvent(action,label){var methodName="prepareGAEvent";var requirementName="Prepare GA event";var dataObj={};try{dataObj.eventCategory=EVENT_CATEGORY;dataObj.eventAction=action;dataObj.eventLabel=label;Bootstrapper.setUtagLinkForDOMEvent(dataObj);}catch(error){var inputValue="method argument";var ds="DOM";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}}
function isChasePage(){let requirementName="Check if page is Chase banner";let methodName="isChasePage";let isChase=false;try{let pathName=document.location.pathname;if(pathName){if(pathName.toLowerCase().indexOf('/fly/products/united-personal-credit-cards.html'.toLowerCase())>-1||pathName.toLowerCase().indexOf('/fly/products/united-business-credit-cards.html'.toLowerCase())>-1){isChase=true;}}}catch(error){let inputValue="document.location.pathname";let ds="Pathname";Bootstrapper.dataObject.initiateGapTracking(requirementName,CONST_EXTN_NAME,error.message,error,ds,inputValue,methodName);}
return isChase;}})}}}catch(e){utag.DB(e)};}})
if(utag.cfg.readywait||utag.cfg.waittimer){utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.loader.rf=1;utag.cfg.readywait=1;utag.DB('READY:utag.cfg.readywait');setTimeout(function(){utag.loader.PINIT()},utag.cfg.waittimer||1);}})}else{utag.loader.PINIT()}}